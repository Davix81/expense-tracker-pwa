import{A as Ef,B as Va,C as Ba,D as St,E as Dt,a as hf,b as Os,c as wf,d as Is,e as Mf,f as je,g as Qd,h as Fs,i as Ns,j as Xd,k as Ls,l as Sf,m as Vs,n as oa,o as Bs,p as zs,q as js,r as Cn,s as Hs,t as Df,u as Us,v as Pf,w as Zd,x as Ws,y as xn,z as di}from"./chunk-QZQJOSHT.js";import{$ as Gi,$a as mn,$b as ve,$c as At,A as pn,Aa as C,Ab as Ai,Ac as of,Ad as eh,B as st,Ba as _s,Bb as de,Bd as Rf,C as Dm,Ca as lt,Cb as wt,Cc as yn,Cd as Ha,D as It,Da as ni,Db as y,Dc as sf,Dd as th,E as Kr,Ea as Nm,Eb as K,Ec as lf,Ed as If,F as xt,Fa as Oi,Fb as he,Fc as cf,Fd as Ua,G as Pm,Ga as et,Gb as Hd,Gc as df,Gd as Ks,H as Em,Ha as bs,Hb as Cs,Hc as ut,Hd as Gs,I as Ei,Ia as ai,Ib as xs,Ic as Xi,Id as Ff,J as Ld,Ja as Lm,Jb as ws,Jc as Kt,Jd as Qs,Ka as ys,Kb as $e,Kc as Ge,Kd as Nf,La as z,Lb as Ud,Lc as Yd,Ld as Wa,Ma as De,Mb as oi,Mc as uf,Md as ih,N as Ut,Na as q,Nb as Ie,Nd as nh,O as ke,Oa as Re,Ob as gn,Oc as qd,Od as sa,P as xe,Pa as j,Pb as _n,Pc as pf,Pd as Xs,Q as dt,Qa as Vm,Qb as si,Qd as Lf,R as W,Ra as Bm,Rb as Um,Rc as La,Rd as $a,S as ps,Sa as zm,Sb as Wm,Sc as mf,Sd as Zs,T as ms,Ta as Qr,Tb as Ms,Tc as li,Td as Js,U as Z,Ua as zd,Ub as Wd,Uc as vn,Ud as el,V as Se,Va as ra,Vb as bn,Vd as Ya,W as Om,Wa as pe,Wb as $m,X as Y,Xa as Q,Xb as Ym,Xc as ff,Y as qe,Ya as jd,Yc as ks,Z as _,Za as X,Zc as As,_ as fs,_a as vs,_b as qm,_c as ci,a as A,aa as Wt,ab as fn,ac as Ra,ad as gf,b as _e,ba as L,bb as D,bc as ce,bd as _f,c as ym,ca as V,cb as f,cc as Ti,cd as bf,d as ei,da as $t,db as m,dd as Kd,e as vm,ea as Gr,eb as U,ec as Km,ed as Ts,f as Ki,fa as He,fb as Yt,fd as Gd,g as G,ga as Ft,gb as qt,gc as Gm,gd as yf,h as Be,ha as Vd,hb as jm,hc as Xr,hd as vf,i as Cm,ia as km,ib as Ue,ic as Qm,id as Cf,j as xm,ja as $,jb as We,jc as Ia,jd as Rs,k as wm,ka as ht,kb as ct,kc as Xm,kd as xf,l as ti,lb as ye,lc as Ss,ld as Zi,m as ot,ma as gs,mb as Ta,mc as Fa,md as pt,n as H,na as Am,nb as I,nc as Na,nd as $s,o as ii,oa as ae,ob as Hm,oc as Zm,od as Ys,p as qr,pb as k,pc as Ds,pd as mt,q as Mm,qa as Qi,qb as tt,qc as Ps,qd as Jd,r as ie,ra as ze,rb as Pe,rc as Es,rd as Zr,s as bi,sa as nt,sb as ri,sc as Mt,sd as za,t as Pi,ta as Tm,tb as Ke,tc as Jm,td as Of,u as Nd,ua as be,ub as ee,uc as $d,ud as kf,v as us,va as Rm,vb as te,vc as ef,vd as qs,w as Aa,wa as Bd,wc as tf,wd as Af,xa as Im,xc as nf,xd as ja,y as Sm,yc as af,yd as Tf,z as Ct,za as Fm,zb as ki,zc as rf,zd as wn}from"./chunk-YAB5O6AO.js";var le="primary",lo=Symbol("RouteTitle"),lh=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function da(n){return new lh(n)}function ah(n,t,e){for(let i=0;i<n.length;i++){let a=n[i],r=t[i];if(a[0]===":")e[a.substring(1)]=r;else if(a!==r.path)return!1}return!0}function qf(n,t,e){let i=e.path.split("/"),a=i.indexOf("**");if(a===-1){if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let l={},c=n.slice(0,i.length);return ah(i,c,l)?{consumed:c,posParams:l}:null}if(a!==i.lastIndexOf("**"))return null;let r=i.slice(0,a),o=i.slice(a+1);if(r.length+o.length>n.length||e.pathMatch==="full"&&t.hasChildren()&&e.path!=="**")return null;let s={};return!ah(r,n.slice(0,r.length),s)||!ah(o,n.slice(n.length-o.length),s)?null:{consumed:n,posParams:s}}function ol(n){return new Promise((t,e)=>{n.pipe(Ei()).subscribe({next:i=>t(i),error:i=>e(i)})})}function kC(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Ri(n[e],t[e]))return!1;return!0}function Ri(n,t){let e=n?ch(n):void 0,i=t?ch(t):void 0;if(!e||!i||e.length!=i.length)return!1;let a;for(let r=0;r<e.length;r++)if(a=e[r],!Kf(n[a],t[a]))return!1;return!0}function ch(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Kf(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((a,r)=>i[r]===a)}else return n===t}function AC(n){return n.length>0?n[n.length-1]:null}function ua(n){return qr(n)?n:zm(n)?ot(Promise.resolve(n)):H(n)}function Gf(n){return qr(n)?ol(n):Promise.resolve(n)}var TC={exact:Xf,subset:Zf},Qf={exact:RC,subset:IC,ignored:()=>!0};function Vf(n,t,e){return TC[e.paths](n.root,t.root,e.matrixParams)&&Qf[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function RC(n,t){return Ri(n,t)}function Xf(n,t,e){if(!la(n.segments,t.segments)||!nl(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!Xf(n.children[i],t.children[i],e))return!1;return!0}function IC(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Kf(n[e],t[e]))}function Zf(n,t,e){return Jf(n,t,t.segments,e)}function Jf(n,t,e,i){if(n.segments.length>e.length){let a=n.segments.slice(0,e.length);return!(!la(a,e)||t.hasChildren()||!nl(a,e,i))}else if(n.segments.length===e.length){if(!la(n.segments,e)||!nl(n.segments,e,i))return!1;for(let a in t.children)if(!n.children[a]||!Zf(n.children[a],t.children[a],i))return!1;return!0}else{let a=e.slice(0,n.segments.length),r=e.slice(n.segments.length);return!la(n.segments,a)||!nl(n.segments,a,i)||!n.children[le]?!1:Jf(n.children[le],t,r,i)}}function nl(n,t,e){return t.every((i,a)=>Qf[e](n[a].parameters,i.parameters))}var vi=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Ee([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=da(this.queryParams),this._queryParamMap}toString(){return LC.serialize(this)}},Ee=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return al(this)}},Mn=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=da(this.parameters),this._parameterMap}toString(){return tg(this)}};function FC(n,t){return la(n,t)&&n.every((e,i)=>Ri(e.parameters,t[i].parameters))}function la(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function NC(n,t){let e=[];return Object.entries(n.children).forEach(([i,a])=>{i===le&&(e=e.concat(t(a,i)))}),Object.entries(n.children).forEach(([i,a])=>{i!==le&&(e=e.concat(t(a,i)))}),e}var pa=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:()=>new en,providedIn:"root"})}return n})(),en=class{parse(t){let e=new hh(t);return new vi(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Jr(t.root,!0)}`,i=zC(t.queryParams),a=typeof t.fragment=="string"?`#${VC(t.fragment)}`:"";return`${e}${i}${a}`}},LC=new en;function al(n){return n.segments.map(t=>tg(t)).join("/")}function Jr(n,t){if(!n.hasChildren())return al(n);if(t){let e=n.children[le]?Jr(n.children[le],!1):"",i=[];return Object.entries(n.children).forEach(([a,r])=>{a!==le&&i.push(`${a}:${Jr(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=NC(n,(i,a)=>a===le?[Jr(n.children[le],!1)]:[`${a}:${Jr(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[le]!=null?`${al(n)}/${e[0]}`:`${al(n)}/(${e.join("//")})`}}function eg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tl(n){return eg(n).replace(/%3B/gi,";")}function VC(n){return encodeURI(n)}function dh(n){return eg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rl(n){return decodeURIComponent(n)}function Bf(n){return rl(n.replace(/\+/g,"%20"))}function tg(n){return`${dh(n.path)}${BC(n.parameters)}`}function BC(n){return Object.entries(n).map(([t,e])=>`;${dh(t)}=${dh(e)}`).join("")}function zC(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(a=>`${tl(e)}=${tl(a)}`).join("&"):`${tl(e)}=${tl(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var jC=/^[^\/()?;#]+/;function rh(n){let t=n.match(jC);return t?t[0]:""}var HC=/^[^\/()?;=#]+/;function UC(n){let t=n.match(HC);return t?t[0]:""}var WC=/^[^=?&#]+/;function $C(n){let t=n.match(WC);return t?t[0]:""}var YC=/^[^&#]+/;function qC(n){let t=n.match(YC);return t?t[0]:""}var hh=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(t=0){if(t>50)throw new W(4010,!1);if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0,t));let a={};return this.peekStartsWith("(")&&(a=this.parseParens(!1,t)),(e.length>0||Object.keys(i).length>0)&&(a[le]=new Ee(e,i)),a}parseSegment(){let t=rh(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(t),new Mn(rl(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=UC(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let a=rh(this.remaining);a&&(i=a,this.capture(i))}t[rl(e)]=rl(i)}parseQueryParam(t){let e=$C(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=qC(this.remaining);o&&(i=o,this.capture(i))}let a=Bf(e),r=Bf(i);if(t.hasOwnProperty(a)){let o=t[a];Array.isArray(o)||(o=[o],t[a]=o),o.push(r)}else t[a]=r}parseParens(t,e){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let a=rh(this.remaining),r=this.remaining[a.length];if(r!=="/"&&r!==")"&&r!==";")throw new W(4010,!1);let o;a.indexOf(":")>-1?(o=a.slice(0,a.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=le);let s=this.parseChildren(e+1);i[o??le]=Object.keys(s).length===1&&s[le]?s[le]:new Ee([],s),this.consumeOptional("//")}return i}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new W(4011,!1)}};function ig(n){return n.segments.length>0?new Ee([],{[le]:n}):n}function ng(n){let t={};for(let[i,a]of Object.entries(n.children)){let r=ng(a);if(i===le&&r.segments.length===0&&r.hasChildren())for(let[o,s]of Object.entries(r.children))t[o]=s;else(r.segments.length>0||r.hasChildren())&&(t[i]=r)}let e=new Ee(n.segments,t);return KC(e)}function KC(n){if(n.numberOfChildren===1&&n.children[le]){let t=n.children[le];return new Ee(n.segments.concat(t.segments),t.children)}return n}function Sn(n){return n instanceof vi}function ag(n,t,e=null,i=null,a=new en){let r=rg(n);return og(r,t,e,i,a)}function rg(n){let t;function e(r){let o={};for(let l of r.children){let c=e(l);o[l.outlet]=c}let s=new Ee(r.url,o);return r===n&&(t=s),s}let i=e(n.root),a=ig(i);return t??a}function og(n,t,e,i,a){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return oh(r,r,r,e,i,a);let o=GC(t);if(o.toRoot())return oh(r,r,new Ee([],{}),e,i,a);let s=QC(o,r,n),l=s.processChildren?to(s.segmentGroup,s.index,o.commands):lg(s.segmentGroup,s.index,o.commands);return oh(r,s.segmentGroup,l,e,i,a)}function sl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function no(n){return typeof n=="object"&&n!=null&&n.outlets}function zf(n,t,e){n||="\u0275";let i=new vi;return i.queryParams={[n]:t},e.parse(e.serialize(i)).queryParams[n]}function oh(n,t,e,i,a,r){let o={};for(let[c,d]of Object.entries(i??{}))o[c]=Array.isArray(d)?d.map(h=>zf(c,h,r)):zf(c,d,r);let s;n===t?s=e:s=sg(n,t,e);let l=ig(ng(s));return new vi(l,o,a)}function sg(n,t,e){let i={};return Object.entries(n.children).forEach(([a,r])=>{r===t?i[a]=e:i[a]=sg(r,t,e)}),new Ee(n.segments,i)}var ll=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&sl(i[0]))throw new W(4003,!1);let a=i.find(no);if(a&&a!==AC(i))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function GC(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ll(!0,0,n);let t=0,e=!1,i=n.reduce((a,r,o)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let s={};return Object.entries(r.outlets).forEach(([l,c])=>{s[l]=typeof c=="string"?c.split("/"):c}),[...a,{outlets:s}]}if(r.segmentPath)return[...a,r.segmentPath]}return typeof r!="string"?[...a,r]:o===0?(r.split("/").forEach((s,l)=>{l==0&&s==="."||(l==0&&s===""?e=!0:s===".."?t++:s!=""&&a.push(s))}),a):[...a,r]},[]);return new ll(e,t,i)}var Ka=class{segmentGroup;processChildren;index;constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function QC(n,t,e){if(n.isAbsolute)return new Ka(t,!0,0);if(!e)return new Ka(t,!1,NaN);if(e.parent===null)return new Ka(e,!0,0);let i=sl(n.commands[0])?0:1,a=e.segments.length-1+i;return XC(e,a,n.numberOfDoubleDots)}function XC(n,t,e){let i=n,a=t,r=e;for(;r>a;){if(r-=a,i=i.parent,!i)throw new W(4005,!1);a=i.segments.length}return new Ka(i,!1,a-r)}function ZC(n){return no(n[0])?n[0].outlets:{[le]:n}}function lg(n,t,e){if(n??=new Ee([],{}),n.segments.length===0&&n.hasChildren())return to(n,t,e);let i=JC(n,t,e),a=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let r=new Ee(n.segments.slice(0,i.pathIndex),{});return r.children[le]=new Ee(n.segments.slice(i.pathIndex),n.children),to(r,0,a)}else return i.match&&a.length===0?new Ee(n.segments,{}):i.match&&!n.hasChildren()?uh(n,t,e):i.match?to(n,0,a):uh(n,t,e)}function to(n,t,e){if(e.length===0)return new Ee(n.segments,{});{let i=ZC(e),a={};if(Object.keys(i).some(r=>r!==le)&&n.children[le]&&n.numberOfChildren===1&&n.children[le].segments.length===0){let r=to(n.children[le],t,e);return new Ee(n.segments,r.children)}return Object.entries(i).forEach(([r,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(a[r]=lg(n.children[r],t,o))}),Object.entries(n.children).forEach(([r,o])=>{i[r]===void 0&&(a[r]=o)}),new Ee(n.segments,a)}}function JC(n,t,e){let i=0,a=t,r={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(i>=e.length)return r;let o=n.segments[a],s=e[i];if(no(s))break;let l=`${s}`,c=i<e.length-1?e[i+1]:null;if(a>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Hf(l,c,o))return r;i+=2}else{if(!Hf(l,{},o))return r;i++}a++}return{match:!0,pathIndex:a,commandIndex:i}}function uh(n,t,e){let i=n.segments.slice(0,t),a=0;for(;a<e.length;){let r=e[a];if(no(r)){let l=ex(r.outlets);return new Ee(i,l)}if(a===0&&sl(e[0])){let l=n.segments[t];i.push(new Mn(l.path,jf(e[0]))),a++;continue}let o=no(r)?r.outlets[le]:`${r}`,s=a<e.length-1?e[a+1]:null;o&&s&&sl(s)?(i.push(new Mn(o,jf(s))),a+=2):(i.push(new Mn(o,{})),a++)}return new Ee(i,{})}function ex(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=uh(new Ee([],{}),0,i))}),t}function jf(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function Hf(n,t,e){return n==e.path&&Ri(t,e.parameters)}var Ga="imperative",at=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(at||{}),Qt=class{id;url;constructor(t,e){this.id=t,this.url=e}},Dn=class extends Qt{type=at.NavigationStart;navigationTrigger;restoredState;constructor(t,e,i="imperative",a=null){super(t,e),this.navigationTrigger=i,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ui=class extends Qt{urlAfterRedirects;type=at.NavigationEnd;constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Pt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Pt||{}),Xa=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Xa||{}),hi=class extends Qt{reason;code;type=at.NavigationCancel;constructor(t,e,i,a){super(t,e),this.reason=i,this.code=a}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function cg(n){return n instanceof hi&&(n.code===Pt.Redirect||n.code===Pt.SupersededByNewNavigation)}var Ii=class extends Qt{reason;code;type=at.NavigationSkipped;constructor(t,e,i,a){super(t,e),this.reason=i,this.code=a}},ha=class extends Qt{error;target;type=at.NavigationError;constructor(t,e,i,a){super(t,e),this.error=i,this.target=a}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Za=class extends Qt{urlAfterRedirects;state;type=at.RoutesRecognized;constructor(t,e,i,a){super(t,e),this.urlAfterRedirects=i,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cl=class extends Qt{urlAfterRedirects;state;type=at.GuardsCheckStart;constructor(t,e,i,a){super(t,e),this.urlAfterRedirects=i,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dl=class extends Qt{urlAfterRedirects;state;shouldActivate;type=at.GuardsCheckEnd;constructor(t,e,i,a,r){super(t,e),this.urlAfterRedirects=i,this.state=a,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},hl=class extends Qt{urlAfterRedirects;state;type=at.ResolveStart;constructor(t,e,i,a){super(t,e),this.urlAfterRedirects=i,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ul=class extends Qt{urlAfterRedirects;state;type=at.ResolveEnd;constructor(t,e,i,a){super(t,e),this.urlAfterRedirects=i,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pl=class{route;type=at.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ml=class{route;type=at.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},fl=class{snapshot;type=at.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gl=class{snapshot;type=at.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_l=class{snapshot;type=at.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bl=class{snapshot;type=at.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ja=class{routerEvent;position;anchor;scrollBehavior;type=at.Scroll;constructor(t,e,i,a){this.routerEvent=t,this.position=e,this.anchor=i,this.scrollBehavior=a}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},er=class{},tr=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function tx(n){return!(n instanceof er)&&!(n instanceof tr)}var yl=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new ma(this.rootInjector)}},ma=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let a=this.getOrCreateContext(e);a.outlet=i,this.contexts.set(e,a)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new yl(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||n)(qe(Gi))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vl=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=ph(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=ph(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=mh(t,this._root);return e.length<2?[]:e[e.length-2].children.map(a=>a.value).filter(a=>a!==t)}pathFromRoot(t){return mh(t,this._root).map(e=>e.value)}};function ph(n,t){if(n===t.value)return t;for(let e of t.children){let i=ph(n,e);if(i)return i}return null}function mh(n,t){if(n===t.value)return[t];for(let e of t.children){let i=mh(n,e);if(i.length)return i.unshift(t),i}return[]}var Gt=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function qa(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var ao=class extends vl{snapshot;constructor(t,e){super(t),this.snapshot=e,xh(this,t)}toString(){return this.snapshot.toString()}};function dg(n,t){let e=ix(n,t),i=new Be([new Mn("",{})]),a=new Be({}),r=new Be({}),o=new Be({}),s=new Be(""),l=new Fi(i,a,o,s,r,le,n,e.root);return l.snapshot=e.root,new ao(new Gt(l,[]),e)}function ix(n,t){let e={},i={},a={},o=new ca([],e,a,"",i,le,n,null,{},t);return new ro("",new Gt(o,[]))}var Fi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,i,a,r,o,s,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=a,this.dataSubject=r,this.outlet=o,this.component=s,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ie(c=>c[lo]))??H(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=a,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(t=>da(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(t=>da(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Cl(n,t,e="emptyOnly"){let i,{routeConfig:a}=n;return t!==null&&(e==="always"||a?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:A(A({},t.params),n.params),data:A(A({},t.data),n.data),resolve:A(A(A(A({},n.data),t.data),a?.data),n._resolvedData)}:i={params:A({},n.params),data:A({},n.data),resolve:A(A({},n.data),n._resolvedData??{})},a&&ug(a)&&(i.resolve[lo]=a.title),i}var ca=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[lo]}constructor(t,e,i,a,r,o,s,l,c,d){this.url=t,this.params=e,this.queryParams=i,this.fragment=a,this.data=r,this.outlet=o,this.component=s,this.routeConfig=l,this._resolve=c,this._environmentInjector=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=da(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=da(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},ro=class extends vl{url;constructor(t,e){super(e),this.url=t,xh(this,e)}toString(){return hg(this._root)}};function xh(n,t){t.value._routerState=n,t.children.forEach(e=>xh(n,e))}function hg(n){let t=n.children.length>0?` { ${n.children.map(hg).join(", ")} } `:"";return`${n.value}${t}`}function sh(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Ri(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Ri(t.params,e.params)||n.paramsSubject.next(e.params),kC(t.url,e.url)||n.urlSubject.next(e.url),Ri(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function fh(n,t){let e=Ri(n.params,t.params)&&FC(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||fh(n.parent,t.parent))}function ug(n){return typeof n.title=="string"||n.title===null}var pg=new Y(""),co=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=le;activateEvents=new $;deactivateEvents=new $;attachEvents=new $;detachEvents=new $;routerOutletData=Ym();parentContexts=_(ma);location=_(ai);changeDetector=_(ve);inputBinder=_(ho,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:a}=e.name;if(i)return;this.isTrackedInParentContexts(a)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(a)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=e;let a=this.location,o=e.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,l=new gh(e,s,a.injector,this.routerOutletData);this.activated=a.createComponent(o,{index:a.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ze]})}return n})(),gh=class{route;childContexts;parent;outletData;constructor(t,e,i,a){this.route=t,this.childContexts=e,this.parent=i,this.outletData=a}get(t,e){return t===Fi?this.route:t===ma?this.childContexts:t===pg?this.outletData:this.parent.get(t,e)}},ho=new Y(""),wh=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,a=bi([i.queryParams,i.params,i.data]).pipe(ke(([r,o,s],l)=>(s=A(A(A({},r),o),s),l===0?H(s):Promise.resolve(s)))).subscribe(r=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let o=Km(i.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:s}of o.inputs)e.activatedComponentRef.setInput(s,r[s])});this.outletDataSubscriptions.set(e,a)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),Mh=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,a){i&1&&U(0,"router-outlet")},dependencies:[co],encapsulation:2})}return n})();function Sh(n){let t=n.children&&n.children.map(Sh),e=t?_e(A({},n),{children:t}):A({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==le&&(e.component=Mh),e}function nx(n,t,e){let i=oo(n,t._root,e?e._root:void 0);return new ao(i,t)}function oo(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let a=ax(n,t,e);return new Gt(i,a)}else{if(n.shouldAttach(t.value)){let r=n.retrieve(t.value);if(r!==null){let o=r.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(s=>oo(n,s)),o}}let i=rx(t.value),a=t.children.map(r=>oo(n,r));return new Gt(i,a)}}function ax(n,t,e){return t.children.map(i=>{for(let a of e.children)if(n.shouldReuseRoute(i.value,a.value.snapshot))return oo(n,i,a);return oo(n,i)})}function rx(n){return new Fi(new Be(n.url),new Be(n.params),new Be(n.queryParams),new Be(n.fragment),new Be(n.data),n.outlet,n.component,n)}var ir=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},mg="ngNavigationCancelingError";function xl(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=Sn(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,a=fg(!1,Pt.Redirect);return a.url=e,a.navigationBehaviorOptions=i,a}function fg(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[mg]=!0,e.cancellationCode=t,e}function ox(n){return gg(n)&&Sn(n.url)}function gg(n){return!!n&&n[mg]}var _h=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,i,a,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=a,this.inputBindingEnabled=r}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),sh(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let a=qa(e);t.children.forEach(r=>{let o=r.value.outlet;this.deactivateRoutes(r,a[o],i),delete a[o]}),Object.values(a).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(t,e,i){let a=t.value,r=e?e.value:null;if(a===r)if(a.component){let o=i.getContext(a.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else r&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),a=i&&t.value.component?i.children:e,r=qa(t);for(let o of Object.values(r))this.deactivateRouteAndItsChildren(o,a);if(i&&i.outlet){let o=i.outlet.detach(),s=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:s})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),a=i&&t.value.component?i.children:e,r=qa(t);for(let o of Object.values(r))this.deactivateRouteAndItsChildren(o,a);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let a=qa(e);t.children.forEach(r=>{this.activateRoutes(r,a[r.value.outlet],i),this.forwardEvent(new bl(r.value.snapshot))}),t.children.length&&this.forwardEvent(new gl(t.value.snapshot))}activateRoutes(t,e,i){let a=t.value,r=e?e.value:null;if(sh(a),a===r)if(a.component){let o=i.getOrCreateContext(a.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(a.component){let o=i.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){let s=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),sh(s.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=a,o.outlet&&o.outlet.activateWith(a,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,i)}},wl=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Qa=class{component;route;constructor(t,e){this.component=t,this.route=e}};function sx(n,t,e){let i=n._root,a=t?t._root:null;return eo(i,a,e,[i.value])}function lx(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function ar(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!Om(n)?n:t.get(n):i}function eo(n,t,e,i,a={canDeactivateChecks:[],canActivateChecks:[]}){let r=qa(t);return n.children.forEach(o=>{cx(o,r[o.value.outlet],e,i.concat([o.value]),a),delete r[o.value.outlet]}),Object.entries(r).forEach(([o,s])=>io(s,e.getContext(o),a)),a}function cx(n,t,e,i,a={canDeactivateChecks:[],canActivateChecks:[]}){let r=n.value,o=t?t.value:null,s=e?e.getContext(n.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){let l=dx(o,r,r.routeConfig.runGuardsAndResolvers);l?a.canActivateChecks.push(new wl(i)):(r.data=o.data,r._resolvedData=o._resolvedData),r.component?eo(n,t,s?s.children:null,i,a):eo(n,t,e,i,a),l&&s&&s.outlet&&s.outlet.isActivated&&a.canDeactivateChecks.push(new Qa(s.outlet.component,o))}else o&&io(t,s,a),a.canActivateChecks.push(new wl(i)),r.component?eo(n,null,s?s.children:null,i,a):eo(n,null,e,i,a);return a}function dx(n,t,e){if(typeof e=="function")return Wt(t._environmentInjector,()=>e(n,t));switch(e){case"pathParamsChange":return!la(n.url,t.url);case"pathParamsOrQueryParamsChange":return!la(n.url,t.url)||!Ri(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fh(n,t)||!Ri(n.queryParams,t.queryParams);default:return!fh(n,t)}}function io(n,t,e){let i=qa(n),a=n.value;Object.entries(i).forEach(([r,o])=>{a.component?t?io(o,t.children.getContext(r),e):io(o,null,e):io(o,t,e)}),a.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Qa(t.outlet.component,a)):e.canDeactivateChecks.push(new Qa(null,a)):e.canDeactivateChecks.push(new Qa(null,a))}function uo(n){return typeof n=="function"}function hx(n){return typeof n=="boolean"}function ux(n){return n&&uo(n.canLoad)}function px(n){return n&&uo(n.canActivate)}function mx(n){return n&&uo(n.canActivateChild)}function fx(n){return n&&uo(n.canDeactivate)}function gx(n){return n&&uo(n.canMatch)}function _g(n){return n instanceof Mm||n?.name==="EmptyError"}var il=Symbol("INITIAL_VALUE");function nr(){return ke(n=>bi(n.map(t=>t.pipe(xt(1),Ut(il)))).pipe(ie(t=>{for(let e of t)if(e!==!0){if(e===il)return il;if(e===!1||_x(e))return e}return!0}),st(t=>t!==il),xt(1)))}function _x(n){return Sn(n)||n instanceof ir}function bg(n){return n.aborted?H(void 0).pipe(xt(1)):new Ki(t=>{let e=()=>{t.next(),t.complete()};return n.addEventListener("abort",e),()=>n.removeEventListener("abort",e)})}function yg(n){return xe(bg(n))}function bx(n){return Pi(t=>{let{targetSnapshot:e,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:r}}=t;return r.length===0&&a.length===0?H(_e(A({},t),{guardsResult:!0})):yx(r,e,i).pipe(Pi(o=>o&&hx(o)?vx(e,a,n):H(o)),ie(o=>_e(A({},t),{guardsResult:o})))})}function yx(n,t,e){return ot(n).pipe(Pi(i=>Sx(i.component,i.route,e,t)),Ei(i=>i!==!0,!0))}function vx(n,t,e){return ot(t).pipe(Kr(i=>us(xx(i.route.parent,e),Cx(i.route,e),Mx(n,i.path),wx(n,i.route))),Ei(i=>i!==!0,!0))}function Cx(n,t){return n!==null&&t&&t(new _l(n)),H(!0)}function xx(n,t){return n!==null&&t&&t(new fl(n)),H(!0)}function wx(n,t){let e=t.routeConfig?t.routeConfig.canActivate:null;if(!e||e.length===0)return H(!0);let i=e.map(a=>Aa(()=>{let r=t._environmentInjector,o=ar(a,r),s=px(o)?o.canActivate(t,n):Wt(r,()=>o(t,n));return ua(s).pipe(Ei())}));return H(i).pipe(nr())}function Mx(n,t){let e=t[t.length-1],a=t.slice(0,t.length-1).reverse().map(r=>lx(r)).filter(r=>r!==null).map(r=>Aa(()=>{let o=r.guards.map(s=>{let l=r.node._environmentInjector,c=ar(s,l),d=mx(c)?c.canActivateChild(e,n):Wt(l,()=>c(e,n));return ua(d).pipe(Ei())});return H(o).pipe(nr())}));return H(a).pipe(nr())}function Sx(n,t,e,i){let a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!a||a.length===0)return H(!0);let r=a.map(o=>{let s=t._environmentInjector,l=ar(o,s),c=fx(l)?l.canDeactivate(n,t,e,i):Wt(s,()=>l(n,t,e,i));return ua(c).pipe(Ei())});return H(r).pipe(nr())}function Dx(n,t,e,i,a){let r=t.canLoad;if(r===void 0||r.length===0)return H(!0);let o=r.map(s=>{let l=ar(s,n),c=ux(l)?l.canLoad(t,e):Wt(n,()=>l(t,e)),d=ua(c);return a?d.pipe(yg(a)):d});return H(o).pipe(nr(),vg(i))}function vg(n){return vm(dt(t=>{if(typeof t!="boolean")throw xl(n,t)}),ie(t=>t===!0))}function Px(n,t,e,i,a){let r=t.canMatch;if(!r||r.length===0)return H(!0);let o=r.map(s=>{let l=ar(s,n),c=gx(l)?l.canMatch(t,e):Wt(n,()=>l(t,e));return ua(c).pipe(yg(a))});return H(o).pipe(nr(),vg(i))}var Ji=class n extends Error{segmentGroup;constructor(t){super(),this.segmentGroup=t||null,Object.setPrototypeOf(this,n.prototype)}},so=class n extends Error{urlTree;constructor(t){super(),this.urlTree=t,Object.setPrototypeOf(this,n.prototype)}};function Ex(n){throw new W(4e3,!1)}function Ox(n){throw fg(!1,Pt.GuardRejected)}var bh=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}async lineralizeSegments(t,e){let i=[],a=e.root;for(;;){if(i=i.concat(a.segments),a.numberOfChildren===0)return i;if(a.numberOfChildren>1||!a.children[le])throw Ex(`${t.redirectTo}`);a=a.children[le]}}async applyRedirectCommands(t,e,i,a,r){let o=await kx(e,a,r);if(o instanceof vi)throw new so(o);let s=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),t,i);if(o[0]==="/")throw new so(s);return s}applyRedirectCreateUrlTree(t,e,i,a){let r=this.createSegmentGroup(t,e.root,i,a);return new vi(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([a,r])=>{if(typeof r=="string"&&r[0]===":"){let s=r.substring(1);i[a]=e[s]}else i[a]=r}),i}createSegmentGroup(t,e,i,a){let r=this.createSegments(t,e.segments,i,a),o={};return Object.entries(e.children).forEach(([s,l])=>{o[s]=this.createSegmentGroup(t,l,i,a)}),new Ee(r,o)}createSegments(t,e,i,a){return e.map(r=>r.path[0]===":"?this.findPosParam(t,r,a):this.findOrReturn(r,i))}findPosParam(t,e,i){let a=i[e.path.substring(1)];if(!a)throw new W(4001,!1);return a}findOrReturn(t,e){let i=0;for(let a of e){if(a.path===t.path)return e.splice(i),a;i++}return t}};function kx(n,t,e){if(typeof n=="string")return Promise.resolve(n);let i=n,{queryParams:a,fragment:r,routeConfig:o,url:s,outlet:l,params:c,data:d,title:h,paramMap:u,queryParamMap:p}=t;return ol(ua(Wt(e,()=>i({params:c,data:d,queryParams:a,fragment:r,routeConfig:o,url:s,outlet:l,title:h,paramMap:u,queryParamMap:p}))))}function Ax(n,t){return n.providers&&!n._injector&&(n._injector=ys(n.providers,t,`Route: ${n.path}`)),n._injector??t}function yi(n){return n.outlet||le}function Tx(n,t){let e=n.filter(i=>yi(i)===t);return e.push(...n.filter(i=>yi(i)!==t)),e}var yh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Rx(n,t,e,i,a,r){let o=Cg(n,t,e);return o.matched?(i=Ax(t,i),Px(i,t,e,a,r).pipe(ie(s=>s===!0?o:A({},yh)))):H(o)}function Cg(n,t,e){if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?A({},yh):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let a=(t.matcher||qf)(e,n,t);if(!a)return A({},yh);let r={};Object.entries(a.posParams??{}).forEach(([s,l])=>{r[s]=l.path});let o=a.consumed.length>0?A(A({},r),a.consumed[a.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:a.consumed,remainingSegments:e.slice(a.consumed.length),parameters:o,positionalParamSegments:a.posParams??{}}}function Uf(n,t,e,i){return e.length>0&&Nx(n,e,i)?{segmentGroup:new Ee(t,Fx(i,new Ee(e,n.children))),slicedSegments:[]}:e.length===0&&Lx(n,e,i)?{segmentGroup:new Ee(n.segments,Ix(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new Ee(n.segments,n.children),slicedSegments:e}}function Ix(n,t,e,i){let a={};for(let r of e)if(Sl(n,t,r)&&!i[yi(r)]){let o=new Ee([],{});a[yi(r)]=o}return A(A({},i),a)}function Fx(n,t){let e={};e[le]=t;for(let i of n)if(i.path===""&&yi(i)!==le){let a=new Ee([],{});e[yi(i)]=a}return e}function Nx(n,t,e){return e.some(i=>Sl(n,t,i)&&yi(i)!==le)}function Lx(n,t,e){return e.some(i=>Sl(n,t,i))}function Sl(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Vx(n,t,e){return t.length===0&&!n.children[e]}var vh=class{};async function Bx(n,t,e,i,a,r,o="emptyOnly",s){return new Ch(n,t,e,i,a,o,r,s).recognize()}var zx=31,Ch=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,i,a,r,o,s,l){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=a,this.urlTree=r,this.paramsInheritanceStrategy=o,this.urlSerializer=s,this.abortSignal=l,this.applyRedirects=new bh(this.urlSerializer,this.urlTree)}noMatchError(t){return new W(4002,`'${t.segmentGroup}'`)}async recognize(){let t=Uf(this.urlTree.root,[],[],this.config).segmentGroup,{children:e,rootSnapshot:i}=await this.match(t),a=new Gt(i,e),r=new ro("",a),o=ag(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(o),{state:r,tree:o}}async match(t){let e=new ca([],Object.freeze({}),Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),le,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,t,le,e),rootSnapshot:e}}catch(i){if(i instanceof so)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ji?this.noMatchError(i):i}}async processSegmentGroup(t,e,i,a,r){if(i.segments.length===0&&i.hasChildren())return this.processChildren(t,e,i,r);let o=await this.processSegment(t,e,i,i.segments,a,!0,r);return o instanceof Gt?[o]:[]}async processChildren(t,e,i,a){let r=[];for(let l of Object.keys(i.children))l==="primary"?r.unshift(l):r.push(l);let o=[];for(let l of r){let c=i.children[l],d=Tx(e,l),h=await this.processSegmentGroup(t,d,c,l,a);o.push(...h)}let s=xg(o);return jx(s),s}async processSegment(t,e,i,a,r,o,s){for(let l of e)try{return await this.processSegmentAgainstRoute(l._injector??t,e,l,i,a,r,o,s)}catch(c){if(c instanceof Ji||_g(c))continue;throw c}if(Vx(i,a,r))return new vh;throw new Ji(i)}async processSegmentAgainstRoute(t,e,i,a,r,o,s,l){if(yi(i)!==o&&(o===le||!Sl(a,r,i)))throw new Ji(a);if(i.redirectTo===void 0)return this.matchSegmentAgainstRoute(t,a,i,r,o,l);if(this.allowRedirects&&s)return this.expandSegmentAgainstRouteUsingRedirect(t,a,e,i,r,o,l);throw new Ji(a)}async expandSegmentAgainstRouteUsingRedirect(t,e,i,a,r,o,s){let{matched:l,parameters:c,consumedSegments:d,positionalParamSegments:h,remainingSegments:u}=Cg(e,a,r);if(!l)throw new Ji(e);typeof a.redirectTo=="string"&&a.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>zx&&(this.allowRedirects=!1));let p=new ca(r,c,Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,Wf(a),yi(a),a.component??a._loadedComponent??null,a,$f(a),t),g=Cl(p,s,this.paramsInheritanceStrategy);if(p.params=Object.freeze(g.params),p.data=Object.freeze(g.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let b=await this.applyRedirects.applyRedirectCommands(d,a.redirectTo,h,p,t),v=await this.applyRedirects.lineralizeSegments(a,b);return this.processSegment(t,i,e,v.concat(u),o,!1,s)}async matchSegmentAgainstRoute(t,e,i,a,r,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let s=await ol(Rx(e,i,a,t,this.urlSerializer,this.abortSignal));if(i.path==="**"&&(e.children={}),!s?.matched)throw new Ji(e);t=i._injector??t;let{routes:l}=await this.getChildConfig(t,i,a),c=i._loadedInjector??t,{parameters:d,consumedSegments:h,remainingSegments:u}=s,p=new ca(h,d,Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,Wf(i),yi(i),i.component??i._loadedComponent??null,i,$f(i),t),g=Cl(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let{segmentGroup:b,slicedSegments:v}=Uf(e,h,u,l);if(v.length===0&&b.hasChildren()){let S=await this.processChildren(c,l,b,p);return new Gt(p,S)}if(l.length===0&&v.length===0)return new Gt(p,[]);let x=yi(i)===r,w=await this.processSegment(c,l,b,v,x?le:r,!0,p);return new Gt(p,w instanceof Gt?[w]:[])}async getChildConfig(t,e,i){if(e.children)return{routes:e.children,injector:t};if(e.loadChildren){if(e._loadedRoutes!==void 0){let r=e._loadedNgModuleFactory;return r&&!e._loadedInjector&&(e._loadedInjector=r.create(t).injector),{routes:e._loadedRoutes,injector:e._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await ol(Dx(t,e,i,this.urlSerializer,this.abortSignal))){let r=await this.configLoader.loadChildren(t,e);return e._loadedRoutes=r.routes,e._loadedInjector=r.injector,e._loadedNgModuleFactory=r.factory,r}throw Ox(e)}return{routes:[],injector:t}}};function jx(n){n.sort((t,e)=>t.value.outlet===le?-1:e.value.outlet===le?1:t.value.outlet.localeCompare(e.value.outlet))}function Hx(n){let t=n.value.routeConfig;return t&&t.path===""}function xg(n){let t=[],e=new Set;for(let i of n){if(!Hx(i)){t.push(i);continue}let a=t.find(r=>i.value.routeConfig===r.value.routeConfig);a!==void 0?(a.children.push(...i.children),e.add(a)):t.push(i)}for(let i of e){let a=xg(i.children);t.push(new Gt(i.value,a))}return t.filter(i=>!e.has(i))}function Wf(n){return n.data||{}}function $f(n){return n.resolve||{}}function Ux(n,t,e,i,a,r,o){return Pi(async s=>{let{state:l,tree:c}=await Bx(n,t,e,i,s.extractedUrl,a,r,o);return _e(A({},s),{targetSnapshot:l,urlAfterRedirects:c})})}function Wx(n){return Pi(t=>{let{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return H(t);let a=new Set(i.map(s=>s.route)),r=new Set;for(let s of a)if(!r.has(s))for(let l of wg(s))r.add(l);let o=0;return ot(r).pipe(Kr(s=>a.has(s)?$x(s,e,n):(s.data=Cl(s,s.parent,n).resolve,H(void 0))),dt(()=>o++),Ld(1),Pi(s=>o===r.size?H(t):ti))})}function wg(n){let t=n.children.map(e=>wg(e)).flat();return[n,...t]}function $x(n,t,e){let i=n.routeConfig,a=n._resolve;return i?.title!==void 0&&!ug(i)&&(a[lo]=i.title),Aa(()=>(n.data=Cl(n,n.parent,e).resolve,Yx(a,n,t).pipe(ie(r=>(n._resolvedData=r,n.data=A(A({},n.data),r),null)))))}function Yx(n,t,e){let i=ch(n);if(i.length===0)return H({});let a={};return ot(i).pipe(Pi(r=>qx(n[r],t,e).pipe(Ei(),dt(o=>{if(o instanceof ir)throw xl(new en,o);a[r]=o}))),Ld(1),ie(()=>a),It(r=>_g(r)?ti:ii(r)))}function qx(n,t,e){let i=t._environmentInjector,a=ar(n,i),r=a.resolve?a.resolve(t,e):Wt(i,()=>a(t,e));return ua(r)}function Yf(n){return ke(t=>{let e=n(t);return e?ot(e).pipe(ie(()=>t)):H(t)})}var Dh=(()=>{class n{buildTitle(e){let i,a=e.root;for(;a!==void 0;)i=this.getResolvedTitleForRoute(a)??i,a=a.children.find(r=>r.outlet===le);return i}getResolvedTitleForRoute(e){return e.data[lo]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:()=>_(Mg),providedIn:"root"})}return n})(),Mg=(()=>{class n extends Dh{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(qe(of))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pn=new Y("",{factory:()=>({})}),fa=new Y(""),Dl=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=_(Wm);async loadComponent(e,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Promise.resolve(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let a=(async()=>{try{let r=await Gf(Wt(e,()=>i.loadComponent())),o=await Pg(Dg(r));return this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o,o}finally{this.componentLoaders.delete(i)}})();return this.componentLoaders.set(i,a),a}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Promise.resolve({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let a=(async()=>{try{let r=await Sg(i,this.compiler,e,this.onLoadEndListener);return i._loadedRoutes=r.routes,i._loadedInjector=r.injector,i._loadedNgModuleFactory=r.factory,r}finally{this.childrenLoaders.delete(i)}})();return this.childrenLoaders.set(i,a),a}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function Sg(n,t,e,i){let a=await Gf(Wt(e,()=>n.loadChildren())),r=await Pg(Dg(a)),o;r instanceof Lm||Array.isArray(r)?o=r:o=await t.compileModuleAsync(r),i&&i(n);let s,l,c=!1,d;return Array.isArray(o)?(l=o,c=!0):(s=o.create(e).injector,d=o,l=s.get(fa,[],{optional:!0,self:!0}).flat()),{routes:l.map(Sh),injector:s,factory:d}}function Kx(n){return n&&typeof n=="object"&&"default"in n}function Dg(n){return Kx(n)?n.default:n}async function Pg(n){return n}var Pl=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:()=>_(Gx),providedIn:"root"})}return n})(),Gx=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ph=new Y(""),Eh=new Y("");function Eg(n,t,e){let i=n.get(Eh),a=n.get(Ft);if(!a.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(c=>setTimeout(c));let r,o=new Promise(c=>{r=c}),s=a.startViewTransition(()=>(r(),Qx(n)));s.updateCallbackDone.catch(c=>{}),s.ready.catch(c=>{}),s.finished.catch(c=>{});let{onViewTransitionCreated:l}=i;return l&&Wt(n,()=>l({transition:s,from:t,to:e})),o}function Qx(n){return new Promise(t=>{lt({read:()=>setTimeout(t)},{injector:n})})}var Xx=()=>{},Oh=new Y(""),El=(()=>{class n{currentNavigation=ae(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=ae(null);events=new G;transitionAbortWithErrorSubject=new G;configLoader=_(Dl);environmentInjector=_(Gi);destroyRef=_(Vd);urlSerializer=_(pa);rootContexts=_(ma);location=_(Ia);inputBindingEnabled=_(ho,{optional:!0})!==null;titleStrategy=_(Dh);options=_(Pn,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=_(Pl);createViewTransition=_(Ph,{optional:!0});navigationErrorHandler=_(Oh,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>H(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=a=>this.events.next(new pl(a)),i=a=>this.events.next(new ml(a));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;Qi(()=>{this.transitions?.next(_e(A({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))})}setupNavigations(e){return this.transitions=new Be(null),this.transitions.pipe(st(i=>i!==null),ke(i=>{let a=!1,r=new AbortController,o=()=>!a&&this.currentTransition?.id===i.id;return H(i).pipe(ke(s=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Pt.SupersededByNewNavigation),ti;this.currentTransition=i;let l=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:l?_e(A({},l),{previousNavigation:null}):null,abort:()=>r.abort()});let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=s.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&d!=="reload")return this.events.next(new Ii(s.id,this.urlSerializer.serialize(s.rawUrl),"",Xa.IgnoredSameUrlNavigation)),s.resolve(!1),ti;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return H(s).pipe(ke(h=>(this.events.next(new Dn(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?ti:Promise.resolve(h))),Ux(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy,r.signal),dt(h=>{i.targetSnapshot=h.targetSnapshot,i.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(p=>(p.finalUrl=h.urlAfterRedirects,p));let u=new Za(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(u)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:h,extractedUrl:u,source:p,restoredState:g,extras:b}=s,v=new Dn(h,this.urlSerializer.serialize(u),p,g);this.events.next(v);let x=dg(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=i=_e(A({},s),{targetSnapshot:x,urlAfterRedirects:u,extras:_e(A({},b),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(w=>(w.finalUrl=u,w)),H(i)}else return this.events.next(new Ii(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Xa.IgnoredByUrlHandlingStrategy)),s.resolve(!1),ti}),ie(s=>{let l=new cl(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);return this.events.next(l),this.currentTransition=i=_e(A({},s),{guards:sx(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),i}),bx(s=>this.events.next(s)),ke(s=>{if(i.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw xl(this.urlSerializer,s.guardsResult);let l=new dl(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);if(this.events.next(l),!o())return ti;if(!s.guardsResult)return this.cancelNavigationTransition(s,"",Pt.GuardRejected),ti;if(s.guards.canActivateChecks.length===0)return H(s);let c=new hl(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);if(this.events.next(c),!o())return ti;let d=!1;return H(s).pipe(Wx(this.paramsInheritanceStrategy),dt({next:()=>{d=!0;let h=new ul(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(h)},complete:()=>{d||this.cancelNavigationTransition(s,"",Pt.NoDataFromResolver)}}))}),Yf(s=>{let l=d=>{let h=[];if(d.routeConfig?._loadedComponent)d.component=d.routeConfig?._loadedComponent;else if(d.routeConfig?.loadComponent){let u=d._environmentInjector;h.push(this.configLoader.loadComponent(u,d.routeConfig).then(p=>{d.component=p}))}for(let u of d.children)h.push(...l(u));return h},c=l(s.targetSnapshot.root);return c.length===0?H(s):ot(Promise.all(c).then(()=>s))}),Yf(()=>this.afterPreactivation()),ke(()=>{let{currentSnapshot:s,targetSnapshot:l}=i,c=this.createViewTransition?.(this.environmentInjector,s.root,l.root);return c?ot(c).pipe(ie(()=>i)):H(i)}),xt(1),ie(s=>{let l=nx(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);this.currentTransition=i=s=_e(A({},s),{targetRouterState:l}),this.currentNavigation.update(c=>(c.targetRouterState=l,c)),this.events.next(new er),o()&&(new _h(e.routeReuseStrategy,i.targetRouterState,i.currentRouterState,c=>this.events.next(c),this.inputBindingEnabled).activate(this.rootContexts),o()&&(a=!0,this.currentNavigation.update(c=>(c.abort=Xx,c)),this.lastSuccessfulNavigation.set(Qi(this.currentNavigation)),this.events.next(new ui(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)))}),xe(bg(r.signal).pipe(st(()=>!a&&!i.targetRouterState),dt(()=>{this.cancelNavigationTransition(i,r.signal.reason+"",Pt.Aborted)}))),dt({complete:()=>{a=!0}}),xe(this.transitionAbortWithErrorSubject.pipe(dt(s=>{throw s}))),Em(()=>{r.abort(),a||this.cancelNavigationTransition(i,"",Pt.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),It(s=>{if(a=!0,this.destroyed)return i.resolve(!1),ti;if(gg(s))this.events.next(new hi(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode)),ox(s)?this.events.next(new tr(s.url,s.navigationBehaviorOptions)):i.resolve(!1);else{let l=new ha(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);try{let c=Wt(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(c instanceof ir){let{message:d,cancellationCode:h}=xl(this.urlSerializer,c);this.events.next(new hi(i.id,this.urlSerializer.serialize(i.extractedUrl),d,h)),this.events.next(new tr(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(l),s}catch(c){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(c)}}return ti}))}))}cancelNavigationTransition(e,i,a){let r=new hi(e.id,this.urlSerializer.serialize(e.extractedUrl),i,a);this.events.next(r),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=Qi(this.currentNavigation),a=i?.targetBrowserUrl??i?.extractedUrl;return e.toString()!==a?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zx(n){return n!==Ga}var Og=new Y("");var kg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:()=>_(Jx),providedIn:"root"})}return n})(),Ml=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}shouldDestroyInjector(t){return!0}},Jx=(()=>{class n extends Ml{static \u0275fac=(()=>{let e;return function(a){return(e||(e=nt(n)))(a||n)}})();static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kh=(()=>{class n{urlSerializer=_(pa);options=_(Pn,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=_(Ia);urlHandlingStrategy=_(Pl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new vi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:a}){let r=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,o=a??r;return o instanceof vi?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:a}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,a),this.routerState=e):this.rawUrlTree=a}routerState=dg(null,_(Gi));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:()=>_(ew),providedIn:"root"})}return n})(),ew=(()=>{class n extends kh{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof Dn?this.updateStateMemento():e instanceof Ii?this.commitTransition(i):e instanceof Za?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof er?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof hi&&!cg(e)?this.restoreHistory(i):e instanceof ha?this.restoreHistory(i,!0):e instanceof ui&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:a}){let{replaceUrl:r,state:o}=i;if(this.location.isCurrentPathEqualTo(e)||r){let s=this.browserPageId,l=A(A({},o),this.generateNgRouterState(a,s));this.location.replaceState(e,"",l)}else{let s=A(A({},o),this.generateNgRouterState(a,this.browserPageId+1));this.location.go(e,"",s)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let a=this.browserPageId,r=this.currentPageId-a;r!==0?this.location.historyGo(r):this.getCurrentUrlTree()===e.finalUrl&&r===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(a){return(e||(e=nt(n)))(a||n)}})();static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ol(n,t){n.events.pipe(st(e=>e instanceof ui||e instanceof hi||e instanceof ha||e instanceof Ii),ie(e=>e instanceof ui||e instanceof Ii?0:(e instanceof hi?e.code===Pt.Redirect||e.code===Pt.SupersededByNewNavigation:!1)?2:1),st(e=>e!==2),xt(1)).subscribe(()=>{t()})}var Ag={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Tg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ze=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=_(Vm);stateManager=_(kh);options=_(Pn,{optional:!0})||{};pendingTasks=_(km);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=_(El);urlSerializer=_(pa);location=_(Ia);urlHandlingStrategy=_(Pl);injector=_(Gi);_events=new G;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=_(kg);injectorCleanup=_(Og,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=_(fa,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!_(ho,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new ei;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let a=this.navigationTransitions.currentTransition,r=Qi(this.navigationTransitions.currentNavigation);if(a!==null&&r!==null){if(this.stateManager.handleRouterEvent(i,r),i instanceof hi&&i.code!==Pt.Redirect&&i.code!==Pt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof ui)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(i instanceof tr){let o=i.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(i.url,a.currentRawUrl),l=A({scroll:a.extras.scroll,browserUrl:a.extras.browserUrl,info:a.extras.info,skipLocationChange:a.extras.skipLocationChange,replaceUrl:a.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Zx(a.source)},o);this.scheduleNavigation(s,Ga,null,l,{resolve:a.resolve,reject:a.reject,promise:a.promise})}}tx(i)&&this._events.next(i)}catch(a){this.navigationTransitions.transitionAbortWithErrorSubject.next(a)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ga,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,a)=>{this.navigateToSyncWithBrowser(e,a,i)})}navigateToSyncWithBrowser(e,i,a){let r={replaceUrl:!0},o=a?.navigationId?a:null;if(a){let l=A({},a);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(r.state=l)}let s=this.parseUrl(e);this.scheduleNavigation(s,i,o,r).catch(l=>{this.disposed||this.injector.get(gs)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Qi(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Sh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:a,queryParams:r,fragment:o,queryParamsHandling:s,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o,d=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":d=A(A({},this.currentUrlTree.queryParams),r);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=r||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let u=a?a.snapshot:this.routerState.snapshot.root;h=rg(u)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),h=this.currentUrlTree.root}return og(h,e,d,c??null,this.urlSerializer)}navigateByUrl(e,i={skipLocationChange:!1}){let a=Sn(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(r,Ga,null,i)}navigate(e,i={skipLocationChange:!1}){return tw(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.console.warn(ps(4018,!1)),this.urlSerializer.parse("/")}}isActive(e,i){let a;if(i===!0?a=A({},Ag):i===!1?a=A({},Tg):a=i,Sn(e))return Vf(this.currentUrlTree,e,a);let r=this.parseUrl(e);return Vf(this.currentUrlTree,r,a)}removeEmptyProps(e){return Object.entries(e).reduce((i,[a,r])=>(r!=null&&(i[a]=r),i),{})}scheduleNavigation(e,i,a,r,o){if(this.disposed)return Promise.resolve(!1);let s,l,c;o?(s=o.resolve,l=o.reject,c=o.promise):c=new Promise((h,u)=>{s=h,l=u});let d=this.pendingTasks.add();return Ol(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:r,resolve:s,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(Promise.reject.bind(Promise))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tw(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new W(4008,!1)}var En=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=ae(null);get href(){return Qi(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new G;applicationErrorHandler=_(gs);options=_(Pn,{optional:!0});constructor(e,i,a,r,o,s){this.router=e,this.route=i,this.tabIndexAttribute=a,this.renderer=r,this.el=o,this.locationStrategy=s,this.reactiveHref.set(_(new bn("href"),{optional:!0}));let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){this.subscription===void 0&&(this.subscription=this.router.events.subscribe(e=>{e instanceof ui&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Sn(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,a,r,o){let s=this.urlTree;if(s===null||this.isAnchorElement&&(e!==0||i||a||r||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(s,l)?.catch(c=>{this.applicationErrorHandler(c)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,i){let a=this.renderer,r=this.el.nativeElement;i!==null?a.setAttribute(r,e,i):a.removeAttribute(r,e)}get urlTree(){return this.routerLinkInput===null?null:Sn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(et(Ze),et(Fi),Tm("tabindex"),et(Oi),et(be),et(Xr))};static \u0275dir=q({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,a){i&1&&I("click",function(o){return a.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),i&2&&pe("href",a.reactiveHref(),Fm)("target",a.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ce],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ce],replaceUrl:[2,"replaceUrl","replaceUrl",ce],routerLink:"routerLink"},features:[ze]})}return n})();var po=class{};var Rg=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,i,a,r){this.router=e,this.injector=i,this.preloadingStrategy=a,this.loader=r}setUpPreloading(){this.subscription=this.router.events.pipe(st(e=>e instanceof ui),Kr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription?.unsubscribe()}processRoutes(e,i){let a=[];for(let r of i){r.providers&&!r._injector&&(r._injector=ys(r.providers,e,""));let o=r._injector??e;r._loadedNgModuleFactory&&!r._loadedInjector&&(r._loadedInjector=r._loadedNgModuleFactory.create(o).injector);let s=r._loadedInjector??o;(r.loadChildren&&!r._loadedRoutes&&r.canLoad===void 0||r.loadComponent&&!r._loadedComponent)&&a.push(this.preloadConfig(o,r)),(r.children||r._loadedRoutes)&&a.push(this.processRoutes(s,r.children??r._loadedRoutes))}return ot(a).pipe(Nd())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{if(e.destroyed)return H(null);let a;i.loadChildren&&i.canLoad===void 0?a=ot(this.loader.loadChildren(e,i)):a=H(null);let r=a.pipe(Pi(o=>o===null?H(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,i._loadedNgModuleFactory=o.factory,this.processRoutes(o.injector??e,o.routes))));if(i.loadComponent&&!i._loadedComponent){let o=this.loader.loadComponent(e,i);return ot([r,o]).pipe(Nd())}else return r})}static \u0275fac=function(i){return new(i||n)(qe(Ze),qe(Gi),qe(po),qe(Dl))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ig=new Y(""),nw=(()=>{class n{options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Ga;restoredId=0;store={};urlSerializer=_(pa);zone=_(ht);viewportScroller=_($d);transitions=_(El);constructor(e){this.options=e,this.options.scrollPositionRestoration||="disabled",this.options.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Dn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ui?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Ii&&e.code===Xa.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{if(!(e instanceof Ja)||e.scrollBehavior==="manual")return;let i={behavior:"instant"};e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],i):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position,i):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(e,i){let a=Qi(this.transitions.currentNavigation)?.extras.scroll;this.zone.runOutsideAngular(async()=>{await new Promise(r=>{setTimeout(r),typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}),this.zone.run(()=>{this.transitions.events.next(new Ja(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i,a))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){bs()};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();function Th(n,...t){return fs([{provide:fa,multi:!0,useValue:n},[],{provide:Fi,useFactory:Fg},{provide:zd,multi:!0,useFactory:Ng},t.map(e=>e.\u0275providers)])}function Fg(){return _(Ze).routerState.root}function fo(n,t){return{\u0275kind:n,\u0275providers:t}}function Ng(){let n=_(He);return t=>{let e=n.get(ra);if(t!==e.components[0])return;let i=n.get(Ze),a=n.get(Lg);n.get(Rh)===1&&i.initialNavigation(),n.get(zg,null,{optional:!0})?.setUpPreloading(),n.get(Ig,null,{optional:!0})?.init(),i.resetRootComponentType(e.componentTypes[0]),a.closed||(a.next(),a.complete(),a.unsubscribe())}}var Lg=new Y("",{factory:()=>new G}),Rh=new Y("",{factory:()=>1});function Vg(){let n=[{provide:Im,useValue:!0},{provide:Rh,useValue:0},Qr(()=>{let t=_(He);return t.get(Gm,Promise.resolve()).then(()=>new Promise(i=>{let a=t.get(Ze),r=t.get(Lg);Ol(a,()=>{i(!0)}),t.get(El).afterPreactivation=()=>(i(!0),r.closed?H(void 0):r),a.initialNavigation()}))})];return fo(2,n)}function Bg(){let n=[Qr(()=>{_(Ze).setUpLocationChangeListener()}),{provide:Rh,useValue:2}];return fo(3,n)}var zg=new Y("");function jg(n){return fo(0,[{provide:zg,useExisting:Rg},{provide:po,useExisting:n}])}function Hg(){return fo(8,[wh,{provide:ho,useExisting:wh}])}function Ug(n){_s("NgRouterViewTransitions");let t=[{provide:Ph,useValue:Eg},{provide:Eh,useValue:A({skipNextTransition:!!n?.skipInitialTransition},n)}];return fo(9,t)}var Wg=[Ia,{provide:pa,useClass:en},Ze,ma,{provide:Fi,useFactory:Fg},Dl,[]],go=(()=>{class n{constructor(){}static forRoot(e,i){return{ngModule:n,providers:[Wg,[],{provide:fa,multi:!0,useValue:e},[],i?.errorHandler?{provide:Oh,useValue:i.errorHandler}:[],{provide:Pn,useValue:i||{}},i?.useHash?rw():ow(),aw(),i?.preloadingStrategy?jg(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?sw(i):[],i?.bindToComponentInputs?Hg().\u0275providers:[],i?.enableViewTransitions?Ug().\u0275providers:[],lw()]}}static forChild(e){return{ngModule:n,providers:[{provide:fa,multi:!0,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=De({type:n});static \u0275inj=Se({})}return n})();function aw(){return{provide:Ig,useFactory:()=>{let n=_($d),t=_(Pn);return t.scrollOffset&&n.setOffset(t.scrollOffset),new nw(t)}}}function rw(){return{provide:Xr,useClass:Xm}}function ow(){return{provide:Xr,useClass:Qm}}function sw(n){return[n.initialNavigation==="disabled"?Bg().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Vg().\u0275providers:[]]}var Ah=new Y("");function lw(){return[{provide:Ah,useFactory:Ng},{provide:zd,multi:!0,useExisting:Ah}]}var ue=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(ue||{}),Ci="*";function $g(n,t=null){return{type:ue.Sequence,steps:n,options:t}}function Fh(n){return{type:ue.Style,styles:n,offset:null}}var tn=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(t=0,e=0){this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},rr=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(t){this.players=t;let e=0,i=0,a=0,r=this.players.length;r==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==r&&this._onFinish()}),o.onDestroy(()=>{++i==r&&this._onDestroy()}),o.onStart(()=>{++a==r&&this._onStart()})}),this.totalTime=this.players.reduce((o,s)=>Math.max(o,s.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(i=>{let a=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(a)})}getPosition(){let t=this.players.reduce((e,i)=>e===null||i.totalTime>e.totalTime?i:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},_o="!";function Yg(n){return new W(3e3,!1)}function cw(){return new W(3100,!1)}function dw(){return new W(3101,!1)}function hw(n){return new W(3001,!1)}function uw(n){return new W(3003,!1)}function pw(n){return new W(3004,!1)}function Kg(n,t){return new W(3005,!1)}function Gg(){return new W(3006,!1)}function Qg(){return new W(3007,!1)}function Xg(n,t){return new W(3008,!1)}function Zg(n){return new W(3002,!1)}function Jg(n,t,e,i,a){return new W(3010,!1)}function e_(){return new W(3011,!1)}function t_(){return new W(3012,!1)}function i_(){return new W(3200,!1)}function n_(){return new W(3202,!1)}function a_(){return new W(3013,!1)}function r_(n){return new W(3014,!1)}function o_(n){return new W(3015,!1)}function s_(n){return new W(3016,!1)}function l_(n,t){return new W(3404,!1)}function mw(n){return new W(3502,!1)}function c_(n){return new W(3503,!1)}function d_(){return new W(3300,!1)}function h_(n){return new W(3504,!1)}function u_(n){return new W(3301,!1)}function p_(n,t){return new W(3302,!1)}function m_(n){return new W(3303,!1)}function f_(n,t){return new W(3400,!1)}function g_(n){return new W(3401,!1)}function __(n){return new W(3402,!1)}function b_(n,t){return new W(3505,!1)}function nn(n){switch(n.length){case 0:return new tn;case 1:return n[0];default:return new rr(n)}}function Bh(n,t,e=new Map,i=new Map){let a=[],r=[],o=-1,s=null;if(t.forEach(l=>{let c=l.get("offset"),d=c==o,h=d&&s||new Map;l.forEach((u,p)=>{let g=p,b=u;if(p!=="offset")switch(g=n.normalizePropertyName(g,a),b){case _o:b=e.get(p);break;case Ci:b=i.get(p);break;default:b=n.normalizeStyleValue(p,g,b,a);break}h.set(g,b)}),d||r.push(h),s=h,o=c}),a.length)throw mw(a);return r}function kl(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&Nh(e,"start",n)));break;case"done":n.onDone(()=>i(e&&Nh(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&Nh(e,"destroy",n)));break}}function Nh(n,t,e){let i=e.totalTime,a=!!e.disabled,r=Al(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,i??n.totalTime,a),o=n._data;return o!=null&&(r._data=o),r}function Al(n,t,e,i,a="",r=0,o){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:a,totalTime:r,disabled:!!o}}function Nt(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function zh(n){let t=n.indexOf(":"),e=n.substring(1,t),i=n.slice(t+1);return[e,i]}var fw=typeof document>"u"?null:document.documentElement;function Tl(n){let t=n.parentNode||n.host||null;return t===fw?null:t}function gw(n){return n.substring(1,6)=="ebkit"}var ga=null,qg=!1;function y_(n){ga||(ga=_w()||{},qg=ga.style?"WebkitAppearance"in ga.style:!1);let t=!0;return ga.style&&!gw(n)&&(t=n in ga.style,!t&&qg&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in ga.style)),t}function _w(){return typeof document<"u"?document.body:null}function jh(n,t){for(;t;){if(t===n)return!0;t=Tl(t)}return!1}function Hh(n,t,e){if(e)return Array.from(n.querySelectorAll(t));let i=n.querySelector(t);return i?[i]:[]}var bw=1e3,Uh="{{",yw="}}",Wh="ng-enter",Rl="ng-leave",bo="ng-trigger",yo=".ng-trigger",$h="ng-animating",Il=".ng-animating";function Ni(n){if(typeof n=="number")return n;let t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Lh(parseFloat(t[1]),t[2])}function Lh(n,t){return t==="s"?n*bw:n}function vo(n,t,e){return n.hasOwnProperty("duration")?n:Cw(n,t,e)}var vw=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function Cw(n,t,e){let i,a=0,r="";if(typeof n=="string"){let o=n.match(vw);if(o===null)return t.push(Yg(n)),{duration:0,delay:0,easing:""};i=Lh(parseFloat(o[1]),o[2]);let s=o[3];s!=null&&(a=Lh(parseFloat(s),o[4]));let l=o[5];l&&(r=l)}else i=n;if(!e){let o=!1,s=t.length;i<0&&(t.push(cw()),o=!0),a<0&&(t.push(dw()),o=!0),o&&t.splice(s,0,Yg(n))}return{duration:i,delay:a,easing:r}}function v_(n){return n.length?n[0]instanceof Map?n:n.map(t=>new Map(Object.entries(t))):[]}function xi(n,t,e){t.forEach((i,a)=>{let r=Fl(a);e&&!e.has(a)&&e.set(a,n.style[r]),n.style[r]=i})}function On(n,t){t.forEach((e,i)=>{let a=Fl(i);n.style[a]=""})}function or(n){return Array.isArray(n)?n.length==1?n[0]:$g(n):n}function C_(n,t,e){let i=t.params||{},a=Yh(n);a.length&&a.forEach(r=>{i.hasOwnProperty(r)||e.push(hw(r))})}var Vh=new RegExp(`${Uh}\\s*(.+?)\\s*${yw}`,"g");function Yh(n){let t=[];if(typeof n=="string"){let e;for(;e=Vh.exec(n);)t.push(e[1]);Vh.lastIndex=0}return t}function sr(n,t,e){let i=`${n}`,a=i.replace(Vh,(r,o)=>{let s=t[o];return s==null&&(e.push(uw(o)),s=""),s.toString()});return a==i?n:a}var xw=/-+([a-z0-9])/g;function Fl(n){return n.replace(xw,(...t)=>t[1].toUpperCase())}function x_(n,t){return n===0||t===0}function w_(n,t,e){if(e.size&&t.length){let i=t[0],a=[];if(e.forEach((r,o)=>{i.has(o)||a.push(o),i.set(o,r)}),a.length)for(let r=1;r<t.length;r++){let o=t[r];a.forEach(s=>o.set(s,Nl(n,s)))}}return t}function Lt(n,t,e){switch(t.type){case ue.Trigger:return n.visitTrigger(t,e);case ue.State:return n.visitState(t,e);case ue.Transition:return n.visitTransition(t,e);case ue.Sequence:return n.visitSequence(t,e);case ue.Group:return n.visitGroup(t,e);case ue.Animate:return n.visitAnimate(t,e);case ue.Keyframes:return n.visitKeyframes(t,e);case ue.Style:return n.visitStyle(t,e);case ue.Reference:return n.visitReference(t,e);case ue.AnimateChild:return n.visitAnimateChild(t,e);case ue.AnimateRef:return n.visitAnimateRef(t,e);case ue.Query:return n.visitQuery(t,e);case ue.Stagger:return n.visitStagger(t,e);default:throw pw(t.type)}}function Nl(n,t){return window.getComputedStyle(n)[t]}var cu=(()=>{class n{validateStyleProperty(e){return y_(e)}containsElement(e,i){return jh(e,i)}getParentElement(e){return Tl(e)}query(e,i,a){return Hh(e,i,a)}computeStyle(e,i,a){return a||""}animate(e,i,a,r,o,s=[],l){return new tn(a,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),ba=class{static NOOP=new cu},ya=class{};var ww=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),jl=class extends ya{normalizePropertyName(t,e){return Fl(t)}normalizeStyleValue(t,e,i,a){let r="",o=i.toString().trim();if(ww.has(e)&&i!==0&&i!=="0")if(typeof i=="number")r="px";else{let s=i.match(/^[+-]?[\d\.]+([a-z]*)$/);s&&s[1].length==0&&a.push(Kg(t,i))}return o+r}};var Hl="*";function Mw(n,t){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>Sw(i,e,t)):e.push(n),e}function Sw(n,t,e){if(n[0]==":"){let l=Dw(n,e);if(typeof l=="function"){t.push(l);return}n=l}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return e.push(o_(n)),t;let a=i[1],r=i[2],o=i[3];t.push(M_(a,o));let s=a==Hl&&o==Hl;r[0]=="<"&&!s&&t.push(M_(o,a))}function Dw(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(s_(n)),"* => *"}}var Ll=new Set(["true","1"]),Vl=new Set(["false","0"]);function M_(n,t){let e=Ll.has(n)||Vl.has(n),i=Ll.has(t)||Vl.has(t);return(a,r)=>{let o=n==Hl||n==a,s=t==Hl||t==r;return!o&&e&&typeof a=="boolean"&&(o=a?Ll.has(n):Vl.has(n)),!s&&i&&typeof r=="boolean"&&(s=r?Ll.has(t):Vl.has(t)),o&&s}}var I_=":self",Pw=new RegExp(`s*${I_}s*,?`,"g");function F_(n,t,e,i){return new Zh(n).build(t,e,i)}var S_="",Zh=class{_driver;constructor(t){this._driver=t}build(t,e,i){let a=new Jh(e);return this._resetContextStyleTimingState(a),Lt(this,or(t),a)}_resetContextStyleTimingState(t){t.currentQuerySelector=S_,t.collectedStyles=new Map,t.collectedStyles.set(S_,new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,a=e.depCount=0,r=[],o=[];return t.name.charAt(0)=="@"&&e.errors.push(Gg()),t.definitions.forEach(s=>{if(this._resetContextStyleTimingState(e),s.type==ue.State){let l=s,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,r.push(this.visitState(l,e))}),l.name=c}else if(s.type==ue.Transition){let l=this.visitTransition(s,e);i+=l.queryCount,a+=l.depCount,o.push(l)}else e.errors.push(Qg())}),{type:ue.Trigger,name:t.name,states:r,transitions:o,queryCount:i,depCount:a,options:null}}visitState(t,e){let i=this.visitStyle(t.styles,e),a=t.options&&t.options.params||null;if(i.containsDynamicStyles){let r=new Set,o=a||{};i.styles.forEach(s=>{s instanceof Map&&s.forEach(l=>{Yh(l).forEach(c=>{o.hasOwnProperty(c)||r.add(c)})})}),r.size&&e.errors.push(Xg(t.name,[...r.values()]))}return{type:ue.State,name:t.name,style:i,options:a?{params:a}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let i=Lt(this,or(t.animation),e),a=Mw(t.expr,e.errors);return{type:ue.Transition,matchers:a,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:_a(t.options)}}visitSequence(t,e){return{type:ue.Sequence,steps:t.steps.map(i=>Lt(this,i,e)),options:_a(t.options)}}visitGroup(t,e){let i=e.currentTime,a=0,r=t.steps.map(o=>{e.currentTime=i;let s=Lt(this,o,e);return a=Math.max(a,e.currentTime),s});return e.currentTime=a,{type:ue.Group,steps:r,options:_a(t.options)}}visitAnimate(t,e){let i=Aw(t.timings,e.errors);e.currentAnimateTimings=i;let a,r=t.styles?t.styles:Fh({});if(r.type==ue.Keyframes)a=this.visitKeyframes(r,e);else{let o=t.styles,s=!1;if(!o){s=!0;let c={};i.easing&&(c.easing=i.easing),o=Fh(c)}e.currentTime+=i.duration+i.delay;let l=this.visitStyle(o,e);l.isEmptyStep=s,a=l}return e.currentAnimateTimings=null,{type:ue.Animate,timings:i,style:a,options:null}}visitStyle(t,e){let i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){let i=[],a=Array.isArray(t.styles)?t.styles:[t.styles];for(let s of a)typeof s=="string"?s===Ci?i.push(s):e.errors.push(Zg(s)):i.push(new Map(Object.entries(s)));let r=!1,o=null;return i.forEach(s=>{if(s instanceof Map&&(s.has("easing")&&(o=s.get("easing"),s.delete("easing")),!r)){for(let l of s.values())if(l.toString().indexOf(Uh)>=0){r=!0;break}}}),{type:ue.Style,styles:i,easing:o,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){let i=e.currentAnimateTimings,a=e.currentTime,r=e.currentTime;i&&r>0&&(r-=i.duration+i.delay),t.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,l)=>{let c=e.collectedStyles.get(e.currentQuerySelector),d=c.get(l),h=!0;d&&(r!=a&&r>=d.startTime&&a<=d.endTime&&(e.errors.push(Jg(l,d.startTime,d.endTime,r,a)),h=!1),r=d.startTime),h&&c.set(l,{startTime:r,endTime:a}),e.options&&C_(s,e.options,e.errors)})})}visitKeyframes(t,e){let i={type:ue.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(e_()),i;let a=1,r=0,o=[],s=!1,l=!1,c=0,d=t.steps.map(x=>{let w=this._makeStyleAst(x,e),S=w.offset!=null?w.offset:kw(w.styles),P=0;return S!=null&&(r++,P=w.offset=S),l=l||P<0||P>1,s=s||P<c,c=P,o.push(P),w});l&&e.errors.push(t_()),s&&e.errors.push(i_());let h=t.steps.length,u=0;r>0&&r<h?e.errors.push(n_()):r==0&&(u=a/(h-1));let p=h-1,g=e.currentTime,b=e.currentAnimateTimings,v=b.duration;return d.forEach((x,w)=>{let S=u>0?w==p?1:u*w:o[w],P=S*v;e.currentTime=g+b.delay+P,b.duration=P,this._validateStyleAst(x,e),x.offset=S,i.styles.push(x)}),i}visitReference(t,e){return{type:ue.Reference,animation:Lt(this,or(t.animation),e),options:_a(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:ue.AnimateChild,options:_a(t.options)}}visitAnimateRef(t,e){return{type:ue.AnimateRef,animation:this.visitReference(t.animation,e),options:_a(t.options)}}visitQuery(t,e){let i=e.currentQuerySelector,a=t.options||{};e.queryCount++,e.currentQuery=t;let[r,o]=Ew(t.selector);e.currentQuerySelector=i.length?i+" "+r:r,Nt(e.collectedStyles,e.currentQuerySelector,new Map);let s=Lt(this,or(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:ue.Query,selector:r,limit:a.limit||0,optional:!!a.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:_a(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(a_());let i=t.timings==="full"?{duration:0,delay:0,easing:"full"}:vo(t.timings,e.errors,!0);return{type:ue.Stagger,animation:Lt(this,or(t.animation),e),timings:i,options:null}}};function Ew(n){let t=!!n.split(/\s*,\s*/).find(e=>e==I_);return t&&(n=n.replace(Pw,"")),n=n.replace(/@\*/g,yo).replace(/@\w+/g,e=>yo+"-"+e.slice(1)).replace(/:animating/g,Il),[n,t]}function Ow(n){return n?A({},n):null}var Jh=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function kw(n){if(typeof n=="string")return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function Aw(n,t){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let r=vo(n,t).duration;return qh(r,0,"")}let e=n;if(e.split(/\s+/).some(r=>r.charAt(0)=="{"&&r.charAt(1)=="{")){let r=qh(0,0,"");return r.dynamic=!0,r.strValue=e,r}let a=vo(e,t);return qh(a.duration,a.delay,a.easing)}function _a(n){return n?(n=A({},n),n.params&&(n.params=Ow(n.params))):n={},n}function qh(n,t,e){return{duration:n,delay:t,easing:e}}function du(n,t,e,i,a,r,o=null,s=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:a,delay:r,totalTime:a+r,easing:o,subTimeline:s}}var xo=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},Tw=1,Rw=":enter",Iw=new RegExp(Rw,"g"),Fw=":leave",Nw=new RegExp(Fw,"g");function N_(n,t,e,i,a,r=new Map,o=new Map,s,l,c=[]){return new eu().buildKeyframes(n,t,e,i,a,r,o,s,l,c)}var eu=class{buildKeyframes(t,e,i,a,r,o,s,l,c,d=[]){c=c||new xo;let h=new tu(t,e,c,a,r,d,[]);h.options=l;let u=l.delay?Ni(l.delay):0;h.currentTimeline.delayNextStep(u),h.currentTimeline.setStyles([o],null,h.errors,l),Lt(this,i,h);let p=h.timelines.filter(g=>g.containsAnimation());if(p.length&&s.size){let g;for(let b=p.length-1;b>=0;b--){let v=p[b];if(v.element===e){g=v;break}}g&&!g.allowOnlyTimelineStyles()&&g.setStyles([s],null,h.errors,l)}return p.length?p.map(g=>g.buildKeyframes()):[du(e,[],[],[],0,u,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let i=e.subInstructions.get(e.element);if(i){let a=e.createSubContext(t.options),r=e.currentTimeline.currentTime,o=this._visitSubInstructions(i,a,a.options);r!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){let i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(let a of t){let r=a?.delay;if(r){let o=typeof r=="number"?r:Ni(sr(r,a?.params??{},e.errors));i.delayNextStep(o)}}}_visitSubInstructions(t,e,i){let r=e.currentTimeline.currentTime,o=i.duration!=null?Ni(i.duration):null,s=i.delay!=null?Ni(i.delay):null;return o!==0&&t.forEach(l=>{let c=e.appendInstructionToTimeline(l,o,s);r=Math.max(r,c.duration+c.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Lt(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let i=e.subContextCount,a=e,r=t.options;if(r&&(r.params||r.delay)&&(a=e.createSubContext(r),a.transformIntoNewTimeline(),r.delay!=null)){a.previousNode.type==ue.Style&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=Ul);let o=Ni(r.delay);a.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Lt(this,o,a)),a.currentTimeline.applyStylesToKeyframe(),a.subContextCount>i&&a.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let i=[],a=e.currentTimeline.currentTime,r=t.options&&t.options.delay?Ni(t.options.delay):0;t.steps.forEach(o=>{let s=e.createSubContext(t.options);r&&s.delayNextStep(r),Lt(this,o,s),a=Math.max(a,s.currentTimeline.currentTime),i.push(s.currentTimeline)}),i.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(a),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let i=t.strValue,a=e.params?sr(i,e.params,e.errors):i;return vo(a,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let i=e.currentAnimateTimings=this._visitTiming(t.timings,e),a=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),a.snapshotCurrentStyles());let r=t.style;r.type==ue.Keyframes?this.visitKeyframes(r,e):(e.incrementTime(i.duration),this.visitStyle(r,e),a.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let i=e.currentTimeline,a=e.currentAnimateTimings;!a&&i.hasCurrentStyleProperties()&&i.forwardFrame();let r=a&&a.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(r):i.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let i=e.currentAnimateTimings,a=e.currentTimeline.duration,r=i.duration,s=e.createSubContext().currentTimeline;s.easing=i.easing,t.styles.forEach(l=>{let c=l.offset||0;s.forwardTime(c*r),s.setStyles(l.styles,l.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(a+r),e.previousNode=t}visitQuery(t,e){let i=e.currentTimeline.currentTime,a=t.options||{},r=a.delay?Ni(a.delay):0;r&&(e.previousNode.type===ue.Style||i==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Ul);let o=i,s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!a.optional,e.errors);e.currentQueryTotal=s.length;let l=null;s.forEach((c,d)=>{e.currentQueryIndex=d;let h=e.createSubContext(t.options,c);r&&h.delayNextStep(r),c===e.element&&(l=h.currentTimeline),Lt(this,t.animation,h),h.currentTimeline.applyStylesToKeyframe();let u=h.currentTimeline.currentTime;o=Math.max(o,u)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let i=e.parentContext,a=e.currentTimeline,r=t.timings,o=Math.abs(r.duration),s=o*(e.currentQueryTotal-1),l=o*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":l=s-l;break;case"full":l=i.currentStaggerTime;break}let d=e.currentTimeline;l&&d.delayNextStep(l);let h=d.currentTime;Lt(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=a.currentTime-h+(a.startTime-i.currentTimeline.startTime)}},Ul={},tu=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Ul;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,i,a,r,o,s,l){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=a,this._leaveClassName=r,this.errors=o,this.timelines=s,this.currentTimeline=l||new Wl(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let i=t,a=this.options;i.duration!=null&&(a.duration=Ni(i.duration)),i.delay!=null&&(a.delay=Ni(i.delay));let r=i.params;if(r){let o=a.params;o||(o=this.options.params={}),Object.keys(r).forEach(s=>{(!e||!o.hasOwnProperty(s))&&(o[s]=sr(r[s],o,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let i=t.params={};Object.keys(e).forEach(a=>{i[a]=e[a]})}}return t}createSubContext(t=null,e,i){let a=e||this.element,r=new n(this._driver,a,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(a,i||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(t),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(t){return this.previousNode=Ul,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){let a={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},r=new iu(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,a,t.stretchStartingKeyframe);return this.timelines.push(r),a}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,a,r,o){let s=[];if(a&&s.push(this.element),t.length>0){t=t.replace(Iw,"."+this._enterClassName),t=t.replace(Nw,"."+this._leaveClassName);let l=i!=1,c=this._driver.query(this.element,t,l);i!==0&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),s.push(...c)}return!r&&s.length==0&&o.push(r_(e)),s}},Wl=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,i,a){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=a,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Tw,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Ci),this._currentKeyframe.set(e,Ci);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,a){e&&this._previousKeyframe.set("easing",e);let r=a&&a.params||{},o=Lw(t,this._globalTimelineStyles);for(let[s,l]of o){let c=sr(l,r,i);this._pendingStyles.set(s,c),this._localTimelineStyles.has(s)||this._backFill.set(s,this._globalTimelineStyles.get(s)??Ci),this._updateStyle(s,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{let a=this._styleSummary.get(i);(!a||e.time>a.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,i=this._keyframes.size===1&&this.duration===0,a=[];this._keyframes.forEach((s,l)=>{let c=new Map([...this._backFill,...s]);c.forEach((d,h)=>{d===_o?t.add(h):d===Ci&&e.add(h)}),i||c.set("offset",l/this.duration),a.push(c)});let r=[...t.values()],o=[...e.values()];if(i){let s=a[0],l=new Map(s);s.set("offset",0),l.set("offset",1),a=[s,l]}return du(this.element,a,r,o,this.duration,this.startTime,this.easing,!1)}},iu=class extends Wl{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,i,a,r,o,s=!1){super(t,e,o.delay),this.keyframes=i,this.preStyleProps=a,this.postStyleProps=r,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:a}=this.timings;if(this._stretchStartingKeyframe&&e){let r=[],o=i+e,s=e/o,l=new Map(t[0]);l.set("offset",0),r.push(l);let c=new Map(t[0]);c.set("offset",D_(s)),r.push(c);let d=t.length-1;for(let h=1;h<=d;h++){let u=new Map(t[h]),p=u.get("offset"),g=e+p*i;u.set("offset",D_(g/o)),r.push(u)}i=o,e=0,a="",t=r}return du(this.element,t,this.preStyleProps,this.postStyleProps,i,e,a,!0)}};function D_(n,t=3){let e=Math.pow(10,t-1);return Math.round(n*e)/e}function Lw(n,t){let e=new Map,i;return n.forEach(a=>{if(a==="*"){i??=t.keys();for(let r of i)e.set(r,Ci)}else for(let[r,o]of a)e.set(r,o)}),e}function P_(n,t,e,i,a,r,o,s,l,c,d,h,u){return{type:0,element:n,triggerName:t,isRemovalTransition:a,fromState:e,fromStyles:r,toState:i,toStyles:o,timelines:s,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:h,errors:u}}var Kh={},$l=class{_triggerName;ast;_stateStyles;constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,a){return Vw(this.ast.matchers,t,e,i,a)}buildStyles(t,e,i){let a=this._stateStyles.get("*");return t!==void 0&&(a=this._stateStyles.get(t?.toString())||a),a?a.buildStyles(e,i):new Map}build(t,e,i,a,r,o,s,l,c,d){let h=[],u=this.ast.options&&this.ast.options.params||Kh,p=s&&s.params||Kh,g=this.buildStyles(i,p,h),b=l&&l.params||Kh,v=this.buildStyles(a,b,h),x=new Set,w=new Map,S=new Map,P=a==="void",M={params:L_(b,u),delay:this.ast.options?.delay},E=d?[]:N_(t,e,this.ast.animation,r,o,g,v,M,c,h),R=0;return E.forEach(O=>{R=Math.max(O.duration+O.delay,R)}),h.length?P_(e,this._triggerName,i,a,P,g,v,[],[],w,S,R,h):(E.forEach(O=>{let N=O.element,ne=Nt(w,N,new Set);O.preStyleProps.forEach(se=>ne.add(se));let oe=Nt(S,N,new Set);O.postStyleProps.forEach(se=>oe.add(se)),N!==e&&x.add(N)}),P_(e,this._triggerName,i,a,P,g,v,E,[...x.values()],w,S,R))}};function Vw(n,t,e,i,a){return n.some(r=>r(t,e,i,a))}function L_(n,t){let e=A({},t);return Object.entries(n).forEach(([i,a])=>{a!=null&&(e[i]=a)}),e}var nu=class{styles;defaultParams;normalizer;constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){let i=new Map,a=L_(t,this.defaultParams);return this.styles.styles.forEach(r=>{typeof r!="string"&&r.forEach((o,s)=>{o&&(o=sr(o,a,e));let l=this.normalizer.normalizePropertyName(s,e);o=this.normalizer.normalizeStyleValue(s,l,o,e),i.set(s,o)})}),i}};function Bw(n,t,e){return new au(n,t,e)}var au=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,e.states.forEach(a=>{let r=a.options&&a.options.params||{};this.states.set(a.name,new nu(a.style,r,i))}),E_(this.states,"true","1"),E_(this.states,"false","0"),e.transitions.forEach(a=>{this.transitionFactories.push(new $l(t,a,this.states))}),this.fallbackTransition=zw(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,a){return this.transitionFactories.find(o=>o.match(t,e,i,a))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}};function zw(n,t,e){let i=[(o,s)=>!0],a={type:ue.Sequence,steps:[],options:null},r={type:ue.Transition,animation:a,matchers:i,options:null,queryCount:0,depCount:0};return new $l(n,r,t)}function E_(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}var jw=new xo,ru=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i}register(t,e){let i=[],a=[],r=F_(this._driver,e,i,a);if(i.length)throw c_(i);this._animations.set(t,r)}_buildPlayer(t,e,i){let a=t.element,r=Bh(this._normalizer,t.keyframes,e,i);return this._driver.animate(a,r,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){let a=[],r=this._animations.get(t),o,s=new Map;if(r?(o=N_(this._driver,e,r,Wh,Rl,new Map,new Map,i,jw,a),o.forEach(d=>{let h=Nt(s,d.element,new Map);d.postStyleProps.forEach(u=>h.set(u,null))})):(a.push(d_()),o=[]),a.length)throw h_(a);s.forEach((d,h)=>{d.forEach((u,p)=>{d.set(p,this._driver.computeStyle(h,p,Ci))})});let l=o.map(d=>{let h=s.get(d.element);return this._buildPlayer(d,new Map,h)}),c=nn(l);return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw u_(t);return e}listen(t,e,i,a){let r=Al(e,"","","");return kl(this._getPlayer(t),i,r,a),()=>{}}command(t,e,i,a){if(i=="register"){this.register(t,a[0]);return}if(i=="create"){let o=a[0]||{};this.create(t,e,o);return}let r=this._getPlayer(t);switch(i){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(a[0]));break;case"destroy":this.destroy(t);break}}},O_="ng-animate-queued",Hw=".ng-animate-queued",Gh="ng-animate-disabled",Uw=".ng-animate-disabled",Ww="ng-star-inserted",$w=".ng-star-inserted",Yw=[],V_={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qw={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},wi="__ng_removed",wo=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let i=t&&t.hasOwnProperty("value"),a=i?t.value:t;if(this.value=Gw(a),i){let r=t,{value:o}=r,s=ym(r,["value"]);this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let i=this.options.params;Object.keys(e).forEach(a=>{i[a]==null&&(i[a]=e[a])})}}},Co="void",Qh=new wo(Co),ou=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this._hostClassName="ng-tns-"+t,pi(e,this._hostClassName)}listen(t,e,i,a){if(!this._triggers.has(e))throw p_(i,e);if(i==null||i.length==0)throw m_(e);if(!Qw(i))throw f_(i,e);let r=Nt(this._elementListeners,t,[]),o={name:e,phase:i,callback:a};r.push(o);let s=Nt(this._engine.statesByElement,t,new Map);return s.has(e)||(pi(t,bo),pi(t,bo+"-"+e),s.set(e,Qh)),()=>{this._engine.afterFlush(()=>{let l=r.indexOf(o);l>=0&&r.splice(l,1),this._triggers.has(e)||s.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw g_(t);return e}trigger(t,e,i,a=!0){let r=this._getTrigger(e),o=new Mo(this.id,e,t),s=this._engine.statesByElement.get(t);s||(pi(t,bo),pi(t,bo+"-"+e),this._engine.statesByElement.set(t,s=new Map));let l=s.get(e),c=new wo(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),s.set(e,c),l||(l=Qh),!(c.value===Co)&&l.value===c.value){if(!Jw(l.params,c.params)){let b=[],v=r.matchStyles(l.value,l.params,b),x=r.matchStyles(c.value,c.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{On(t,v),xi(t,x)})}return}let u=Nt(this._engine.playersByElement,t,[]);u.forEach(b=>{b.namespaceId==this.id&&b.triggerName==e&&b.queued&&b.destroy()});let p=r.matchTransition(l.value,c.value,t,c.params),g=!1;if(!p){if(!a)return;p=r.fallbackTransition,g=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:p,fromState:l,toState:c,player:o,isFallbackTransition:g}),g||(pi(t,O_),o.onStart(()=>{lr(t,O_)})),o.onDone(()=>{let b=this.players.indexOf(o);b>=0&&this.players.splice(b,1);let v=this._engine.playersByElement.get(t);if(v){let x=v.indexOf(o);x>=0&&v.splice(x,1)}}),this.players.push(o),u.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(a=>a.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let i=this._engine.driver.query(t,yo,!0);i.forEach(a=>{if(a[wi])return;let r=this._engine.fetchNamespacesByElement(a);r.size?r.forEach(o=>o.triggerLeaveAnimation(a,e,!1,!0)):this.clearElementCache(a)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(a=>this.clearElementCache(a)))}triggerLeaveAnimation(t,e,i,a){let r=this._engine.statesByElement.get(t),o=new Map;if(r){let s=[];if(r.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){let d=this.trigger(t,c,Co,a);d&&s.push(d)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),i&&nn(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){let a=new Set;e.forEach(r=>{let o=r.name;if(a.has(o))return;a.add(o);let l=this._triggers.get(o).fallbackTransition,c=i.get(o)||Qh,d=new wo(Co),h=new Mo(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:c,toState:d,player:h,isFallbackTransition:!0})})}}removeNode(t,e){let i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let a=!1;if(i.totalAnimations){let r=i.players.length?i.playersByQueriedElement.get(t):[];if(r&&r.length)a=!0;else{let o=t;for(;o=o.parentNode;)if(i.statesByElement.get(o)){a=!0;break}}}if(this.prepareLeaveAnimationListeners(t),a)i.markElementAsRemoved(this.id,t,!1,e);else{let r=t[wi];(!r||r===V_)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){pi(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(i=>{let a=i.player;if(a.destroyed)return;let r=i.element,o=this._elementListeners.get(r);o&&o.forEach(s=>{if(s.name==i.triggerName){let l=Al(r,i.triggerName,i.fromState.value,i.toState.value);l._data=t,kl(i.player,s.phase,l,s.callback)}}),a.markedForDestroy?this._engine.afterFlush(()=>{a.destroy()}):e.push(i)}),this._queue=[],e.sort((i,a)=>{let r=i.transition.ast.depCount,o=a.transition.ast.depCount;return r==0||o==0?r-o:this._engine.driver.containsElement(i.element,a.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},su=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){let i=new ou(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){let i=this._namespaceList,a=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,s=this.driver.getParentElement(e);for(;s;){let l=a.get(s);if(l){let c=i.indexOf(l);i.splice(c+1,0,t),o=!0;break}s=this.driver.getParentElement(s)}o||i.unshift(t)}else i.push(t);return a.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let a=this._namespaceLookup[t];a&&a.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);let a=this._namespaceList.indexOf(i);a>=0&&this._namespaceList.splice(a,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,i=this.statesByElement.get(t);if(i){for(let a of i.values())if(a.namespaceId){let r=this._fetchNamespace(a.namespaceId);r&&e.add(r)}}return e}trigger(t,e,i,a){if(Bl(e)){let r=this._fetchNamespace(t);if(r)return r.trigger(e,i,a),!0}return!1}insertNode(t,e,i,a){if(!Bl(e))return;let r=e[wi];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;let o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){let o=this._fetchNamespace(t);o&&o.insertNode(e,i)}a&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),pi(t,Gh)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),lr(t,Gh))}removeNode(t,e,i){if(Bl(e)){let a=t?this._fetchNamespace(t):null;a?a.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);let r=this.namespacesByHostElement.get(e);r&&r.id!==t&&r.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,a,r){this.collectedLeaveElements.push(e),e[wi]={namespaceId:t,setForRemoval:a,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:r}}listen(t,e,i,a,r){return Bl(e)?this._fetchNamespace(t).listen(e,i,a,r):()=>{}}_buildInstruction(t,e,i,a,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,a,t.fromState.options,t.toState.options,e,r)}destroyInnerAnimations(t){let e=this.driver.query(t,yo,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,Il,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return nn(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[wi];if(e&&e.setForRemoval){if(t[wi]=V_,e.namespaceId){this.destroyInnerAnimations(t);let i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(Gh)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Uw,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,a)=>this._balanceNamespaceList(i,a)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let a=this.collectedEnterElements[i];pi(a,Ww)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{e=this._flushAnimations(i,t)}finally{for(let a=0;a<i.length;a++)i[a]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let a=this.collectedLeaveElements[i];this.processLeaveNode(a)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],e.length?nn(e).onDone(()=>{i.forEach(a=>a())}):i.forEach(a=>a())}}reportError(t){throw __(t)}_flushAnimations(t,e){let i=new xo,a=[],r=new Map,o=[],s=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(T=>{d.add(T);let F=this.driver.query(T,Hw,!0);for(let B=0;B<F.length;B++)d.add(F[B])});let h=this.bodyNode,u=Array.from(this.statesByElement.keys()),p=T_(u,this.collectedEnterElements),g=new Map,b=0;p.forEach((T,F)=>{let B=Wh+b++;g.set(F,B),T.forEach(J=>pi(J,B))});let v=[],x=new Set,w=new Set;for(let T=0;T<this.collectedLeaveElements.length;T++){let F=this.collectedLeaveElements[T],B=F[wi];B&&B.setForRemoval&&(v.push(F),x.add(F),B.hasAnimation?this.driver.query(F,$w,!0).forEach(J=>x.add(J)):w.add(F))}let S=new Map,P=T_(u,Array.from(x));P.forEach((T,F)=>{let B=Rl+b++;S.set(F,B),T.forEach(J=>pi(J,B))}),t.push(()=>{p.forEach((T,F)=>{let B=g.get(F);T.forEach(J=>lr(J,B))}),P.forEach((T,F)=>{let B=S.get(F);T.forEach(J=>lr(J,B))}),v.forEach(T=>{this.processLeaveNode(T)})});let M=[],E=[];for(let T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(e).forEach(B=>{let J=B.player,Le=B.element;if(M.push(J),this.collectedEnterElements.length){let vt=Le[wi];if(vt&&vt.setForMove){if(vt.previousTriggersValues&&vt.previousTriggersValues.has(B.triggerName)){let aa=vt.previousTriggersValues.get(B.triggerName),Jt=this.statesByElement.get(B.element);if(Jt&&Jt.has(B.triggerName)){let hs=Jt.get(B.triggerName);hs.value=aa,Jt.set(B.triggerName,hs)}}J.destroy();return}}let kt=!h||!this.driver.containsElement(h,Le),Je=S.get(Le),Rt=g.get(Le),Me=this._buildInstruction(B,i,Rt,Je,kt);if(Me.errors&&Me.errors.length){E.push(Me);return}if(kt){J.onStart(()=>On(Le,Me.fromStyles)),J.onDestroy(()=>xi(Le,Me.toStyles)),a.push(J);return}if(B.isFallbackTransition){J.onStart(()=>On(Le,Me.fromStyles)),J.onDestroy(()=>xi(Le,Me.toStyles)),a.push(J);return}let un=[];Me.timelines.forEach(vt=>{vt.stretchStartingKeyframe=!0,this.disabledNodes.has(vt.element)||un.push(vt)}),Me.timelines=un,i.append(Le,Me.timelines);let qi={instruction:Me,player:J,element:Le};o.push(qi),Me.queriedElements.forEach(vt=>Nt(s,vt,[]).push(J)),Me.preStyleProps.forEach((vt,aa)=>{if(vt.size){let Jt=l.get(aa);Jt||l.set(aa,Jt=new Set),vt.forEach((hs,Fd)=>Jt.add(Fd))}}),Me.postStyleProps.forEach((vt,aa)=>{let Jt=c.get(aa);Jt||c.set(aa,Jt=new Set),vt.forEach((hs,Fd)=>Jt.add(Fd))})});if(E.length){let T=[];E.forEach(F=>{T.push(b_(F.triggerName,F.errors))}),M.forEach(F=>F.destroy()),this.reportError(T)}let R=new Map,O=new Map;o.forEach(T=>{let F=T.element;i.has(F)&&(O.set(F,F),this._beforeAnimationBuild(T.player.namespaceId,T.instruction,R))}),a.forEach(T=>{let F=T.element;this._getPreviousPlayers(F,!1,T.namespaceId,T.triggerName,null).forEach(J=>{Nt(R,F,[]).push(J),J.destroy()})});let N=v.filter(T=>R_(T,l,c)),ne=new Map;A_(ne,this.driver,w,c,Ci).forEach(T=>{R_(T,l,c)&&N.push(T)});let se=new Map;p.forEach((T,F)=>{A_(se,this.driver,new Set(T),l,_o)}),N.forEach(T=>{let F=ne.get(T),B=se.get(T);ne.set(T,new Map([...F?.entries()??[],...B?.entries()??[]]))});let Xe=[],yt=[],we={};o.forEach(T=>{let{element:F,player:B,instruction:J}=T;if(i.has(F)){if(d.has(F)){B.onDestroy(()=>xi(F,J.toStyles)),B.disabled=!0,B.overrideTotalTime(J.totalTime),a.push(B);return}let Le=we;if(O.size>1){let Je=F,Rt=[];for(;Je=Je.parentNode;){let Me=O.get(Je);if(Me){Le=Me;break}Rt.push(Je)}Rt.forEach(Me=>O.set(Me,Le))}let kt=this._buildAnimation(B.namespaceId,J,R,r,se,ne);if(B.setRealPlayer(kt),Le===we)Xe.push(B);else{let Je=this.playersByElement.get(Le);Je&&Je.length&&(B.parentPlayer=nn(Je)),a.push(B)}}else On(F,J.fromStyles),B.onDestroy(()=>xi(F,J.toStyles)),yt.push(B),d.has(F)&&a.push(B)}),yt.forEach(T=>{let F=r.get(T.element);if(F&&F.length){let B=nn(F);T.setRealPlayer(B)}}),a.forEach(T=>{T.parentPlayer?T.syncPlayerEvents(T.parentPlayer):T.destroy()});for(let T=0;T<v.length;T++){let F=v[T],B=F[wi];if(lr(F,Rl),B&&B.hasAnimation)continue;let J=[];if(s.size){let kt=s.get(F);kt&&kt.length&&J.push(...kt);let Je=this.driver.query(F,Il,!0);for(let Rt=0;Rt<Je.length;Rt++){let Me=s.get(Je[Rt]);Me&&Me.length&&J.push(...Me)}}let Le=J.filter(kt=>!kt.destroyed);Le.length?Xw(this,F,Le):this.processLeaveNode(F)}return v.length=0,Xe.forEach(T=>{this.players.push(T),T.onDone(()=>{T.destroy();let F=this.players.indexOf(T);this.players.splice(F,1)}),T.play()}),Xe}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,a,r){let o=[];if(e){let s=this.playersByQueriedElement.get(t);s&&(o=s)}else{let s=this.playersByElement.get(t);if(s){let l=!r||r==Co;s.forEach(c=>{c.queued||!l&&c.triggerName!=a||o.push(c)})}}return(i||a)&&(o=o.filter(s=>!(i&&i!=s.namespaceId||a&&a!=s.triggerName))),o}_beforeAnimationBuild(t,e,i){let a=e.triggerName,r=e.element,o=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:a;for(let l of e.timelines){let c=l.element,d=c!==r,h=Nt(i,c,[]);this._getPreviousPlayers(c,d,o,s,e.toState).forEach(p=>{let g=p.getRealPlayer();g.beforeDestroy&&g.beforeDestroy(),p.destroy(),h.push(p)})}On(r,e.fromStyles)}_buildAnimation(t,e,i,a,r,o){let s=e.triggerName,l=e.element,c=[],d=new Set,h=new Set,u=e.timelines.map(g=>{let b=g.element;d.add(b);let v=b[wi];if(v&&v.removedBeforeQueried)return new tn(g.duration,g.delay);let x=b!==l,w=Zw((i.get(b)||Yw).map(R=>R.getRealPlayer())).filter(R=>{let O=R;return O.element?O.element===b:!1}),S=r.get(b),P=o.get(b),M=Bh(this._normalizer,g.keyframes,S,P),E=this._buildPlayer(g,M,w);if(g.subTimeline&&a&&h.add(b),x){let R=new Mo(t,s,b);R.setRealPlayer(E),c.push(R)}return E});c.forEach(g=>{Nt(this.playersByQueriedElement,g.element,[]).push(g),g.onDone(()=>Kw(this.playersByQueriedElement,g.element,g))}),d.forEach(g=>pi(g,$h));let p=nn(u);return p.onDestroy(()=>{d.forEach(g=>lr(g,$h)),xi(l,e.toStyles)}),h.forEach(g=>{Nt(a,g,[]).push(p)}),p}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new tn(t.duration,t.delay)}},Mo=class{namespaceId;triggerName;element;_player=new tn;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(a=>kl(t,i,void 0,a))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Nt(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function Kw(n,t,e){let i=n.get(t);if(i){if(i.length){let a=i.indexOf(e);i.splice(a,1)}i.length==0&&n.delete(t)}return i}function Gw(n){return n??null}function Bl(n){return n&&n.nodeType===1}function Qw(n){return n=="start"||n=="done"}function k_(n,t){let e=n.style.display;return n.style.display=t??"none",e}function A_(n,t,e,i,a){let r=[];e.forEach(l=>r.push(k_(l)));let o=[];i.forEach((l,c)=>{let d=new Map;l.forEach(h=>{let u=t.computeStyle(c,h,a);d.set(h,u),(!u||u.length==0)&&(c[wi]=qw,o.push(c))}),n.set(c,d)});let s=0;return e.forEach(l=>k_(l,r[s++])),o}function T_(n,t){let e=new Map;if(n.forEach(s=>e.set(s,[])),t.length==0)return e;let i=1,a=new Set(t),r=new Map;function o(s){if(!s)return i;let l=r.get(s);if(l)return l;let c=s.parentNode;return e.has(c)?l=c:a.has(c)?l=i:l=o(c),r.set(s,l),l}return t.forEach(s=>{let l=o(s);l!==i&&e.get(l).push(s)}),e}function pi(n,t){n.classList?.add(t)}function lr(n,t){n.classList?.remove(t)}function Xw(n,t,e){nn(e).onDone(()=>n.processLeaveNode(t))}function Zw(n){let t=[];return B_(n,t),t}function B_(n,t){for(let e=0;e<n.length;e++){let i=n[e];i instanceof rr?B_(i.players,t):t.push(i)}}function Jw(n,t){let e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let a=0;a<e.length;a++){let r=e[a];if(!t.hasOwnProperty(r)||n[r]!==t[r])return!1}return!0}function R_(n,t,e){let i=e.get(n);if(!i)return!1;let a=t.get(n);return a?i.forEach(r=>a.add(r)):t.set(n,i),e.delete(n),!0}var cr=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,i){this._driver=e,this._normalizer=i,this._transitionEngine=new su(t.body,e,i),this._timelineEngine=new ru(t.body,e,i),this._transitionEngine.onRemovalComplete=(a,r)=>this.onRemovalComplete(a,r)}registerTrigger(t,e,i,a,r){let o=t+"-"+a,s=this._triggerCache[o];if(!s){let l=[],c=[],d=F_(this._driver,r,l,c);if(l.length)throw l_(a,l);s=Bw(a,d,this._normalizer),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,a,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,a){this._transitionEngine.insertNode(t,e,i,a)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,a){if(i.charAt(0)=="@"){let[r,o]=zh(i),s=a;this._timelineEngine.command(r,e,o,s)}else this._transitionEngine.trigger(t,e,i,a)}listen(t,e,i,a,r){if(i.charAt(0)=="@"){let[o,s]=zh(i);return this._timelineEngine.listen(o,e,s,r)}return this._transitionEngine.listen(t,e,i,a,r)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function eM(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=Xh(t[0]),t.length>1&&(i=Xh(t[t.length-1]))):t instanceof Map&&(e=Xh(t)),e||i?new tM(n,e,i):null}var tM=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,i,a){this._element=e,this._startStyles=i,this._endStyles=a;let r=n.initialStylesByElement.get(e);r||n.initialStylesByElement.set(e,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&xi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(xi(this._element,this._initialStyles),this._endStyles&&(xi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(On(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(On(this._element,this._endStyles),this._endStyles=null),xi(this._element,this._initialStyles),this._state=3)}}return n})();function Xh(n){let t=null;return n.forEach((e,i)=>{iM(i)&&(t=t||new Map,t.set(i,e))}),t}function iM(n){return n==="display"||n==="position"}var Yl=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,i,a){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=a,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let t=this.keyframes,e=this._triggerWebAnimation(this.element,t,this.options);if(!e)return this._onFinish(),null;this.domPlayer=e,this._finalKeyframe=t.length?t[t.length-1]:new Map;let i=()=>this._onFinish();return e.addEventListener("finish",i),this.onDestroy(()=>{e.removeEventListener("finish",i)}),e}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){let a=this._convertKeyframesToObject(e);try{return t.animate(a,i)}catch{return null}}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){let t=this._buildPlayer();t&&(this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),t.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=t*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,a)=>{a!=="offset"&&t.set(a,this._finished?i:Nl(this.element,a))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},ql=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return jh(t,e)}getParentElement(t){return Tl(t)}query(t,e,i){return Hh(t,e,i)}computeStyle(t,e,i){return Nl(t,e)}animate(t,e,i,a,r,o=[]){let s=a==0?"both":"forwards",l={duration:i,delay:a,fill:s};r&&(l.easing=r);let c=new Map,d=o.filter(p=>p instanceof Yl);x_(i,a)&&d.forEach(p=>{p.currentSnapshot.forEach((g,b)=>c.set(b,g))});let h=v_(e).map(p=>new Map(p));h=w_(t,h,c);let u=eM(t,h);return new Yl(t,h,l,u)}};var zl="@",z_="@.disabled",Kl=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,i,a){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=a}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,a=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,a)}removeChild(t,e,i,a){if(a){this.delegate.removeChild(t,e,i,a);return}this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,a){this.delegate.setAttribute(t,e,i,a)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,a){this.delegate.setStyle(t,e,i,a)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){e.charAt(0)==zl&&e==z_?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i,a){return this.delegate.listen(t,e,i,a)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},lu=class extends Kl{factory;constructor(t,e,i,a,r){super(e,i,a,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){e.charAt(0)==zl?e.charAt(1)=="."&&e==z_?(i=i===void 0?!0:!!i,this.disableAnimations(t,i)):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i,a){if(e.charAt(0)==zl){let r=nM(t),o=e.slice(1),s="";return o.charAt(0)!=zl&&([o,s]=aM(o)),this.engine.listen(this.namespaceId,r,o,s,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,i,l)})}return this.delegate.listen(t,e,i,a)}};function nM(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function aM(n){let t=n.indexOf("."),e=n.substring(0,t),i=n.slice(t+1);return[e,i]}var Gl=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,i){this.delegate=t,this.engine=e,this._zone=i,e.onRemovalComplete=(a,r)=>{r?.removeChild(null,a)}}createRenderer(t,e){let a=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let c=this._rendererCache,d=c.get(a);if(!d){let h=()=>c.delete(a);d=new Kl("",a,this.engine,h),c.set(a,d)}return d}let r=e.id,o=e.id+"-"+this._currentId;this._currentId++,this.engine.register(o,t);let s=c=>{Array.isArray(c)?c.forEach(s):this.engine.registerTrigger(r,o,t,c.name,c)};return e.data.animation.forEach(s),new lu(this,o,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,i){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(i));return}let a=this._animationCallbacksBuffer;a.length==0&&queueMicrotask(()=>{this._zone.run(()=>{a.forEach(r=>{let[o,s]=r;o(s)}),this._animationCallbacksBuffer=[]})}),a.push([e,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var oM=(()=>{class n extends cr{constructor(e,i,a){super(e,i,a)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(qe(Ft),qe(ba),qe(ya))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();function sM(){return new jl}function lM(){return new Gl(_(ef),_(cr),_(ht))}var j_=[{provide:ya,useFactory:sM},{provide:cr,useClass:oM},{provide:Nm,useFactory:lM}],OF=[{provide:ba,useClass:cu},{provide:Bd,useValue:"NoopAnimations"},...j_],cM=[{provide:ba,useFactory:()=>new ql},{provide:Bd,useFactory:()=>"BrowserAnimations"},...j_];function H_(){return _s("NgEagerAnimations"),[...cM]}function Po(n){return n+.5|0}var kn=(n,t,e)=>Math.max(Math.min(n,e),t);function So(n){return kn(Po(n*2.55),0,255)}function An(n){return kn(Po(n*255),0,255)}function an(n){return kn(Po(n/2.55)/100,0,1)}function U_(n){return kn(Po(n*100),0,100)}var mi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},uu=[..."0123456789ABCDEF"],dM=n=>uu[n&15],hM=n=>uu[(n&240)>>4]+uu[n&15],Ql=n=>(n&240)>>4===(n&15),uM=n=>Ql(n.r)&&Ql(n.g)&&Ql(n.b)&&Ql(n.a);function pM(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&mi[n[1]]*17,g:255&mi[n[2]]*17,b:255&mi[n[3]]*17,a:t===5?mi[n[4]]*17:255}:(t===7||t===9)&&(e={r:mi[n[1]]<<4|mi[n[2]],g:mi[n[3]]<<4|mi[n[4]],b:mi[n[5]]<<4|mi[n[6]],a:t===9?mi[n[7]]<<4|mi[n[8]]:255})),e}var mM=(n,t)=>n<255?t(n):"";function fM(n){var t=uM(n)?dM:hM;return n?"#"+t(n.r)+t(n.g)+t(n.b)+mM(n.a,t):void 0}var gM=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function q_(n,t,e){let i=t*Math.min(e,1-e),a=(r,o=(r+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[a(0),a(8),a(4)]}function _M(n,t,e){let i=(a,r=(a+n/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function bM(n,t,e){let i=q_(n,1,.5),a;for(t+e>1&&(a=1/(t+e),t*=a,e*=a),a=0;a<3;a++)i[a]*=1-t-e,i[a]+=t;return i}function yM(n,t,e,i,a){return n===a?(t-e)/i+(t<e?6:0):t===a?(e-n)/i+2:(n-t)/i+4}function pu(n){let e=n.r/255,i=n.g/255,a=n.b/255,r=Math.max(e,i,a),o=Math.min(e,i,a),s=(r+o)/2,l,c,d;return r!==o&&(d=r-o,c=s>.5?d/(2-r-o):d/(r+o),l=yM(e,i,a,d,r),l=l*60+.5),[l|0,c||0,s]}function mu(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(An)}function fu(n,t,e){return mu(q_,n,t,e)}function vM(n,t,e){return mu(bM,n,t,e)}function CM(n,t,e){return mu(_M,n,t,e)}function K_(n){return(n%360+360)%360}function xM(n){let t=gM.exec(n),e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?So(+t[5]):An(+t[5]));let a=K_(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=vM(a,r,o):t[1]==="hsv"?i=CM(a,r,o):i=fu(a,r,o),{r:i[0],g:i[1],b:i[2],a:e}}function wM(n,t){var e=pu(n);e[0]=K_(e[0]+t),e=fu(e),n.r=e[0],n.g=e[1],n.b=e[2]}function MM(n){if(!n)return;let t=pu(n),e=t[0],i=U_(t[1]),a=U_(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${a}%, ${an(n.a)})`:`hsl(${e}, ${i}%, ${a}%)`}var W_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function SM(){let n={},t=Object.keys($_),e=Object.keys(W_),i,a,r,o,s;for(i=0;i<t.length;i++){for(o=s=t[i],a=0;a<e.length;a++)r=e[a],s=s.replace(r,W_[r]);r=parseInt($_[o],16),n[s]=[r>>16&255,r>>8&255,r&255]}return n}var Xl;function DM(n){Xl||(Xl=SM(),Xl.transparent=[0,0,0,0]);let t=Xl[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var PM=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function EM(n){let t=PM.exec(n),e=255,i,a,r;if(t){if(t[7]!==i){let o=+t[7];e=t[8]?So(o):kn(o*255,0,255)}return i=+t[1],a=+t[3],r=+t[5],i=255&(t[2]?So(i):kn(i,0,255)),a=255&(t[4]?So(a):kn(a,0,255)),r=255&(t[6]?So(r):kn(r,0,255)),{r:i,g:a,b:r,a:e}}}function OM(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${an(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var hu=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,dr=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function kM(n,t,e){let i=dr(an(n.r)),a=dr(an(n.g)),r=dr(an(n.b));return{r:An(hu(i+e*(dr(an(t.r))-i))),g:An(hu(a+e*(dr(an(t.g))-a))),b:An(hu(r+e*(dr(an(t.b))-r))),a:n.a+e*(t.a-n.a)}}function Zl(n,t,e){if(n){let i=pu(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=fu(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function G_(n,t){return n&&Object.assign(t||{},n)}function Y_(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=An(n[3]))):(t=G_(n,{r:0,g:0,b:0,a:1}),t.a=An(t.a)),t}function AM(n){return n.charAt(0)==="r"?EM(n):xM(n)}var Do=class n{constructor(t){if(t instanceof n)return t;let e=typeof t,i;e==="object"?i=Y_(t):e==="string"&&(i=pM(t)||DM(t)||AM(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=G_(this._rgb);return t&&(t.a=an(t.a)),t}set rgb(t){this._rgb=Y_(t)}rgbString(){return this._valid?OM(this._rgb):void 0}hexString(){return this._valid?fM(this._rgb):void 0}hslString(){return this._valid?MM(this._rgb):void 0}mix(t,e){if(t){let i=this.rgb,a=t.rgb,r,o=e===r?.5:e,s=2*o-1,l=i.a-a.a,c=((s*l===-1?s:(s+l)/(1+s*l))+1)/2;r=1-c,i.r=255&c*i.r+r*a.r+.5,i.g=255&c*i.g+r*a.g+.5,i.b=255&c*i.b+r*a.b+.5,i.a=o*i.a+(1-o)*a.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=kM(this._rgb,t._rgb,e)),this}clone(){return new n(this.rgb)}alpha(t){return this._rgb.a=An(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=Po(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Zl(this._rgb,2,t),this}darken(t){return Zl(this._rgb,2,-t),this}saturate(t){return Zl(this._rgb,1,t),this}desaturate(t){return Zl(this._rgb,1,-t),this}rotate(t){return wM(this._rgb,t),this}};function Bi(){}var ob=(()=>{let n=0;return()=>n++})();function fe(n){return n==null}function Fe(n){if(Array.isArray&&Array.isArray(n))return!0;let t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ge(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ye(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Vt(n,t){return Ye(n)?n:t}function re(n,t){return typeof n>"u"?t:n}var sb=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,yu=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Ae(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Oe(n,t,e,i){let a,r,o;if(Fe(n))if(r=n.length,i)for(a=r-1;a>=0;a--)t.call(e,n[a],a);else for(a=0;a<r;a++)t.call(e,n[a],a);else if(ge(n))for(o=Object.keys(n),r=o.length,a=0;a<r;a++)t.call(e,n[o[a]],o[a])}function ko(n,t){let e,i,a,r;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(a=n[e],r=t[e],a.datasetIndex!==r.datasetIndex||a.index!==r.index)return!1;return!0}function ic(n){if(Fe(n))return n.map(ic);if(ge(n)){let t=Object.create(null),e=Object.keys(n),i=e.length,a=0;for(;a<i;++a)t[e[a]]=ic(n[e[a]]);return t}return n}function lb(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function TM(n,t,e,i){if(!lb(n))return;let a=t[n],r=e[n];ge(a)&&ge(r)?ur(a,r,i):t[n]=ic(r)}function ur(n,t,e){let i=Fe(t)?t:[t],a=i.length;if(!ge(n))return n;e=e||{};let r=e.merger||TM,o;for(let s=0;s<a;++s){if(o=i[s],!ge(o))continue;let l=Object.keys(o);for(let c=0,d=l.length;c<d;++c)r(l[c],n,o,e)}return n}function mr(n,t){return ur(n,t,{merger:RM})}function RM(n,t,e){if(!lb(n))return;let i=t[n],a=e[n];ge(i)&&ge(a)?mr(i,a):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=ic(a))}var Q_={"":n=>n,x:n=>n.x,y:n=>n.y};function IM(n){let t=n.split("."),e=[],i="";for(let a of t)i+=a,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function FM(n){let t=IM(n);return e=>{for(let i of t){if(i==="")break;e=e&&e[i]}return e}}function sn(n,t){return(Q_[t]||(Q_[t]=FM(t)))(n)}function oc(n){return n.charAt(0).toUpperCase()+n.slice(1)}var fr=n=>typeof n<"u",rn=n=>typeof n=="function",vu=(n,t)=>{if(n.size!==t.size)return!1;for(let e of n)if(!t.has(e))return!1;return!0};function cb(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Ce=Math.PI,Ne=2*Ce,NM=Ne+Ce,nc=Number.POSITIVE_INFINITY,LM=Ce/180,Qe=Ce/2,va=Ce/4,X_=Ce*2/3,on=Math.log10,Mi=Math.sign;function gr(n,t,e){return Math.abs(n-t)<e}function Cu(n){let t=Math.round(n);n=gr(n,t,n/1e3)?t:n;let e=Math.pow(10,Math.floor(on(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function db(n){let t=[],e=Math.sqrt(n),i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((a,r)=>a-r).pop(),t}function VM(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function wa(n){return!VM(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function hb(n,t){let e=Math.round(n);return e-t<=n&&e+t>=n}function xu(n,t,e){let i,a,r;for(i=0,a=n.length;i<a;i++)r=n[i][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function fi(n){return n*(Ce/180)}function sc(n){return n*(180/Ce)}function wu(n){if(!Ye(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function Mu(n,t){let e=t.x-n.x,i=t.y-n.y,a=Math.sqrt(e*e+i*i),r=Math.atan2(i,e);return r<-.5*Ce&&(r+=Ne),{angle:r,distance:a}}function ac(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function BM(n,t){return(n-t+NM)%Ne-Ce}function ft(n){return(n%Ne+Ne)%Ne}function _r(n,t,e,i){let a=ft(n),r=ft(t),o=ft(e),s=ft(r-a),l=ft(o-a),c=ft(a-r),d=ft(a-o);return a===r||a===o||i&&r===o||s>l&&c<d}function rt(n,t,e){return Math.max(t,Math.min(e,n))}function ub(n){return rt(n,-32768,32767)}function zi(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function lc(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,a=0,r;for(;i-a>1;)r=a+i>>1,e(r)?a=r:i=r;return{lo:a,hi:i}}var Li=(n,t,e,i)=>lc(n,e,i?a=>{let r=n[a][t];return r<e||r===e&&n[a+1][t]===e}:a=>n[a][t]<e),pb=(n,t,e)=>lc(n,e,i=>n[i][t]>=e);function mb(n,t,e){let i=0,a=n.length;for(;i<a&&n[i]<t;)i++;for(;a>i&&n[a-1]>e;)a--;return i>0||a<n.length?n.slice(i,a):n}var fb=["push","pop","shift","splice","unshift"];function gb(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),fb.forEach(e=>{let i="_onData"+oc(e),a=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...r){let o=a.apply(this,r);return n._chartjs.listeners.forEach(s=>{typeof s[i]=="function"&&s[i](...r)}),o}})})}function Su(n,t){let e=n._chartjs;if(!e)return;let i=e.listeners,a=i.indexOf(t);a!==-1&&i.splice(a,1),!(i.length>0)&&(fb.forEach(r=>{delete n[r]}),delete n._chartjs)}function Du(n){let t=new Set(n);return t.size===n.length?n:Array.from(t)}var Pu=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function Eu(n,t){let e=[],i=!1;return function(...a){e=a,i||(i=!0,Pu.call(window,()=>{i=!1,n.apply(t,e)}))}}function _b(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}var cc=n=>n==="start"?"left":n==="end"?"right":"center",gt=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,bb=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function Ou(n,t,e){let i=t.length,a=0,r=i;if(n._sorted){let{iScale:o,vScale:s,_parsed:l}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,d=o.axis,{min:h,max:u,minDefined:p,maxDefined:g}=o.getUserBounds();if(p){if(a=Math.min(Li(l,d,h).lo,e?i:Li(t,d,o.getPixelForValue(h)).lo),c){let b=l.slice(0,a+1).reverse().findIndex(v=>!fe(v[s.axis]));a-=Math.max(0,b)}a=rt(a,0,i-1)}if(g){let b=Math.max(Li(l,o.axis,u,!0).hi+1,e?0:Li(t,d,o.getPixelForValue(u),!0).hi+1);if(c){let v=l.slice(b-1).findIndex(x=>!fe(x[s.axis]));b+=Math.max(0,v)}r=rt(b,a,i)-a}else r=i-a}return{start:a,count:r}}function ku(n){let{xScale:t,yScale:e,_scaleRanges:i}=n,a={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=a,!0;let r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,a),r}var Jl=n=>n===0||n===1,Z_=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Ne/e)),J_=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Ne/e)+1,hr={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Qe)+1,easeOutSine:n=>Math.sin(n*Qe),easeInOutSine:n=>-.5*(Math.cos(Ce*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Jl(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Jl(n)?n:Z_(n,.075,.3),easeOutElastic:n=>Jl(n)?n:J_(n,.075,.3),easeInOutElastic(n){return Jl(n)?n:n<.5?.5*Z_(n*2,.1125,.45):.5+.5*J_(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-hr.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?hr.easeInBounce(n*2)*.5:hr.easeOutBounce(n*2-1)*.5+.5};function Au(n){if(n&&typeof n=="object"){let t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Tu(n){return Au(n)?n:new Do(n)}function gu(n){return Au(n)?n:new Do(n).saturate(.5).darken(.1).hexString()}var zM=["x","y","borderWidth","radius","tension"],jM=["color","borderColor","backgroundColor"];function HM(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:jM},numbers:{type:"number",properties:zM}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function UM(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var eb=new Map;function WM(n,t){t=t||{};let e=n+JSON.stringify(t),i=eb.get(e);return i||(i=new Intl.NumberFormat(n,t),eb.set(e,i)),i}function br(n,t,e){return WM(t,e).format(n)}var yb={values(n){return Fe(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";let i=this.chart.options.locale,a,r=n;if(e.length>1){let c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(a="scientific"),r=$M(n,e)}let o=on(Math.abs(r)),s=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:a,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(l,this.options.ticks.format),br(n,i,l)},logarithmic(n,t,e){if(n===0)return"0";let i=e[t].significand||n/Math.pow(10,Math.floor(on(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?yb.numeric.call(this,n,t,e):""}};function $M(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Ao={formatters:yb};function YM(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ao.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}var In=Object.create(null),dc=Object.create(null);function Eo(n,t){if(!t)return n;let e=t.split(".");for(let i=0,a=e.length;i<a;++i){let r=e[i];n=n[r]||(n[r]=Object.create(null))}return n}function _u(n,t,e){return typeof t=="string"?ur(Eo(n,t),e):ur(Eo(n,""),t)}var bu=class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,a)=>gu(a.backgroundColor),this.hoverBorderColor=(i,a)=>gu(a.borderColor),this.hoverColor=(i,a)=>gu(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return _u(this,t,e)}get(t){return Eo(this,t)}describe(t,e){return _u(dc,t,e)}override(t,e){return _u(In,t,e)}route(t,e,i,a){let r=Eo(this,t),o=Eo(this,i),s="_"+e;Object.defineProperties(r,{[s]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){let l=this[s],c=o[a];return ge(l)?Object.assign({},c,l):re(l,c)},set(l){this[s]=l}}})}apply(t){t.forEach(e=>e(this))}},Te=new bu({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[HM,UM,YM]);function qM(n){return!n||fe(n.size)||fe(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Oo(n,t,e,i,a){let r=t[a];return r||(r=t[a]=n.measureText(a).width,e.push(a)),r>i&&(i=r),i}function vb(n,t,e,i){i=i||{};let a=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(a=i.data={},r=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0,s=e.length,l,c,d,h,u;for(l=0;l<s;l++)if(h=e[l],h!=null&&!Fe(h))o=Oo(n,a,r,o,h);else if(Fe(h))for(c=0,d=h.length;c<d;c++)u=h[c],u!=null&&!Fe(u)&&(o=Oo(n,a,r,o,u));n.restore();let p=r.length/2;if(p>e.length){for(l=0;l<p;l++)delete a[r[l]];r.splice(0,p)}return o}function Fn(n,t,e){let i=n.currentDevicePixelRatio,a=e!==0?Math.max(e/2,.5):0;return Math.round((t-a)*i)/i+a}function Ru(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function hc(n,t,e,i){Iu(n,t,e,i,null)}function Iu(n,t,e,i,a){let r,o,s,l,c,d,h,u,p=t.pointStyle,g=t.rotation,b=t.radius,v=(g||0)*LM;if(p&&typeof p=="object"&&(r=p.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(v),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(b)||b<=0)){switch(n.beginPath(),p){default:a?n.ellipse(e,i,a/2,b,0,0,Ne):n.arc(e,i,b,0,Ne),n.closePath();break;case"triangle":d=a?a/2:b,n.moveTo(e+Math.sin(v)*d,i-Math.cos(v)*b),v+=X_,n.lineTo(e+Math.sin(v)*d,i-Math.cos(v)*b),v+=X_,n.lineTo(e+Math.sin(v)*d,i-Math.cos(v)*b),n.closePath();break;case"rectRounded":c=b*.516,l=b-c,o=Math.cos(v+va)*l,h=Math.cos(v+va)*(a?a/2-c:l),s=Math.sin(v+va)*l,u=Math.sin(v+va)*(a?a/2-c:l),n.arc(e-h,i-s,c,v-Ce,v-Qe),n.arc(e+u,i-o,c,v-Qe,v),n.arc(e+h,i+s,c,v,v+Qe),n.arc(e-u,i+o,c,v+Qe,v+Ce),n.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*b,d=a?a/2:l,n.rect(e-d,i-l,2*d,2*l);break}v+=va;case"rectRot":h=Math.cos(v)*(a?a/2:b),o=Math.cos(v)*b,s=Math.sin(v)*b,u=Math.sin(v)*(a?a/2:b),n.moveTo(e-h,i-s),n.lineTo(e+u,i-o),n.lineTo(e+h,i+s),n.lineTo(e-u,i+o),n.closePath();break;case"crossRot":v+=va;case"cross":h=Math.cos(v)*(a?a/2:b),o=Math.cos(v)*b,s=Math.sin(v)*b,u=Math.sin(v)*(a?a/2:b),n.moveTo(e-h,i-s),n.lineTo(e+h,i+s),n.moveTo(e+u,i-o),n.lineTo(e-u,i+o);break;case"star":h=Math.cos(v)*(a?a/2:b),o=Math.cos(v)*b,s=Math.sin(v)*b,u=Math.sin(v)*(a?a/2:b),n.moveTo(e-h,i-s),n.lineTo(e+h,i+s),n.moveTo(e+u,i-o),n.lineTo(e-u,i+o),v+=va,h=Math.cos(v)*(a?a/2:b),o=Math.cos(v)*b,s=Math.sin(v)*b,u=Math.sin(v)*(a?a/2:b),n.moveTo(e-h,i-s),n.lineTo(e+h,i+s),n.moveTo(e+u,i-o),n.lineTo(e-u,i+o);break;case"line":o=a?a/2:Math.cos(v)*b,s=Math.sin(v)*b,n.moveTo(e-o,i-s),n.lineTo(e+o,i+s);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(v)*(a?a/2:b),i+Math.sin(v)*b);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Vi(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function To(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Ro(n){n.restore()}function Cb(n,t,e,i,a){if(!t)return n.lineTo(e.x,e.y);if(a==="middle"){let r=(t.x+e.x)/2;n.lineTo(r,t.y),n.lineTo(r,e.y)}else a==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function xb(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function KM(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),fe(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function GM(n,t,e,i,a){if(a.strikethrough||a.underline){let r=n.measureText(i),o=t-r.actualBoundingBoxLeft,s=t+r.actualBoundingBoxRight,l=e-r.actualBoundingBoxAscent,c=e+r.actualBoundingBoxDescent,d=a.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=a.decorationWidth||2,n.moveTo(o,d),n.lineTo(s,d),n.stroke()}}function QM(n,t){let e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Nn(n,t,e,i,a,r={}){let o=Fe(t)?t:[t],s=r.strokeWidth>0&&r.strokeColor!=="",l,c;for(n.save(),n.font=a.string,KM(n,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&QM(n,r.backdrop),s&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),fe(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,e,i,r.maxWidth)),n.fillText(c,e,i,r.maxWidth),GM(n,e,i,c,r),i+=Number(a.lineHeight);n.restore()}function yr(n,t){let{x:e,y:i,w:a,h:r,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*Ce,Ce,!0),n.lineTo(e,i+r-o.bottomLeft),n.arc(e+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,Ce,Qe,!0),n.lineTo(e+a-o.bottomRight,i+r),n.arc(e+a-o.bottomRight,i+r-o.bottomRight,o.bottomRight,Qe,0,!0),n.lineTo(e+a,i+o.topRight),n.arc(e+a-o.topRight,i+o.topRight,o.topRight,0,-Qe,!0),n.lineTo(e+o.topLeft,i)}var XM=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ZM=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function JM(n,t){let e=(""+n).match(XM);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}var eS=n=>+n||0;function uc(n,t){let e={},i=ge(t),a=i?Object.keys(t):t,r=ge(n)?i?o=>re(n[o],n[t[o]]):o=>n[o]:()=>n;for(let o of a)e[o]=eS(r(o));return e}function Fu(n){return uc(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ln(n){return uc(n,["topLeft","topRight","bottomLeft","bottomRight"])}function _t(n){let t=Fu(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function it(n,t){n=n||{},t=t||Te.font;let e=re(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=re(n.style,t.style);i&&!(""+i).match(ZM)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let a={family:re(n.family,t.family),lineHeight:JM(re(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:re(n.weight,t.weight),string:""};return a.string=qM(a),a}function vr(n,t,e,i){let a=!0,r,o,s;for(r=0,o=n.length;r<o;++r)if(s=n[r],s!==void 0&&(t!==void 0&&typeof s=="function"&&(s=s(t),a=!1),e!==void 0&&Fe(s)&&(s=s[e%s.length],a=!1),s!==void 0))return i&&!a&&(i.cacheable=!1),s}function wb(n,t,e){let{min:i,max:a}=n,r=yu(t,(a-i)/2),o=(s,l)=>e&&s===0?0:s+l;return{min:o(i,-Math.abs(r)),max:o(a,r)}}function ln(n,t){return Object.assign(Object.create(n),t)}function pc(n,t=[""],e,i,a=()=>n[0]){let r=e||n;typeof i>"u"&&(i=Db("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:a,override:s=>pc([s,...n],t,r,i)};return new Proxy(o,{deleteProperty(s,l){return delete s[l],delete s._keys,delete n[0][l],!0},get(s,l){return Mb(s,l,()=>lS(l,t,n,s))},getOwnPropertyDescriptor(s,l){return Reflect.getOwnPropertyDescriptor(s._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(s,l){return ib(s).includes(l)},ownKeys(s){return ib(s)},set(s,l,c){let d=s._storage||(s._storage=a());return s[l]=d[l]=c,delete s._keys,!0}})}function xa(n,t,e,i){let a={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Nu(n,i),setContext:r=>xa(n,r,e,i),override:r=>xa(n.override(r),t,e,i)};return new Proxy(a,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,s){return Mb(r,o,()=>iS(r,o,s))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,s){return n[o]=s,delete r[o],!0}})}function Nu(n,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:a=t.allKeys}=n;return{allKeys:a,scriptable:e,indexable:i,isScriptable:rn(e)?e:()=>e,isIndexable:rn(i)?i:()=>i}}var tS=(n,t)=>n?n+oc(t):t,Lu=(n,t)=>ge(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Mb(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];let i=e();return n[t]=i,i}function iS(n,t,e){let{_proxy:i,_context:a,_subProxy:r,_descriptors:o}=n,s=i[t];return rn(s)&&o.isScriptable(t)&&(s=nS(t,s,n,e)),Fe(s)&&s.length&&(s=aS(t,s,n,o.isIndexable)),Lu(t,s)&&(s=xa(s,a,r&&r[t],o)),s}function nS(n,t,e,i){let{_proxy:a,_context:r,_subProxy:o,_stack:s}=e;if(s.has(n))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+n);s.add(n);let l=t(r,o||i);return s.delete(n),Lu(n,l)&&(l=Vu(a._scopes,a,n,l)),l}function aS(n,t,e,i){let{_proxy:a,_context:r,_subProxy:o,_descriptors:s}=e;if(typeof r.index<"u"&&i(n))return t[r.index%t.length];if(ge(t[0])){let l=t,c=a._scopes.filter(d=>d!==l);t=[];for(let d of l){let h=Vu(c,a,n,d);t.push(xa(h,r,o&&o[n],s))}}return t}function Sb(n,t,e){return rn(n)?n(t,e):n}var rS=(n,t)=>n===!0?t:typeof n=="string"?sn(t,n):void 0;function oS(n,t,e,i,a){for(let r of t){let o=rS(e,r);if(o){n.add(o);let s=Sb(o._fallback,e,a);if(typeof s<"u"&&s!==e&&s!==i)return s}else if(o===!1&&typeof i<"u"&&e!==i)return null}return!1}function Vu(n,t,e,i){let a=t._rootScopes,r=Sb(t._fallback,e,i),o=[...n,...a],s=new Set;s.add(i);let l=tb(s,o,e,r||e,i);return l===null||typeof r<"u"&&r!==e&&(l=tb(s,o,r,l,i),l===null)?!1:pc(Array.from(s),[""],a,r,()=>sS(t,e,i))}function tb(n,t,e,i,a){for(;e;)e=oS(n,t,e,i,a);return e}function sS(n,t,e){let i=n._getTarget();t in i||(i[t]={});let a=i[t];return Fe(a)&&ge(e)?e:a||{}}function lS(n,t,e,i){let a;for(let r of t)if(a=Db(tS(r,n),e),typeof a<"u")return Lu(n,a)?Vu(e,i,n,a):a}function Db(n,t){for(let e of t){if(!e)continue;let i=e[n];if(typeof i<"u")return i}}function ib(n){let t=n._keys;return t||(t=n._keys=cS(n._scopes)),t}function cS(n){let t=new Set;for(let e of n)for(let i of Object.keys(e).filter(a=>!a.startsWith("_")))t.add(i);return Array.from(t)}function Bu(n,t,e,i){let{iScale:a}=n,{key:r="r"}=this._parsing,o=new Array(i),s,l,c,d;for(s=0,l=i;s<l;++s)c=s+e,d=t[c],o[s]={r:a.parse(sn(d,r),c)};return o}var dS=Number.EPSILON||1e-14,pr=(n,t)=>t<n.length&&!n[t].skip&&n[t],Pb=n=>n==="x"?"y":"x";function hS(n,t,e,i){let a=n.skip?t:n,r=t,o=e.skip?t:e,s=ac(r,a),l=ac(o,r),c=s/(s+l),d=l/(s+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;let h=i*c,u=i*d;return{previous:{x:r.x-h*(o.x-a.x),y:r.y-h*(o.y-a.y)},next:{x:r.x+u*(o.x-a.x),y:r.y+u*(o.y-a.y)}}}function uS(n,t,e){let i=n.length,a,r,o,s,l,c=pr(n,0);for(let d=0;d<i-1;++d)if(l=c,c=pr(n,d+1),!(!l||!c)){if(gr(t[d],0,dS)){e[d]=e[d+1]=0;continue}a=e[d]/t[d],r=e[d+1]/t[d],s=Math.pow(a,2)+Math.pow(r,2),!(s<=9)&&(o=3/Math.sqrt(s),e[d]=a*o*t[d],e[d+1]=r*o*t[d])}}function pS(n,t,e="x"){let i=Pb(e),a=n.length,r,o,s,l=pr(n,0);for(let c=0;c<a;++c){if(o=s,s=l,l=pr(n,c+1),!s)continue;let d=s[e],h=s[i];o&&(r=(d-o[e])/3,s[`cp1${e}`]=d-r,s[`cp1${i}`]=h-r*t[c]),l&&(r=(l[e]-d)/3,s[`cp2${e}`]=d+r,s[`cp2${i}`]=h+r*t[c])}}function mS(n,t="x"){let e=Pb(t),i=n.length,a=Array(i).fill(0),r=Array(i),o,s,l,c=pr(n,0);for(o=0;o<i;++o)if(s=l,l=c,c=pr(n,o+1),!!l){if(c){let d=c[t]-l[t];a[o]=d!==0?(c[e]-l[e])/d:0}r[o]=s?c?Mi(a[o-1])!==Mi(a[o])?0:(a[o-1]+a[o])/2:a[o-1]:a[o]}uS(n,a,r),pS(n,r,t)}function ec(n,t,e){return Math.max(Math.min(n,e),t)}function fS(n,t){let e,i,a,r,o,s=Vi(n[0],t);for(e=0,i=n.length;e<i;++e)o=r,r=s,s=e<i-1&&Vi(n[e+1],t),r&&(a=n[e],o&&(a.cp1x=ec(a.cp1x,t.left,t.right),a.cp1y=ec(a.cp1y,t.top,t.bottom)),s&&(a.cp2x=ec(a.cp2x,t.left,t.right),a.cp2y=ec(a.cp2y,t.top,t.bottom)))}function Eb(n,t,e,i,a){let r,o,s,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")mS(n,a);else{let c=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)s=n[r],l=hS(c,s,n[Math.min(r+1,o-(i?0:1))%o],t.tension),s.cp1x=l.previous.x,s.cp1y=l.previous.y,s.cp2x=l.next.x,s.cp2y=l.next.y,c=s}t.capBezierPoints&&fS(n,e)}function mc(){return typeof window<"u"&&typeof document<"u"}function fc(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function rc(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}var gc=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function gS(n,t){return gc(n).getPropertyValue(t)}var _S=["top","right","bottom","left"];function Ca(n,t,e){let i={};e=e?"-"+e:"";for(let a=0;a<4;a++){let r=_S[a];i[r]=parseFloat(n[t+"-"+r+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var bS=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function yS(n,t){let e=n.touches,i=e&&e.length?e[0]:n,{offsetX:a,offsetY:r}=i,o=!1,s,l;if(bS(a,r,n.target))s=a,l=r;else{let c=t.getBoundingClientRect();s=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:s,y:l,box:o}}function Vn(n,t){if("native"in n)return n;let{canvas:e,currentDevicePixelRatio:i}=t,a=gc(e),r=a.boxSizing==="border-box",o=Ca(a,"padding"),s=Ca(a,"border","width"),{x:l,y:c,box:d}=yS(n,e),h=o.left+(d&&s.left),u=o.top+(d&&s.top),{width:p,height:g}=t;return r&&(p-=o.width+s.width,g-=o.height+s.height),{x:Math.round((l-h)/p*e.width/i),y:Math.round((c-u)/g*e.height/i)}}function vS(n,t,e){let i,a;if(t===void 0||e===void 0){let r=n&&fc(n);if(!r)t=n.clientWidth,e=n.clientHeight;else{let o=r.getBoundingClientRect(),s=gc(r),l=Ca(s,"border","width"),c=Ca(s,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,i=rc(s.maxWidth,r,"clientWidth"),a=rc(s.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:i||nc,maxHeight:a||nc}}var Rn=n=>Math.round(n*10)/10;function Ob(n,t,e,i){let a=gc(n),r=Ca(a,"margin"),o=rc(a.maxWidth,n,"clientWidth")||nc,s=rc(a.maxHeight,n,"clientHeight")||nc,l=vS(n,t,e),{width:c,height:d}=l;if(a.boxSizing==="content-box"){let u=Ca(a,"border","width"),p=Ca(a,"padding");c-=p.width+u.width,d-=p.height+u.height}return c=Math.max(0,c-r.width),d=Math.max(0,i?c/i:d-r.height),c=Rn(Math.min(c,o,l.maxWidth)),d=Rn(Math.min(d,s,l.maxHeight)),c&&!d&&(d=Rn(c/2)),(t!==void 0||e!==void 0)&&i&&l.height&&d>l.height&&(d=l.height,c=Rn(Math.floor(d*i))),{width:c,height:d}}function zu(n,t,e){let i=t||1,a=Rn(n.height*i),r=Rn(n.width*i);n.height=Rn(n.height),n.width=Rn(n.width);let o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==a||o.width!==r?(n.currentDevicePixelRatio=i,o.height=a,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var kb=(function(){let n=!1;try{let t={get passive(){return n=!0,!1}};mc()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n})();function ju(n,t){let e=gS(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Tn(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function Ab(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function Tb(n,t,e,i){let a={x:n.cp2x,y:n.cp2y},r={x:t.cp1x,y:t.cp1y},o=Tn(n,a,e),s=Tn(a,r,e),l=Tn(r,t,e),c=Tn(o,s,e),d=Tn(s,l,e);return Tn(c,d,e)}var CS=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},xS=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Ma(n,t,e){return n?CS(t,e):xS()}function Hu(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function Uu(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Rb(n){return n==="angle"?{between:_r,compare:BM,normalize:ft}:{between:zi,compare:(t,e)=>t-e,normalize:t=>t}}function nb({start:n,end:t,count:e,loop:i,style:a}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:a}}function wS(n,t,e){let{property:i,start:a,end:r}=e,{between:o,normalize:s}=Rb(i),l=t.length,{start:c,end:d,loop:h}=n,u,p;if(h){for(c+=l,d+=l,u=0,p=l;u<p&&o(s(t[c%l][i]),a,r);++u)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:h,style:n.style}}function Wu(n,t,e){if(!e)return[n];let{property:i,start:a,end:r}=e,o=t.length,{compare:s,between:l,normalize:c}=Rb(i),{start:d,end:h,loop:u,style:p}=wS(n,t,e),g=[],b=!1,v=null,x,w,S,P=()=>l(a,S,x)&&s(a,S)!==0,M=()=>s(r,x)===0||l(r,S,x),E=()=>b||P(),R=()=>!b||M();for(let O=d,N=d;O<=h;++O)w=t[O%o],!w.skip&&(x=c(w[i]),x!==S&&(b=l(x,a,r),v===null&&E()&&(v=s(x,a)===0?O:N),v!==null&&R()&&(g.push(nb({start:v,end:O,loop:u,count:o,style:p})),v=null),N=O,S=x));return v!==null&&g.push(nb({start:v,end:h,loop:u,count:o,style:p})),g}function $u(n,t){let e=[],i=n.segments;for(let a=0;a<i.length;a++){let r=Wu(i[a],n.points,t);r.length&&e.push(...r)}return e}function MS(n,t,e,i){let a=0,r=t-1;if(e&&!i)for(;a<t&&!n[a].skip;)a++;for(;a<t&&n[a].skip;)a++;for(a%=t,e&&(r+=a);r>a&&n[r%t].skip;)r--;return r%=t,{start:a,end:r}}function SS(n,t,e,i){let a=n.length,r=[],o=t,s=n[t],l;for(l=t+1;l<=e;++l){let c=n[l%a];c.skip||c.stop?s.skip||(i=!1,r.push({start:t%a,end:(l-1)%a,loop:i}),t=o=c.stop?l:null):(o=l,s.skip&&(t=l)),s=c}return o!==null&&r.push({start:t%a,end:o%a,loop:i}),r}function Ib(n,t){let e=n.points,i=n.options.spanGaps,a=e.length;if(!a)return[];let r=!!n._loop,{start:o,end:s}=MS(e,a,r,i);if(i===!0)return ab(n,[{start:o,end:s,loop:r}],e,t);let l=s<o?s+a:s,c=!!n._fullLoop&&o===0&&s===a-1;return ab(n,SS(e,o,l,c),e,t)}function ab(n,t,e,i){return!i||!i.setContext||!e?t:DS(n,t,e,i)}function DS(n,t,e,i){let a=n._chart.getContext(),r=rb(n.options),{_datasetIndex:o,options:{spanGaps:s}}=n,l=e.length,c=[],d=r,h=t[0].start,u=h;function p(g,b,v,x){let w=s?-1:1;if(g!==b){for(g+=l;e[g%l].skip;)g-=w;for(;e[b%l].skip;)b+=w;g%l!==b%l&&(c.push({start:g%l,end:b%l,loop:v,style:x}),d=x,h=b%l)}}for(let g of t){h=s?h:g.start;let b=e[h%l],v;for(u=h+1;u<=g.end;u++){let x=e[u%l];v=rb(i.setContext(ln(a,{type:"segment",p0:b,p1:x,p0DataIndex:(u-1)%l,p1DataIndex:u%l,datasetIndex:o}))),PS(v,d)&&p(h,u-1,g.loop,d),b=x,d=v}h<u-1&&p(h,u-1,g.loop,d)}return c}function rb(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function PS(n,t){if(!t)return!1;let e=[],i=function(a,r){return Au(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function tc(n,t,e){return n.options.clip?n[e]:t[e]}function ES(n,t){let{xScale:e,yScale:i}=n;return e&&i?{left:tc(e,t,"left"),right:tc(e,t,"right"),top:tc(i,t,"top"),bottom:tc(i,t,"bottom")}:t}function Yu(n,t){let e=t._clip;if(e.disabled)return!1;let i=ES(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}var ap=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,a){let r=e.listeners[a],o=e.duration;r.forEach(s=>s({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Pu.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,a)=>{if(!i.running||!i.items.length)return;let r=i.items,o=r.length-1,s=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),s=!0):(r[o]=r[r.length-1],r.pop());s&&(a.draw(),this._notify(a,i,t,"progress")),r.length||(i.running=!1,this._notify(a,i,t,"complete"),i.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,a)=>Math.max(i,a._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let i=e.items,a=i.length-1;for(;a>=0;--a)i[a].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},cn=new ap,Fb="transparent",OS={boolean(n,t,e){return e>.5?t:n},color(n,t,e){let i=Tu(n||Fb),a=i.valid&&Tu(t||Fb);return a&&a.valid?a.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}},rp=class{constructor(t,e,i,a){let r=e[i];a=vr([t.to,a,r,t.from]);let o=vr([t.from,r,a]);this._active=!0,this._fn=t.fn||OS[t.type||typeof o],this._easing=hr[t.easing]||hr.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=a,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);let a=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=vr([t.to,e,a,t.from]),this._from=vr([t.from,a,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,i=this._duration,a=this._prop,r=this._from,o=this._loop,s=this._to,l;if(this._active=r!==s&&(o||e<i),!this._active){this._target[a]=s,this._notify(!0);return}if(e<0){this._target[a]=r;return}l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[a]=this._fn(r,s,l)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){let e=t?"res":"rej",i=this._promises||[];for(let a=0;a<i.length;a++)i[a][e]()}},Sc=class{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!ge(t))return;let e=Object.keys(Te.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(a=>{let r=t[a];if(!ge(r))return;let o={};for(let s of e)o[s]=r[s];(Fe(r.properties)&&r.properties||[a]).forEach(s=>{(s===a||!i.has(s))&&i.set(s,o)})})}_animateOptions(t,e){let i=e.options,a=AS(t,i);if(!a)return[];let r=this._createAnimations(a,i);return i.$shared&&kS(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,e){let i=this._properties,a=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),s=Date.now(),l;for(l=o.length-1;l>=0;--l){let c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){a.push(...this._animateOptions(t,e));continue}let d=e[c],h=r[c],u=i.get(c);if(h)if(u&&h.active()){h.update(u,d,s);continue}else h.cancel();if(!u||!u.duration){t[c]=d;continue}r[c]=h=new rp(u,t,c,d),a.push(h)}return a}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}let i=this._createAnimations(t,e);if(i.length)return cn.add(this._chart,i),!0}};function kS(n,t){let e=[],i=Object.keys(t);for(let a=0;a<i.length;a++){let r=n[i[a]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function AS(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Nb(n,t){let e=n&&n.options||{},i=e.reverse,a=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:i?r:a,end:i?a:r}}function TS(n,t,e){if(e===!1)return!1;let i=Nb(n,e),a=Nb(t,e);return{top:a.end,right:i.end,bottom:a.start,left:i.start}}function RS(n){let t,e,i,a;return ge(n)?(t=n.top,e=n.right,i=n.bottom,a=n.left):t=e=i=a=n,{top:t,right:e,bottom:i,left:a,disabled:n===!1}}function Fy(n,t){let e=[],i=n._getSortedDatasetMetas(t),a,r;for(a=0,r=i.length;a<r;++a)e.push(i[a].index);return e}function Lb(n,t,e,i={}){let a=n.keys,r=i.mode==="single",o,s,l,c;if(t===null)return;let d=!1;for(o=0,s=a.length;o<s;++o){if(l=+a[o],l===e){if(d=!0,i.all)continue;break}c=n.values[l],Ye(c)&&(r||t===0||Mi(t)===Mi(c))&&(t+=c)}return!d&&!i.all?0:t}function IS(n,t){let{iScale:e,vScale:i}=t,a=e.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(n),s=new Array(o.length),l,c,d;for(l=0,c=o.length;l<c;++l)d=o[l],s[l]={[a]:d,[r]:n[d]};return s}function qu(n,t){let e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function FS(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function NS(n){let{min:t,max:e,minDefined:i,maxDefined:a}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:a?e:Number.POSITIVE_INFINITY}}function LS(n,t,e){let i=n[t]||(n[t]={});return i[e]||(i[e]={})}function Vb(n,t,e,i){for(let a of t.getMatchingVisibleMetas(i).reverse()){let r=n[a.index];if(e&&r>0||!e&&r<0)return a.index}return null}function Bb(n,t){let{chart:e,_cachedMeta:i}=n,a=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:s}=i,l=r.axis,c=o.axis,d=FS(r,o,i),h=t.length,u;for(let p=0;p<h;++p){let g=t[p],{[l]:b,[c]:v}=g,x=g._stacks||(g._stacks={});u=x[c]=LS(a,d,b),u[s]=v,u._top=Vb(u,o,!0,i.type),u._bottom=Vb(u,o,!1,i.type);let w=u._visualValues||(u._visualValues={});w[s]=v}}function Ku(n,t){let e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function VS(n,t){return ln(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function BS(n,t,e){return ln(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Io(n,t){let e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(let a of t){let r=a._stacks;if(!r||r[i]===void 0||r[i][e]===void 0)return;delete r[i][e],r[i]._visualValues!==void 0&&r[i]._visualValues[e]!==void 0&&delete r[i]._visualValues[e]}}}var Gu=n=>n==="reset"||n==="none",zb=(n,t)=>t?n:Object.assign({},n),zS=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:Fy(e,!0),values:null},zn=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=qu(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Io(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,i=this._cachedMeta,a=this.getDataset(),r=(u,p,g,b)=>u==="x"?p:u==="r"?b:g,o=i.xAxisID=re(a.xAxisID,Ku(e,"x")),s=i.yAxisID=re(a.yAxisID,Ku(e,"y")),l=i.rAxisID=re(a.rAxisID,Ku(e,"r")),c=i.indexAxis,d=i.iAxisID=r(c,o,s,l),h=i.vAxisID=r(c,s,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(s),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(d),i.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&Su(this._data,this),e._stacked&&Io(e)}_dataCheck(){let e=this.getDataset(),i=e.data||(e.data=[]),a=this._data;if(ge(i)){let r=this._cachedMeta;this._data=IS(i,r)}else if(a!==i){if(a){Su(a,this);let r=this._cachedMeta;Io(r),r._parsed=[]}i&&Object.isExtensible(i)&&gb(i,this),this._syncList=[],this._data=i}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let i=this._cachedMeta,a=this.getDataset(),r=!1;this._dataCheck();let o=i._stacked;i._stacked=qu(i.vScale,i),i.stack!==a.stack&&(r=!0,Io(i),i.stack=a.stack),this._resyncElements(e),(r||o!==i._stacked)&&(Bb(this,i._parsed),i._stacked=qu(i.vScale,i))}configure(){let e=this.chart.config,i=e.datasetScopeKeys(this._type),a=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(a,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){let{_cachedMeta:a,_data:r}=this,{iScale:o,_stacked:s}=a,l=o.axis,c=e===0&&i===r.length?!0:a._sorted,d=e>0&&a._parsed[e-1],h,u,p;if(this._parsing===!1)a._parsed=r,a._sorted=!0,p=r;else{Fe(r[e])?p=this.parseArrayData(a,r,e,i):ge(r[e])?p=this.parseObjectData(a,r,e,i):p=this.parsePrimitiveData(a,r,e,i);let g=()=>u[l]===null||d&&u[l]<d[l];for(h=0;h<i;++h)a._parsed[h+e]=u=p[h],c&&(g()&&(c=!1),d=u);a._sorted=c}s&&Bb(this,p)}parsePrimitiveData(e,i,a,r){let{iScale:o,vScale:s}=e,l=o.axis,c=s.axis,d=o.getLabels(),h=o===s,u=new Array(r),p,g,b;for(p=0,g=r;p<g;++p)b=p+a,u[p]={[l]:h||o.parse(d[b],b),[c]:s.parse(i[b],b)};return u}parseArrayData(e,i,a,r){let{xScale:o,yScale:s}=e,l=new Array(r),c,d,h,u;for(c=0,d=r;c<d;++c)h=c+a,u=i[h],l[c]={x:o.parse(u[0],h),y:s.parse(u[1],h)};return l}parseObjectData(e,i,a,r){let{xScale:o,yScale:s}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r),h,u,p,g;for(h=0,u=r;h<u;++h)p=h+a,g=i[p],d[h]={x:o.parse(sn(g,l),p),y:s.parse(sn(g,c),p)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,a){let r=this.chart,o=this._cachedMeta,s=i[e.axis],l={keys:Fy(r,!0),values:i._stacks[e.axis]._visualValues};return Lb(l,s,o.index,{mode:a})}updateRangeFromParsed(e,i,a,r){let o=a[i.axis],s=o===null?NaN:o,l=r&&a._stacks[i.axis];r&&l&&(r.values=l,s=Lb(r,o,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,i){let a=this._cachedMeta,r=a._parsed,o=a._sorted&&e===a.iScale,s=r.length,l=this._getOtherScale(e),c=zS(i,a,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:u}=NS(l),p,g;function b(){g=r[p];let v=g[l.axis];return!Ye(g[e.axis])||h>v||u<v}for(p=0;p<s&&!(!b()&&(this.updateRangeFromParsed(d,e,g,c),o));++p);if(o){for(p=s-1;p>=0;--p)if(!b()){this.updateRangeFromParsed(d,e,g,c);break}}return d}getAllParsedValues(e){let i=this._cachedMeta._parsed,a=[],r,o,s;for(r=0,o=i.length;r<o;++r)s=i[r][e.axis],Ye(s)&&a.push(s);return a}getMaxOverflow(){return!1}getLabelAndValue(e){let i=this._cachedMeta,a=i.iScale,r=i.vScale,o=this.getParsed(e);return{label:a?""+a.getLabelForValue(o[a.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(e){let i=this._cachedMeta;this.update(e||"default"),i._clip=RS(re(this.options.clip,TS(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,i=this.chart,a=this._cachedMeta,r=a.data||[],o=i.chartArea,s=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop,h;for(a.dataset&&a.dataset.draw(e,o,l,c),h=l;h<l+c;++h){let u=r[h];u.hidden||(u.active&&d?s.push(u):u.draw(e,o))}for(h=0;h<s.length;++h)s[h].draw(e,o)}getStyle(e,i){let a=i?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(a):this.resolveDataElementOptions(e||0,a)}getContext(e,i,a){let r=this.getDataset(),o;if(e>=0&&e<this._cachedMeta.data.length){let s=this._cachedMeta.data[e];o=s.$context||(s.$context=BS(this.getContext(),e,s)),o.parsed=this.getParsed(e),o.raw=r.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=VS(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=a,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",a){let r=i==="active",o=this._cachedDataOpts,s=e+"-"+i,l=o[s],c=this.enableOptionSharing&&fr(a);if(l)return zb(l,c);let d=this.chart.config,h=d.datasetElementScopeKeys(this._type,e),u=r?[`${e}Hover`,"hover",e,""]:[e,""],p=d.getOptionScopes(this.getDataset(),h),g=Object.keys(Te.elements[e]),b=()=>this.getContext(a,r,i),v=d.resolveNamedOptions(p,g,b,u);return v.$shared&&(v.$shared=c,o[s]=Object.freeze(zb(v,c))),v}_resolveAnimations(e,i,a){let r=this.chart,o=this._cachedDataOpts,s=`animation-${i}`,l=o[s];if(l)return l;let c;if(r.options.animation!==!1){let h=this.chart.config,u=h.datasetAnimationScopeKeys(this._type,i),p=h.getOptionScopes(this.getDataset(),u);c=h.createResolver(p,this.getContext(e,a,i))}let d=new Sc(r,c&&c.animations);return c&&c._cacheable&&(o[s]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||Gu(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){let a=this.resolveDataElementOptions(e,i),r=this._sharedOptions,o=this.getSharedOptions(a),s=this.includeOptions(i,o)||o!==r;return this.updateSharedOptions(o,i,a),{sharedOptions:o,includeOptions:s}}updateElement(e,i,a,r){Gu(r)?Object.assign(e,a):this._resolveAnimations(i,r).update(e,a)}updateSharedOptions(e,i,a){e&&!Gu(i)&&this._resolveAnimations(void 0,i).update(e,a)}_setStyle(e,i,a,r){e.active=r;let o=this.getStyle(i,r);this._resolveAnimations(i,a,r).update(e,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(e,i,a){this._setStyle(e,a,"active",!1)}setHoverStyle(e,i,a){this._setStyle(e,a,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let i=this._data,a=this._cachedMeta.data;for(let[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];let r=a.length,o=i.length,s=Math.min(o,r);s&&this.parse(0,s),o>r?this._insertElements(r,o-r,e):o<r&&this._removeElements(o,r-o)}_insertElements(e,i,a=!0){let r=this._cachedMeta,o=r.data,s=e+i,l,c=d=>{for(d.length+=i,l=d.length-1;l>=s;l--)d[l]=d[l-i]};for(c(o),l=e;l<s;++l)o[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,i),a&&this.updateElements(o,e,i,"reset")}updateElements(e,i,a,r){}_removeElements(e,i){let a=this._cachedMeta;if(this._parsing){let r=a._parsed.splice(e,i);a._stacked&&Io(a,r)}a.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[i,a,r]=e;this[i](a,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);let a=arguments.length-2;a&&this._sync(["_insertElements",e,a])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function jS(n,t){if(!n._cache.$bar){let e=n.getMatchingVisibleMetas(t),i=[];for(let a=0,r=e.length;a<r;a++)i=i.concat(e[a].controller.getAllParsedValues(n));n._cache.$bar=Du(i.sort((a,r)=>a-r))}return n._cache.$bar}function HS(n){let t=n.iScale,e=jS(t,n.type),i=t._length,a,r,o,s,l=()=>{o===32767||o===-32768||(fr(s)&&(i=Math.min(i,Math.abs(o-s)||i)),s=o)};for(a=0,r=e.length;a<r;++a)o=t.getPixelForValue(e[a]),l();for(s=void 0,a=0,r=t.ticks.length;a<r;++a)o=t.getPixelForTick(a),l();return i}function US(n,t,e,i){let a=e.barThickness,r,o;return fe(a)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=a*i,o=1),{chunk:r/i,ratio:o,start:t.pixels[n]-r/2}}function WS(n,t,e,i){let a=t.pixels,r=a[n],o=n>0?a[n-1]:null,s=n<a.length-1?a[n+1]:null,l=e.categoryPercentage;o===null&&(o=r-(s===null?t.end-t.start:s-r)),s===null&&(s=r+r-o);let c=r-(r-Math.min(o,s))/2*l;return{chunk:Math.abs(s-o)/2*l/i,ratio:e.barPercentage,start:c}}function $S(n,t,e,i){let a=e.parse(n[0],i),r=e.parse(n[1],i),o=Math.min(a,r),s=Math.max(a,r),l=o,c=s;Math.abs(o)>Math.abs(s)&&(l=s,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:a,end:r,min:o,max:s}}function Ny(n,t,e,i){return Fe(n)?$S(n,t,e,i):t[e.axis]=e.parse(n,i),t}function jb(n,t,e,i){let a=n.iScale,r=n.vScale,o=a.getLabels(),s=a===r,l=[],c,d,h,u;for(c=e,d=e+i;c<d;++c)u=t[c],h={},h[a.axis]=s||a.parse(o[c],c),l.push(Ny(u,h,r,c));return l}function Qu(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function YS(n,t,e){return n!==0?Mi(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function qS(n){let t,e,i,a,r;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(a="end",r="start"):(a="start",r="end"),{start:e,end:i,reverse:t,top:a,bottom:r}}function KS(n,t,e,i){let a=t.borderSkipped,r={};if(!a){n.borderSkipped=r;return}if(a===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:s,reverse:l,top:c,bottom:d}=qS(n);a==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?a=c:(e._bottom||0)===i?a=d:(r[Hb(d,o,s,l)]=!0,a=c)),r[Hb(a,o,s,l)]=!0,n.borderSkipped=r}function Hb(n,t,e,i){return i?(n=GS(n,t,e),n=Ub(n,e,t)):n=Ub(n,t,e),n}function GS(n,t,e){return n===t?e:n===e?t:n}function Ub(n,t,e){return n==="start"?t:n==="end"?e:n}function QS(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}var XS=(()=>{class n extends zn{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,i,a,r){return jb(e,i,a,r)}parseArrayData(e,i,a,r){return jb(e,i,a,r)}parseObjectData(e,i,a,r){let{iScale:o,vScale:s}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=o.axis==="x"?l:c,h=s.axis==="x"?l:c,u=[],p,g,b,v;for(p=a,g=a+r;p<g;++p)v=i[p],b={},b[o.axis]=o.parse(sn(v,d),p),u.push(Ny(sn(v,h),b,s,p));return u}updateRangeFromParsed(e,i,a,r){super.updateRangeFromParsed(e,i,a,r);let o=a._custom;o&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let i=this._cachedMeta,{iScale:a,vScale:r}=i,o=this.getParsed(e),s=o._custom,l=Qu(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+a.getLabelForValue(o[a.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,a,r){let o=r==="reset",{index:s,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),h=this._getRuler(),{sharedOptions:u,includeOptions:p}=this._getSharedOptions(i,r);for(let g=i;g<i+a;g++){let b=this.getParsed(g),v=o||fe(b[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(g),x=this._calculateBarIndexPixels(g,h),w=(b._stacks||{})[l.axis],S={horizontal:d,base:v.base,enableBorderRadius:!w||Qu(b._custom)||s===w._top||s===w._bottom,x:d?v.head:x.center,y:d?x.center:v.head,height:d?x.size:Math.abs(v.size),width:d?Math.abs(v.size):x.size};p&&(S.options=u||this.resolveDataElementOptions(g,e[g].active?"active":r));let P=S.options||e[g].options;KS(S,P,w,s),QS(S,P,h.ratio),this.updateElement(e[g],g,S,r)}}_getStacks(e,i){let{iScale:a}=this._cachedMeta,r=a.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),o=a.options.stacked,s=[],l=this._cachedMeta.controller.getParsed(i),c=l&&l[a.axis],d=h=>{let u=h._parsed.find(g=>g[a.axis]===c),p=u&&u[h.vScale.axis];if(fe(p)||isNaN(p))return!0};for(let h of r)if(!(i!==void 0&&d(h))&&((o===!1||s.indexOf(h.stack)===-1||o===void 0&&h.stack===void 0)&&s.push(h.stack),h.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let e=this.chart.scales,i=this.chart.options.indexAxis;return Object.keys(e).filter(a=>e[a].axis===i).shift()}_getAxis(){let e={},i=this.getFirstScaleIdForIndexAxis();for(let a of this.chart.data.datasets)e[re(this.chart.options.indexAxis==="x"?a.xAxisID:a.yAxisID,i)]=!0;return Object.keys(e)}_getStackIndex(e,i,a){let r=this._getStacks(e,a),o=i!==void 0?r.indexOf(i):-1;return o===-1?r.length-1:o}_getRuler(){let e=this.options,i=this._cachedMeta,a=i.iScale,r=[],o,s;for(o=0,s=i.data.length;o<s;++o)r.push(a.getPixelForValue(this.getParsed(o)[a.axis],o));let l=e.barThickness;return{min:l||HS(i),pixels:r,start:a._startPixel,end:a._endPixel,stackCount:this._getStackCount(),scale:a,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:i,_stacked:a,index:r},options:{base:o,minBarLength:s}}=this,l=o||0,c=this.getParsed(e),d=c._custom,h=Qu(d),u=c[i.axis],p=0,g=a?this.applyStack(i,c,a):u,b,v;g!==u&&(p=g-u,g=u),h&&(u=d.barStart,g=d.barEnd-d.barStart,u!==0&&Mi(u)!==Mi(d.barEnd)&&(p=0),p+=u);let x=!fe(o)&&!h?o:p,w=i.getPixelForValue(x);if(this.chart.getDataVisibility(e)?b=i.getPixelForValue(p+g):b=w,v=b-w,Math.abs(v)<s){v=YS(v,i,l)*s,u===l&&(w-=v/2);let S=i.getPixelForDecimal(0),P=i.getPixelForDecimal(1),M=Math.min(S,P),E=Math.max(S,P);w=Math.max(Math.min(w,E),M),b=w+v,a&&!h&&(c._stacks[i.axis]._visualValues[r]=i.getValueForPixel(b)-i.getValueForPixel(w))}if(w===i.getPixelForValue(l)){let S=Mi(v)*i.getLineWidthForValue(l)/2;w+=S,v-=S}return{size:v,base:w,head:b,center:b+v/2}}_calculateBarIndexPixels(e,i){let a=i.scale,r=this.options,o=r.skipNull,s=re(r.maxBarThickness,1/0),l,c,d=this._getAxisCount();if(i.grouped){let h=o?this._getStackCount(e):i.stackCount,u=r.barThickness==="flex"?WS(e,i,r,h*d):US(e,i,r,h*d),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(re(p,this.getFirstScaleIdForIndexAxis())),b=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+g;l=u.start+u.chunk*b+u.chunk/2,c=Math.min(s,u.chunk*u.ratio)}else l=a.getPixelForValue(this.getParsed(e)[a.axis],e),c=Math.min(s,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let e=this._cachedMeta,i=e.vScale,a=e.data,r=a.length,o=0;for(;o<r;++o)this.getParsed(o)[i.axis]!==null&&!a[o].hidden&&a[o].draw(this._ctx)}}return n})(),ZS=(()=>{class n extends zn{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,a,r){let o=super.parsePrimitiveData(e,i,a,r);for(let s=0;s<o.length;s++)o[s]._custom=this.resolveDataElementOptions(s+a).radius;return o}parseArrayData(e,i,a,r){let o=super.parseArrayData(e,i,a,r);for(let s=0;s<o.length;s++){let l=i[a+s];o[s]._custom=re(l[2],this.resolveDataElementOptions(s+a).radius)}return o}parseObjectData(e,i,a,r){let o=super.parseObjectData(e,i,a,r);for(let s=0;s<o.length;s++){let l=i[a+s];o[s]._custom=re(l&&l.r&&+l.r,this.resolveDataElementOptions(s+a).radius)}return o}getMaxOverflow(){let e=this._cachedMeta.data,i=0;for(let a=e.length-1;a>=0;--a)i=Math.max(i,e[a].size(this.resolveDataElementOptions(a))/2);return i>0&&i}getLabelAndValue(e){let i=this._cachedMeta,a=this.chart.data.labels||[],{xScale:r,yScale:o}=i,s=this.getParsed(e),l=r.getLabelForValue(s.x),c=o.getLabelForValue(s.y),d=s._custom;return{label:a[e]||"",value:"("+l+", "+c+(d?", "+d:"")+")"}}update(e){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,a,r){let o=r==="reset",{iScale:s,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(i,r),h=s.axis,u=l.axis;for(let p=i;p<i+a;p++){let g=e[p],b=!o&&this.getParsed(p),v={},x=v[h]=o?s.getPixelForDecimal(.5):s.getPixelForValue(b[h]),w=v[u]=o?l.getBasePixel():l.getPixelForValue(b[u]);v.skip=isNaN(x)||isNaN(w),d&&(v.options=c||this.resolveDataElementOptions(p,g.active?"active":r),o&&(v.options.radius=0)),this.updateElement(g,p,v,r)}}resolveDataElementOptions(e,i){let a=this.getParsed(e),r=super.resolveDataElementOptions(e,i);r.$shared&&(r=Object.assign({},r,{$shared:!1}));let o=r.radius;return i!=="active"&&(r.radius=0),r.radius+=re(a&&a._custom,o),r}}return n})();function JS(n,t,e){let i=1,a=1,r=0,o=0;if(t<Ne){let s=n,l=s+t,c=Math.cos(s),d=Math.sin(s),h=Math.cos(l),u=Math.sin(l),p=(S,P,M)=>_r(S,s,l,!0)?1:Math.max(P,P*e,M,M*e),g=(S,P,M)=>_r(S,s,l,!0)?-1:Math.min(P,P*e,M,M*e),b=p(0,c,h),v=p(Qe,d,u),x=g(Ce,c,h),w=g(Ce+Qe,d,u);i=(b-x)/2,a=(v-w)/2,r=-(b+x)/2,o=-(v+w)/2}return{ratioX:i,ratioY:a,offsetX:r,offsetY:o}}var Sp=(()=>{class n extends zn{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let i=e.data,{labels:{pointStyle:a,textAlign:r,color:o,useBorderRadius:s,borderRadius:l}}=e.legend.options;return i.labels.length&&i.datasets.length?i.labels.map((c,d)=>{let u=e.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:u.backgroundColor,fontColor:o,hidden:!e.getDataVisibility(d),lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:u.borderWidth,strokeStyle:u.borderColor,textAlign:r,pointStyle:a,borderRadius:s&&(l||u.borderRadius),index:d}}):[]}},onClick(e,i,a){a.chart.toggleDataVisibility(i.index),a.chart.update()}}}};constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){let a=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=a;else{let o=c=>+a[c];if(ge(a[e])){let{key:c="value"}=this._parsing;o=d=>+sn(a[d],c)}let s,l;for(s=e,l=e+i;s<l;++s)r._parsed[s]=o(s)}}_getRotation(){return fi(this.options.rotation-90)}_getCircumference(){return fi(this.options.circumference)}_getRotationExtents(){let e=Ne,i=-Ne;for(let a=0;a<this.chart.data.datasets.length;++a)if(this.chart.isDatasetVisible(a)&&this.chart.getDatasetMeta(a).type===this._type){let r=this.chart.getDatasetMeta(a).controller,o=r._getRotation(),s=r._getCircumference();e=Math.min(e,o),i=Math.max(i,o+s)}return{rotation:e,circumference:i-e}}update(e){let i=this.chart,{chartArea:a}=i,r=this._cachedMeta,o=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(a.width,a.height)-s)/2,0),c=Math.min(sb(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:h,rotation:u}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:b,offsetY:v}=JS(u,h,c),x=(a.width-s)/p,w=(a.height-s)/g,S=Math.max(Math.min(x,w)/2,0),P=yu(this.options.radius,S),M=Math.max(P*c,0),E=(P-M)/this._getVisibleDatasetWeightTotal();this.offsetX=b*P,this.offsetY=v*P,r.total=this.calculateTotal(),this.outerRadius=P-E*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-E*d,0),this.updateElements(o,0,o.length,e)}_circumference(e,i){let a=this.options,r=this._cachedMeta,o=this._getCircumference();return i&&a.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*o/Ne)}updateElements(e,i,a,r){let o=r==="reset",s=this.chart,l=s.chartArea,d=s.options.animation,h=(l.left+l.right)/2,u=(l.top+l.bottom)/2,p=o&&d.animateScale,g=p?0:this.innerRadius,b=p?0:this.outerRadius,{sharedOptions:v,includeOptions:x}=this._getSharedOptions(i,r),w=this._getRotation(),S;for(S=0;S<i;++S)w+=this._circumference(S,o);for(S=i;S<i+a;++S){let P=this._circumference(S,o),M=e[S],E={x:h+this.offsetX,y:u+this.offsetY,startAngle:w,endAngle:w+P,circumference:P,outerRadius:b,innerRadius:g};x&&(E.options=v||this.resolveDataElementOptions(S,M.active?"active":r)),w+=P,this.updateElement(M,S,E,r)}}calculateTotal(){let e=this._cachedMeta,i=e.data,a=0,r;for(r=0;r<i.length;r++){let o=e._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!i[r].hidden&&(a+=Math.abs(o))}return a}calculateCircumference(e){let i=this._cachedMeta.total;return i>0&&!isNaN(e)?Ne*(Math.abs(e)/i):0}getLabelAndValue(e){let i=this._cachedMeta,a=this.chart,r=a.data.labels||[],o=br(i._parsed[e],a.options.locale);return{label:r[e]||"",value:o}}getMaxBorderWidth(e){let i=0,a=this.chart,r,o,s,l,c;if(!e){for(r=0,o=a.data.datasets.length;r<o;++r)if(a.isDatasetVisible(r)){s=a.getDatasetMeta(r),e=s.data,l=s.controller;break}}if(!e)return 0;for(r=0,o=e.length;r<o;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let a=0,r=e.length;a<r;++a){let o=this.resolveDataElementOptions(a);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let a=0;a<e;++a)this.chart.isDatasetVisible(a)&&(i+=this._getRingWeight(a));return i}_getRingWeight(e){return Math.max(re(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),eD=(()=>{class n extends zn{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let i=this._cachedMeta,{dataset:a,data:r=[],_dataset:o}=i,s=this.chart._animationsDisabled,{start:l,count:c}=Ou(i,r,s);this._drawStart=l,this._drawCount=c,ku(i)&&(l=0,c=r.length),a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!o._decimated,a.points=r;let d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:d},e),this.updateElements(r,l,c,e)}updateElements(e,i,a,r){let o=r==="reset",{iScale:s,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:h,includeOptions:u}=this._getSharedOptions(i,r),p=s.axis,g=l.axis,{spanGaps:b,segment:v}=this.options,x=wa(b)?b:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||o||r==="none",S=i+a,P=e.length,M=i>0&&this.getParsed(i-1);for(let E=0;E<P;++E){let R=e[E],O=w?R:{};if(E<i||E>=S){O.skip=!0;continue}let N=this.getParsed(E),ne=fe(N[g]),oe=O[p]=s.getPixelForValue(N[p],E),se=O[g]=o||ne?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,N,c):N[g],E);O.skip=isNaN(oe)||isNaN(se)||ne,O.stop=E>0&&Math.abs(N[p]-M[p])>x,v&&(O.parsed=N,O.raw=d.data[E]),u&&(O.options=h||this.resolveDataElementOptions(E,R.active?"active":r)),w||this.updateElement(R,E,O,r),M=N}}getMaxOverflow(){let e=this._cachedMeta,i=e.dataset,a=i.options&&i.options.borderWidth||0,r=e.data||[];if(!r.length)return a;let o=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(a,o,s)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return n})(),Ly=(()=>{class n extends zn{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let i=e.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:a,color:r}}=e.legend.options;return i.labels.map((o,s)=>{let c=e.getDatasetMeta(0).controller.getStyle(s);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:a,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,i,a){a.chart.toggleDataVisibility(i.index),a.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let i=this._cachedMeta,a=this.chart,r=a.data.labels||[],o=br(i._parsed[e].r,a.options.locale);return{label:r[e]||"",value:o}}parseObjectData(e,i,a,r){return Bu.bind(this)(e,i,a,r)}update(e){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}getMinMax(){let e=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((a,r)=>{let o=this.getParsed(r).r;!isNaN(o)&&this.chart.getDataVisibility(r)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){let e=this.chart,i=e.chartArea,a=e.options,r=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(r/2,0),s=Math.max(a.cutoutPercentage?o/100*a.cutoutPercentage:1,0),l=(o-s)/e.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,i,a,r){let o=r==="reset",s=this.chart,c=s.options.animation,d=this._cachedMeta.rScale,h=d.xCenter,u=d.yCenter,p=d.getIndexAngle(0)-.5*Ce,g=p,b,v=360/this.countVisibleElements();for(b=0;b<i;++b)g+=this._computeAngle(b,r,v);for(b=i;b<i+a;b++){let x=e[b],w=g,S=g+this._computeAngle(b,r,v),P=s.getDataVisibility(b)?d.getDistanceFromCenterForValue(this.getParsed(b).r):0;g=S,o&&(c.animateScale&&(P=0),c.animateRotate&&(w=S=p));let M={x:h,y:u,innerRadius:0,outerRadius:P,startAngle:w,endAngle:S,options:this.resolveDataElementOptions(b,x.active?"active":r)};this.updateElement(x,b,M,r)}}countVisibleElements(){let e=this._cachedMeta,i=0;return e.data.forEach((a,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&i++}),i}_computeAngle(e,i,a){return this.chart.getDataVisibility(e)?fi(this.resolveDataElementOptions(e,i).angle||a):0}}return n})(),tD=(()=>{class n extends Sp{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),iD=(()=>{class n extends zn{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){let i=this._cachedMeta.vScale,a=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(a[i.axis])}}parseObjectData(e,i,a,r){return Bu.bind(this)(e,i,a,r)}update(e){let i=this._cachedMeta,a=i.dataset,r=i.data||[],o=i.iScale.getLabels();if(a.points=r,e!=="resize"){let s=this.resolveDatasetElementOptions(e);this.options.showLine||(s.borderWidth=0);let l={_loop:!0,_fullLoop:o.length===r.length,options:s};this.updateElement(a,void 0,l,e)}this.updateElements(r,0,r.length,e)}updateElements(e,i,a,r){let o=this._cachedMeta.rScale,s=r==="reset";for(let l=i;l<i+a;l++){let c=e[l],d=this.resolveDataElementOptions(l,c.active?"active":r),h=o.getPointPositionForValue(l,this.getParsed(l).r),u=s?o.xCenter:h.x,p=s?o.yCenter:h.y,g={x:u,y:p,angle:h.angle,skip:isNaN(u)||isNaN(p),options:d};this.updateElement(c,l,g,r)}}}return n})(),nD=(()=>{class n extends zn{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){let i=this._cachedMeta,a=this.chart.data.labels||[],{xScale:r,yScale:o}=i,s=this.getParsed(e),l=r.getLabelForValue(s.x),c=o.getLabelForValue(s.y);return{label:a[e]||"",value:"("+l+", "+c+")"}}update(e){let i=this._cachedMeta,{data:a=[]}=i,r=this.chart._animationsDisabled,{start:o,count:s}=Ou(i,a,r);if(this._drawStart=o,this._drawCount=s,ku(i)&&(o=0,s=a.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=a;let d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(l,void 0,{animated:!r,options:d},e)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(a,o,s,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,i,a,r){let o=r==="reset",{iScale:s,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,h=this.resolveDataElementOptions(i,r),u=this.getSharedOptions(h),p=this.includeOptions(r,u),g=s.axis,b=l.axis,{spanGaps:v,segment:x}=this.options,w=wa(v)?v:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||o||r==="none",P=i>0&&this.getParsed(i-1);for(let M=i;M<i+a;++M){let E=e[M],R=this.getParsed(M),O=S?E:{},N=fe(R[b]),ne=O[g]=s.getPixelForValue(R[g],M),oe=O[b]=o||N?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,R,c):R[b],M);O.skip=isNaN(ne)||isNaN(oe)||N,O.stop=M>0&&Math.abs(R[g]-P[g])>w,x&&(O.parsed=R,O.raw=d.data[M]),p&&(O.options=u||this.resolveDataElementOptions(M,E.active?"active":r)),S||this.updateElement(E,M,O,r),P=R}this.updateSharedOptions(u,r,h)}getMaxOverflow(){let e=this._cachedMeta,i=e.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let a=e.dataset,r=a.options&&a.options.borderWidth||0;if(!i.length)return r;let o=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,o,s)/2}}return n})(),aD=Object.freeze({__proto__:null,BarController:XS,BubbleController:ZS,DoughnutController:Sp,LineController:eD,PieController:tD,PolarAreaController:Ly,RadarController:iD,ScatterController:nD});function Sa(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var op=class n{static override(t){Object.assign(n.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Sa()}parse(){return Sa()}format(){return Sa()}add(){return Sa()}diff(){return Sa()}startOf(){return Sa()}endOf(){return Sa()}},rD={_date:op};function oD(n,t,e,i){let{controller:a,data:r,_sorted:o}=n,s=a._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(s&&t===s.axis&&t!=="r"&&o&&r.length){let c=s._reversePixels?pb:Li;if(i){if(a._sharedOptions){let d=r[0],h=typeof d.getRange=="function"&&d.getRange(t);if(h){let u=c(r,t,e-h),p=c(r,t,e+h);return{lo:u.lo,hi:p.hi}}}}else{let d=c(r,t,e);if(l){let{vScale:h}=a._cachedMeta,{_parsed:u}=n,p=u.slice(0,d.lo+1).reverse().findIndex(b=>!fe(b[h.axis]));d.lo-=Math.max(0,p);let g=u.slice(d.hi).findIndex(b=>!fe(b[h.axis]));d.hi+=Math.max(0,g)}return d}}return{lo:0,hi:r.length-1}}function Wo(n,t,e,i,a){let r=n.getSortedVisibleDatasetMetas(),o=e[t];for(let s=0,l=r.length;s<l;++s){let{index:c,data:d}=r[s],{lo:h,hi:u}=oD(r[s],t,o,a);for(let p=h;p<=u;++p){let g=d[p];g.skip||i(g,c,p)}}}function sD(n){let t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,a){let r=t?Math.abs(i.x-a.x):0,o=e?Math.abs(i.y-a.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Xu(n,t,e,i,a){let r=[];return!a&&!n.isPointInArea(t)||Wo(n,e,t,function(s,l,c){!a&&!Vi(s,n.chartArea,0)||s.inRange(t.x,t.y,i)&&r.push({element:s,datasetIndex:l,index:c})},!0),r}function lD(n,t,e,i){let a=[];function r(o,s,l){let{startAngle:c,endAngle:d}=o.getProps(["startAngle","endAngle"],i),{angle:h}=Mu(o,{x:t.x,y:t.y});_r(h,c,d)&&a.push({element:o,datasetIndex:s,index:l})}return Wo(n,e,t,r),a}function cD(n,t,e,i,a,r){let o=[],s=sD(e),l=Number.POSITIVE_INFINITY;function c(d,h,u){let p=d.inRange(t.x,t.y,a);if(i&&!p)return;let g=d.getCenterPoint(a);if(!(!!r||n.isPointInArea(g))&&!p)return;let v=s(t,g);v<l?(o=[{element:d,datasetIndex:h,index:u}],l=v):v===l&&o.push({element:d,datasetIndex:h,index:u})}return Wo(n,e,t,c),o}function Zu(n,t,e,i,a,r){return!r&&!n.isPointInArea(t)?[]:e==="r"&&!i?lD(n,t,e,a):cD(n,t,e,i,a,r)}function Wb(n,t,e,i,a){let r=[],o=e==="x"?"inXRange":"inYRange",s=!1;return Wo(n,e,t,(l,c,d)=>{l[o]&&l[o](t[e],a)&&(r.push({element:l,datasetIndex:c,index:d}),s=s||l.inRange(t.x,t.y,a))}),i&&!s?[]:r}var dD={evaluateInteractionItems:Wo,modes:{index(n,t,e,i){let a=Vn(t,n),r=e.axis||"x",o=e.includeInvisible||!1,s=e.intersect?Xu(n,a,r,i,o):Zu(n,a,r,!1,i,o),l=[];return s.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{let d=s[0].index,h=c.data[d];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:d})}),l):[]},dataset(n,t,e,i){let a=Vn(t,n),r=e.axis||"xy",o=e.includeInvisible||!1,s=e.intersect?Xu(n,a,r,i,o):Zu(n,a,r,!1,i,o);if(s.length>0){let l=s[0].datasetIndex,c=n.getDatasetMeta(l).data;s=[];for(let d=0;d<c.length;++d)s.push({element:c[d],datasetIndex:l,index:d})}return s},point(n,t,e,i){let a=Vn(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return Xu(n,a,r,i,o)},nearest(n,t,e,i){let a=Vn(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return Zu(n,a,r,e.intersect,i,o)},x(n,t,e,i){let a=Vn(t,n);return Wb(n,a,"x",e.intersect,i)},y(n,t,e,i){let a=Vn(t,n);return Wb(n,a,"y",e.intersect,i)}}},Vy=["left","top","right","bottom"];function Fo(n,t){return n.filter(e=>e.pos===t)}function $b(n,t){return n.filter(e=>Vy.indexOf(e.pos)===-1&&e.box.axis===t)}function No(n,t){return n.sort((e,i)=>{let a=t?i:e,r=t?e:i;return a.weight===r.weight?a.index-r.index:a.weight-r.weight})}function hD(n){let t=[],e,i,a,r,o,s;for(e=0,i=(n||[]).length;e<i;++e)a=n[e],{position:r,options:{stack:o,stackWeight:s=1}}=a,t.push({index:e,box:a,pos:r,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&r+o,stackWeight:s});return t}function uD(n){let t={};for(let e of n){let{stack:i,pos:a,stackWeight:r}=e;if(!i||!Vy.includes(a))continue;let o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function pD(n,t){let e=uD(n),{vBoxMaxWidth:i,hBoxMaxHeight:a}=t,r,o,s;for(r=0,o=n.length;r<o;++r){s=n[r];let{fullSize:l}=s.box,c=e[s.stack],d=c&&s.stackWeight/c.weight;s.horizontal?(s.width=d?d*i:l&&t.availableWidth,s.height=a):(s.width=i,s.height=d?d*a:l&&t.availableHeight)}return e}function mD(n){let t=hD(n),e=No(t.filter(c=>c.box.fullSize),!0),i=No(Fo(t,"left"),!0),a=No(Fo(t,"right")),r=No(Fo(t,"top"),!0),o=No(Fo(t,"bottom")),s=$b(t,"x"),l=$b(t,"y");return{fullSize:e,leftAndTop:i.concat(r),rightAndBottom:a.concat(l).concat(o).concat(s),chartArea:Fo(t,"chartArea"),vertical:i.concat(a).concat(l),horizontal:r.concat(o).concat(s)}}function Yb(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function By(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function fD(n,t,e,i){let{pos:a,box:r}=e,o=n.maxPadding;if(!ge(a)){e.size&&(n[a]-=e.size);let h=i[e.stack]||{size:0,count:1};h.size=Math.max(h.size,e.horizontal?r.height:r.width),e.size=h.size/h.count,n[a]+=e.size}r.getPadding&&By(o,r.getPadding());let s=Math.max(0,t.outerWidth-Yb(o,n,"left","right")),l=Math.max(0,t.outerHeight-Yb(o,n,"top","bottom")),c=s!==n.w,d=l!==n.h;return n.w=s,n.h=l,e.horizontal?{same:c,other:d}:{same:d,other:c}}function gD(n){let t=n.maxPadding;function e(i){let a=Math.max(t[i]-n[i],0);return n[i]+=a,a}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function _D(n,t){let e=t.maxPadding;function i(a){let r={left:0,top:0,right:0,bottom:0};return a.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return i(n?["left","right"]:["top","bottom"])}function Bo(n,t,e,i){let a=[],r,o,s,l,c,d;for(r=0,o=n.length,c=0;r<o;++r){s=n[r],l=s.box,l.update(s.width||t.w,s.height||t.h,_D(s.horizontal,t));let{same:h,other:u}=fD(t,e,s,i);c|=h&&a.length,d=d||u,l.fullSize||a.push(s)}return c&&Bo(a,t,e,i)||d}function _c(n,t,e,i,a){n.top=e,n.left=t,n.right=t+i,n.bottom=e+a,n.width=i,n.height=a}function qb(n,t,e,i){let a=e.padding,{x:r,y:o}=t;for(let s of n){let l=s.box,c=i[s.stack]||{count:1,placed:0,weight:1},d=s.stackWeight/c.weight||1;if(s.horizontal){let h=t.w*d,u=c.size||l.height;fr(c.start)&&(o=c.start),l.fullSize?_c(l,a.left,o,e.outerWidth-a.right-a.left,u):_c(l,t.left+c.placed,o,h,u),c.start=o,c.placed+=h,o=l.bottom}else{let h=t.h*d,u=c.size||l.width;fr(c.start)&&(r=c.start),l.fullSize?_c(l,r,a.top,u,e.outerHeight-a.bottom-a.top):_c(l,r,t.top+c.placed,u,h),c.start=r,c.placed+=h,r=l.right}}t.x=r,t.y=o}var Et={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){let e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;let a=_t(n.options.layout.padding),r=Math.max(t-a.width,0),o=Math.max(e-a.height,0),s=mD(n.boxes),l=s.vertical,c=s.horizontal;Oe(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});let d=l.reduce((b,v)=>v.box.options&&v.box.options.display===!1?b:b+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:e,padding:a,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/d,hBoxMaxHeight:o/2}),u=Object.assign({},a);By(u,_t(i));let p=Object.assign({maxPadding:u,w:r,h:o,x:a.left,y:a.top},a),g=pD(l.concat(c),h);Bo(s.fullSize,p,h,g),Bo(l,p,h,g),Bo(c,p,h,g)&&Bo(l,p,h,g),gD(p),qb(s.leftAndTop,p,h,g),p.x+=p.w,p.y+=p.h,qb(s.rightAndBottom,p,h,g),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Oe(s.chartArea,b=>{let v=b.box;Object.assign(v,n.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}},Dc=class{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,a){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,a?Math.floor(e/a):i)}}isAttached(t){return!0}updateConfig(t){}},sp=class extends Dc{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},wc="$chartjs",bD={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Kb=n=>n===null||n==="";function yD(n,t){let e=n.style,i=n.getAttribute("height"),a=n.getAttribute("width");if(n[wc]={initial:{height:i,width:a,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Kb(a)){let r=ju(n,"width");r!==void 0&&(n.width=r)}if(Kb(i))if(n.style.height==="")n.height=n.width/(t||2);else{let r=ju(n,"height");r!==void 0&&(n.height=r)}return n}var zy=kb?{passive:!0}:!1;function vD(n,t,e){n&&n.addEventListener(t,e,zy)}function CD(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,zy)}function xD(n,t){let e=bD[n.type]||n.type,{x:i,y:a}=Vn(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:a!==void 0?a:null}}function Pc(n,t){for(let e of n)if(e===t||e.contains(t))return!0}function wD(n,t,e){let i=n.canvas,a=new MutationObserver(r=>{let o=!1;for(let s of r)o=o||Pc(s.addedNodes,i),o=o&&!Pc(s.removedNodes,i);o&&e()});return a.observe(document,{childList:!0,subtree:!0}),a}function MD(n,t,e){let i=n.canvas,a=new MutationObserver(r=>{let o=!1;for(let s of r)o=o||Pc(s.removedNodes,i),o=o&&!Pc(s.addedNodes,i);o&&e()});return a.observe(document,{childList:!0,subtree:!0}),a}var jo=new Map,Gb=0;function jy(){let n=window.devicePixelRatio;n!==Gb&&(Gb=n,jo.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function SD(n,t){jo.size||window.addEventListener("resize",jy),jo.set(n,t)}function DD(n){jo.delete(n),jo.size||window.removeEventListener("resize",jy)}function PD(n,t,e){let i=n.canvas,a=i&&fc(i);if(!a)return;let r=Eu((s,l)=>{let c=a.clientWidth;e(s,l),c<a.clientWidth&&e()},window),o=new ResizeObserver(s=>{let l=s[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||r(c,d)});return o.observe(a),SD(n,r),o}function Ju(n,t,e){e&&e.disconnect(),t==="resize"&&DD(n)}function ED(n,t,e){let i=n.canvas,a=Eu(r=>{n.ctx!==null&&e(xD(r,n))},n);return vD(i,t,a),a}var lp=class extends Dc{acquireContext(t,e){let i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(yD(t,e),i):null}releaseContext(t){let e=t.canvas;if(!e[wc])return!1;let i=e[wc].initial;["height","width"].forEach(r=>{let o=i[r];fe(o)?e.removeAttribute(r):e.setAttribute(r,o)});let a=i.style||{};return Object.keys(a).forEach(r=>{e.style[r]=a[r]}),e.width=e.width,delete e[wc],!0}addEventListener(t,e,i){this.removeEventListener(t,e);let a=t.$proxies||(t.$proxies={}),o={attach:wD,detach:MD,resize:PD}[e]||ED;a[e]=o(t,e,i)}removeEventListener(t,e){let i=t.$proxies||(t.$proxies={}),a=i[e];if(!a)return;({attach:Ju,detach:Ju,resize:Ju}[e]||CD)(t,e,a),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,a){return Ob(t,e,i,a)}isAttached(t){let e=t&&fc(t);return!!(e&&e.isConnected)}};function OD(n){return!mc()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?sp:lp}var Si=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return wa(this.x)&&wa(this.y)}getProps(t,e){let i=this.$animations;if(!e||!i)return this;let a={};return t.forEach(r=>{a[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),a}};function kD(n,t){let e=n.options.ticks,i=AD(n),a=Math.min(e.maxTicksLimit||i,i),r=e.major.enabled?RD(t):[],o=r.length,s=r[0],l=r[o-1],c=[];if(o>a)return ID(t,c,r,o/a),c;let d=TD(r,t,a);if(o>0){let h,u,p=o>1?Math.round((l-s)/(o-1)):null;for(bc(t,c,d,fe(p)?0:s-p,s),h=0,u=o-1;h<u;h++)bc(t,c,d,r[h],r[h+1]);return bc(t,c,d,l,fe(p)?t.length:l+p),c}return bc(t,c,d),c}function AD(n){let t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),a=n._maxLength/e;return Math.floor(Math.min(i,a))}function TD(n,t,e){let i=FD(n),a=t.length/e;if(!i)return Math.max(a,1);let r=db(i);for(let o=0,s=r.length-1;o<s;o++){let l=r[o];if(l>a)return l}return Math.max(a,1)}function RD(n){let t=[],e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function ID(n,t,e,i){let a=0,r=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(t.push(n[o]),a++,r=e[a*i])}function bc(n,t,e,i,a){let r=re(i,0),o=Math.min(re(a,n.length),n.length),s=0,l,c,d;for(e=Math.ceil(e),a&&(l=a-i,e=l/Math.floor(l/e)),d=r;d<0;)s++,d=Math.round(r+s*e);for(c=Math.max(r,0);c<o;c++)c===d&&(t.push(n[c]),s++,d=Math.round(r+s*e))}function FD(n){let t=n.length,e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}var ND=n=>n==="left"?"right":n==="right"?"left":n,Qb=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,Xb=(n,t)=>Math.min(t||n,n);function Zb(n,t){let e=[],i=n.length/t,a=n.length,r=0;for(;r<a;r+=i)e.push(n[Math.floor(r)]);return e}function LD(n,t,e){let i=n.ticks.length,a=Math.min(t,i-1),r=n._startPixel,o=n._endPixel,s=1e-6,l=n.getPixelForTick(a),c;if(!(e&&(i===1?c=Math.max(l-r,o-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(a-1))/2,l+=a<t?c:-c,l<r-s||l>o+s)))return l}function VD(n,t){Oe(n,e=>{let i=e.gc,a=i.length/2,r;if(a>t){for(r=0;r<a;++r)delete e.data[i[r]];i.splice(0,a)}})}function Lo(n){return n.drawTicks?n.tickLength:0}function Jb(n,t){if(!n.display)return 0;let e=it(n.font,t),i=_t(n.padding);return(Fe(n.text)?n.text.length:1)*e.lineHeight+i.height}function BD(n,t){return ln(n,{scale:t,type:"scale"})}function zD(n,t,e){return ln(n,{tick:e,index:t,type:"tick"})}function jD(n,t,e){let i=cc(n);return(e&&t!=="right"||!e&&t==="right")&&(i=ND(i)),i}function HD(n,t,e,i){let{top:a,left:r,bottom:o,right:s,chart:l}=n,{chartArea:c,scales:d}=l,h=0,u,p,g,b=o-a,v=s-r;if(n.isHorizontal()){if(p=gt(i,r,s),ge(e)){let x=Object.keys(e)[0],w=e[x];g=d[x].getPixelForValue(w)+b-t}else e==="center"?g=(c.bottom+c.top)/2+b-t:g=Qb(n,e,t);u=s-r}else{if(ge(e)){let x=Object.keys(e)[0],w=e[x];p=d[x].getPixelForValue(w)-v+t}else e==="center"?p=(c.left+c.right)/2-v+t:p=Qb(n,e,t);g=gt(i,o,a),h=e==="left"?-Qe:Qe}return{titleX:p,titleY:g,maxWidth:u,rotation:h}}var Pa=class n extends Si{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:a}=this;return t=Vt(t,Number.POSITIVE_INFINITY),e=Vt(e,Number.NEGATIVE_INFINITY),i=Vt(i,Number.POSITIVE_INFINITY),a=Vt(a,Number.NEGATIVE_INFINITY),{min:Vt(t,i),max:Vt(e,a),minDefined:Ye(t),maxDefined:Ye(e)}}getMinMax(t){let{min:e,max:i,minDefined:a,maxDefined:r}=this.getUserBounds(),o;if(a&&r)return{min:e,max:i};let s=this.getMatchingVisibleMetas();for(let l=0,c=s.length;l<c;++l)o=s[l].controller.getMinMax(this,t),a||(e=Math.min(e,o.min)),r||(i=Math.max(i,o.max));return e=r&&e>i?i:e,i=a&&e>i?e:i,{min:Vt(e,Vt(i,e)),max:Vt(i,Vt(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ae(this.options.beforeUpdate,[this])}update(t,e,i){let{beginAtZero:a,grace:r,ticks:o}=this.options,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=wb(this,r,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=s<this.ticks.length;this._convertTicksToLabels(l?Zb(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=kD(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ae(this.options.afterUpdate,[this])}beforeSetDimensions(){Ae(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ae(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ae(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ae(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,i,a,r;for(i=0,a=t.length;i<a;i++)r=t[i],r.label=Ae(e.callback,[r.value,i,t],this)}afterTickToLabelConversion(){Ae(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ae(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,i=Xb(this.ticks.length,t.ticks.maxTicksLimit),a=e.minRotation||0,r=e.maxRotation,o=a,s,l,c;if(!this._isVisible()||!e.display||a>=r||i<=1||!this.isHorizontal()){this.labelRotation=a;return}let d=this._getLabelSizes(),h=d.widest.width,u=d.highest.height,p=rt(this.chart.width-h,0,this.maxWidth);s=t.offset?this.maxWidth/i:p/(i-1),h+6>s&&(s=p/(i-(t.offset?.5:1)),l=this.maxHeight-Lo(t.grid)-e.padding-Jb(t.title,this.chart.options.font),c=Math.sqrt(h*h+u*u),o=sc(Math.min(Math.asin(rt((d.highest.height+6)/s,-1,1)),Math.asin(rt(l/c,-1,1))-Math.asin(rt(u/c,-1,1)))),o=Math.max(a,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ae(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ae(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:i,title:a,grid:r}}=this,o=this._isVisible(),s=this.isHorizontal();if(o){let l=Jb(a,e.options.font);if(s?(t.width=this.maxWidth,t.height=Lo(r)+l):(t.height=this.maxHeight,t.width=Lo(r)+l),i.display&&this.ticks.length){let{first:c,last:d,widest:h,highest:u}=this._getLabelSizes(),p=i.padding*2,g=fi(this.labelRotation),b=Math.cos(g),v=Math.sin(g);if(s){let x=i.mirror?0:v*h.width+b*u.height;t.height=Math.min(this.maxHeight,t.height+x+p)}else{let x=i.mirror?0:b*h.width+v*u.height;t.width=Math.min(this.maxWidth,t.width+x+p)}this._calculatePadding(c,d,v,b)}}this._handleMargins(),s?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,a){let{ticks:{align:r,padding:o},position:s}=this.options,l=this.labelRotation!==0,c=s!=="top"&&this.axis==="x";if(this.isHorizontal()){let d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),u=0,p=0;l?c?(u=a*t.width,p=i*e.height):(u=i*t.height,p=a*e.width):r==="start"?p=e.width:r==="end"?u=t.width:r!=="inner"&&(u=t.width/2,p=e.width/2),this.paddingLeft=Math.max((u-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let d=e.height/2,h=t.height/2;r==="start"?(d=0,h=t.height):r==="end"&&(d=e.height,h=0),this.paddingTop=d+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ae(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)fe(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,i=this.ticks;e<i.length&&(i=Zb(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){let{ctx:a,_longestTextCache:r}=this,o=[],s=[],l=Math.floor(e/Xb(e,i)),c=0,d=0,h,u,p,g,b,v,x,w,S,P,M;for(h=0;h<e;h+=l){if(g=t[h].label,b=this._resolveTickFontOptions(h),a.font=v=b.string,x=r[v]=r[v]||{data:{},gc:[]},w=b.lineHeight,S=P=0,!fe(g)&&!Fe(g))S=Oo(a,x.data,x.gc,S,g),P=w;else if(Fe(g))for(u=0,p=g.length;u<p;++u)M=g[u],!fe(M)&&!Fe(M)&&(S=Oo(a,x.data,x.gc,S,M),P+=w);o.push(S),s.push(P),c=Math.max(S,c),d=Math.max(P,d)}VD(r,e);let E=o.indexOf(c),R=s.indexOf(d),O=N=>({width:o[N]||0,height:s[N]||0});return{first:O(0),last:O(e-1),widest:O(E),highest:O(R),widths:o,heights:s}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return ub(this._alignToPixels?Fn(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let i=e[t];return i.$context||(i.$context=zD(this.getContext(),t,i))}return this.$context||(this.$context=BD(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,e=fi(this.labelRotation),i=Math.abs(Math.cos(e)),a=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,s=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>s*a?s/i:l/a:l*a<s*i?l/i:s/a}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,i=this.chart,a=this.options,{grid:r,position:o,border:s}=a,l=r.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),u=Lo(r),p=[],g=s.setContext(this.getContext()),b=g.display?g.width:0,v=b/2,x=function(T){return Fn(i,T,b)},w,S,P,M,E,R,O,N,ne,oe,se,Xe;if(o==="top")w=x(this.bottom),R=this.bottom-u,N=w-v,oe=x(t.top)+v,Xe=t.bottom;else if(o==="bottom")w=x(this.top),oe=t.top,Xe=x(t.bottom)-v,R=w+v,N=this.top+u;else if(o==="left")w=x(this.right),E=this.right-u,O=w-v,ne=x(t.left)+v,se=t.right;else if(o==="right")w=x(this.left),ne=t.left,se=x(t.right)-v,E=w+v,O=this.left+u;else if(e==="x"){if(o==="center")w=x((t.top+t.bottom)/2+.5);else if(ge(o)){let T=Object.keys(o)[0],F=o[T];w=x(this.chart.scales[T].getPixelForValue(F))}oe=t.top,Xe=t.bottom,R=w+v,N=R+u}else if(e==="y"){if(o==="center")w=x((t.left+t.right)/2);else if(ge(o)){let T=Object.keys(o)[0],F=o[T];w=x(this.chart.scales[T].getPixelForValue(F))}E=w-v,O=E-u,ne=t.left,se=t.right}let yt=re(a.ticks.maxTicksLimit,h),we=Math.max(1,Math.ceil(h/yt));for(S=0;S<h;S+=we){let T=this.getContext(S),F=r.setContext(T),B=s.setContext(T),J=F.lineWidth,Le=F.color,kt=B.dash||[],Je=B.dashOffset,Rt=F.tickWidth,Me=F.tickColor,un=F.tickBorderDash||[],qi=F.tickBorderDashOffset;P=LD(this,S,l),P!==void 0&&(M=Fn(i,P,J),c?E=O=ne=se=M:R=N=oe=Xe=M,p.push({tx1:E,ty1:R,tx2:O,ty2:N,x1:ne,y1:oe,x2:se,y2:Xe,width:J,color:Le,borderDash:kt,borderDashOffset:Je,tickWidth:Rt,tickColor:Me,tickBorderDash:un,tickBorderDashOffset:qi}))}return this._ticksLength=h,this._borderValue=w,p}_computeLabelItems(t){let e=this.axis,i=this.options,{position:a,ticks:r}=i,o=this.isHorizontal(),s=this.ticks,{align:l,crossAlign:c,padding:d,mirror:h}=r,u=Lo(i.grid),p=u+d,g=h?-d:p,b=-fi(this.labelRotation),v=[],x,w,S,P,M,E,R,O,N,ne,oe,se,Xe="middle";if(a==="top")E=this.bottom-g,R=this._getXAxisLabelAlignment();else if(a==="bottom")E=this.top+g,R=this._getXAxisLabelAlignment();else if(a==="left"){let we=this._getYAxisLabelAlignment(u);R=we.textAlign,M=we.x}else if(a==="right"){let we=this._getYAxisLabelAlignment(u);R=we.textAlign,M=we.x}else if(e==="x"){if(a==="center")E=(t.top+t.bottom)/2+p;else if(ge(a)){let we=Object.keys(a)[0],T=a[we];E=this.chart.scales[we].getPixelForValue(T)+p}R=this._getXAxisLabelAlignment()}else if(e==="y"){if(a==="center")M=(t.left+t.right)/2-p;else if(ge(a)){let we=Object.keys(a)[0],T=a[we];M=this.chart.scales[we].getPixelForValue(T)}R=this._getYAxisLabelAlignment(u).textAlign}e==="y"&&(l==="start"?Xe="top":l==="end"&&(Xe="bottom"));let yt=this._getLabelSizes();for(x=0,w=s.length;x<w;++x){S=s[x],P=S.label;let we=r.setContext(this.getContext(x));O=this.getPixelForTick(x)+r.labelOffset,N=this._resolveTickFontOptions(x),ne=N.lineHeight,oe=Fe(P)?P.length:1;let T=oe/2,F=we.color,B=we.textStrokeColor,J=we.textStrokeWidth,Le=R;o?(M=O,R==="inner"&&(x===w-1?Le=this.options.reverse?"left":"right":x===0?Le=this.options.reverse?"right":"left":Le="center"),a==="top"?c==="near"||b!==0?se=-oe*ne+ne/2:c==="center"?se=-yt.highest.height/2-T*ne+ne:se=-yt.highest.height+ne/2:c==="near"||b!==0?se=ne/2:c==="center"?se=yt.highest.height/2-T*ne:se=yt.highest.height-oe*ne,h&&(se*=-1),b!==0&&!we.showLabelBackdrop&&(M+=ne/2*Math.sin(b))):(E=O,se=(1-oe)*ne/2);let kt;if(we.showLabelBackdrop){let Je=_t(we.backdropPadding),Rt=yt.heights[x],Me=yt.widths[x],un=se-Je.top,qi=0-Je.left;switch(Xe){case"middle":un-=Rt/2;break;case"bottom":un-=Rt;break}switch(R){case"center":qi-=Me/2;break;case"right":qi-=Me;break;case"inner":x===w-1?qi-=Me:x>0&&(qi-=Me/2);break}kt={left:qi,top:un,width:Me+Je.width,height:Rt+Je.height,color:we.backdropColor}}v.push({label:P,font:N,textOffset:se,options:{rotation:b,color:F,strokeColor:B,strokeWidth:J,textAlign:Le,textBaseline:Xe,translation:[M,E],backdrop:kt}})}return v}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-fi(this.labelRotation))return t==="top"?"left":"right";let a="center";return e.align==="start"?a="left":e.align==="end"?a="right":e.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:i,mirror:a,padding:r}}=this.options,o=this._getLabelSizes(),s=t+r,l=o.widest.width,c,d;return e==="left"?a?(d=this.right+r,i==="near"?c="left":i==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-s,i==="near"?c="right":i==="center"?(c="center",d-=l/2):(c="left",d=this.left)):e==="right"?a?(d=this.left+r,i==="near"?c="right":i==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+s,i==="near"?c="left":i==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:i,top:a,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,a,r,o),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let a=this.ticks.findIndex(r=>r.value===t);return a>=0?e.setContext(this.getContext(a)).lineWidth:0}drawGrid(t){let e=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),r,o,s=(l,c,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(r=0,o=a.length;r<o;++r){let l=a[r];e.drawOnChartArea&&s({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&s({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{border:i,grid:a}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;let s=a.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,d,h,u;this.isHorizontal()?(c=Fn(t,this.left,o)-o/2,d=Fn(t,this.right,s)+s/2,h=u=l):(h=Fn(t,this.top,o)-o/2,u=Fn(t,this.bottom,s)+s/2,c=d=l),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(c,h),e.lineTo(d,u),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let i=this.ctx,a=this._computeLabelArea();a&&To(i,a);let r=this.getLabelItems(t);for(let o of r){let s=o.options,l=o.font,c=o.label,d=o.textOffset;Nn(i,c,0,d,l,s)}a&&Ro(i)}drawTitle(){let{ctx:t,options:{position:e,title:i,reverse:a}}=this;if(!i.display)return;let r=it(i.font),o=_t(i.padding),s=i.align,l=r.lineHeight/2;e==="bottom"||e==="center"||ge(e)?(l+=o.bottom,Fe(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;let{titleX:c,titleY:d,maxWidth:h,rotation:u}=HD(this,l,e,s);Nn(t,i.text,0,0,r,{color:i.color,maxWidth:h,rotation:u,textAlign:jD(s,e,a),textBaseline:"middle",translation:[c,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,i=re(t.grid&&t.grid.z,-1),a=re(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[],r,o;for(r=0,o=e.length;r<o;++r){let s=e[r];s[i]===this.id&&(!t||s.type===t)&&a.push(s)}return a}_resolveTickFontOptions(t){let e=this.options.ticks.setContext(this.getContext(t));return it(e.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},xr=class{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),i;$D(e)&&(i=this.register(e));let a=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in a||(a[r]=t,UD(t,o,i),this.override&&Te.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){let e=this.items,i=t.id,a=this.scope;i in e&&delete e[i],a&&i in Te[a]&&(delete Te[a][i],this.override&&delete In[i])}};function UD(n,t,e){let i=ur(Object.create(null),[e?Te.get(e):{},Te.get(t),n.defaults]);Te.set(t,i),n.defaultRoutes&&WD(t,n.defaultRoutes),n.descriptors&&Te.describe(t,n.descriptors)}function WD(n,t){Object.keys(t).forEach(e=>{let i=e.split("."),a=i.pop(),r=[n].concat(i).join("."),o=t[e].split("."),s=o.pop(),l=o.join(".");Te.route(r,a,l,s)})}function $D(n){return"id"in n&&"defaults"in n}var cp=class{constructor(){this.controllers=new xr(zn,"datasets",!0),this.elements=new xr(Si,"elements"),this.plugins=new xr(Object,"plugins"),this.scales=new xr(Pa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(a=>{let r=i||this._getRegistryForType(a);i||r.isForType(a)||r===this.plugins&&a.id?this._exec(t,r,a):Oe(a,o=>{let s=i||this._getRegistryForType(o);this._exec(t,s,o)})})}_exec(t,e,i){let a=oc(t);Ae(i["before"+a],[],i),e[t](i),Ae(i["after"+a],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){let a=e.get(t);if(a===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return a}},Hi=new cp,dp=class{constructor(){this._init=void 0}notify(t,e,i,a){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;let r=a?this._descriptors(t).filter(a):this._descriptors(t),o=this._notify(r,t,e,i);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,e,i,a){a=a||{};for(let r of t){let o=r.plugin,s=o[i],l=[e,a,r.options];if(Ae(s,l,o)===!1&&a.cancelable)return!1}return!0}invalidate(){fe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let i=t&&t.config,a=re(i.options&&i.options.plugins,{}),r=YD(i);return a===!1&&!e?[]:KD(t,r,a,e)}_notifyStateChanges(t){let e=this._oldCache||[],i=this._cache,a=(r,o)=>r.filter(s=>!o.some(l=>s.plugin.id===l.plugin.id));this._notify(a(e,i),t,"stop"),this._notify(a(i,e),t,"start")}};function YD(n){let t={},e=[],i=Object.keys(Hi.plugins.items);for(let r=0;r<i.length;r++)e.push(Hi.getPlugin(i[r]));let a=n.plugins||[];for(let r=0;r<a.length;r++){let o=a[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function qD(n,t){return!t&&n===!1?null:n===!0?{}:n}function KD(n,{plugins:t,localIds:e},i,a){let r=[],o=n.getContext();for(let s of t){let l=s.id,c=qD(i[l],a);c!==null&&r.push({plugin:s,options:GD(n.config,{plugin:s,local:e[l]},c,o)})}return r}function GD(n,{plugin:t,local:e},i,a){let r=n.pluginScopeKeys(t),o=n.getOptionScopes(i,r);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function hp(n,t){let e=Te.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function QD(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function XD(n,t){return n===t?"_index_":"_value_"}function ey(n){if(n==="x"||n==="y"||n==="r")return n}function ZD(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function up(n,...t){if(ey(n))return n;for(let e of t){let i=e.axis||ZD(e.position)||n.length>1&&ey(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function ty(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function JD(n,t){if(t.data&&t.data.datasets){let e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return ty(n,"x",e[0])||ty(n,"y",e[0])}return{}}function e1(n,t){let e=In[n.type]||{scales:{}},i=t.scales||{},a=hp(n.type,t),r=Object.create(null);return Object.keys(i).forEach(o=>{let s=i[o];if(!ge(s))return console.error(`Invalid scale configuration for scale: ${o}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let l=up(o,s,JD(o,n),Te.scales[s.type]),c=XD(l,a),d=e.scales||{};r[o]=mr(Object.create(null),[{axis:l},s,d[l],d[c]])}),n.data.datasets.forEach(o=>{let s=o.type||n.type,l=o.indexAxis||hp(s,t),d=(In[s]||{}).scales||{};Object.keys(d).forEach(h=>{let u=QD(h,l),p=o[u+"AxisID"]||u;r[p]=r[p]||Object.create(null),mr(r[p],[{axis:u},i[p],d[h]])})}),Object.keys(r).forEach(o=>{let s=r[o];mr(s,[Te.scales[s.type],Te.scale])}),r}function Hy(n){let t=n.options||(n.options={});t.plugins=re(t.plugins,{}),t.scales=e1(n,t)}function Uy(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function t1(n){return n=n||{},n.data=Uy(n.data),Hy(n),n}var iy=new Map,Wy=new Set;function yc(n,t){let e=iy.get(n);return e||(e=t(),iy.set(n,e),Wy.add(e)),e}var Vo=(n,t,e)=>{let i=sn(t,e);i!==void 0&&n.add(i)},pp=class{constructor(t){this._config=t1(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Uy(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),Hy(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return yc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return yc(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return yc(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,i=this.type;return yc(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let i=this._scopeCache,a=i.get(t);return(!a||e)&&(a=new Map,i.set(t,a)),a}getOptionScopes(t,e,i){let{options:a,type:r}=this,o=this._cachedScopes(t,i),s=o.get(e);if(s)return s;let l=new Set;e.forEach(d=>{t&&(l.add(t),d.forEach(h=>Vo(l,t,h))),d.forEach(h=>Vo(l,a,h)),d.forEach(h=>Vo(l,In[r]||{},h)),d.forEach(h=>Vo(l,Te,h)),d.forEach(h=>Vo(l,dc,h))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Wy.has(e)&&o.set(e,c),c}chartOptionScopes(){let{options:t,type:e}=this;return[t,In[e]||{},Te.datasets[e]||{},{type:e},Te,dc]}resolveNamedOptions(t,e,i,a=[""]){let r={$shared:!0},{resolver:o,subPrefixes:s}=ny(this._resolverCache,t,a),l=o;if(n1(o,e)){r.$shared=!1,i=rn(i)?i():i;let c=this.createResolver(t,i,s);l=xa(o,i,c)}for(let c of e)r[c]=l[c];return r}createResolver(t,e,i=[""],a){let{resolver:r}=ny(this._resolverCache,t,i);return ge(e)?xa(r,e,void 0,a):r}};function ny(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));let a=e.join(),r=i.get(a);return r||(r={resolver:pc(t,e),subPrefixes:e.filter(s=>!s.toLowerCase().includes("hover"))},i.set(a,r)),r}var i1=n=>ge(n)&&Object.getOwnPropertyNames(n).some(t=>rn(n[t]));function n1(n,t){let{isScriptable:e,isIndexable:i}=Nu(n);for(let a of t){let r=e(a),o=i(a),s=(o||r)&&n[a];if(r&&(rn(s)||i1(s))||o&&Fe(s))return!0}return!1}var a1="4.5.1",r1=["top","bottom","left","right","chartArea"];function ay(n,t){return n==="top"||n==="bottom"||r1.indexOf(n)===-1&&t==="x"}function ry(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function oy(n){let t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Ae(e&&e.onComplete,[n],t)}function o1(n){let t=n.chart,e=t.options.animation;Ae(e&&e.onProgress,[n],t)}function $y(n){return mc()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var Mc={},sy=n=>{let t=$y(n);return Object.values(Mc).filter(e=>e.canvas===t).pop()};function s1(n,t,e){let i=Object.keys(n);for(let a of i){let r=+a;if(r>=t){let o=n[a];delete n[a],(e>0||r>t)&&(n[r+e]=o)}}}function l1(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}var Ac=(()=>{class n{static defaults=Te;static instances=Mc;static overrides=In;static registry=Hi;static version=a1;static getChart=sy;static register(...e){Hi.add(...e),ly()}static unregister(...e){Hi.remove(...e),ly()}constructor(e,i){let a=this.config=new pp(i),r=$y(e),o=sy(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let s=a.createResolver(a.chartOptionScopes(),this.getContext());this.platform=new(a.platform||OD(r)),this.platform.updateConfig(a);let l=this.platform.acquireContext(r,s.aspectRatio),c=l&&l.canvas,d=c&&c.height,h=c&&c.width;if(this.id=ob(),this.ctx=l,this.canvas=c,this.width=h,this.height=d,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new dp,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=_b(u=>this.update(u),s.resizeDelay||0),this._dataChanges=[],Mc[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}cn.listen(this,"complete",oy),cn.listen(this,"progress",o1),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:i},width:a,height:r,_aspectRatio:o}=this;return fe(e)?i&&o?o:r?a/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Hi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():zu(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ru(this.canvas,this.ctx),this}stop(){return cn.stop(this),this}resize(e,i){cn.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){let a=this.options,r=this.canvas,o=a.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,e,i,o),l=a.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,zu(this,l,!0)&&(this.notifyPlugins("resize",{size:s}),Ae(a.onResize,[this,s],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};Oe(i,(a,r)=>{a.id=r})}buildOrUpdateScales(){let e=this.options,i=e.scales,a=this.scales,r=Object.keys(a).reduce((s,l)=>(s[l]=!1,s),{}),o=[];i&&(o=o.concat(Object.keys(i).map(s=>{let l=i[s],c=up(s,l),d=c==="r",h=c==="x";return{options:l,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),Oe(o,s=>{let l=s.options,c=l.id,d=up(c,l),h=re(l.type,s.dtype);(l.position===void 0||ay(l.position,d)!==ay(s.dposition))&&(l.position=s.dposition),r[c]=!0;let u=null;if(c in a&&a[c].type===h)u=a[c];else{let p=Hi.getScale(h);u=new p({id:c,type:h,ctx:this.ctx,chart:this}),a[u.id]=u}u.init(l,e)}),Oe(r,(s,l)=>{s||delete a[l]}),Oe(a,s=>{Et.configure(this,s,s.options),Et.addBox(this,s)})}_updateMetasets(){let e=this._metasets,i=this.data.datasets.length,a=e.length;if(e.sort((r,o)=>r.index-o.index),a>i){for(let r=i;r<a;++r)this._destroyDatasetMeta(r);e.splice(i,a-i)}this._sortedMetasets=e.slice(0).sort(ry("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((a,r)=>{i.filter(o=>o===a._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){let e=[],i=this.data.datasets,a,r;for(this._removeUnreferencedMetasets(),a=0,r=i.length;a<r;a++){let o=i[a],s=this.getDatasetMeta(a),l=o.type||this.config.type;if(s.type&&s.type!==l&&(this._destroyDatasetMeta(a),s=this.getDatasetMeta(a)),s.type=l,s.indexAxis=o.indexAxis||hp(l,this.options),s.order=o.order||0,s.index=a,s.label=""+o.label,s.visible=this.isDatasetVisible(a),s.controller)s.controller.updateIndex(a),s.controller.linkScales();else{let c=Hi.getController(l),{datasetElementType:d,dataElementType:h}=Te.datasets[l];Object.assign(c,{dataElementType:Hi.getElement(h),datasetElementType:d&&Hi.getElement(d)}),s.controller=new c(this,a),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){Oe(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let i=this.config;i.update();let a=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!a.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let d=0,h=this.data.datasets.length;d<h;d++){let{controller:u}=this.getDatasetMeta(d),p=!r&&o.indexOf(u)===-1;u.buildOrUpdateElements(p),s=Math.max(+u.getMaxOverflow(),s)}s=this._minPadding=a.layout.autoPadding?s:0,this._updateLayout(s),r||Oe(o,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(ry("z","_idx"));let{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Oe(this.scales,e=>{Et.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,i=new Set(Object.keys(this._listeners)),a=new Set(e.events);(!vu(i,a)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(let{method:a,start:r,count:o}of i){let s=a==="_removeElements"?-o:o;s1(e,r,s)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let i=this.data.datasets.length,a=o=>new Set(e.filter(s=>s[0]===o).map((s,l)=>l+","+s.splice(1).join(","))),r=a(0);for(let o=1;o<i;o++)if(!vu(r,a(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Et.update(this,this.width,this.height,e);let i=this.chartArea,a=i.width<=0||i.height<=0;this._layers=[],Oe(this.boxes,r=>{a&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let i=0,a=this.data.datasets.length;i<a;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,a=this.data.datasets.length;i<a;++i)this._updateDataset(i,rn(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){let a=this.getDatasetMeta(e),r={meta:a,index:e,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(a.controller._update(i),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(cn.has(this)?this.attached&&!cn.running(this)&&cn.start(this):(this.draw(),oy({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:a,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(a,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let i=this._sortedMetasets,a=[],r,o;for(r=0,o=i.length;r<o;++r){let s=i[r];(!e||s.visible)&&a.push(s)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let i=this.ctx,a={meta:e,index:e.index,cancelable:!0},r=Yu(this,e);this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(r&&To(i,r),e.controller.draw(),r&&Ro(i),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(e){return Vi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,a,r){let o=dD.modes[i];return typeof o=="function"?o(this,e,a,r):[]}getDatasetMeta(e){let i=this.data.datasets[e],a=this._metasets,r=a.filter(o=>o&&o._dataset===i).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},a.push(r)),r}getContext(){return this.$context||(this.$context=ln(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let i=this.data.datasets[e];if(!i)return!1;let a=this.getDatasetMeta(e);return typeof a.hidden=="boolean"?!a.hidden:!i.hidden}setDatasetVisibility(e,i){let a=this.getDatasetMeta(e);a.hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,a){let r=a?"show":"hide",o=this.getDatasetMeta(e),s=o.controller._resolveAnimations(void 0,r);fr(i)?(o.data[i].hidden=!a,this.update()):(this.setDatasetVisibility(e,a),s.update(o,{visible:a}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){let i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),cn.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ru(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Mc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,i=this.platform,a=(o,s)=>{i.addEventListener(this,o,s),e[o]=s},r=(o,s,l)=>{o.offsetX=s,o.offsetY=l,this._eventHandler(o)};Oe(this.options.events,o=>a(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,i=this.platform,a=(c,d)=>{i.addEventListener(this,c,d),e[c]=d},r=(c,d)=>{e[c]&&(i.removeEventListener(this,c,d),delete e[c])},o=(c,d)=>{this.canvas&&this.resize(c,d)},s,l=()=>{r("attach",l),this.attached=!0,this.resize(),a("resize",o),a("detach",s)};s=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),a("attach",l)},i.isAttached(this.canvas)?l():s()}unbindEvents(){Oe(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},Oe(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,a){let r=a?"set":"remove",o,s,l,c;for(i==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){s=e[l];let d=s&&this.getDatasetMeta(s.datasetIndex).controller;d&&d[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let i=this._active||[],a=e.map(({datasetIndex:o,index:s})=>{let l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[s],index:s}});!ko(a,i)&&(this._active=a,this._lastEvent=null,this._updateHoverStyles(a,i))}notifyPlugins(e,i,a){return this._plugins.notify(this,e,i,a)}isPluginEnabled(e){return this._plugins._cache.filter(i=>i.plugin.id===e).length===1}_updateHoverStyles(e,i,a){let r=this.options.hover,o=(c,d)=>c.filter(h=>!d.some(u=>h.datasetIndex===u.datasetIndex&&h.index===u.index)),s=o(i,e),l=a?e:o(e,i);s.length&&this.updateHoverStyle(s,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,i){let a={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},r=s=>(s.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",a,r)===!1)return;let o=this._handleEvent(e,i,a.inChartArea);return a.cancelable=!1,this.notifyPlugins("afterEvent",a,r),(o||a.changed)&&this.render(),this}_handleEvent(e,i,a){let{_active:r=[],options:o}=this,s=i,l=this._getActiveElements(e,r,a,s),c=cb(e),d=l1(e,this._lastEvent,a,c);a&&(this._lastEvent=null,Ae(o.onHover,[e,l,this],this),c&&Ae(o.onClick,[e,l,this],this));let h=!ko(l,r);return(h||i)&&(this._active=l,this._updateHoverStyles(l,r,i)),this._lastEvent=d,h}_getActiveElements(e,i,a,r){if(e.type==="mouseout")return[];if(!a)return i;let o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,r)}}return n})();function ly(){return Oe(Ac.instances,n=>n._plugins.invalidate())}function c1(n,t,e){let{startAngle:i,x:a,y:r,outerRadius:o,innerRadius:s,options:l}=t,{borderWidth:c,borderJoinStyle:d}=l,h=Math.min(c/o,ft(i-e));if(n.beginPath(),n.arc(a,r,o-c/2,i+h/2,e-h/2),s>0){let u=Math.min(c/s,ft(i-e));n.arc(a,r,s+c/2,e-u/2,i+u/2,!0)}else{let u=Math.min(c/2,o*ft(i-e));if(d==="round")n.arc(a,r,u,e-Ce/2,i+Ce/2,!0);else if(d==="bevel"){let p=2*u*u,g=-p*Math.cos(e+Ce/2)+a,b=-p*Math.sin(e+Ce/2)+r,v=p*Math.cos(i+Ce/2)+a,x=p*Math.sin(i+Ce/2)+r;n.lineTo(g,b),n.lineTo(v,x)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function d1(n,t,e){let{startAngle:i,pixelMargin:a,x:r,y:o,outerRadius:s,innerRadius:l}=t,c=a/s;n.beginPath(),n.arc(r,o,s,i-c,e+c),l>a?(c=a/l,n.arc(r,o,l,e+c,i-c,!0)):n.arc(r,o,a,e+Qe,i-Qe),n.closePath(),n.clip()}function h1(n){return uc(n,["outerStart","outerEnd","innerStart","innerEnd"])}function u1(n,t,e,i){let a=h1(n.options.borderRadius),r=(e-t)/2,o=Math.min(r,i*t/2),s=l=>{let c=(e-Math.min(r,l))*i/2;return rt(l,0,Math.min(r,c))};return{outerStart:s(a.outerStart),outerEnd:s(a.outerEnd),innerStart:rt(a.innerStart,0,o),innerEnd:rt(a.innerEnd,0,o)}}function Cr(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Ec(n,t,e,i,a,r){let{x:o,y:s,startAngle:l,pixelMargin:c,innerRadius:d}=t,h=Math.max(t.outerRadius+i+e-c,0),u=d>0?d+i+e+c:0,p=0,g=a-l;if(i){let we=d>0?d-i:0,T=h>0?h-i:0,F=(we+T)/2,B=F!==0?g*F/(F+i):g;p=(g-B)/2}let b=Math.max(.001,g*h-e/Ce)/h,v=(g-b)/2,x=l+v+p,w=a-v-p,{outerStart:S,outerEnd:P,innerStart:M,innerEnd:E}=u1(t,u,h,w-x),R=h-S,O=h-P,N=x+S/R,ne=w-P/O,oe=u+M,se=u+E,Xe=x+M/oe,yt=w-E/se;if(n.beginPath(),r){let we=(N+ne)/2;if(n.arc(o,s,h,N,we),n.arc(o,s,h,we,ne),P>0){let J=Cr(O,ne,o,s);n.arc(J.x,J.y,P,ne,w+Qe)}let T=Cr(se,w,o,s);if(n.lineTo(T.x,T.y),E>0){let J=Cr(se,yt,o,s);n.arc(J.x,J.y,E,w+Qe,yt+Math.PI)}let F=(w-E/u+(x+M/u))/2;if(n.arc(o,s,u,w-E/u,F,!0),n.arc(o,s,u,F,x+M/u,!0),M>0){let J=Cr(oe,Xe,o,s);n.arc(J.x,J.y,M,Xe+Math.PI,x-Qe)}let B=Cr(R,x,o,s);if(n.lineTo(B.x,B.y),S>0){let J=Cr(R,N,o,s);n.arc(J.x,J.y,S,x-Qe,N)}}else{n.moveTo(o,s);let we=Math.cos(N)*h+o,T=Math.sin(N)*h+s;n.lineTo(we,T);let F=Math.cos(ne)*h+o,B=Math.sin(ne)*h+s;n.lineTo(F,B)}n.closePath()}function p1(n,t,e,i,a){let{fullCircles:r,startAngle:o,circumference:s}=t,l=t.endAngle;if(r){Ec(n,t,e,i,l,a);for(let c=0;c<r;++c)n.fill();isNaN(s)||(l=o+(s%Ne||Ne))}return Ec(n,t,e,i,l,a),n.fill(),l}function m1(n,t,e,i,a){let{fullCircles:r,startAngle:o,circumference:s,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:h,borderDashOffset:u,borderRadius:p}=l,g=l.borderAlign==="inner";if(!c)return;n.setLineDash(h||[]),n.lineDashOffset=u,g?(n.lineWidth=c*2,n.lineJoin=d||"round"):(n.lineWidth=c,n.lineJoin=d||"bevel");let b=t.endAngle;if(r){Ec(n,t,e,i,b,a);for(let v=0;v<r;++v)n.stroke();isNaN(s)||(b=o+(s%Ne||Ne))}g&&d1(n,t,b),l.selfJoin&&b-o>=Ce&&p===0&&d!=="miter"&&c1(n,t,b),r||(Ec(n,t,e,i,b,a),n.stroke())}var mp=class extends Si{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){let a=this.getProps(["x","y"],i),{angle:r,distance:o}=Mu(a,{x:t,y:e}),{startAngle:s,endAngle:l,innerRadius:c,outerRadius:d,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),u=(this.options.spacing+this.options.borderWidth)/2,p=re(h,l-s),g=_r(r,s,l)&&s!==l,b=p>=Ne||g,v=zi(o,c+u,d+u);return b&&v}getCenterPoint(t){let{x:e,y:i,startAngle:a,endAngle:r,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,d=(a+r)/2,h=(o+s+c+l)/2;return{x:e+Math.cos(d)*h,y:i+Math.sin(d)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:i}=this,a=(e.offset||0)/4,r=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=i>Ne?Math.floor(i/Ne):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let s=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(s)*a,Math.sin(s)*a);let l=1-Math.sin(Math.min(Ce,i||0)),c=a*l;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,p1(t,this,c,r,o),m1(t,this,c,r,o),t.restore()}};function Yy(n,t,e=t){n.lineCap=re(e.borderCapStyle,t.borderCapStyle),n.setLineDash(re(e.borderDash,t.borderDash)),n.lineDashOffset=re(e.borderDashOffset,t.borderDashOffset),n.lineJoin=re(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=re(e.borderWidth,t.borderWidth),n.strokeStyle=re(e.borderColor,t.borderColor)}function f1(n,t,e){n.lineTo(e.x,e.y)}function g1(n){return n.stepped?Cb:n.tension||n.cubicInterpolationMode==="monotone"?xb:f1}function qy(n,t,e={}){let i=n.length,{start:a=0,end:r=i-1}=e,{start:o,end:s}=t,l=Math.max(a,o),c=Math.min(r,s),d=a<o&&r<o||a>s&&r>s;return{count:i,start:l,loop:t.loop,ilen:c<l&&!d?i+c-l:c-l}}function _1(n,t,e,i){let{points:a,options:r}=t,{count:o,start:s,loop:l,ilen:c}=qy(a,e,i),d=g1(r),{move:h=!0,reverse:u}=i||{},p,g,b;for(p=0;p<=c;++p)g=a[(s+(u?c-p:p))%o],!g.skip&&(h?(n.moveTo(g.x,g.y),h=!1):d(n,b,g,u,r.stepped),b=g);return l&&(g=a[(s+(u?c:0))%o],d(n,b,g,u,r.stepped)),!!l}function b1(n,t,e,i){let a=t.points,{count:r,start:o,ilen:s}=qy(a,e,i),{move:l=!0,reverse:c}=i||{},d=0,h=0,u,p,g,b,v,x,w=P=>(o+(c?s-P:P))%r,S=()=>{b!==v&&(n.lineTo(d,v),n.lineTo(d,b),n.lineTo(d,x))};for(l&&(p=a[w(0)],n.moveTo(p.x,p.y)),u=0;u<=s;++u){if(p=a[w(u)],p.skip)continue;let P=p.x,M=p.y,E=P|0;E===g?(M<b?b=M:M>v&&(v=M),d=(h*d+P)/++h):(S(),n.lineTo(P,M),g=E,h=0,b=v=M),x=M}S()}function fp(n){let t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?b1:_1}function y1(n){return n.stepped?Ab:n.tension||n.cubicInterpolationMode==="monotone"?Tb:Tn}function v1(n,t,e,i){let a=t._path;a||(a=t._path=new Path2D,t.path(a,e,i)&&a.closePath()),Yy(n,t.options),n.stroke(a)}function C1(n,t,e,i){let{segments:a,options:r}=t,o=fp(t);for(let s of a)Yy(n,r,s.style),n.beginPath(),o(n,t,s,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}var x1=typeof Path2D=="function";function w1(n,t,e,i){x1&&!t.options.segment?v1(n,t,e,i):C1(n,t,e,i)}var Tc=(()=>{class n extends Si{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){let a=this.options;if((a.tension||a.cubicInterpolationMode==="monotone")&&!a.stepped&&!this._pointsUpdated){let r=a.spanGaps?this._loop:this._fullLoop;Eb(this._points,a,e,r,i),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Ib(this,this.options.segment))}first(){let e=this.segments,i=this.points;return e.length&&i[e[0].start]}last(){let e=this.segments,i=this.points,a=e.length;return a&&i[e[a-1].end]}interpolate(e,i){let a=this.options,r=e[i],o=this.points,s=$u(this,{property:i,start:r,end:r});if(!s.length)return;let l=[],c=y1(a),d,h;for(d=0,h=s.length;d<h;++d){let{start:u,end:p}=s[d],g=o[u],b=o[p];if(g===b){l.push(g);continue}let v=Math.abs((r-g[i])/(b[i]-g[i])),x=c(g,b,v,a.stepped);x[i]=e[i],l.push(x)}return l.length===1?l[0]:l}pathSegment(e,i,a){return fp(this)(e,this,i,a)}path(e,i,a){let r=this.segments,o=fp(this),s=this._loop;i=i||0,a=a||this.points.length-i;for(let l of r)s&=o(e,this,l,{start:i,end:i+a-1});return!!s}draw(e,i,a,r){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),w1(e,this,a,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function cy(n,t,e,i){let a=n.options,{[e]:r}=n.getProps([e],i);return Math.abs(t-r)<a.radius+a.hitRadius}var M1=(()=>{class n extends Si{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,a){let r=this.options,{x:o,y:s}=this.getProps(["x","y"],a);return Math.pow(e-o,2)+Math.pow(i-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,i){return cy(this,e,"x",i)}inYRange(e,i){return cy(this,e,"y",i)}getCenterPoint(e){let{x:i,y:a}=this.getProps(["x","y"],e);return{x:i,y:a}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);let a=i&&e.borderWidth||0;return(i+a)*2}draw(e,i){let a=this.options;this.skip||a.radius<.1||!Vi(this,i,this.size(a)/2)||(e.strokeStyle=a.borderColor,e.lineWidth=a.borderWidth,e.fillStyle=a.backgroundColor,hc(e,a,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}return n})();function Ky(n,t){let{x:e,y:i,base:a,width:r,height:o}=n.getProps(["x","y","base","width","height"],t),s,l,c,d,h;return n.horizontal?(h=o/2,s=Math.min(e,a),l=Math.max(e,a),c=i-h,d=i+h):(h=r/2,s=e-h,l=e+h,c=Math.min(i,a),d=Math.max(i,a)),{left:s,top:c,right:l,bottom:d}}function Bn(n,t,e,i){return n?0:rt(t,e,i)}function S1(n,t,e){let i=n.options.borderWidth,a=n.borderSkipped,r=Fu(i);return{t:Bn(a.top,r.top,0,e),r:Bn(a.right,r.right,0,t),b:Bn(a.bottom,r.bottom,0,e),l:Bn(a.left,r.left,0,t)}}function D1(n,t,e){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),a=n.options.borderRadius,r=Ln(a),o=Math.min(t,e),s=n.borderSkipped,l=i||ge(a);return{topLeft:Bn(!l||s.top||s.left,r.topLeft,0,o),topRight:Bn(!l||s.top||s.right,r.topRight,0,o),bottomLeft:Bn(!l||s.bottom||s.left,r.bottomLeft,0,o),bottomRight:Bn(!l||s.bottom||s.right,r.bottomRight,0,o)}}function P1(n){let t=Ky(n),e=t.right-t.left,i=t.bottom-t.top,a=S1(n,e/2,i/2),r=D1(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:r},inner:{x:t.left+a.l,y:t.top+a.t,w:e-a.l-a.r,h:i-a.t-a.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,r.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(a.b,a.r))}}}}function ep(n,t,e,i){let a=t===null,r=e===null,s=n&&!(a&&r)&&Ky(n,i);return s&&(a||zi(t,s.left,s.right))&&(r||zi(e,s.top,s.bottom))}function E1(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function O1(n,t){n.rect(t.x,t.y,t.w,t.h)}function tp(n,t,e={}){let i=n.x!==e.x?-t:0,a=n.y!==e.y?-t:0,r=(n.x+n.w!==e.x+e.w?t:0)-i,o=(n.y+n.h!==e.y+e.h?t:0)-a;return{x:n.x+i,y:n.y+a,w:n.w+r,h:n.h+o,radius:n.radius}}var gp=class extends Si{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:e,options:{borderColor:i,backgroundColor:a}}=this,{inner:r,outer:o}=P1(this),s=E1(o.radius)?yr:O1;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),s(t,tp(o,e,r)),t.clip(),s(t,tp(r,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),s(t,tp(r,e)),t.fillStyle=a,t.fill(),t.restore()}inRange(t,e,i){return ep(this,t,e,i)}inXRange(t,e){return ep(this,t,null,e)}inYRange(t,e){return ep(this,null,t,e)}getCenterPoint(t){let{x:e,y:i,base:a,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+a)/2:e,y:r?i:(i+a)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}},k1=Object.freeze({__proto__:null,ArcElement:mp,BarElement:gp,LineElement:Tc,PointElement:M1}),_p=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],dy=_p.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function Gy(n){return _p[n%_p.length]}function Qy(n){return dy[n%dy.length]}function A1(n,t){return n.borderColor=Gy(t),n.backgroundColor=Qy(t),++t}function T1(n,t){return n.backgroundColor=n.data.map(()=>Gy(t++)),t}function R1(n,t){return n.backgroundColor=n.data.map(()=>Qy(t++)),t}function I1(n){let t=0;return(e,i)=>{let a=n.getDatasetMeta(i).controller;a instanceof Sp?t=T1(e,t):a instanceof Ly?t=R1(e,t):a&&(t=A1(e,t))}}function hy(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function F1(n){return n&&(n.borderColor||n.backgroundColor)}function N1(){return Te.borderColor!=="rgba(0,0,0,0.1)"||Te.backgroundColor!=="rgba(0,0,0,0.1)"}var L1={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;let{data:{datasets:i},options:a}=n.config,{elements:r}=a,o=hy(i)||F1(a)||r&&hy(r)||N1();if(!e.forceOverride&&o)return;let s=I1(n);i.forEach(s)}};function V1(n,t,e,i,a){let r=a.samples||i;if(r>=e)return n.slice(t,t+e);let o=[],s=(e-2)/(r-2),l=0,c=t+e-1,d=t,h,u,p,g,b;for(o[l++]=n[d],h=0;h<r-2;h++){let v=0,x=0,w,S=Math.floor((h+1)*s)+1+t,P=Math.min(Math.floor((h+2)*s)+1,e)+t,M=P-S;for(w=S;w<P;w++)v+=n[w].x,x+=n[w].y;v/=M,x/=M;let E=Math.floor(h*s)+1+t,R=Math.min(Math.floor((h+1)*s)+1,e)+t,{x:O,y:N}=n[d];for(p=g=-1,w=E;w<R;w++)g=.5*Math.abs((O-v)*(n[w].y-N)-(O-n[w].x)*(x-N)),g>p&&(p=g,u=n[w],b=w);o[l++]=u,d=b}return o[l++]=n[c],o}function B1(n,t,e,i){let a=0,r=0,o,s,l,c,d,h,u,p,g,b,v=[],x=t+e-1,w=n[t].x,P=n[x].x-w;for(o=t;o<t+e;++o){s=n[o],l=(s.x-w)/P*i,c=s.y;let M=l|0;if(M===d)c<g?(g=c,h=o):c>b&&(b=c,u=o),a=(r*a+s.x)/++r;else{let E=o-1;if(!fe(h)&&!fe(u)){let R=Math.min(h,u),O=Math.max(h,u);R!==p&&R!==E&&v.push(_e(A({},n[R]),{x:a})),O!==p&&O!==E&&v.push(_e(A({},n[O]),{x:a}))}o>0&&E!==p&&v.push(n[E]),v.push(s),d=M,r=0,g=b=c,h=u=p=o}}return v}function Xy(n){if(n._decimated){let t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function uy(n){n.data.datasets.forEach(t=>{Xy(t)})}function z1(n,t){let e=t.length,i=0,a,{iScale:r}=n,{min:o,max:s,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=rt(Li(t,r.axis,o).lo,0,e-1)),c?a=rt(Li(t,r.axis,s).hi+1,i,e)-i:a=e-i,{start:i,count:a}}var j1={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){uy(n);return}let i=n.width;n.data.datasets.forEach((a,r)=>{let{_data:o,indexAxis:s}=a,l=n.getDatasetMeta(r),c=o||a.data;if(vr([s,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let d=n.scales[l.xAxisID];if(d.type!=="linear"&&d.type!=="time"||n.options.parsing)return;let{start:h,count:u}=z1(l,c),p=e.threshold||4*i;if(u<=p){Xy(a);return}fe(o)&&(a._data=c,delete a.data,Object.defineProperty(a,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let g;switch(e.algorithm){case"lttb":g=V1(c,h,u,i,e);break;case"min-max":g=B1(c,h,u,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}a._decimated=g})},destroy(n){uy(n)}};function H1(n,t,e){let i=n.segments,a=n.points,r=t.points,o=[];for(let s of i){let{start:l,end:c}=s;c=Rc(l,c,a);let d=bp(e,a[l],a[c],s.loop);if(!t.segments){o.push({source:s,target:d,start:a[l],end:a[c]});continue}let h=$u(t,d);for(let u of h){let p=bp(e,r[u.start],r[u.end],u.loop),g=Wu(s,a,p);for(let b of g)o.push({source:b,target:u,start:{[e]:py(d,p,"start",Math.max)},end:{[e]:py(d,p,"end",Math.min)}})}}return o}function bp(n,t,e,i){if(i)return;let a=t[n],r=e[n];return n==="angle"&&(a=ft(a),r=ft(r)),{property:n,start:a,end:r}}function U1(n,t){let{x:e=null,y:i=null}=n||{},a=t.points,r=[];return t.segments.forEach(({start:o,end:s})=>{s=Rc(o,s,a);let l=a[o],c=a[s];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):e!==null&&(r.push({x:e,y:l.y}),r.push({x:e,y:c.y}))}),r}function Rc(n,t,e){for(;t>n;t--){let i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function py(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function Zy(n,t){let e=[],i=!1;return Fe(n)?(i=!0,e=n):e=U1(n,t),e.length?new Tc({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function my(n){return n&&n.fill!==!1}function W1(n,t,e){let a=n[t].fill,r=[t],o;if(!e)return a;for(;a!==!1&&r.indexOf(a)===-1;){if(!Ye(a))return a;if(o=n[a],!o)return!1;if(o.visible)return a;r.push(a),a=o.fill}return!1}function $1(n,t,e){let i=G1(n);if(ge(i))return isNaN(i.value)?!1:i;let a=parseFloat(i);return Ye(a)&&Math.floor(a)===a?Y1(i[0],t,a,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Y1(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function q1(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:ge(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function K1(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:ge(n)?i=n.value:i=t.getBaseValue(),i}function G1(n){let t=n.options,e=t.fill,i=re(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Q1(n){let{scale:t,index:e,line:i}=n,a=[],r=i.segments,o=i.points,s=X1(t,e);s.push(Zy({x:null,y:t.bottom},i));for(let l=0;l<r.length;l++){let c=r[l];for(let d=c.start;d<=c.end;d++)Z1(a,o[d],s)}return new Tc({points:a,options:{}})}function X1(n,t){let e=[],i=n.getMatchingVisibleMetas("line");for(let a=0;a<i.length;a++){let r=i[a];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function Z1(n,t,e){let i=[];for(let a=0;a<e.length;a++){let r=e[a],{first:o,last:s,point:l}=J1(r,t,"x");if(!(!l||o&&s)){if(o)i.unshift(l);else if(n.push(l),!s)break}}n.push(...i)}function J1(n,t,e){let i=n.interpolate(t,e);if(!i)return{};let a=i[e],r=n.segments,o=n.points,s=!1,l=!1;for(let c=0;c<r.length;c++){let d=r[c],h=o[d.start][e],u=o[d.end][e];if(zi(a,h,u)){s=a===h,l=a===u;break}}return{first:s,last:l,point:i}}var Oc=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){let{x:a,y:r,radius:o}=this;return e=e||{start:0,end:Ne},t.arc(a,r,o,e.end,e.start,!0),!i.bounds}interpolate(t){let{x:e,y:i,radius:a}=this,r=t.angle;return{x:e+Math.cos(r)*a,y:i+Math.sin(r)*a,angle:r}}};function eP(n){let{chart:t,fill:e,line:i}=n;if(Ye(e))return tP(t,e);if(e==="stack")return Q1(n);if(e==="shape")return!0;let a=iP(n);return a instanceof Oc?a:Zy(a,i)}function tP(n,t){let e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function iP(n){return(n.scale||{}).getPointPositionForValue?aP(n):nP(n)}function nP(n){let{scale:t={},fill:e}=n,i=q1(e,t);if(Ye(i)){let a=t.isHorizontal();return{x:a?i:null,y:a?null:i}}return null}function aP(n){let{scale:t,fill:e}=n,i=t.options,a=t.getLabels().length,r=i.reverse?t.max:t.min,o=K1(e,t,r),s=[];if(i.grid.circular){let l=t.getPointPositionForValue(0,r);return new Oc({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<a;++l)s.push(t.getPointPositionForValue(l,o));return s}function ip(n,t,e){let i=eP(t),{chart:a,index:r,line:o,scale:s,axis:l}=t,c=o.options,d=c.fill,h=c.backgroundColor,{above:u=h,below:p=h}=d||{},g=a.getDatasetMeta(r),b=Yu(a,g);i&&o.points.length&&(To(n,e),rP(n,{line:o,target:i,above:u,below:p,area:e,scale:s,axis:l,clip:b}),Ro(n))}function rP(n,t){let{line:e,target:i,above:a,below:r,area:o,scale:s,clip:l}=t,c=e._loop?"angle":t.axis;n.save();let d=r;r!==a&&(c==="x"?(fy(n,i,o.top),np(n,{line:e,target:i,color:a,scale:s,property:c,clip:l}),n.restore(),n.save(),fy(n,i,o.bottom)):c==="y"&&(gy(n,i,o.left),np(n,{line:e,target:i,color:r,scale:s,property:c,clip:l}),n.restore(),n.save(),gy(n,i,o.right),d=a)),np(n,{line:e,target:i,color:d,scale:s,property:c,clip:l}),n.restore()}function fy(n,t,e){let{segments:i,points:a}=t,r=!0,o=!1;n.beginPath();for(let s of i){let{start:l,end:c}=s,d=a[l],h=a[Rc(l,c,a)];r?(n.moveTo(d.x,d.y),r=!1):(n.lineTo(d.x,e),n.lineTo(d.x,d.y)),o=!!t.pathSegment(n,s,{move:o}),o?n.closePath():n.lineTo(h.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function gy(n,t,e){let{segments:i,points:a}=t,r=!0,o=!1;n.beginPath();for(let s of i){let{start:l,end:c}=s,d=a[l],h=a[Rc(l,c,a)];r?(n.moveTo(d.x,d.y),r=!1):(n.lineTo(e,d.y),n.lineTo(d.x,d.y)),o=!!t.pathSegment(n,s,{move:o}),o?n.closePath():n.lineTo(e,h.y)}n.lineTo(e,t.first().y),n.closePath(),n.clip()}function np(n,t){let{line:e,target:i,property:a,color:r,scale:o,clip:s}=t,l=H1(e,i,a);for(let{source:c,target:d,start:h,end:u}of l){let{style:{backgroundColor:p=r}={}}=c,g=i!==!0;n.save(),n.fillStyle=p,oP(n,o,s,g&&bp(a,h,u)),n.beginPath();let b=!!e.pathSegment(n,c),v;if(g){b?n.closePath():_y(n,i,u,a);let x=!!i.pathSegment(n,d,{move:b,reverse:!0});v=b&&x,v||_y(n,i,h,a)}n.closePath(),n.fill(v?"evenodd":"nonzero"),n.restore()}}function oP(n,t,e,i){let a=t.chart.chartArea,{property:r,start:o,end:s}=i||{};if(r==="x"||r==="y"){let l,c,d,h;r==="x"?(l=o,c=a.top,d=s,h=a.bottom):(l=a.left,c=o,d=a.right,h=s),n.beginPath(),e&&(l=Math.max(l,e.left),d=Math.min(d,e.right),c=Math.max(c,e.top),h=Math.min(h,e.bottom)),n.rect(l,c,d-l,h-c),n.clip()}}function _y(n,t,e,i){let a=t.interpolate(e,i);a&&n.lineTo(a.x,a.y)}var sP={id:"filler",afterDatasetsUpdate(n,t,e){let i=(n.data.datasets||[]).length,a=[],r,o,s,l;for(o=0;o<i;++o)r=n.getDatasetMeta(o),s=r.dataset,l=null,s&&s.options&&s instanceof Tc&&(l={visible:n.isDatasetVisible(o),index:o,fill:$1(s,o,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:s}),r.$filler=l,a.push(l);for(o=0;o<i;++o)l=a[o],!(!l||l.fill===!1)&&(l.fill=W1(a,o,e.propagate))},beforeDraw(n,t,e){let i=e.drawTime==="beforeDraw",a=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=a.length-1;o>=0;--o){let s=a[o].$filler;s&&(s.line.updateControlPoints(r,s.axis),i&&s.fill&&ip(n.ctx,s,r))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let a=i.length-1;a>=0;--a){let r=i[a].$filler;my(r)&&ip(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,t,e){let i=t.meta.$filler;!my(i)||e.drawTime!=="beforeDatasetDraw"||ip(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},by=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},lP=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index,kc=class extends Si{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=Ae(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,a)=>t.sort(i,a,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}let i=t.labels,a=it(i.font),r=a.size,o=this._computeTitleHeight(),{boxWidth:s,itemHeight:l}=by(i,r),c,d;e.font=a.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(o,r,s,l)+10):(d=this.maxHeight,c=this._fitCols(o,a,s,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,a){let{ctx:r,maxWidth:o,options:{labels:{padding:s}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=a+s,h=t;r.textAlign="left",r.textBaseline="middle";let u=-1,p=-d;return this.legendItems.forEach((g,b)=>{let v=i+e/2+r.measureText(g.text).width;(b===0||c[c.length-1]+v+2*s>o)&&(h+=d,c[c.length-(b>0?0:1)]=0,p+=d,u++),l[b]={left:0,top:p,row:u,width:v,height:a},c[c.length-1]+=v+s}),h}_fitCols(t,e,i,a){let{ctx:r,maxHeight:o,options:{labels:{padding:s}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=o-t,h=s,u=0,p=0,g=0,b=0;return this.legendItems.forEach((v,x)=>{let{itemWidth:w,itemHeight:S}=cP(i,e,r,v,a);x>0&&p+S+2*s>d&&(h+=u+s,c.push({width:u,height:p}),g+=u+s,b++,u=p=0),l[x]={left:g,top:p,col:b,width:w,height:S},u=Math.max(u,w),p+=S+s}),h+=u,c.push({width:u,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:a},rtl:r}}=this,o=Ma(r,this.left,this.width);if(this.isHorizontal()){let s=0,l=gt(i,this.left+a,this.right-this.lineWidths[s]);for(let c of e)s!==c.row&&(s=c.row,l=gt(i,this.left+a,this.right-this.lineWidths[s])),c.top+=this.top+t+a,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+a}else{let s=0,l=gt(i,this.top+t+a,this.bottom-this.columnSizes[s].height);for(let c of e)c.col!==s&&(s=c.col,l=gt(i,this.top+t+a,this.bottom-this.columnSizes[s].height)),c.top=l,c.left+=this.left+a,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;To(t,this),this._draw(),Ro(t)}}_draw(){let{options:t,columnSizes:e,lineWidths:i,ctx:a}=this,{align:r,labels:o}=t,s=Te.color,l=Ma(t.rtl,this.left,this.width),c=it(o.font),{padding:d}=o,h=c.size,u=h/2,p;this.drawTitle(),a.textAlign=l.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=c.string;let{boxWidth:g,boxHeight:b,itemHeight:v}=by(o,h),x=function(E,R,O){if(isNaN(g)||g<=0||isNaN(b)||b<0)return;a.save();let N=re(O.lineWidth,1);if(a.fillStyle=re(O.fillStyle,s),a.lineCap=re(O.lineCap,"butt"),a.lineDashOffset=re(O.lineDashOffset,0),a.lineJoin=re(O.lineJoin,"miter"),a.lineWidth=N,a.strokeStyle=re(O.strokeStyle,s),a.setLineDash(re(O.lineDash,[])),o.usePointStyle){let ne={radius:b*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:N},oe=l.xPlus(E,g/2),se=R+u;Iu(a,ne,oe,se,o.pointStyleWidth&&g)}else{let ne=R+Math.max((h-b)/2,0),oe=l.leftForLtr(E,g),se=Ln(O.borderRadius);a.beginPath(),Object.values(se).some(Xe=>Xe!==0)?yr(a,{x:oe,y:ne,w:g,h:b,radius:se}):a.rect(oe,ne,g,b),a.fill(),N!==0&&a.stroke()}a.restore()},w=function(E,R,O){Nn(a,O.text,E,R+v/2,c,{strikethrough:O.hidden,textAlign:l.textAlign(O.textAlign)})},S=this.isHorizontal(),P=this._computeTitleHeight();S?p={x:gt(r,this.left+d,this.right-i[0]),y:this.top+d+P,line:0}:p={x:this.left+d,y:gt(r,this.top+P+d,this.bottom-e[0].height),line:0},Hu(this.ctx,t.textDirection);let M=v+d;this.legendItems.forEach((E,R)=>{a.strokeStyle=E.fontColor,a.fillStyle=E.fontColor;let O=a.measureText(E.text).width,N=l.textAlign(E.textAlign||(E.textAlign=o.textAlign)),ne=g+u+O,oe=p.x,se=p.y;l.setWidth(this.width),S?R>0&&oe+ne+d>this.right&&(se=p.y+=M,p.line++,oe=p.x=gt(r,this.left+d,this.right-i[p.line])):R>0&&se+M>this.bottom&&(oe=p.x=oe+e[p.line].width+d,p.line++,se=p.y=gt(r,this.top+P+d,this.bottom-e[p.line].height));let Xe=l.x(oe);if(x(Xe,se,E),oe=bb(N,oe+g+u,S?oe+ne:this.right,t.rtl),w(l.x(oe),se,E),S)p.x+=ne+d;else if(typeof E.text!="string"){let yt=c.lineHeight;p.y+=Jy(E,yt)+d}else p.y+=M}),Uu(this.ctx,t.textDirection)}drawTitle(){let t=this.options,e=t.title,i=it(e.font),a=_t(e.padding);if(!e.display)return;let r=Ma(t.rtl,this.left,this.width),o=this.ctx,s=e.position,l=i.size/2,c=a.top+l,d,h=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),d=this.top+c,h=gt(t.align,h,this.right-u);else{let g=this.columnSizes.reduce((b,v)=>Math.max(b,v.height),0);d=c+gt(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}let p=gt(s,h,h+u);o.textAlign=r.textAlign(cc(s)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,Nn(o,e.text,p,d,i)}_computeTitleHeight(){let t=this.options.title,e=it(t.font),i=_t(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,a,r;if(zi(t,this.left,this.right)&&zi(e,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(a=r[i],zi(t,a.left,a.left+a.width)&&zi(e,a.top,a.top+a.height))return this.legendItems[i]}return null}handleEvent(t){let e=this.options;if(!uP(t.type,e))return;let i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let a=this._hoveredItem,r=lP(a,i);a&&!r&&Ae(e.onLeave,[t,a,this],this),this._hoveredItem=i,i&&!r&&Ae(e.onHover,[t,i,this],this)}else i&&Ae(e.onClick,[t,i,this],this)}};function cP(n,t,e,i,a){let r=dP(i,n,t,e),o=hP(a,i,t.lineHeight);return{itemWidth:r,itemHeight:o}}function dP(n,t,e,i){let a=n.text;return a&&typeof a!="string"&&(a=a.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+i.measureText(a).width}function hP(n,t,e){let i=n;return typeof t.text!="string"&&(i=Jy(t,e)),i}function Jy(n,t){let e=n.text?n.text.length:0;return t*e}function uP(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var pP={id:"legend",_element:kc,start(n,t,e){let i=n.legend=new kc({ctx:n.ctx,options:e,chart:n});Et.configure(n,i,e),Et.addBox(n,i)},stop(n){Et.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){let i=n.legend;Et.configure(n,i,e),i.options=e},afterUpdate(n){let t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){let i=t.datasetIndex,a=e.chart;a.isDatasetVisible(i)?(a.hide(i),t.hidden=!0):(a.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:a,color:r,useBorderRadius:o,borderRadius:s}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(e?0:void 0),d=_t(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:a||c.textAlign,borderRadius:o&&(s||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},Ho=class extends Si{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;let a=Fe(i.text)?i.text.length:1;this._padding=_t(i.padding);let r=a*it(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:e,left:i,bottom:a,right:r,options:o}=this,s=o.align,l=0,c,d,h;return this.isHorizontal()?(d=gt(s,i,r),h=e+t,c=r-i):(o.position==="left"?(d=i+t,h=gt(s,a,e),l=Ce*-.5):(d=r-t,h=gt(s,e,a),l=Ce*.5),c=a-e),{titleX:d,titleY:h,maxWidth:c,rotation:l}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let i=it(e.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:s,maxWidth:l,rotation:c}=this._drawArgs(r);Nn(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:cc(e.align),textBaseline:"middle",translation:[o,s]})}};function mP(n,t){let e=new Ho({ctx:n.ctx,options:t,chart:n});Et.configure(n,e,t),Et.addBox(n,e),n.titleBlock=e}var fP={id:"title",_element:Ho,start(n,t,e){mP(n,e)},stop(n){let t=n.titleBlock;Et.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){let i=n.titleBlock;Et.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},vc=new WeakMap,gP={id:"subtitle",start(n,t,e){let i=new Ho({ctx:n.ctx,options:e,chart:n});Et.configure(n,i,e),Et.addBox(n,i),vc.set(n,i)},stop(n){Et.removeBox(n,vc.get(n)),vc.delete(n)},beforeUpdate(n,t,e){let i=vc.get(n);Et.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},zo={average(n){if(!n.length)return!1;let t,e,i=new Set,a=0,r=0;for(t=0,e=n.length;t<e;++t){let s=n[t].element;if(s&&s.hasValue()){let l=s.tooltipPosition();i.add(l.x),a+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((s,l)=>s+l)/i.size,y:a/r}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,a=Number.POSITIVE_INFINITY,r,o,s;for(r=0,o=n.length;r<o;++r){let l=n[r].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),d=ac(t,c);d<a&&(a=d,s=l)}}if(s){let l=s.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function ji(n,t){return t&&(Fe(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function dn(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function _P(n,t){let{element:e,datasetIndex:i,index:a}=t,r=n.getDatasetMeta(i).controller,{label:o,value:s}=r.getLabelAndValue(a);return{chart:n,label:o,parsed:r.getParsed(a),raw:n.data.datasets[i].data[a],formattedValue:s,dataset:r.getDataset(),dataIndex:a,datasetIndex:i,element:e}}function yy(n,t){let e=n.chart.ctx,{body:i,footer:a,title:r}=n,{boxWidth:o,boxHeight:s}=t,l=it(t.bodyFont),c=it(t.titleFont),d=it(t.footerFont),h=r.length,u=a.length,p=i.length,g=_t(t.padding),b=g.height,v=0,x=i.reduce((P,M)=>P+M.before.length+M.lines.length+M.after.length,0);if(x+=n.beforeBody.length+n.afterBody.length,h&&(b+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),x){let P=t.displayColors?Math.max(s,l.lineHeight):l.lineHeight;b+=p*P+(x-p)*l.lineHeight+(x-1)*t.bodySpacing}u&&(b+=t.footerMarginTop+u*d.lineHeight+(u-1)*t.footerSpacing);let w=0,S=function(P){v=Math.max(v,e.measureText(P).width+w)};return e.save(),e.font=c.string,Oe(n.title,S),e.font=l.string,Oe(n.beforeBody.concat(n.afterBody),S),w=t.displayColors?o+2+t.boxPadding:0,Oe(i,P=>{Oe(P.before,S),Oe(P.lines,S),Oe(P.after,S)}),w=0,e.font=d.string,Oe(n.footer,S),e.restore(),v+=g.width,{width:v,height:b}}function bP(n,t){let{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function yP(n,t,e,i){let{x:a,width:r}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&a+r+o>t.width||n==="right"&&a-r-o<0)return!0}function vP(n,t,e,i){let{x:a,width:r}=e,{width:o,chartArea:{left:s,right:l}}=n,c="center";return i==="center"?c=a<=(s+l)/2?"left":"right":a<=r/2?c="left":a>=o-r/2&&(c="right"),yP(c,n,t,e)&&(c="center"),c}function vy(n,t,e){let i=e.yAlign||t.yAlign||bP(n,e);return{xAlign:e.xAlign||t.xAlign||vP(n,t,e,i),yAlign:i}}function CP(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function xP(n,t,e){let{y:i,height:a}=n;return t==="top"?i+=e:t==="bottom"?i-=a+e:i-=a/2,i}function Cy(n,t,e,i){let{caretSize:a,caretPadding:r,cornerRadius:o}=n,{xAlign:s,yAlign:l}=e,c=a+r,{topLeft:d,topRight:h,bottomLeft:u,bottomRight:p}=Ln(o),g=CP(t,s),b=xP(t,l,c);return l==="center"?s==="left"?g+=c:s==="right"&&(g-=c):s==="left"?g-=Math.max(d,u)+a:s==="right"&&(g+=Math.max(h,p)+a),{x:rt(g,0,i.width-t.width),y:rt(b,0,i.height-t.height)}}function Cc(n,t,e){let i=_t(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function xy(n){return ji([],dn(n))}function wP(n,t,e){return ln(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function wy(n,t){let e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}var e0={beforeTitle:Bi,title(n){if(n.length>0){let t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Bi,beforeBody:Bi,beforeLabel:Bi,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");let e=n.formattedValue;return fe(e)||(t+=e),t},labelColor(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Bi,afterBody:Bi,beforeFooter:Bi,footer:Bi,afterFooter:Bi};function Bt(n,t,e,i){let a=n[t].call(e,i);return typeof a>"u"?e0[t].call(e,i):a}var My=(()=>{class n extends Si{static positioners=zo;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let i=this.chart,a=this.options.setContext(this.getContext()),r=a.enabled&&i.options.animation&&a.animations,o=new Sc(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=wP(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){let{callbacks:a}=i,r=Bt(a,"beforeTitle",this,e),o=Bt(a,"title",this,e),s=Bt(a,"afterTitle",this,e),l=[];return l=ji(l,dn(r)),l=ji(l,dn(o)),l=ji(l,dn(s)),l}getBeforeBody(e,i){return xy(Bt(i.callbacks,"beforeBody",this,e))}getBody(e,i){let{callbacks:a}=i,r=[];return Oe(e,o=>{let s={before:[],lines:[],after:[]},l=wy(a,o);ji(s.before,dn(Bt(l,"beforeLabel",this,o))),ji(s.lines,Bt(l,"label",this,o)),ji(s.after,dn(Bt(l,"afterLabel",this,o))),r.push(s)}),r}getAfterBody(e,i){return xy(Bt(i.callbacks,"afterBody",this,e))}getFooter(e,i){let{callbacks:a}=i,r=Bt(a,"beforeFooter",this,e),o=Bt(a,"footer",this,e),s=Bt(a,"afterFooter",this,e),l=[];return l=ji(l,dn(r)),l=ji(l,dn(o)),l=ji(l,dn(s)),l}_createItems(e){let i=this._active,a=this.chart.data,r=[],o=[],s=[],l=[],c,d;for(c=0,d=i.length;c<d;++c)l.push(_P(this.chart,i[c]));return e.filter&&(l=l.filter((h,u,p)=>e.filter(h,u,p,a))),e.itemSort&&(l=l.sort((h,u)=>e.itemSort(h,u,a))),Oe(l,h=>{let u=wy(e.callbacks,h);r.push(Bt(u,"labelColor",this,h)),o.push(Bt(u,"labelPointStyle",this,h)),s.push(Bt(u,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=s,this.dataPoints=l,l}update(e,i){let a=this.options.setContext(this.getContext()),r=this._active,o,s=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{let l=zo[a.position].call(this,r,this._eventPosition);s=this._createItems(a),this.title=this.getTitle(s,a),this.beforeBody=this.getBeforeBody(s,a),this.body=this.getBody(s,a),this.afterBody=this.getAfterBody(s,a),this.footer=this.getFooter(s,a);let c=this._size=yy(this,a),d=Object.assign({},l,c),h=vy(this.chart,a,d),u=Cy(a,d,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:u.x,y:u.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=s,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&a.external&&a.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,a,r){let o=this.getCaretPosition(e,a,r);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(e,i,a){let{xAlign:r,yAlign:o}=this,{caretSize:s,cornerRadius:l}=a,{topLeft:c,topRight:d,bottomLeft:h,bottomRight:u}=Ln(l),{x:p,y:g}=e,{width:b,height:v}=i,x,w,S,P,M,E;return o==="center"?(M=g+v/2,r==="left"?(x=p,w=x-s,P=M+s,E=M-s):(x=p+b,w=x+s,P=M-s,E=M+s),S=x):(r==="left"?w=p+Math.max(c,h)+s:r==="right"?w=p+b-Math.max(d,u)-s:w=this.caretX,o==="top"?(P=g,M=P-s,x=w-s,S=w+s):(P=g+v,M=P+s,x=w+s,S=w-s),E=P),{x1:x,x2:w,x3:S,y1:P,y2:M,y3:E}}drawTitle(e,i,a){let r=this.title,o=r.length,s,l,c;if(o){let d=Ma(a.rtl,this.x,this.width);for(e.x=Cc(this,a.titleAlign,a),i.textAlign=d.textAlign(a.titleAlign),i.textBaseline="middle",s=it(a.titleFont),l=a.titleSpacing,i.fillStyle=a.titleColor,i.font=s.string,c=0;c<o;++c)i.fillText(r[c],d.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+l,c+1===o&&(e.y+=a.titleMarginBottom-l)}}_drawColorBox(e,i,a,r,o){let s=this.labelColors[a],l=this.labelPointStyles[a],{boxHeight:c,boxWidth:d}=o,h=it(o.bodyFont),u=Cc(this,"left",o),p=r.x(u),g=c<h.lineHeight?(h.lineHeight-c)/2:0,b=i.y+g;if(o.usePointStyle){let v={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},x=r.leftForLtr(p,d)+d/2,w=b+c/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,hc(e,v,x,w),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,hc(e,v,x,w)}else{e.lineWidth=ge(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;let v=r.leftForLtr(p,d),x=r.leftForLtr(r.xPlus(p,1),d-2),w=Ln(s.borderRadius);Object.values(w).some(S=>S!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,yr(e,{x:v,y:b,w:d,h:c,radius:w}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),yr(e,{x,y:b+1,w:d-2,h:c-2,radius:w}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(v,b,d,c),e.strokeRect(v,b,d,c),e.fillStyle=s.backgroundColor,e.fillRect(x,b+1,d-2,c-2))}e.fillStyle=this.labelTextColors[a]}drawBody(e,i,a){let{body:r}=this,{bodySpacing:o,bodyAlign:s,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:h}=a,u=it(a.bodyFont),p=u.lineHeight,g=0,b=Ma(a.rtl,this.x,this.width),v=function(N){i.fillText(N,b.x(e.x+g),e.y+p/2),e.y+=p+o},x=b.textAlign(s),w,S,P,M,E,R,O;for(i.textAlign=s,i.textBaseline="middle",i.font=u.string,e.x=Cc(this,x,a),i.fillStyle=a.bodyColor,Oe(this.beforeBody,v),g=l&&x!=="right"?s==="center"?d/2+h:d+2+h:0,M=0,R=r.length;M<R;++M){for(w=r[M],S=this.labelTextColors[M],i.fillStyle=S,Oe(w.before,v),P=w.lines,l&&P.length&&(this._drawColorBox(i,e,M,b,a),p=Math.max(u.lineHeight,c)),E=0,O=P.length;E<O;++E)v(P[E]),p=u.lineHeight;Oe(w.after,v)}g=0,p=u.lineHeight,Oe(this.afterBody,v),e.y-=o}drawFooter(e,i,a){let r=this.footer,o=r.length,s,l;if(o){let c=Ma(a.rtl,this.x,this.width);for(e.x=Cc(this,a.footerAlign,a),e.y+=a.footerMarginTop,i.textAlign=c.textAlign(a.footerAlign),i.textBaseline="middle",s=it(a.footerFont),i.fillStyle=a.footerColor,i.font=s.string,l=0;l<o;++l)i.fillText(r[l],c.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a.footerSpacing}}drawBackground(e,i,a,r){let{xAlign:o,yAlign:s}=this,{x:l,y:c}=e,{width:d,height:h}=a,{topLeft:u,topRight:p,bottomLeft:g,bottomRight:b}=Ln(r.cornerRadius);i.fillStyle=r.backgroundColor,i.strokeStyle=r.borderColor,i.lineWidth=r.borderWidth,i.beginPath(),i.moveTo(l+u,c),s==="top"&&this.drawCaret(e,i,a,r),i.lineTo(l+d-p,c),i.quadraticCurveTo(l+d,c,l+d,c+p),s==="center"&&o==="right"&&this.drawCaret(e,i,a,r),i.lineTo(l+d,c+h-b),i.quadraticCurveTo(l+d,c+h,l+d-b,c+h),s==="bottom"&&this.drawCaret(e,i,a,r),i.lineTo(l+g,c+h),i.quadraticCurveTo(l,c+h,l,c+h-g),s==="center"&&o==="left"&&this.drawCaret(e,i,a,r),i.lineTo(l,c+u),i.quadraticCurveTo(l,c,l+u,c),i.closePath(),i.fill(),r.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){let i=this.chart,a=this.$animations,r=a&&a.x,o=a&&a.y;if(r||o){let s=zo[e.position].call(this,this._active,this._eventPosition);if(!s)return;let l=this._size=yy(this,e),c=Object.assign({},s,this._size),d=vy(i,e,c),h=Cy(e,c,d,i);(r._to!==h.x||o._to!==h.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){let i=this.options.setContext(this.getContext()),a=this.opacity;if(!a)return;this._updateAnimationTarget(i);let r={width:this.width,height:this.height},o={x:this.x,y:this.y};a=Math.abs(a)<.001?0:a;let s=_t(i.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&l&&(e.save(),e.globalAlpha=a,this.drawBackground(o,e,r,i),Hu(e,i.textDirection),o.y+=s.top,this.drawTitle(o,e,i),this.drawBody(o,e,i),this.drawFooter(o,e,i),Uu(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){let a=this._active,r=e.map(({datasetIndex:l,index:c})=>{let d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),o=!ko(a,r),s=this._positionChanged(r,i);(o||s)&&(this._active=r,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,a=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let r=this.options,o=this._active||[],s=this._getActiveElements(e,o,i,a),l=this._positionChanged(s,e),c=i||!ko(s,o)||l;return c&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),c}_getActiveElements(e,i,a,r){let o=this.options;if(e.type==="mouseout")return[];if(!r)return i.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let s=this.chart.getElementsAtEventForMode(e,o.mode,o,a);return o.reverse&&s.reverse(),s}_positionChanged(e,i){let{caretX:a,caretY:r,options:o}=this,s=zo[o.position].call(this,e,i);return s!==!1&&(a!==s.x||r!==s.y)}}return n})(),MP={id:"tooltip",_element:My,positioners:zo,afterInit(n,t,e){e&&(n.tooltip=new My({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){let t=n.tooltip;if(t&&t._willRender()){let e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",_e(A({},e),{cancelable:!0}))===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){let e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:e0},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},SP=Object.freeze({__proto__:null,Colors:L1,Decimation:j1,Filler:sP,Legend:pP,SubTitle:gP,Title:fP,Tooltip:MP}),DP=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function PP(n,t,e,i){let a=n.indexOf(t);if(a===-1)return DP(n,t,e,i);let r=n.lastIndexOf(t);return a!==r?e:a}var EP=(n,t)=>n===null?null:rt(Math.round(n),0,t);function Sy(n){let t=this.getLabels();return n>=0&&n<t.length?t[n]:n}var OP=(()=>{class n extends Pa{static id="category";static defaults={ticks:{callback:Sy}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let i=this._addedLabels;if(i.length){let a=this.getLabels();for(let{index:r,label:o}of i)a[r]===o&&a.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(fe(e))return null;let a=this.getLabels();return i=isFinite(i)&&a[i]===e?i:PP(a,e,re(i,e),this._addedLabels),EP(i,a.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:a,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(a=0),i||(r=this.getLabels().length-1)),this.min=a,this.max=r}buildTicks(){let e=this.min,i=this.max,a=this.options.offset,r=[],o=this.getLabels();o=e===0&&i===o.length-1?o:o.slice(e,i+1),this._valueRange=Math.max(o.length-(a?0:1),1),this._startValue=this.min-(a?.5:0);for(let s=e;s<=i;s++)r.push({value:s});return r}getLabelForValue(e){return Sy.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function kP(n,t){let e=[],{bounds:a,step:r,min:o,max:s,precision:l,count:c,maxTicks:d,maxDigits:h,includeBounds:u}=n,p=r||1,g=d-1,{min:b,max:v}=t,x=!fe(o),w=!fe(s),S=!fe(c),P=(v-b)/(h+1),M=Cu((v-b)/g/p)*p,E,R,O,N;if(M<1e-14&&!x&&!w)return[{value:b},{value:v}];N=Math.ceil(v/M)-Math.floor(b/M),N>g&&(M=Cu(N*M/g/p)*p),fe(l)||(E=Math.pow(10,l),M=Math.ceil(M*E)/E),a==="ticks"?(R=Math.floor(b/M)*M,O=Math.ceil(v/M)*M):(R=b,O=v),x&&w&&r&&hb((s-o)/r,M/1e3)?(N=Math.round(Math.min((s-o)/M,d)),M=(s-o)/N,R=o,O=s):S?(R=x?o:R,O=w?s:O,N=c-1,M=(O-R)/N):(N=(O-R)/M,gr(N,Math.round(N),M/1e3)?N=Math.round(N):N=Math.ceil(N));let ne=Math.max(wu(M),wu(R));E=Math.pow(10,fe(l)?ne:l),R=Math.round(R*E)/E,O=Math.round(O*E)/E;let oe=0;for(x&&(u&&R!==o?(e.push({value:o}),R<o&&oe++,gr(Math.round((R+oe*M)*E)/E,o,Dy(o,P,n))&&oe++):R<o&&oe++);oe<N;++oe){let se=Math.round((R+oe*M)*E)/E;if(w&&se>s)break;e.push({value:se})}return w&&u&&O!==s?e.length&&gr(e[e.length-1].value,s,Dy(s,P,n))?e[e.length-1].value=s:e.push({value:s}):(!w||O===s)&&e.push({value:O}),e}function Dy(n,t,{horizontal:e,minRotation:i}){let a=fi(i),r=(e?Math.sin(a):Math.cos(a))||.001,o=.75*t*(""+n).length;return Math.min(t/r,o)}var wr=class extends Pa{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return fe(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:a,max:r}=this,o=l=>a=e?a:l,s=l=>r=i?r:l;if(t){let l=Mi(a),c=Mi(r);l<0&&c<0?s(0):l>0&&c>0&&o(0)}if(a===r){let l=r===0?1:Math.abs(r*.05);s(r+l),t||o(a-l)}this.min=a,this.max=r}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:e,stepSize:i}=t,a;return i?(a=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),e=e||11),e&&(a=Math.min(e,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,i=this.getTickLimit();i=Math.max(2,i);let a={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=kP(a,r);return t.bounds==="ticks"&&xu(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let t=this.ticks,e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){let a=(i-e)/Math.max(t.length-1,1)/2;e-=a,i+=a}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return br(t,this.chart.options.locale,this.options.ticks.format)}},yp=class extends wr{static id="linear";static defaults={ticks:{callback:Ao.formatters.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=Ye(t)?t:0,this.max=Ye(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,i=fi(this.options.ticks.minRotation),a=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/a))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},Uo=n=>Math.floor(on(n)),Da=(n,t)=>Math.pow(10,Uo(n)+t);function Py(n){return n/Math.pow(10,Uo(n))===1}function Ey(n,t,e){let i=Math.pow(10,e),a=Math.floor(n/i);return Math.ceil(t/i)-a}function AP(n,t){let e=t-n,i=Uo(e);for(;Ey(n,t,i)>10;)i++;for(;Ey(n,t,i)<10;)i--;return Math.min(i,Uo(n))}function TP(n,{min:t,max:e}){t=Vt(n.min,t);let i=[],a=Uo(t),r=AP(t,e),o=r<0?Math.pow(10,Math.abs(r)):1,s=Math.pow(10,r),l=a>r?Math.pow(10,a):0,c=Math.round((t-l)*o)/o,d=Math.floor((t-l)/s/10)*s*10,h=Math.floor((c-d)/Math.pow(10,r)),u=Vt(n.min,Math.round((l+d+h*Math.pow(10,r))*o)/o);for(;u<e;)i.push({value:u,major:Py(u),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,o=r>=0?1:o),u=Math.round((l+d+h*Math.pow(10,r))*o)/o;let p=Vt(n.max,u);return i.push({value:p,major:Py(p),significand:h}),i}var vp=class extends Pa{static id="logarithmic";static defaults={ticks:{callback:Ao.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let i=wr.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return Ye(i)&&i>0?i:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=Ye(t)?Math.max(0,t):null,this.max=Ye(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ye(this._userMin)&&(this.min=t===Da(this.min,0)?Da(this.min,-1):Da(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),i=this.min,a=this.max,r=s=>i=t?i:s,o=s=>a=e?a:s;i===a&&(i<=0?(r(1),o(10)):(r(Da(i,-1)),o(Da(a,1)))),i<=0&&r(Da(a,-1)),a<=0&&o(Da(i,1)),this.min=i,this.max=a}buildTicks(){let t=this.options,e={min:this._userMin,max:this._userMax},i=TP(e,this);return t.bounds==="ticks"&&xu(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":br(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=on(t),this._valueRange=on(this.max)-on(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(on(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}};function Cp(n){let t=n.ticks;if(t.display&&n.display){let e=_t(t.backdropPadding);return re(t.font&&t.font.size,Te.font.size)+e.height}return 0}function RP(n,t,e){return e=Fe(e)?e:[e],{w:vb(n,t.string,e),h:e.length*t.lineHeight}}function Oy(n,t,e,i,a){return n===i||n===a?{start:t-e/2,end:t+e/2}:n<i||n>a?{start:t-e,end:t}:{start:t,end:t+e}}function IP(n){let t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],a=[],r=n._pointLabels.length,o=n.options.pointLabels,s=o.centerPointLabels?Ce/r:0;for(let l=0;l<r;l++){let c=o.setContext(n.getPointLabelContext(l));a[l]=c.padding;let d=n.getPointPosition(l,n.drawingArea+a[l],s),h=it(c.font),u=RP(n.ctx,h,n._pointLabels[l]);i[l]=u;let p=ft(n.getIndexAngle(l)+s),g=Math.round(sc(p)),b=Oy(g,d.x,u.w,0,180),v=Oy(g,d.y,u.h,90,270);FP(e,t,p,b,v)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=VP(n,i,a)}function FP(n,t,e,i,a){let r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e)),s=0,l=0;i.start<t.l?(s=(t.l-i.start)/r,n.l=Math.min(n.l,t.l-s)):i.end>t.r&&(s=(i.end-t.r)/r,n.r=Math.max(n.r,t.r+s)),a.start<t.t?(l=(t.t-a.start)/o,n.t=Math.min(n.t,t.t-l)):a.end>t.b&&(l=(a.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function NP(n,t,e){let i=n.drawingArea,{extra:a,additionalAngle:r,padding:o,size:s}=e,l=n.getPointPosition(t,i+a+o,r),c=Math.round(sc(ft(l.angle+Qe))),d=jP(l.y,s.h,c),h=BP(c),u=zP(l.x,s.w,h);return{visible:!0,x:l.x,y:d,textAlign:h,left:u,top:d,right:u+s.w,bottom:d+s.h}}function LP(n,t){if(!t)return!0;let{left:e,top:i,right:a,bottom:r}=n;return!(Vi({x:e,y:i},t)||Vi({x:e,y:r},t)||Vi({x:a,y:i},t)||Vi({x:a,y:r},t))}function VP(n,t,e){let i=[],a=n._pointLabels.length,r=n.options,{centerPointLabels:o,display:s}=r.pointLabels,l={extra:Cp(r)/2,additionalAngle:o?Ce/a:0},c;for(let d=0;d<a;d++){l.padding=e[d],l.size=t[d];let h=NP(n,d,l);i.push(h),s==="auto"&&(h.visible=LP(h,c),h.visible&&(c=h))}return i}function BP(n){return n===0||n===180?"center":n<180?"left":"right"}function zP(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function jP(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function HP(n,t,e){let{left:i,top:a,right:r,bottom:o}=e,{backdropColor:s}=t;if(!fe(s)){let l=Ln(t.borderRadius),c=_t(t.backdropPadding);n.fillStyle=s;let d=i-c.left,h=a-c.top,u=r-i+c.width,p=o-a+c.height;Object.values(l).some(g=>g!==0)?(n.beginPath(),yr(n,{x:d,y:h,w:u,h:p,radius:l}),n.fill()):n.fillRect(d,h,u,p)}}function UP(n,t){let{ctx:e,options:{pointLabels:i}}=n;for(let a=t-1;a>=0;a--){let r=n._pointLabelItems[a];if(!r.visible)continue;let o=i.setContext(n.getPointLabelContext(a));HP(e,o,r);let s=it(o.font),{x:l,y:c,textAlign:d}=r;Nn(e,n._pointLabels[a],l,c+s.lineHeight/2,s,{color:o.color,textAlign:d,textBaseline:"middle"})}}function t0(n,t,e,i){let{ctx:a}=n;if(e)a.arc(n.xCenter,n.yCenter,t,0,Ne);else{let r=n.getPointPosition(0,t);a.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,t),a.lineTo(r.x,r.y)}}function WP(n,t,e,i,a){let r=n.ctx,o=t.circular,{color:s,lineWidth:l}=t;!o&&!i||!s||!l||e<0||(r.save(),r.strokeStyle=s,r.lineWidth=l,r.setLineDash(a.dash||[]),r.lineDashOffset=a.dashOffset,r.beginPath(),t0(n,e,o,i),r.closePath(),r.stroke(),r.restore())}function $P(n,t,e){return ln(n,{label:e,index:t,type:"pointLabel"})}var xp=class extends wr{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ao.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=_t(Cp(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=Ye(t)&&!isNaN(t)?t:0,this.max=Ye(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Cp(this.options))}generateTickLabels(t){wr.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{let a=Ae(this.options.pointLabels.callback,[e,i],this);return a||a===0?a:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){let t=this.options;t.display&&t.pointLabels.display?IP(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,a){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-a)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,a))}getIndexAngle(t){let e=Ne/(this._pointLabels.length||1),i=this.options.startAngle||0;return ft(t*e+fi(i))}getDistanceFromCenterForValue(t){if(fe(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(fe(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let i=e[t];return $P(this.getContext(),t,i)}}getPointPosition(t,e,i=0){let a=this.getIndexAngle(t)-Qe+i;return{x:Math.cos(a)*e+this.xCenter,y:Math.sin(a)*e+this.yCenter,angle:a}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:i,right:a,bottom:r}=this._pointLabelItems[t];return{left:e,top:i,right:a,bottom:r}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let i=this.ctx;i.save(),i.beginPath(),t0(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:i,grid:a,border:r}=e,o=this._pointLabels.length,s,l,c;if(e.pointLabels.display&&UP(this,o),a.display&&this.ticks.forEach((d,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(d.value);let u=this.getContext(h),p=a.setContext(u),g=r.setContext(u);WP(this,p,l,o,g)}}),i.display){for(t.save(),s=o-1;s>=0;s--){let d=i.setContext(this.getPointLabelContext(s)),{color:h,lineWidth:u}=d;!u||!h||(t.lineWidth=u,t.strokeStyle=h,t.setLineDash(d.borderDash),t.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(s,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;let a=this.getIndexAngle(0),r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(a),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((s,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;let c=i.setContext(this.getContext(l)),d=it(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=d.string,o=t.measureText(s.label).width,t.fillStyle=c.backdropColor;let h=_t(c.backdropPadding);t.fillRect(-o/2-h.left,-r-d.size/2-h.top,o+h.width,d.size+h.height)}Nn(t,s.label,0,-r,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}},Ic={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},zt=Object.keys(Ic);function ky(n,t){return n-t}function Ay(n,t){if(fe(t))return null;let e=n._adapter,{parser:i,round:a,isoWeekday:r}=n._parseOpts,o=t;return typeof i=="function"&&(o=i(o)),Ye(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(a&&(o=a==="week"&&(wa(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,a)),+o)}function Ty(n,t,e,i){let a=zt.length;for(let r=zt.indexOf(n);r<a-1;++r){let o=Ic[zt[r]],s=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(s*o.size))<=i)return zt[r]}return zt[a-1]}function YP(n,t,e,i,a){for(let r=zt.length-1;r>=zt.indexOf(e);r--){let o=zt[r];if(Ic[o].common&&n._adapter.diff(a,i,o)>=t-1)return o}return zt[e?zt.indexOf(e):0]}function qP(n){for(let t=zt.indexOf(n)+1,e=zt.length;t<e;++t)if(Ic[zt[t]].common)return zt[t]}function Ry(n,t,e){if(!e)n[t]=!0;else if(e.length){let{lo:i,hi:a}=lc(e,t),r=e[i]>=t?e[i]:e[a];n[r]=!0}}function KP(n,t,e,i){let a=n._adapter,r=+a.startOf(t[0].value,i),o=t[t.length-1].value,s,l;for(s=r;s<=o;s=+a.add(s,1,i))l=e[s],l>=0&&(t[l].major=!0);return t}function Iy(n,t,e){let i=[],a={},r=t.length,o,s;for(o=0;o<r;++o)s=t[o],a[s]=o,i.push({value:s,major:!1});return r===0||!e?i:KP(n,i,a,e)}var wp=(()=>{class n extends Pa{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){let a=e.time||(e.time={}),r=this._adapter=new rD._date(e.adapters.date);r.init(i),mr(a.displayFormats,r.formats()),this._parseOpts={parser:a.parser,round:a.round,isoWeekday:a.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return e===void 0?null:Ay(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,i=this._adapter,a=e.time.unit||"day",{min:r,max:o,minDefined:s,maxDefined:l}=this.getUserBounds();function c(d){!s&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!s||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Ye(r)&&!isNaN(r)?r:+i.startOf(Date.now(),a),o=Ye(o)&&!isNaN(o)?o:+i.endOf(Date.now(),a)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){let e=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],a=e[e.length-1]),{min:i,max:a}}buildTicks(){let e=this.options,i=e.time,a=e.ticks,r=a.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);let o=this.min,s=this.max,l=mb(r,o,s);return this._unit=i.unit||(a.autoSkip?Ty(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):YP(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=!a.major.enabled||this._unit==="year"?void 0:qP(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),Iy(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let i=0,a=0,r,o;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?i=1-r:i=(this.getDecimalForValue(e[1])-r)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?a=o:a=(o-this.getDecimalForValue(e[e.length-2]))/2);let s=e.length<3?.5:.25;i=rt(i,0,s),a=rt(a,0,s),this._offsets={start:i,end:a,factor:1/(i+1+a)}}_generate(){let e=this._adapter,i=this.min,a=this.max,r=this.options,o=r.time,s=o.unit||Ty(o.minUnit,i,a,this._getLabelCapacity(i)),l=re(r.ticks.stepSize,1),c=s==="week"?o.isoWeekday:!1,d=wa(c)||c===!0,h={},u=i,p,g;if(d&&(u=+e.startOf(u,"isoWeek",c)),u=+e.startOf(u,d?"day":s),e.diff(a,i,s)>1e5*l)throw new Error(i+" and "+a+" are too far apart with stepSize of "+l+" "+s);let b=r.ticks.source==="data"&&this.getDataTimestamps();for(p=u,g=0;p<a;p=+e.add(p,l,s),g++)Ry(h,p,b);return(p===a||r.bounds==="ticks"||g===1)&&Ry(h,p,b),Object.keys(h).sort(ky).map(v=>+v)}getLabelForValue(e){let i=this._adapter,a=this.options.time;return a.tooltipFormat?i.format(e,a.tooltipFormat):i.format(e,a.displayFormats.datetime)}format(e,i){let r=this.options.time.displayFormats,o=this._unit,s=i||r[o];return this._adapter.format(e,s)}_tickFormatFunction(e,i,a,r){let o=this.options,s=o.ticks.callback;if(s)return Ae(s,[e,i,a],this);let l=o.time.displayFormats,c=this._unit,d=this._majorUnit,h=c&&l[c],u=d&&l[d],p=a[i],g=d&&u&&p&&p.major;return this._adapter.format(e,r||(g?u:h))}generateTickLabels(e){let i,a,r;for(i=0,a=e.length;i<a;++i)r=e[i],r.label=this._tickFormatFunction(r.value,i,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let i=this._offsets,a=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+a)*i.factor)}getValueForPixel(e){let i=this._offsets,a=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+a*(this.max-this.min)}_getLabelSize(e){let i=this.options.ticks,a=this.ctx.measureText(e).width,r=fi(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(r),s=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:a*o+l*s,h:a*s+l*o}}_getLabelCapacity(e){let i=this.options.time,a=i.displayFormats,r=a[i.unit]||a.millisecond,o=this._tickFormatFunction(e,0,Iy(this,[e],this._majorUnit),r),s=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],i,a;if(e.length)return e;let r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(i=0,a=r.length;i<a;++i)e=e.concat(r[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],i,a;if(e.length)return e;let r=this.getLabels();for(i=0,a=r.length;i<a;++i)e.push(Ay(this,r[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Du(e.sort(ky))}}return n})();function xc(n,t,e){let i=0,a=n.length-1,r,o,s,l;e?(t>=n[i].pos&&t<=n[a].pos&&({lo:i,hi:a}=Li(n,"pos",t)),{pos:r,time:s}=n[i],{pos:o,time:l}=n[a]):(t>=n[i].time&&t<=n[a].time&&({lo:i,hi:a}=Li(n,"time",t)),{time:r,pos:s}=n[i],{time:o,pos:l}=n[a]);let c=o-r;return c?s+(l-s)*(t-r)/c:s}var Mp=class extends wp{static id="timeseries";static defaults=wp.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=xc(e,this.min),this._tableRange=xc(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:e,max:i}=this,a=[],r=[],o,s,l,c,d;for(o=0,s=t.length;o<s;++o)c=t[o],c>=e&&c<=i&&a.push(c);if(a.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,s=a.length;o<s;++o)d=a[o+1],l=a[o-1],c=a[o],Math.round((d+l)/2)!==c&&r.push({time:c,pos:o/(s-1)});return r}_generate(){let t=this.min,e=this.max,i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((a,r)=>a-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(xc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return xc(this._table,i*this._tableRange+this._minPos,!0)}},GP=Object.freeze({__proto__:null,CategoryScale:OP,LinearScale:yp,LogarithmicScale:vp,RadialLinearScale:xp,TimeScale:wp,TimeSeriesScale:Mp}),i0=[aD,k1,SP,GP];var QP=typeof global=="object"&&global&&global.Object===Object&&global,Fc=QP;var XP=typeof self=="object"&&self&&self.Object===Object&&self,ZP=Fc||XP||Function("return this")(),gi=ZP;var JP=gi.Symbol,Mr=JP;var n0=Object.prototype,eE=n0.hasOwnProperty,tE=n0.toString,$o=Mr?Mr.toStringTag:void 0;function iE(n){var t=eE.call(n,$o),e=n[$o];try{n[$o]=void 0;var i=!0}catch{}var a=tE.call(n);return i&&(t?n[$o]=e:delete n[$o]),a}var a0=iE;var nE=Object.prototype,aE=nE.toString;function rE(n){return aE.call(n)}var r0=rE;var oE="[object Null]",sE="[object Undefined]",o0=Mr?Mr.toStringTag:void 0;function lE(n){return n==null?n===void 0?sE:oE:o0&&o0 in Object(n)?a0(n):r0(n)}var jn=lE;function cE(n){return n!=null&&typeof n=="object"}var Ui=cE;var dE=Array.isArray,Yo=dE;function hE(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var jt=hE;function uE(n){return n}var Nc=uE;var pE="[object AsyncFunction]",mE="[object Function]",fE="[object GeneratorFunction]",gE="[object Proxy]";function _E(n){if(!jt(n))return!1;var t=jn(n);return t==mE||t==fE||t==pE||t==gE}var Sr=_E;var bE=gi["__core-js_shared__"],Lc=bE;var s0=(function(){var n=/[^.]+$/.exec(Lc&&Lc.keys&&Lc.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function yE(n){return!!s0&&s0 in n}var l0=yE;var vE=Function.prototype,CE=vE.toString;function xE(n){if(n!=null){try{return CE.call(n)}catch{}try{return n+""}catch{}}return""}var c0=xE;var wE=/[\\^$.*+?()[\]{}|]/g,ME=/^\[object .+?Constructor\]$/,SE=Function.prototype,DE=Object.prototype,PE=SE.toString,EE=DE.hasOwnProperty,OE=RegExp("^"+PE.call(EE).replace(wE,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function kE(n){if(!jt(n)||l0(n))return!1;var t=Sr(n)?OE:ME;return t.test(c0(n))}var d0=kE;function AE(n,t){return n?.[t]}var h0=AE;function TE(n,t){var e=h0(n,t);return d0(e)?e:void 0}var Dr=TE;var u0=Object.create,RE=(function(){function n(){}return function(t){if(!jt(t))return{};if(u0)return u0(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}})(),p0=RE;function IE(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}var m0=IE;function FE(n,t){var e=-1,i=n.length;for(t||(t=Array(i));++e<i;)t[e]=n[e];return t}var f0=FE;var NE=800,LE=16,VE=Date.now;function BE(n){var t=0,e=0;return function(){var i=VE(),a=LE-(i-e);if(e=i,a>0){if(++t>=NE)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}var g0=BE;function zE(n){return function(){return n}}var _0=zE;var jE=(function(){try{var n=Dr(Object,"defineProperty");return n({},"",{}),n}catch{}})(),Pr=jE;var HE=Pr?function(n,t){return Pr(n,"toString",{configurable:!0,enumerable:!1,value:_0(t),writable:!0})}:Nc,b0=HE;var UE=g0(b0),y0=UE;var WE=9007199254740991,$E=/^(?:0|[1-9]\d*)$/;function YE(n,t){var e=typeof n;return t=t??WE,!!t&&(e=="number"||e!="symbol"&&$E.test(n))&&n>-1&&n%1==0&&n<t}var Vc=YE;function qE(n,t,e){t=="__proto__"&&Pr?Pr(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}var Er=qE;function KE(n,t){return n===t||n!==n&&t!==t}var Hn=KE;var GE=Object.prototype,QE=GE.hasOwnProperty;function XE(n,t,e){var i=n[t];(!(QE.call(n,t)&&Hn(i,e))||e===void 0&&!(t in n))&&Er(n,t,e)}var v0=XE;function ZE(n,t,e,i){var a=!e;e||(e={});for(var r=-1,o=t.length;++r<o;){var s=t[r],l=i?i(e[s],n[s],s,e,n):void 0;l===void 0&&(l=n[s]),a?Er(e,s,l):v0(e,s,l)}return e}var C0=ZE;var x0=Math.max;function JE(n,t,e){return t=x0(t===void 0?n.length-1:t,0),function(){for(var i=arguments,a=-1,r=x0(i.length-t,0),o=Array(r);++a<r;)o[a]=i[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=i[a];return s[t]=e(o),m0(n,this,s)}}var w0=JE;function eO(n,t){return y0(w0(n,t,Nc),n+"")}var M0=eO;var tO=9007199254740991;function iO(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=tO}var Bc=iO;function nO(n){return n!=null&&Bc(n.length)&&!Sr(n)}var Or=nO;function aO(n,t,e){if(!jt(e))return!1;var i=typeof t;return(i=="number"?Or(e)&&Vc(t,e.length):i=="string"&&t in e)?Hn(e[t],n):!1}var S0=aO;function rO(n){return M0(function(t,e){var i=-1,a=e.length,r=a>1?e[a-1]:void 0,o=a>2?e[2]:void 0;for(r=n.length>3&&typeof r=="function"?(a--,r):void 0,o&&S0(e[0],e[1],o)&&(r=a<3?void 0:r,a=1),t=Object(t);++i<a;){var s=e[i];s&&n(t,s,i,r)}return t})}var D0=rO;var oO=Object.prototype;function sO(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||oO;return n===e}var zc=sO;function lO(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i}var P0=lO;var cO="[object Arguments]";function dO(n){return Ui(n)&&jn(n)==cO}var Dp=dO;var E0=Object.prototype,hO=E0.hasOwnProperty,uO=E0.propertyIsEnumerable,pO=Dp((function(){return arguments})())?Dp:function(n){return Ui(n)&&hO.call(n,"callee")&&!uO.call(n,"callee")},qo=pO;function mO(){return!1}var O0=mO;var T0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,k0=T0&&typeof module=="object"&&module&&!module.nodeType&&module,fO=k0&&k0.exports===T0,A0=fO?gi.Buffer:void 0,gO=A0?A0.isBuffer:void 0,_O=gO||O0,jc=_O;var bO="[object Arguments]",yO="[object Array]",vO="[object Boolean]",CO="[object Date]",xO="[object Error]",wO="[object Function]",MO="[object Map]",SO="[object Number]",DO="[object Object]",PO="[object RegExp]",EO="[object Set]",OO="[object String]",kO="[object WeakMap]",AO="[object ArrayBuffer]",TO="[object DataView]",RO="[object Float32Array]",IO="[object Float64Array]",FO="[object Int8Array]",NO="[object Int16Array]",LO="[object Int32Array]",VO="[object Uint8Array]",BO="[object Uint8ClampedArray]",zO="[object Uint16Array]",jO="[object Uint32Array]",Ve={};Ve[RO]=Ve[IO]=Ve[FO]=Ve[NO]=Ve[LO]=Ve[VO]=Ve[BO]=Ve[zO]=Ve[jO]=!0;Ve[bO]=Ve[yO]=Ve[AO]=Ve[vO]=Ve[TO]=Ve[CO]=Ve[xO]=Ve[wO]=Ve[MO]=Ve[SO]=Ve[DO]=Ve[PO]=Ve[EO]=Ve[OO]=Ve[kO]=!1;function HO(n){return Ui(n)&&Bc(n.length)&&!!Ve[jn(n)]}var R0=HO;function UO(n){return function(t){return n(t)}}var I0=UO;var F0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ko=F0&&typeof module=="object"&&module&&!module.nodeType&&module,WO=Ko&&Ko.exports===F0,Pp=WO&&Fc.process,$O=(function(){try{var n=Ko&&Ko.require&&Ko.require("util").types;return n||Pp&&Pp.binding&&Pp.binding("util")}catch{}})(),Ep=$O;var N0=Ep&&Ep.isTypedArray,YO=N0?I0(N0):R0,Hc=YO;var qO=Object.prototype,KO=qO.hasOwnProperty;function GO(n,t){var e=Yo(n),i=!e&&qo(n),a=!e&&!i&&jc(n),r=!e&&!i&&!a&&Hc(n),o=e||i||a||r,s=o?P0(n.length,String):[],l=s.length;for(var c in n)(t||KO.call(n,c))&&!(o&&(c=="length"||a&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Vc(c,l)))&&s.push(c);return s}var L0=GO;function QO(n,t){return function(e){return n(t(e))}}var V0=QO;function XO(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var B0=XO;var ZO=Object.prototype,JO=ZO.hasOwnProperty;function ek(n){if(!jt(n))return B0(n);var t=zc(n),e=[];for(var i in n)i=="constructor"&&(t||!JO.call(n,i))||e.push(i);return e}var z0=ek;function tk(n){return Or(n)?L0(n,!0):z0(n)}var Uc=tk;var ik=Dr(Object,"create"),hn=ik;function nk(){this.__data__=hn?hn(null):{},this.size=0}var j0=nk;function ak(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var H0=ak;var rk="__lodash_hash_undefined__",ok=Object.prototype,sk=ok.hasOwnProperty;function lk(n){var t=this.__data__;if(hn){var e=t[n];return e===rk?void 0:e}return sk.call(t,n)?t[n]:void 0}var U0=lk;var ck=Object.prototype,dk=ck.hasOwnProperty;function hk(n){var t=this.__data__;return hn?t[n]!==void 0:dk.call(t,n)}var W0=hk;var uk="__lodash_hash_undefined__";function pk(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=hn&&t===void 0?uk:t,this}var $0=pk;function kr(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}kr.prototype.clear=j0;kr.prototype.delete=H0;kr.prototype.get=U0;kr.prototype.has=W0;kr.prototype.set=$0;var Op=kr;function mk(){this.__data__=[],this.size=0}var Y0=mk;function fk(n,t){for(var e=n.length;e--;)if(Hn(n[e][0],t))return e;return-1}var Un=fk;var gk=Array.prototype,_k=gk.splice;function bk(n){var t=this.__data__,e=Un(t,n);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():_k.call(t,e,1),--this.size,!0}var q0=bk;function yk(n){var t=this.__data__,e=Un(t,n);return e<0?void 0:t[e][1]}var K0=yk;function vk(n){return Un(this.__data__,n)>-1}var G0=vk;function Ck(n,t){var e=this.__data__,i=Un(e,n);return i<0?(++this.size,e.push([n,t])):e[i][1]=t,this}var Q0=Ck;function Ar(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Ar.prototype.clear=Y0;Ar.prototype.delete=q0;Ar.prototype.get=K0;Ar.prototype.has=G0;Ar.prototype.set=Q0;var Wn=Ar;var xk=Dr(gi,"Map"),Wc=xk;function wk(){this.size=0,this.__data__={hash:new Op,map:new(Wc||Wn),string:new Op}}var X0=wk;function Mk(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}var Z0=Mk;function Sk(n,t){var e=n.__data__;return Z0(t)?e[typeof t=="string"?"string":"hash"]:e.map}var $n=Sk;function Dk(n){var t=$n(this,n).delete(n);return this.size-=t?1:0,t}var J0=Dk;function Pk(n){return $n(this,n).get(n)}var ev=Pk;function Ek(n){return $n(this,n).has(n)}var tv=Ek;function Ok(n,t){var e=$n(this,n),i=e.size;return e.set(n,t),this.size+=e.size==i?0:1,this}var iv=Ok;function Tr(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Tr.prototype.clear=X0;Tr.prototype.delete=J0;Tr.prototype.get=ev;Tr.prototype.has=tv;Tr.prototype.set=iv;var nv=Tr;var kk=V0(Object.getPrototypeOf,Object),$c=kk;var Ak="[object Object]",Tk=Function.prototype,Rk=Object.prototype,av=Tk.toString,Ik=Rk.hasOwnProperty,Fk=av.call(Object);function Nk(n){if(!Ui(n)||jn(n)!=Ak)return!1;var t=$c(n);if(t===null)return!0;var e=Ik.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&av.call(e)==Fk}var rv=Nk;function Lk(){this.__data__=new Wn,this.size=0}var ov=Lk;function Vk(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}var sv=Vk;function Bk(n){return this.__data__.get(n)}var lv=Bk;function zk(n){return this.__data__.has(n)}var cv=zk;var jk=200;function Hk(n,t){var e=this.__data__;if(e instanceof Wn){var i=e.__data__;if(!Wc||i.length<jk-1)return i.push([n,t]),this.size=++e.size,this;e=this.__data__=new nv(i)}return e.set(n,t),this.size=e.size,this}var dv=Hk;function Rr(n){var t=this.__data__=new Wn(n);this.size=t.size}Rr.prototype.clear=ov;Rr.prototype.delete=sv;Rr.prototype.get=lv;Rr.prototype.has=cv;Rr.prototype.set=dv;var hv=Rr;var fv=typeof exports=="object"&&exports&&!exports.nodeType&&exports,uv=fv&&typeof module=="object"&&module&&!module.nodeType&&module,Uk=uv&&uv.exports===fv,pv=Uk?gi.Buffer:void 0,mv=pv?pv.allocUnsafe:void 0;function Wk(n,t){if(t)return n.slice();var e=n.length,i=mv?mv(e):new n.constructor(e);return n.copy(i),i}var gv=Wk;var $k=gi.Uint8Array,kp=$k;function Yk(n){var t=new n.constructor(n.byteLength);return new kp(t).set(new kp(n)),t}var _v=Yk;function qk(n,t){var e=t?_v(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}var bv=qk;function Kk(n){return typeof n.constructor=="function"&&!zc(n)?p0($c(n)):{}}var yv=Kk;function Gk(n){return function(t,e,i){for(var a=-1,r=Object(t),o=i(t),s=o.length;s--;){var l=o[n?s:++a];if(e(r[l],l,r)===!1)break}return t}}var vv=Gk;var Qk=vv(),Cv=Qk;function Xk(n,t,e){(e!==void 0&&!Hn(n[t],e)||e===void 0&&!(t in n))&&Er(n,t,e)}var Go=Xk;function Zk(n){return Ui(n)&&Or(n)}var xv=Zk;function Jk(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}var Qo=Jk;function eA(n){return C0(n,Uc(n))}var wv=eA;function tA(n,t,e,i,a,r,o){var s=Qo(n,e),l=Qo(t,e),c=o.get(l);if(c){Go(n,e,c);return}var d=r?r(s,l,e+"",n,t,o):void 0,h=d===void 0;if(h){var u=Yo(l),p=!u&&jc(l),g=!u&&!p&&Hc(l);d=l,u||p||g?Yo(s)?d=s:xv(s)?d=f0(s):p?(h=!1,d=gv(l,!0)):g?(h=!1,d=bv(l,!0)):d=[]:rv(l)||qo(l)?(d=s,qo(s)?d=wv(s):(!jt(s)||Sr(s))&&(d=yv(l))):h=!1}h&&(o.set(l,d),a(d,l,i,r,o),o.delete(l)),Go(n,e,d)}var Mv=tA;function Sv(n,t,e,i,a){n!==t&&Cv(t,function(r,o){if(a||(a=new hv),jt(r))Mv(n,t,o,e,Sv,i,a);else{var s=i?i(Qo(n,o),r,o+"",n,t,a):void 0;s===void 0&&(s=r),Go(n,o,s)}},Uc)}var Dv=Sv;var iA=D0(function(n,t,e){Dv(n,t,e)}),Yc=iA;var Pv=new Y("Configuration for ngCharts");function Ev(...n){return{registerables:[...i0,...n]}}function Ov(...n){let t=Yc({},...n);return{provide:Pv,useValue:t}}var nA=(()=>{class n{constructor(){this.colorschemesOptions=new Be(void 0)}setColorschemesOptions(e){this.pColorschemesOptions=e,this.colorschemesOptions.next(e)}getColorschemesOptions(){return this.pColorschemesOptions}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kv=(()=>{class n{constructor(e,i,a,r){this.zone=i,this.themeService=a,this.type="bar",this.plugins=[],this.chartClick=new $,this.chartHover=new $,this.subs=[],this.themeOverrides={},r?.registerables&&Ac.register(...r.registerables),r?.defaults&&Te.set(r.defaults),this.ctx=e.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(Pm()).subscribe(o=>this.themeChanged(o)))}ngOnChanges(e){let i=["type"],a=Object.getOwnPropertyNames(e);if(a.some(r=>i.includes(r))||a.every(r=>e[r].isFirstChange()))this.render();else{let r=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,r.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,r.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,r.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(e=>e.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new Ac(this.ctx,this.getChartConfiguration()))}update(e){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(e))}hideDataset(e,i){this.chart&&(this.chart.getDatasetMeta(e).hidden=i,this.update())}isDatasetHidden(e){return this.chart?.getDatasetMeta(e)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(e){this.themeOverrides=e,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return Yc({onHover:(e,i)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:e,active:i}))},onClick:(e,i)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:e,active:i}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}static{this.\u0275fac=function(i){return new(i||n)(et(be),et(ht),et(nA),et(Pv,8))}}static{this.\u0275dir=q({type:n,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[ze]})}}return n})();var Xo=new Y("MAT_DATE_LOCALE",{providedIn:"root",factory:()=>_(Ms)}),Ir="Method not implemented",Ot=class{locale;_localeChanges=new G;localeChanges=this._localeChanges;setTime(t,e,i,a){throw new Error(Ir)}getHours(t){throw new Error(Ir)}getMinutes(t){throw new Error(Ir)}getSeconds(t){throw new Error(Ir)}parseTime(t,e){throw new Error(Ir)}addSeconds(t,e){throw new Error(Ir)}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return t==null||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}compareTime(t,e){return this.getHours(t)-this.getHours(e)||this.getMinutes(t)-this.getMinutes(e)||this.getSeconds(t)-this.getSeconds(e)}sameDate(t,e){if(t&&e){let i=this.isValid(t),a=this.isValid(e);return i&&a?!this.compareDate(t,e):i==a}return t==e}sameTime(t,e){if(t&&e){let i=this.isValid(t),a=this.isValid(e);return i&&a?!this.compareTime(t,e):i==a}return t==e}clampDate(t,e,i){return e&&this.compareDate(t,e)<0?e:i&&this.compareDate(t,i)>0?i:t}},Wi=new Y("mat-date-formats");var Av=(()=>{class n{_animationsDisabled=ut();state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,a){i&2&&de("mat-pseudo-checkbox-indeterminate",a.state==="indeterminate")("mat-pseudo-checkbox-checked",a.state==="checked")("mat-pseudo-checkbox-disabled",a.disabled)("mat-pseudo-checkbox-minimal",a.appearance==="minimal")("mat-pseudo-checkbox-full",a.appearance==="full")("_mat-animation-noopable",a._animationsDisabled)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(i,a){},styles:[`.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-pseudo-checkbox-minimal-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-pseudo-checkbox-minimal-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-pseudo-checkbox-full-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-pseudo-checkbox-full-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-pseudo-checkbox-full-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-pseudo-checkbox-full-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-pseudo-checkbox-full-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-pseudo-checkbox-full-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}
`],encapsulation:2,changeDetection:0})}return n})();var Tv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=De({type:n});static \u0275inj=Se({imports:[Ge]})}return n})();var aA=["text"],rA=[[["mat-icon"]],"*"],oA=["mat-icon","*"];function sA(n,t){if(n&1&&U(0,"mat-pseudo-checkbox",1),n&2){let e=k();D("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function lA(n,t){if(n&1&&U(0,"mat-pseudo-checkbox",3),n&2){let e=k();D("disabled",e.disabled)}}function cA(n,t){if(n&1&&(f(0,"span",4),y(1),m()),n&2){let e=k();C(),he("(",e.group.label,")")}}var Tp=new Y("MAT_OPTION_PARENT_COMPONENT"),Rp=new Y("MatOptgroup");var Ap=class{source;isUserInput;constructor(t,e=!1){this.source=t,this.isUserInput=e}},$i=(()=>{class n{_element=_(be);_changeDetectorRef=_(ve);_parent=_(Tp,{optional:!0});group=_(Rp,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=_(ci).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled()}set disabled(e){this._disabled.set(e)}_disabled=ae(!1);get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}onSelectionChange=new $;_text;_stateChanges=new G;constructor(){let e=_(li);e.load(Xi),e.load(vn),this._signalDisableRipple=!!this._parent&&Bm(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,i){let a=this._getHostElement();typeof a.focus=="function"&&a.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!At(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new Ap(this,e))}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-option"]],viewQuery:function(i,a){if(i&1&&Ke(aA,7),i&2){let r;ee(r=te())&&(a._text=r.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,a){i&1&&I("click",function(){return a._selectViaInteraction()})("keydown",function(o){return a._handleKeydown(o)}),i&2&&(Ta("id",a.id),pe("aria-selected",a.selected)("aria-disabled",a.disabled.toString()),de("mdc-list-item--selected",a.selected)("mat-mdc-option-multiple",a.multiple)("mat-mdc-option-active",a.active)("mdc-list-item--disabled",a.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",ce]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],ngContentSelectors:oA,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,a){i&1&&(tt(rA),Q(0,sA,1,2,"mat-pseudo-checkbox",1),Pe(1),f(2,"span",2,0),Pe(4,1),m(),Q(5,lA,1,1,"mat-pseudo-checkbox",3),Q(6,cA,2,1,"span",4),U(7,"div",5)),i&2&&(X(a.multiple?0:-1),C(5),X(!a.multiple&&a.selected&&!a.hideSingleSelectionIndicator?5:-1),C(),X(a.group&&a.group._inert?6:-1),C(),D("matRippleTrigger",a._getHostElement())("matRippleDisabled",a.disabled||a.disableRipple))},dependencies:[Av,Cf],styles:[`.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-active,.mat-mdc-option-multiple,:focus,:hover){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-active,.mat-mdc-option-multiple,:focus,:hover) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-pseudo-checkbox-minimal-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mat-list-list-item-selected-container-color: var(--mat-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return n})();function Rv(n,t,e){if(e.length){let i=t.toArray(),a=e.toArray(),r=0;for(let o=0;o<n+1;o++)i[o].group&&i[o].group===a[r]&&r++;return r}return 0}function Iv(n,t,e,i){return n<e?n:n+t>e+i?Math.max(0,n-i+t):e}var Ip=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=De({type:n});static \u0275inj=Se({imports:[Rs,Tv,$i,Ge]})}return n})();var dA=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/,hA=/^(\d?\d)[:.](\d?\d)(?:[:.](\d?\d))?\s*(AM|PM)?$/i;function Fp(n,t){let e=Array(n);for(let i=0;i<n;i++)e[i]=t(i);return e}var uA=(()=>{class n extends Ot{_matDateLocale=_(Xo,{optional:!0});constructor(){super();let e=_(Xo,{optional:!0});e!==void 0&&(this._matDateLocale=e),super.setLocale(this._matDateLocale)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){let i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return Fp(12,a=>this._format(i,new Date(2017,a,1)))}getDateNames(){let e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Fp(31,i=>this._format(e,new Date(2017,0,i+1)))}getDayOfWeekNames(e){let i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return Fp(7,a=>this._format(i,new Date(2017,0,a+1)))}getYearName(e){let i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,e)}getFirstDayOfWeek(){if(typeof Intl<"u"&&Intl.Locale){let e=new Intl.Locale(this.locale),i=(e.getWeekInfo?.()||e.weekInfo)?.firstDay??0;return i===7?0:i}return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,a){let r=this._createDateWithOverflow(e,i,a);return r.getMonth()!=i,r}today(){return new Date}parse(e,i){return typeof e=="number"?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");let a=new Intl.DateTimeFormat(this.locale,_e(A({},i),{timeZone:"utc"}));return this._format(a,e)}addCalendarYears(e,i){return this.addCalendarMonths(e,i*12)}addCalendarMonths(e,i){let a=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(a)!=((this.getMonth(e)+i)%12+12)%12&&(a=this._createDateWithOverflow(this.getYear(a),this.getMonth(a),0)),a}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if(typeof e=="string"){if(!e)return null;if(dA.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}setTime(e,i,a,r){let o=this.clone(e);return o.setHours(i,a,r,0),o}getHours(e){return e.getHours()}getMinutes(e){return e.getMinutes()}getSeconds(e){return e.getSeconds()}parseTime(e,i){if(typeof e!="string")return e instanceof Date?new Date(e.getTime()):null;let a=e.trim();if(a.length===0)return null;let r=this._parseTimeString(a);if(r===null){let o=a.replace(/[^0-9:(AM|PM)]/gi,"").trim();o.length>0&&(r=this._parseTimeString(o))}return r||this.invalid()}addSeconds(e,i){return new Date(e.getTime()+i*1e3)}_createDateWithOverflow(e,i,a){let r=new Date;return r.setFullYear(e,i,a),r.setHours(0,0,0,0),r}_2digit(e){return("00"+e).slice(-2)}_format(e,i){let a=new Date;return a.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),a.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(a)}_parseTimeString(e){let i=e.toUpperCase().match(hA);if(i){let a=parseInt(i[1]),r=parseInt(i[2]),o=i[3]==null?void 0:parseInt(i[3]),s=i[4];if(a===12?a=s==="AM"?0:a:s==="PM"&&(a+=12),Np(a,0,23)&&Np(r,0,59)&&(o==null||Np(o,0,59)))return this.setTime(this.today(),a,r,o||0)}return null}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();function Np(n,t,e){return!isNaN(n)&&n>=t&&n<=e}var pA={parse:{dateInput:null,timeInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},timeInput:{hour:"numeric",minute:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"},timeOptionLabel:{hour:"numeric",minute:"numeric"}}};var Fv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=De({type:n});static \u0275inj=Se({providers:[Lp()]})}return n})();function Lp(n=pA){return[{provide:Ot,useClass:uA},{provide:Wi,useValue:n}]}function mA(n){let t=n,e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length,a=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return t===1?1:a===0&&e!==0&&e%1e6===0&&i===0||!(a>=0&&a<=5)?4:5}var Nv=["es",[["a.\u202Fm.","p.\u202Fm."],void 0,["a.\xA0m.","p.\xA0m."]],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[void 0,"EGP"],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",mA];var fA=["*"];var gA=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],_A=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],bA=new Y("MAT_CARD_CONFIG"),Yn=(()=>{class n{appearance;constructor(){let e=_(bA,{optional:!0});this.appearance=e?.appearance||"raised"}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:8,hostBindings:function(i,a){i&2&&de("mat-mdc-card-outlined",a.appearance==="outlined")("mdc-card--outlined",a.appearance==="outlined")("mat-mdc-card-filled",a.appearance==="filled")("mdc-card--filled",a.appearance==="filled")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:fA,decls:1,vars:0,template:function(i,a){i&1&&(tt(),Pe(0))},styles:[`.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-elevated-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mat-card-outlined-container-color, var(--mat-sys-surface));border-radius:var(--mat-card-outlined-container-shape, var(--mat-sys-corner-medium));border-width:var(--mat-card-outlined-outline-width, 1px);border-color:var(--mat-card-outlined-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mat-card-outlined-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mat-mdc-card-filled{background-color:var(--mat-card-filled-container-color, var(--mat-sys-surface-container-highest));border-radius:var(--mat-card-filled-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-filled-container-elevation, var(--mat-sys-level0))}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}
`],encapsulation:2,changeDetection:0})}return n})(),qn=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return n})();var Kn=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return n})(),qc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return n})();var Gn=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:_A,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(i,a){i&1&&(tt(gA),Pe(0),Yt(1,"div",0),Pe(2,1),qt(),Pe(3,2))},encapsulation:2,changeDetection:0})}return n})();var Qn=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=De({type:n});static \u0275inj=Se({imports:[Ge]})}return n})();var yA=["determinateSpinner"];function vA(n,t){if(n&1&&($t(),f(0,"svg",11),U(1,"circle",12),m()),n&2){let e=k();pe("viewBox",e._viewBox()),C(),Ai("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),pe("r",e._circleRadius())}}var CA=new Y("mat-progress-spinner-default-options",{providedIn:"root",factory:()=>({diameter:Lv})}),Lv=100,xA=10,Gc=(()=>{class n{_elementRef=_(be);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=_(CA),i=df(),a=this._elementRef.nativeElement;this._noopAnimations=i==="di-disabled"&&!!e&&!e._forceAnimations,this.mode=a.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",!this._noopAnimations&&i==="reduced-motion"&&a.classList.add("mat-progress-spinner-reduced-motion"),e&&(e.color&&(this.color=this._defaultColor=e.color),e.diameter&&(this.diameter=e.diameter),e.strokeWidth&&(this.strokeWidth=e.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=Lv;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-xA)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,a){if(i&1&&Ke(yA,5),i&2){let r;ee(r=te())&&(a._determinateCircle=r.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(i,a){i&2&&(pe("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",a.mode==="determinate"?a.value:null)("mode",a.mode),wt("mat-"+a.color),Ai("width",a.diameter,"px")("height",a.diameter,"px")("--mat-progress-spinner-size",a.diameter+"px")("--mat-progress-spinner-active-indicator-width",a.diameter+"px"),de("_mat-animation-noopable",a._noopAnimations)("mdc-circular-progress--indeterminate",a.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",Ti],diameter:[2,"diameter","diameter",Ti],strokeWidth:[2,"strokeWidth","strokeWidth",Ti]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,a){if(i&1&&(j(0,vA,2,8,"ng-template",null,0,Um),f(2,"div",2,1),$t(),f(4,"svg",3),U(5,"circle",4),m()(),Gr(),f(6,"div",5)(7,"div",6)(8,"div",7),ct(9,8),m(),f(10,"div",9),ct(11,8),m(),f(12,"div",10),ct(13,8),m()()()),i&2){let r=ki(1);C(4),pe("viewBox",a._viewBox()),C(),Ai("stroke-dasharray",a._strokeCircumference(),"px")("stroke-dashoffset",a._strokeDashOffset(),"px")("stroke-width",a._circleStrokeWidth(),"%"),pe("r",a._circleRadius()),C(4),D("ngTemplateOutlet",r),C(2),D("ngTemplateOutlet",r),C(2),D("ngTemplateOutlet",r)}},dependencies:[Zm],styles:[`.mat-mdc-progress-spinner{--mat-progress-spinner-animation-multiplier: 1;display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mat-progress-spinner-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mat-progress-spinner-reduced-motion{--mat-progress-spinner-animation-multiplier: 1.25}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate calc(1568.2352941176ms*var(--mat-progress-spinner-animation-multiplier)) linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mat-progress-spinner-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate calc(5332ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return n})();var Qc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=De({type:n});static \u0275inj=Se({imports:[Ge]})}return n})();var Ht=class n{constructor(t){this.router=t}SESSION_KEY="expense_tracker_session";ENCRYPTION_KEY="expense_tracker_encryption_key";login(t){if(t.password&&t.password.length>=8){let e=this.generateSessionToken();return this.setSession(e),this.setEncryptionKey(t.password),H(!0)}return H(!1)}logout(){this.clearSession(),this.clearEncryptionKey(),this.router.navigate(["/login"])}isAuthenticated(){let t=this.getSession(),e=this.getEncryptionKey();return t!==null&&e!==null}getSession(){return sessionStorage.getItem(this.SESSION_KEY)}getEncryptionKey(){return sessionStorage.getItem(this.ENCRYPTION_KEY)}setSession(t){sessionStorage.setItem(this.SESSION_KEY,t)}setEncryptionKey(t){sessionStorage.setItem(this.ENCRYPTION_KEY,t)}clearSession(){sessionStorage.removeItem(this.SESSION_KEY)}clearEncryptionKey(){sessionStorage.removeItem(this.ENCRYPTION_KEY)}generateSessionToken(){return`session_${Date.now()}_${Math.random().toString(36).substring(2)}`}static \u0275fac=function(e){return new(e||n)(qe(Ze))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xn=new Y("StorageService");var Zn=class n{storage=_(Xn);settingsSubject=new Be({categories:[],tags:[],lastUpdated:new Date});settings$=this.settingsSubject.asObservable();categories$=this.settings$.pipe(ie(t=>t.categories));tags$=this.settings$.pipe(ie(t=>t.tags));loadSettings(){return this.storage.readSettings().pipe(ie(t=>(this.settingsSubject.next(t),t)))}validateCategory(t,e){let i=[];(!t||t.trim().length===0)&&i.push("La categor\xEDa no puede estar vac\xEDa");let a=this.settingsSubject.value.categories,r=t.trim().toLowerCase(),o=e?.trim().toLowerCase();return a.some(l=>{let c=l.trim().toLowerCase();return c===r&&c!==o})&&i.push("Ya existe una categor\xEDa con este nombre"),{valid:i.length===0,errors:i}}validateTag(t,e){let i=[];(!t||t.trim().length===0)&&i.push("La etiqueta no puede estar vac\xEDa");let a=this.settingsSubject.value.tags,r=t.trim().toLowerCase(),o=e?.trim().toLowerCase();return a.some(l=>{let c=l.trim().toLowerCase();return c===r&&c!==o})&&i.push("Ya existe una etiqueta con este nombre"),{valid:i.length===0,errors:i}}addCategory(t){let e=this.validateCategory(t);if(!e.valid)throw new Error(e.errors.join(", "));let i=this.settingsSubject.value,a=_e(A({},i),{categories:[...i.categories,t.trim()],lastUpdated:new Date});return this.settingsSubject.next(a),this.storage.writeSettings(a).pipe(ie(()=>t.trim()))}updateCategory(t,e){let i=this.validateCategory(e,t);if(!i.valid)throw new Error(i.errors.join(", "));let a=this.settingsSubject.value,r=a.categories.findIndex(l=>l.toLowerCase()===t.toLowerCase());if(r===-1)throw new Error("Categor\xEDa no encontrada");let o=[...a.categories];o[r]=e.trim();let s=_e(A({},a),{categories:o,lastUpdated:new Date});return this.settingsSubject.next(s),this.storage.writeSettings(s).pipe(ie(()=>e.trim()))}deleteCategory(t){let e=this.settingsSubject.value,i=e.categories.findIndex(o=>o.toLowerCase()===t.toLowerCase());if(i===-1)throw new Error("Categor\xEDa no encontrada");let a=e.categories.filter((o,s)=>s!==i),r=_e(A({},e),{categories:a,lastUpdated:new Date});return this.settingsSubject.next(r),this.storage.writeSettings(r).pipe(ie(()=>!0))}addTag(t){let e=this.validateTag(t);if(!e.valid)throw new Error(e.errors.join(", "));let i=this.settingsSubject.value,a=_e(A({},i),{tags:[...i.tags,t.trim()],lastUpdated:new Date});return this.settingsSubject.next(a),this.storage.writeSettings(a).pipe(ie(()=>t.trim()))}updateTag(t,e){let i=this.validateTag(e,t);if(!i.valid)throw new Error(i.errors.join(", "));let a=this.settingsSubject.value,r=a.tags.findIndex(l=>l.toLowerCase()===t.toLowerCase());if(r===-1)throw new Error("Etiqueta no encontrada");let o=[...a.tags];o[r]=e.trim();let s=_e(A({},a),{tags:o,lastUpdated:new Date});return this.settingsSubject.next(s),this.storage.writeSettings(s).pipe(ie(()=>e.trim()))}deleteTag(t){let e=this.settingsSubject.value,i=e.tags.findIndex(o=>o.toLowerCase()===t.toLowerCase());if(i===-1)throw new Error("Etiqueta no encontrada");let a=e.tags.filter((o,s)=>s!==i),r=_e(A({},e),{tags:a,lastUpdated:new Date});return this.settingsSubject.next(r),this.storage.writeSettings(r).pipe(ie(()=>!0))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xc=class n{CREDENTIALS_KEY="webauthn_credentials";RP_NAME="Expense Tracker";RP_ID=typeof window<"u"?window.location.hostname:"localhost";DEFAULT_TIMEOUT=3e4;constructor(){}async checkCapability(){if(!window.PublicKeyCredential)return{isSupported:!1,hasPlatformAuthenticator:!1,errorMessage:"WebAuthn no est\xE1 soportado en este navegador"};try{let t=await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();return{isSupported:!0,hasPlatformAuthenticator:t,errorMessage:t?void 0:"No hay autenticador biom\xE9trico disponible en este dispositivo"}}catch{return{isSupported:!0,hasPlatformAuthenticator:!1,errorMessage:"Error al verificar capacidades biom\xE9tricas"}}}async register(t,e){try{if(!this.isOnline())return{success:!1,error:"L'autenticaci\xF3 biom\xE8trica requereix connexi\xF3 a internet"};let i=await this.checkCapability();if(!i.isSupported||!i.hasPlatformAuthenticator)return{success:!1,error:i.errorMessage||"Autenticaci\xF3n biom\xE9trica no disponible"};let a=this.generateChallenge(),r=new TextEncoder().encode(t.username),o={challenge:a,rp:{name:this.RP_NAME,id:this.RP_ID},user:{id:r,name:t.username,displayName:t.displayName},pubKeyCredParams:[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required",requireResidentKey:!1},timeout:t.timeout||this.DEFAULT_TIMEOUT,attestation:"none"},s=await navigator.credentials.create({publicKey:o});if(!s)return{success:!1,error:"No se pudo crear la credencial"};let l=this.arrayBufferToBase64(s.rawId),c;return e&&(c=await this.encryptPassword(e,l)),this.storeCredential({credentialId:l,username:t.username,createdAt:Date.now(),encryptedPassword:c}),{success:!0,credentialId:l}}catch(i){return{success:!1,error:this.getErrorMessage(i)}}}async authenticate(t){try{if(!this.isOnline())return{success:!1,error:"L'autenticaci\xF3 biom\xE8trica requereix connexi\xF3 a internet"};let e=await this.checkCapability();if(!e.isSupported||!e.hasPlatformAuthenticator)return{success:!1,error:e.errorMessage||"Autenticaci\xF3n biom\xE9trica no disponible"};let i=this.getCredential(t.username);if(!i)return{success:!1,error:"No hay credencial registrada para este usuario"};let a=this.generateChallenge(),r=this.base64ToArrayBuffer(i.credentialId),o={challenge:a,rpId:this.RP_ID,allowCredentials:[{id:r,type:"public-key",transports:["internal"]}],userVerification:"required",timeout:t.timeout||this.DEFAULT_TIMEOUT};if(!await navigator.credentials.get({publicKey:o}))return{success:!1,error:"Autenticaci\xF3n cancelada"};let l;if(i.encryptedPassword)try{l=await this.decryptPassword(i.encryptedPassword,i.credentialId)}catch(c){return console.error("Error decrypting password:",c),{success:!1,error:"Error al recuperar la contrase\xF1a almacenada"}}return{success:!0,credentialId:i.credentialId,password:l}}catch(e){let i=e.name||"",a=e.message||"";return i==="InvalidStateError"||i==="NotAllowedError"||a.includes("credential")||a.includes("authenticator")?(this.removeCredential(t.username),{success:!1,error:"La credencial biom\xE9trica ya no es v\xE1lida. Por favor, reg\xEDstrate de nuevo."}):{success:!1,error:this.getErrorMessage(e)}}}hasCredential(t){return this.getCredential(t)!==null}getCredential(t){return this.getAllCredentials().find(i=>i.username===t)||null}storeCredential(t){let i=this.getAllCredentials().filter(a=>a.username!==t.username);i.push(t),localStorage.setItem(this.CREDENTIALS_KEY,JSON.stringify(i))}removeCredential(t){let i=this.getAllCredentials().filter(a=>a.username!==t);localStorage.setItem(this.CREDENTIALS_KEY,JSON.stringify(i))}async validateCredential(t){try{let e=this.getCredential(t);if(!e)return{isValid:!1,needsReregistration:!0,error:"No hay credencial registrada"};let i=await this.checkCapability();if(!i.isSupported||!i.hasPlatformAuthenticator)return{isValid:!1,needsReregistration:!0,error:i.errorMessage||"Autenticador biom\xE9trico no disponible"};try{let a=this.generateChallenge(),r=this.base64ToArrayBuffer(e.credentialId),o={challenge:a,rpId:this.RP_ID,allowCredentials:[{id:r,type:"public-key",transports:["internal"]}],userVerification:"required",timeout:5e3};return await navigator.credentials.get({publicKey:o}),{isValid:!0,needsReregistration:!1}}catch(a){let r=a.name||"",o=a.message||"";return r==="NotAllowedError"||r==="InvalidStateError"||o.includes("credential")||o.includes("authenticator")?{isValid:!1,needsReregistration:!0,error:"La credencial biom\xE9trica ya no es v\xE1lida. Por favor, reg\xEDstrate de nuevo."}:r==="TimeoutError"||r==="AbortError"?{isValid:!0,needsReregistration:!1}:{isValid:!1,needsReregistration:!0,error:"No se pudo validar la credencial biom\xE9trica"}}}catch(e){return{isValid:!1,needsReregistration:!0,error:this.getErrorMessage(e)}}}async checkCredentialHealth(t){try{let e=this.getCredential(t);if(!e)return!1;let i=await this.checkCapability();if(!i.isSupported||!i.hasPlatformAuthenticator)return!1;if(e.encryptedPassword)try{return await this.decryptPassword(e.encryptedPassword,e.credentialId),!0}catch{return!1}return!0}catch{return!1}}getAllCredentials(){let t=localStorage.getItem(this.CREDENTIALS_KEY);if(!t)return[];try{return JSON.parse(t)}catch{return[]}}generateChallenge(){let t=new Uint8Array(32);return crypto.getRandomValues(t),t}arrayBufferToBase64(t){let e=new Uint8Array(t),i="";for(let a=0;a<e.byteLength;a++)i+=String.fromCharCode(e[a]);return btoa(i)}base64ToArrayBuffer(t){let e=atob(t),i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i.buffer}getErrorMessage(t){if(!t)return"Error desconocido";let e=t.name||"",i=t.message||"";return e==="NotAllowedError"||i.includes("NotAllowedError")?"Autenticaci\xF3n cancelada o denegada":e==="NotSupportedError"||i.includes("NotSupportedError")?"Autenticaci\xF3n biom\xE9trica no soportada":e==="InvalidStateError"||i.includes("InvalidStateError")?"Ya existe una credencial para este dispositivo":e==="TimeoutError"||i.includes("timeout")?"Tiempo de espera agotado. Por favor, int\xE9ntalo de nuevo":e==="SecurityError"||i.includes("SecurityError")?"Error de seguridad. Verifica que est\xE9s usando HTTPS":e==="AbortError"||i.includes("AbortError")?"Operaci\xF3n cancelada":`Error: ${i||e||"Error desconocido"}`}async encryptPassword(t,e){try{let i=await this.deriveEncryptionKey(e),a=crypto.getRandomValues(new Uint8Array(12)),o=new TextEncoder().encode(t),s=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},i,o),l=new Uint8Array(a.length+s.byteLength);return l.set(a,0),l.set(new Uint8Array(s),a.length),this.arrayBufferToBase64(l.buffer)}catch(i){throw console.error("Error encrypting password:",i),new Error("Failed to encrypt password")}}async decryptPassword(t,e){try{let i=await this.deriveEncryptionKey(e),a=this.base64ToArrayBuffer(t),r=a.slice(0,12),o=a.slice(12),s=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},i,o);return new TextDecoder().decode(s)}catch(i){throw console.error("Error decrypting password:",i),new Error("Failed to decrypt password")}}async deriveEncryptionKey(t){let e=new TextEncoder,i=e.encode(t),a=await crypto.subtle.importKey("raw",i,"PBKDF2",!1,["deriveBits","deriveKey"]),r=e.encode("webauthn-password-encryption-v1");return crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},a,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}isOnline(){return typeof navigator<"u"&&navigator.onLine}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var Zc=class n{dialogRef=_(Xs);onDecline(){this.dialogRef.close(!1)}onAccept(){this.dialogRef.close(!0)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=z({type:n,selectors:[["app-biometric-prompt-dialog"]],decls:15,vars:0,consts:[[1,"biometric-prompt-header"],[1,"biometric-icon"],["mat-dialog-title",""],[1,"prompt-message"],[1,"prompt-details"],["mat-button","",1,"decline-button",3,"click"],["mat-raised-button","","color","primary",1,"accept-button",3,"click"]],template:function(e,i){e&1&&(f(0,"div",0)(1,"mat-icon",1),y(2,"fingerprint"),m(),f(3,"h2",2),y(4,"Habilitar autenticaci\xF3 biom\xE8trica"),m()(),f(5,"mat-dialog-content")(6,"p",3),y(7," Vols utilitzar la teva empremta digital o reconeixement facial per iniciar sessi\xF3 m\xE9s r\xE0pidament en el futur? "),m(),f(8,"p",4),y(9," Podr\xE0s continuar utilitzant la teva contrasenya si ho prefereixes. "),m()(),f(10,"mat-dialog-actions")(11,"button",5),I("click",function(){return i.onDecline()}),y(12," Ara no "),m(),f(13,"button",6),I("click",function(){return i.onAccept()}),y(14," Habilitar "),m()())},dependencies:[Mt,Ya,Zs,el,Js,mt,pt,Dt,St],styles:[".biometric-prompt-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;padding:16px 0 8px}.biometric-prompt-header[_ngcontent-%COMP%]   .biometric-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:var(--primary-color, #1976d2);margin-bottom:12px}.biometric-prompt-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:500;line-height:1.3}mat-dialog-content[_ngcontent-%COMP%]{padding:16px 0;text-align:center}mat-dialog-content[_ngcontent-%COMP%]   .prompt-message[_ngcontent-%COMP%]{margin:0 0 12px;font-size:16px;line-height:1.5;color:#000000de}mat-dialog-content[_ngcontent-%COMP%]   .prompt-details[_ngcontent-%COMP%]{margin:0;font-size:14px;line-height:1.5;color:#0009}mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;padding:16px 0 8px;flex-wrap:wrap}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-height:44px;min-width:100px;font-size:14px;font-weight:500;padding:0 24px}@media(max-width:767px){.biometric-prompt-header[_ngcontent-%COMP%]{padding:12px 0 8px}.biometric-prompt-header[_ngcontent-%COMP%]   .biometric-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px}.biometric-prompt-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}mat-dialog-content[_ngcontent-%COMP%]   .prompt-message[_ngcontent-%COMP%]{font-size:15px}mat-dialog-content[_ngcontent-%COMP%]   .prompt-details[_ngcontent-%COMP%]{font-size:13px}mat-dialog-actions[_ngcontent-%COMP%]{flex-direction:column;gap:8px}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;min-height:48px}}@media(min-width:768px)and (max-width:1023px){.biometric-prompt-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}mat-dialog-content[_ngcontent-%COMP%]   .prompt-message[_ngcontent-%COMP%]{font-size:17px}}@media(min-width:1920px){.biometric-prompt-header[_ngcontent-%COMP%]   .biometric-icon[_ngcontent-%COMP%]{font-size:56px;width:56px;height:56px}.biometric-prompt-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}mat-dialog-content[_ngcontent-%COMP%]   .prompt-message[_ngcontent-%COMP%]{font-size:18px}mat-dialog-content[_ngcontent-%COMP%]   .prompt-details[_ngcontent-%COMP%]{font-size:15px}}@media(max-width:767px)and (orientation:landscape){.biometric-prompt-header[_ngcontent-%COMP%]{padding:8px 0 4px}.biometric-prompt-header[_ngcontent-%COMP%]   .biometric-icon[_ngcontent-%COMP%]{font-size:36px;width:36px;height:36px;margin-bottom:8px}.biometric-prompt-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}mat-dialog-content[_ngcontent-%COMP%]{padding:12px 0}mat-dialog-content[_ngcontent-%COMP%]   .prompt-message[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px}mat-dialog-content[_ngcontent-%COMP%]   .prompt-details[_ngcontent-%COMP%]{font-size:12px}mat-dialog-actions[_ngcontent-%COMP%]{padding:12px 0 4px;flex-direction:row}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-height:44px}}"]})};function SA(n,t){n&1&&(f(0,"div",2)(1,"mat-icon"),y(2,"cloud_off"),m(),f(3,"span"),y(4,"Sense connexi\xF3 a internet. L'autenticaci\xF3 biom\xE8trica no est\xE0 disponible."),m()())}function DA(n,t){n&1&&U(0,"mat-spinner",10)}function PA(n,t){n&1&&(f(0,"mat-icon"),y(1,"fingerprint"),m())}function EA(n,t){if(n&1){let e=ye();f(0,"div",3)(1,"button",9),I("click",function(){L(e);let a=k();return V(a.onBiometricLogin())}),Q(2,DA,1,0,"mat-spinner",10)(3,PA,2,0,"mat-icon"),f(4,"span"),y(5,"Accedir amb biometria"),m()(),f(6,"div",11)(7,"span"),y(8,"o"),m()()()}if(n&2){let e=k();C(),D("disabled",e.biometricLoading||e.isOffline),C(),X(e.biometricLoading?2:3)}}function OA(n,t){n&1&&y(0," La clau d'encriptaci\xF3 \xE9s obligat\xF2ria ")}function kA(n,t){n&1&&y(0," La clau ha de tenir m\xEDnim 8 car\xE0cters ")}function AA(n,t){if(n&1&&(f(0,"mat-error"),Q(1,OA,1,0),Q(2,kA,1,0),m()),n&2){let e,i,a=k();C(),X((e=a.loginForm.get("password"))!=null&&e.hasError("required")?1:-1),C(),X((i=a.loginForm.get("password"))!=null&&i.hasError("minlength")?2:-1)}}function TA(n,t){if(n&1){let e=ye();f(0,"button",14),I("click",function(){L(e);let a=k(2);return V(a.onBiometricLogin())}),f(1,"mat-icon"),y(2,"refresh"),m(),y(3," Tornar a intentar "),m()}}function RA(n,t){if(n&1&&(f(0,"div",7)(1,"div",12),y(2),m(),Q(3,TA,4,0,"button",13),m()),n&2){let e=k();C(2),he(" ",e.errorMessage," "),C(),X(e.showBiometricButton&&!e.biometricLoading&&e.errorMessage.includes("biom\xE8tric")?3:-1)}}var Jc=class n{loginForm;errorMessage="";showBiometricButton=!1;biometricLoading=!1;isOffline=!1;fb=_(zs);authService=_(Ht);router=_(Ze);settingsService=_(Zn);webAuthnService=_(Xc);dialog=_($a);constructor(){this.loginForm=this.fb.group({username:["user"],password:["",[je.required,je.minLength(8)]]}),this.initializeBiometricLogin(),this.setupConnectivityMonitoring()}async initializeBiometricLogin(){await this.checkBiometricAvailability()&&!this.isOffline&&setTimeout(()=>{this.onBiometricLogin()},300)}async checkBiometricAvailability(){try{let t="user";if(this.webAuthnService.hasCredential(t)){let e=await this.webAuthnService.checkCapability();if(e.isSupported&&e.hasPlatformAuthenticator)return await this.webAuthnService.checkCredentialHealth(t)?(this.showBiometricButton=!0,!0):(this.webAuthnService.removeCredential(t),this.showBiometricButton=!1,console.warn("Biometric credential is no longer valid and has been removed"),!1)}return!1}catch(t){return console.error("Error checking biometric availability:",t),this.showBiometricButton=!1,!1}}setupConnectivityMonitoring(){this.isOffline=!navigator.onLine,window.addEventListener("online",()=>{this.isOffline=!1,this.errorMessage.includes("connexi\xF3 a internet")&&(this.errorMessage="")}),window.addEventListener("offline",()=>{this.isOffline=!0})}onSubmit(){this.loginForm.valid&&(this.errorMessage="",this.authService.login(this.loginForm.value).subscribe({next:t=>{t?this.settingsService.loadSettings().subscribe({next:()=>{this.checkAndShowBiometricPrompt()},error:e=>{console.error("Error loading settings after login:",e),this.checkAndShowBiometricPrompt()}}):(this.errorMessage="Clau d'encriptaci\xF3 inv\xE0lida (m\xEDnim 8 car\xE0cters)",this.loginForm.patchValue({password:""}))},error:()=>{this.errorMessage="S'ha produ\xEFt un error durant l'inici de sessi\xF3"}}))}async checkAndShowBiometricPrompt(){try{let t=this.loginForm.value.username||"user";if(this.webAuthnService.hasCredential(t)){this.navigateToDashboard();return}let e=await this.webAuthnService.checkCapability();if(!e.isSupported||!e.hasPlatformAuthenticator){this.navigateToDashboard();return}this.showBiometricPrompt(t)}catch(t){console.error("Error checking biometric capability:",t),this.navigateToDashboard()}}showBiometricPrompt(t){this.dialog.open(Zc,{width:"400px",disableClose:!1,autoFocus:!0}).afterClosed().subscribe(i=>{i?this.initiateBiometricRegistration(t):this.navigateToDashboard()})}async initiateBiometricRegistration(t){try{let e=this.loginForm.value.password;if(!e){this.showRegistrationError("No se pudo obtener la contrase\xF1a",t);return}let i=await this.webAuthnService.register({username:t,displayName:t,timeout:3e4},e);i.success?(this.showSuccessMessage("Autenticaci\xF3 biom\xE8trica activada correctament"),this.navigateToDashboard()):this.showRegistrationError(i.error||"Error desconocido",t)}catch(e){console.error("Unexpected error during biometric registration:",e),this.showRegistrationError("Error inesperat durant el registre",t)}}showSuccessMessage(t){console.log("SUCCESS:",t)}showRegistrationError(t,e){console.error("Registration error:",t),confirm(`Error en el registre biom\xE8tric: ${t}

\xBFVols tornar-ho a intentar?`)?this.initiateBiometricRegistration(e):this.navigateToDashboard()}navigateToDashboard(){this.router.navigate(["/dashboard"])}async onBiometricLogin(){this.biometricLoading=!0,this.errorMessage="";try{let t="user",e=await this.webAuthnService.authenticate({username:t,timeout:1e4});e.success&&e.password?this.authService.login({username:t,password:e.password}).subscribe({next:i=>{i?this.settingsService.loadSettings().subscribe({next:()=>{this.navigateToDashboard()},error:a=>{console.error("Error loading settings after biometric login:",a),this.navigateToDashboard()}}):(this.errorMessage="Error en l'autenticaci\xF3: clau d'encriptaci\xF3 inv\xE0lida",this.biometricLoading=!1)},error:i=>{console.error("Error during AuthService login:",i),this.errorMessage="Error durant l'inici de sessi\xF3",this.biometricLoading=!1}}):e.success&&!e.password?(this.errorMessage="Credencial biom\xE8trica sense contrasenya associada. Si us plau, utilitza l'inici de sessi\xF3 amb contrasenya.",this.biometricLoading=!1):this.handleBiometricError(e.error||"Error en l'autenticaci\xF3 biom\xE8trica")}catch(t){console.error("Unexpected error during biometric login:",t),this.handleBiometricError("Error inesperat durant l'autenticaci\xF3 biom\xE8trica")}}handleBiometricError(t){if(this.biometricLoading=!1,t.includes("connexi\xF3 a internet")||t.includes("network")||t.includes("offline")){this.errorMessage="L'autenticaci\xF3 biom\xE8trica requereix connexi\xF3 a internet. Si us plau, utilitza la contrasenya per iniciar sessi\xF3 sense connexi\xF3.";return}if(t.includes("ya no es v\xE1lida")||t.includes("no longer valid")||t.includes("reg\xEDstrate de nuevo")||t.includes("re-register")){this.errorMessage="La credencial biom\xE8trica ja no \xE9s v\xE0lida (possiblement per canvis en la configuraci\xF3 del dispositiu). Si us plau, utilitza la contrasenya per iniciar sessi\xF3 i registra de nou l'autenticaci\xF3 biom\xE8trica.",this.showBiometricButton=!1;return}t.includes("bloqueado")||t.includes("locked")||t.includes("demasiados intentos")||t.includes("too many attempts")?this.errorMessage="L'autenticador biom\xE8tric est\xE0 bloquejat per massa intents fallits. Si us plau, utilitza la contrasenya per iniciar sessi\xF3.":t.includes("cancelada")||t.includes("denegada")||t.includes("canceled")||t.includes("denied")?this.errorMessage="Autenticaci\xF3 biom\xE8trica cancel\xB7lada. Pots tornar-ho a intentar o utilitzar la contrasenya.":t.includes("timeout")||t.includes("tiempo de espera")?this.errorMessage="Temps d'espera esgotat. Si us plau, torna-ho a intentar o utilitza la contrasenya.":this.errorMessage=`${t}. Pots tornar-ho a intentar o utilitzar la contrasenya.`}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=z({type:n,selectors:[["app-login-page"]],decls:21,vars:6,consts:[[1,"login-container"],[1,"login-card"],[1,"offline-banner"],[1,"biometric-section"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","password","formControlName","password","autocomplete","current-password","placeholder","M\xEDnim 8 car\xE0cters","required",""],[1,"error-message"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],["mat-fab","","extended","","color","accent","type","button","aria-label","Iniciar sessi\xF3 amb biometria",1,"biometric-button",3,"click","disabled"],["diameter","24"],[1,"divider"],[1,"error-text"],["mat-stroked-button","","color","accent","type","button","aria-label","Tornar a intentar autenticaci\xF3 biom\xE8trica",1,"retry-button"],["mat-stroked-button","","color","accent","type","button","aria-label","Tornar a intentar autenticaci\xF3 biom\xE8trica",1,"retry-button",3,"click"]],template:function(e,i){if(e&1&&(f(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),y(4,"Gestor de Despeses"),m(),f(5,"mat-card-subtitle"),y(6,"Introdueix la teva clau d'encriptaci\xF3"),m()(),f(7,"mat-card-content"),Q(8,SA,5,0,"div",2),Q(9,EA,9,2,"div",3),f(10,"form",4),I("ngSubmit",function(){return i.onSubmit()}),f(11,"mat-form-field",5)(12,"mat-label"),y(13,"Clau d'encriptaci\xF3"),m(),U(14,"input",6),Q(15,AA,3,2,"mat-error"),f(16,"mat-hint"),y(17,"Aquesta \xE9s la mateixa clau que vas generar amb el script"),m()(),Q(18,RA,4,2,"div",7),f(19,"button",8),y(20," Accedir "),m()()()()()),e&2){let a;C(8),X(i.isOffline?8:-1),C(),X(i.showBiometricButton?9:-1),C(),D("formGroup",i.loginForm),C(5),X((a=i.loginForm.get("password"))!=null&&a.invalid&&((a=i.loginForm.get("password"))!=null&&a.touched)?15:-1),C(3),X(i.errorMessage?18:-1),C(),D("disabled",i.loginForm.invalid)}},dependencies:[Mt,js,Ls,Is,Fs,Ns,Bs,oa,Vs,Qn,Yn,Kn,Gn,qc,qn,di,xn,Cn,Df,Hs,Ba,Va,mt,pt,$s,Dt,St,Qc,Gc],styles:['.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#0f172a,#1e293b,#0f172a);padding:16px}.login-card[_ngcontent-%COMP%]{max-width:400px;width:100%;border-radius:16px;box-shadow:0 8px 32px #0006;overflow:hidden;background-color:#1e293b;border:1px solid #334155}mat-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:24px}mat-card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin-bottom:8px;color:#3b82f6}mat-card-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#94a3b8}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.full-width[_ngcontent-%COMP%]{width:100%}.error-message[_ngcontent-%COMP%]{color:#fca5a5;font-size:14px;padding:8px 12px;background-color:#dc262626;border-radius:4px;margin-bottom:8px;display:flex;flex-direction:column;gap:12px;border-left:3px solid #dc2626}.error-message[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{line-height:1.5}.error-message[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]{align-self:flex-start;height:36px;font-size:14px}.error-message[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;margin-right:4px}button[type=submit][_ngcontent-%COMP%]{margin-top:8px;height:48px;font-size:16px}.biometric-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:24px}.offline-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background-color:#d9770626;border:1px solid #d97706;border-radius:4px;margin-bottom:20px;color:#fbbf24;font-size:14px;line-height:1.5}.offline-banner[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px;flex-shrink:0}.offline-banner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.biometric-button[_ngcontent-%COMP%]{width:100%;height:56px;font-size:16px;display:flex;align-items:center;justify-content:center;gap:8px}.biometric-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.biometric-button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:8px}.divider[_ngcontent-%COMP%]{width:100%;text-align:center;margin:20px 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,#475569,transparent)}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;background-color:#1e293b;padding:0 16px;color:#64748b;font-size:14px}@media(max-width:767px){.login-container[_ngcontent-%COMP%]{padding:8px;min-height:100vh}.login-card[_ngcontent-%COMP%]{max-width:100%;width:100%}mat-card-title[_ngcontent-%COMP%]{font-size:20px}mat-card-subtitle[_ngcontent-%COMP%]{font-size:13px}form[_ngcontent-%COMP%]{gap:12px}button[type=submit][_ngcontent-%COMP%]{height:44px;font-size:15px}.error-message[_ngcontent-%COMP%]{font-size:13px;padding:6px 10px;gap:10px}.error-message[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]{height:40px;font-size:13px}.error-message[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.biometric-button[_ngcontent-%COMP%]{height:52px;font-size:15px}.biometric-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:26px;width:26px;height:26px}.biometric-section[_ngcontent-%COMP%]{margin-bottom:20px}.offline-banner[_ngcontent-%COMP%]{font-size:13px;padding:10px 12px;gap:10px;margin-bottom:16px}.offline-banner[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px;width:22px;height:22px}.divider[_ngcontent-%COMP%]{margin:16px 0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;padding:0 12px}}@media(min-width:768px)and (max-width:1023px){.login-container[_ngcontent-%COMP%]{padding:24px}.login-card[_ngcontent-%COMP%]{max-width:450px}mat-card-title[_ngcontent-%COMP%]{font-size:26px}.biometric-button[_ngcontent-%COMP%]{height:58px;font-size:16px}}@media(min-width:1024px){.login-container[_ngcontent-%COMP%]{padding:32px}.login-card[_ngcontent-%COMP%]{max-width:500px}mat-card-title[_ngcontent-%COMP%]{font-size:28px}button[type=submit][_ngcontent-%COMP%]{height:52px;font-size:17px}.biometric-button[_ngcontent-%COMP%]{height:60px;font-size:17px}.biometric-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:30px;width:30px;height:30px}}']})};var zv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=De({type:n});static \u0275inj=Se({imports:[Ge]})}return n})();var ed=class{applyChanges(t,e,i,a,r){t.forEachOperation((o,s,l)=>{let c,d;if(o.previousIndex==null){let h=i(o,s,l);c=e.createEmbeddedView(h.templateRef,h.context,h.index),d=za.INSERTED}else l==null?(e.remove(s),d=za.REMOVED):(c=e.get(s),e.move(c,l),d=za.MOVED);r&&r({context:c?.context,operation:d,record:o})})}detach(){}};var Zo=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected=null;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new G;constructor(t=!1,e,i=!0,a){this._multiple=t,this._emitChanges=i,this.compareWith=a,e&&e.length&&(t?e.forEach(r=>this._markSelected(r)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(i=>this._markSelected(i));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(i=>this._unmarkSelected(i));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);let e=this.selected,i=new Set(t.map(r=>this._getConcreteValue(r)));t.forEach(r=>this._markSelected(r)),e.filter(r=>!i.has(this._getConcreteValue(r,i))).forEach(r=>this._unmarkSelected(r));let a=this._hasQueuedChanges();return this._emitChangeEvent(),a}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();let e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){t.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(t,e){if(this.compareWith){e=e??this._selection;for(let i of e)if(this.compareWith(t,i))return i;return t}else return t}};var FA=["trigger"],NA=["panel"],LA=[[["mat-select-trigger"]],"*"],VA=["mat-select-trigger","*"];function BA(n,t){if(n&1&&(f(0,"span",4),y(1),m()),n&2){let e=k();C(),K(e.placeholder)}}function zA(n,t){n&1&&Pe(0)}function jA(n,t){if(n&1&&(f(0,"span",11),y(1),m()),n&2){let e=k(2);C(),K(e.triggerValue)}}function HA(n,t){if(n&1&&(f(0,"span",5),Q(1,zA,1,0)(2,jA,2,1,"span",11),m()),n&2){let e=k();C(),X(e.customTrigger?1:2)}}function UA(n,t){if(n&1){let e=ye();f(0,"div",12,1),I("keydown",function(a){L(e);let r=k();return V(r._handleKeydown(a))}),Pe(2,1),m()}if(n&2){let e=k();wt(e.panelClass),de("mat-select-panel-animations-enabled",!e._animationsDisabled)("mat-primary",(e._parentFormField==null?null:e._parentFormField.color)==="primary")("mat-accent",(e._parentFormField==null?null:e._parentFormField.color)==="accent")("mat-warn",(e._parentFormField==null?null:e._parentFormField.color)==="warn")("mat-undefined",!(e._parentFormField!=null&&e._parentFormField.color)),pe("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}var WA=new Y("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let n=_(He);return()=>Ua(n)}}),$A=new Y("MAT_SELECT_CONFIG"),YA=new Y("MatSelectTrigger"),Bp=class{source;value;constructor(t,e){this.source=t,this.value=e}},Br=(()=>{class n{_viewportRuler=_(qs);_changeDetectorRef=_(ve);_elementRef=_(be);_dir=_(Kt,{optional:!0});_idGenerator=_(ci);_renderer=_(Oi);_parentFormField=_(Ws,{optional:!0});ngControl=_(Qd,{self:!0,optional:!0});_liveAnnouncer=_(ks);_defaultOptions=_($A,{optional:!0});_animationsDisabled=ut();_popoverLocation;_initialized=new G;_cleanupDetach;options;optionGroups;customTrigger;_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}];_scrollOptionIntoView(e){let i=this.options.toArray()[e];if(i){let a=this.panel.nativeElement,r=Rv(e,this.options,this.optionGroups),o=i._getHostElement();e===0&&r===1?a.scrollTop=0:a.scrollTop=Iv(o.offsetTop,o.offsetHeight,a.scrollTop,a.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new Bp(this,e)}_scrollStrategyFactory=_(WA);_panelOpen=!1;_compareWith=(e,i)=>e===i;_uid=this._idGenerator.getId("mat-select-");_triggerAriaLabelledBy=null;_previousControl;_destroy=new G;_errorStateTracker;stateChanges=new G;disableAutomaticLabeling=!0;userAriaDescribedBy;_selectionModel;_keyManager;_preferredOverlayOrigin;_overlayWidth;_onChange=()=>{};_onTouched=()=>{};_valueId=this._idGenerator.getId("mat-select-value-");_scrollStrategy;_overlayPanelClass=this._defaultOptions?.overlayPanelClass||"";get focused(){return this._focused||this._panelOpen}_focused=!1;controlType="mat-select";trigger;panel;_overlayDir;panelClass;disabled=!1;get disableRipple(){return this._disableRipple()}set disableRipple(e){this._disableRipple.set(e)}_disableRipple=ae(!1);tabIndex=0;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1;get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}_placeholder;get required(){return this._required??this.ngControl?.control?.hasValidator(je.required)??!1}set required(e){this._required=e,this.stateChanges.next()}_required;get multiple(){return this._multiple}set multiple(e){this._selectionModel,this._multiple=e}_multiple=!1;disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1;get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}_value;ariaLabel="";ariaLabelledby;get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}typeaheadDebounceInterval;sortComparator;get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}_id;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto";canSelectNullableOptions=this._defaultOptions?.canSelectNullableOptions??!1;optionSelectionChanges=Aa(()=>{let e=this.options;return e?e.changes.pipe(Ut(e),ke(()=>Ct(...e.map(i=>i.onSelectionChange)))):this._initialized.pipe(ke(()=>this.optionSelectionChanges))});openedChange=new $;_openedStream=this.openedChange.pipe(st(e=>e),ie(()=>{}));_closedStream=this.openedChange.pipe(st(e=>!e),ie(()=>{}));selectionChange=new $;valueChange=new $;constructor(){let e=_(Os),i=_(Xd,{optional:!0}),a=_(oa,{optional:!0}),r=_(new bn("tabindex"),{optional:!0}),o=_(Nf,{optional:!0});this.ngControl&&(this.ngControl.valueAccessor=this),this._defaultOptions?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=this._defaultOptions.typeaheadDebounceInterval),this._errorStateTracker=new hf(e,this.ngControl,a,i,this.stateChanges),this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=r==null?0:parseInt(r)||0,this._popoverLocation=o?.usePopover===!1?null:"inline",this.id=this.id}ngOnInit(){this._selectionModel=new Zo(this.multiple),this.stateChanges.next(),this._viewportRuler.change().pipe(xe(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(xe(this._destroy)).subscribe(e=>{e.added.forEach(i=>i.select()),e.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(Ut(null),xe(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let e=this._getTriggerAriaLabelledby(),i=this.ngControl;if(e!==this._triggerAriaLabelledBy){let a=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?a.setAttribute("aria-labelledby",e):a.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(this._previousControl!==void 0&&i.disabled!==null&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval),e.panelClass&&this.panelClass instanceof Set&&(this.panelClass=Array.from(this.panelClass))}ngOnDestroy(){this._cleanupDetach?.(),this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._cleanupDetach?.(),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._overlayDir.positionChange.pipe(xt(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()}),this._overlayDir.attachOverlay(),this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next(),Promise.resolve().then(()=>this.openedChange.emit(!0)))}_trackedModal=null;_applyModalPanelOwnership(){let e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let i=`${this.id}-panel`;this._trackedModal&&Kd(this._trackedModal,"aria-owns",i),bf(e,"aria-owns",i),this._trackedModal=e}_clearFromModal(){if(!this._trackedModal)return;let e=`${this.id}-panel`;Kd(this._trackedModal,"aria-owns",e),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._exitAndDetach(),this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next(),Promise.resolve().then(()=>this.openedChange.emit(!1)))}_exitAndDetach(){if(this._animationsDisabled||!this.panel){this._detachOverlay();return}this._cleanupDetach?.(),this._cleanupDetach=()=>{i(),clearTimeout(a),this._cleanupDetach=void 0};let e=this.panel.nativeElement,i=this._renderer.listen(e,"animationend",r=>{r.animationName==="_mat-select-exit"&&(this._cleanupDetach?.(),this._detachOverlay())}),a=setTimeout(()=>{this._cleanupDetach?.(),this._detachOverlay()},200);e.classList.add("mat-select-panel-exit")}_detachOverlay(){this._overlayDir.detachOverlay(),this._changeDetectorRef.markForCheck()}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let e=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){let i=e.keyCode,a=i===40||i===38||i===37||i===39,r=i===13||i===32,o=this._keyManager;if(!o.isTyping()&&r&&!At(e)||(this.multiple||e.altKey)&&a)e.preventDefault(),this.open();else if(!this.multiple){let s=this.selected;o.onKeydown(e);let l=this.selected;l&&s!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){let i=this._keyManager,a=e.keyCode,r=a===40||a===38,o=i.isTyping();if(r&&e.altKey)e.preventDefault(),this.close();else if(!o&&(a===13||a===32)&&i.activeItem&&!At(e))e.preventDefault(),i.activeItem._selectViaInteraction();else if(!o&&this._multiple&&a===65&&e.ctrlKey){e.preventDefault();let s=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(s?l.select():l.deselect())})}else{let s=i.activeItemIndex;i.onKeydown(e),this._multiple&&r&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==s&&i.activeItem._selectViaInteraction()}}_handleOverlayKeydown(e){e.keyCode===27&&!At(e)&&(e.preventDefault(),this.close())}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{let i=this._selectOptionByValue(e);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){let i=this.options.find(a=>{if(this._selectionModel.isSelected(a))return!1;try{return(a.value!=null||this.canSelectNullableOptions)&&this._compareWith(a.value,e)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(e){return e!==this._value||this._multiple&&Array.isArray(e)?(this.options&&this._setSelectionByValue(e),this._value=e,!0):!1}_skipPredicate=e=>this.panelOpen?!1:e.disabled;_getOverlayWidth(e){return this.panelWidth==="auto"?(e instanceof ih?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new gf(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let e=Ct(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(xe(e)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Ct(...this.options.map(i=>i._stateChanges)).pipe(xe(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,i){let a=this._selectionModel.isSelected(e);!this.canSelectNullableOptions&&e.value==null&&!this._multiple?(e.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(e.value)):(a!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),i&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),i&&this.focus())),a!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let e=this.options.toArray();this._selectionModel.sort((i,a)=>this.sortComparator?this.sortComparator(i,a,e):e.indexOf(i)-e.indexOf(a)),this.stateChanges.next()}}_propagateChanges(e){let i;this.multiple?i=this.selected.map(a=>a.value):i=this.selected?this.selected.value:e,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let i=0;i<this.options.length;i++)if(!this.options.get(i).disabled){e=i;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0&&!!this._overlayDir}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId()||null,i=e?e+" ":"";return this.ariaLabelledby?i+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId()||"";return this.ariaLabelledby&&(e+=" "+this.ariaLabelledby),e||(e=this._valueId),e}get describedByIds(){return this._elementRef.nativeElement.getAttribute("aria-describedby")?.split(" ")||[]}setDescribedByIds(e){let i=this._elementRef.nativeElement;e.length?i.setAttribute("aria-describedby",e.join(" ")):i.removeAttribute("aria-describedby")}onContainerClick(e){let i=uf(e);i&&(i.tagName==="MAT-OPTION"||i.classList.contains("cdk-overlay-backdrop")||i.closest(".mat-mdc-select-panel"))||(this.focus(),this.open())}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-select"]],contentQueries:function(i,a,r){if(i&1&&ri(r,YA,5)(r,$i,5)(r,Rp,5),i&2){let o;ee(o=te())&&(a.customTrigger=o.first),ee(o=te())&&(a.options=o),ee(o=te())&&(a.optionGroups=o)}},viewQuery:function(i,a){if(i&1&&Ke(FA,5)(NA,5)(nh,5),i&2){let r;ee(r=te())&&(a.trigger=r.first),ee(r=te())&&(a.panel=r.first),ee(r=te())&&(a._overlayDir=r.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:21,hostBindings:function(i,a){i&1&&I("keydown",function(o){return a._handleKeydown(o)})("focus",function(){return a._onFocus()})("blur",function(){return a._onBlur()}),i&2&&(pe("id",a.id)("tabindex",a.disabled?-1:a.tabIndex)("aria-controls",a.panelOpen?a.id+"-panel":null)("aria-expanded",a.panelOpen)("aria-label",a.ariaLabel||null)("aria-required",a.required.toString())("aria-disabled",a.disabled.toString())("aria-invalid",a.errorState)("aria-activedescendant",a._getAriaActiveDescendant()),de("mat-mdc-select-disabled",a.disabled)("mat-mdc-select-invalid",a.errorState)("mat-mdc-select-required",a.required)("mat-mdc-select-empty",a.empty)("mat-mdc-select-multiple",a.multiple)("mat-select-open",a.panelOpen))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",ce],disableRipple:[2,"disableRipple","disableRipple",ce],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Ti(e)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",ce],placeholder:"placeholder",required:[2,"required","required",ce],multiple:[2,"multiple","multiple",ce],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",ce],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",Ti],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth",canSelectNullableOptions:[2,"canSelectNullableOptions","canSelectNullableOptions",ce]},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[$e([{provide:Zd,useExisting:n},{provide:Tp,useExisting:n}]),ze],ngContentSelectors:VA,decls:11,vars:10,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"detach","backdropClick","overlayKeydown","cdkConnectedOverlayDisableClose","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","cdkConnectedOverlayFlexibleDimensions","cdkConnectedOverlayUsePopover"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",1,"mat-mdc-select-panel","mdc-menu-surface","mdc-menu-surface--open",3,"keydown"]],template:function(i,a){if(i&1){let r=ye();tt(LA),f(0,"div",2,0),I("click",function(){return L(r),V(a.open())}),f(3,"div",3),Q(4,BA,2,1,"span",4)(5,HA,3,1,"span",5),m(),f(6,"div",6)(7,"div",7),$t(),f(8,"svg",8),U(9,"path",9),m()()()(),j(10,UA,3,16,"ng-template",10),I("detach",function(){return L(r),V(a.close())})("backdropClick",function(){return L(r),V(a.close())})("overlayKeydown",function(s){return L(r),V(a._handleOverlayKeydown(s))})}if(i&2){let r=ki(1);C(3),pe("id",a._valueId),C(),X(a.empty?4:5),C(6),D("cdkConnectedOverlayDisableClose",!0)("cdkConnectedOverlayPanelClass",a._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",a._scrollStrategy)("cdkConnectedOverlayOrigin",a._preferredOverlayOrigin||r)("cdkConnectedOverlayPositions",a._positions)("cdkConnectedOverlayWidth",a._overlayWidth)("cdkConnectedOverlayFlexibleDimensions",!0)("cdkConnectedOverlayUsePopover",a._popoverLocation)}},dependencies:[ih,nh],styles:[`@keyframes _mat-select-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-select-exit{from{opacity:1}to{opacity:0}}.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-sys-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-sys-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-disabled .mat-mdc-select-placeholder{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-sys-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-select-open .mat-mdc-select-arrow{transform:rotate(180deg)}.mat-form-field-animations-enabled .mat-mdc-select-arrow{transition:transform 80ms linear}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}@media(forced-colors: active){.mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .mat-mdc-select-arrow svg{fill:GrayText}}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:relative;background-color:var(--mat-select-panel-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-select-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-select-panel-animations-enabled{animation:_mat-select-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-select-panel-animations-enabled.mat-select-panel-exit{animation:_mat-select-exit 100ms linear}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field:not(.mat-form-field-animations-enabled) .mat-mdc-select-placeholder,._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform, translateY(-8px))}
`],encapsulation:2,changeDetection:0})}return n})();var ia=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=De({type:n});static \u0275inj=Se({imports:[sa,Ip,Ge,ja,di,Ip]})}return n})();var qA=[[["caption"]],[["colgroup"],["col"]],"*"],KA=["caption","colgroup, col","*"];function GA(n,t){n&1&&Pe(0,2)}function QA(n,t){n&1&&(f(0,"thead",0),ct(1,1),m(),f(2,"tbody",0),ct(3,2)(4,3),m(),f(5,"tfoot",0),ct(6,4),m())}function XA(n,t){n&1&&ct(0,1)(1,2)(2,3)(3,4)}var Di=new Y("CDK_TABLE");var nd=(()=>{class n{template=_(ni);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","cdkCellDef",""]]})}return n})(),ad=(()=>{class n{template=_(ni);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","cdkHeaderCellDef",""]]})}return n})(),Uv=(()=>{class n{template=_(ni);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","cdkFooterCellDef",""]]})}return n})(),zr=(()=>{class n{_table=_(Di,{optional:!0});_hasStickyChanged=!1;get name(){return this._name}set name(e){this._setNameInput(e)}_name;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;get stickyEnd(){return this._stickyEnd}set stickyEnd(e){e!==this._stickyEnd&&(this._stickyEnd=e,this._hasStickyChanged=!0)}_stickyEnd=!1;cell;headerCell;footerCell;cssClassFriendlyName;_columnCssClassName;constructor(){}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(i,a,r){if(i&1&&ri(r,nd,5)(r,ad,5)(r,Uv,5),i&2){let o;ee(o=te())&&(a.cell=o.first),ee(o=te())&&(a.headerCell=o.first),ee(o=te())&&(a.footerCell=o.first)}},inputs:{name:[0,"cdkColumnDef","name"],sticky:[2,"sticky","sticky",ce],stickyEnd:[2,"stickyEnd","stickyEnd",ce]},features:[$e([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}])]})}return n})(),id=class{constructor(t,e){e.nativeElement.classList.add(...t._columnCssClassName)}},Wv=(()=>{class n extends id{constructor(){super(_(zr),_(be))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[Re]})}return n})();var $v=(()=>{class n extends id{constructor(){let e=_(zr),i=_(be);super(e,i);let a=e._table?._getCellRole();a&&i.nativeElement.setAttribute("role",a)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[Re]})}return n})();var Hp=(()=>{class n{template=_(ni);_differs=_(Ra);columns;_columnsDiffer;constructor(){}ngOnChanges(e){if(!this._columnsDiffer){let i=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof es?e.headerCell.template:this instanceof Up?e.footerCell.template:e.cell.template}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,features:[ze]})}return n})(),es=(()=>{class n extends Hp{_table=_(Di,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(_(ni),_(Ra))}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[0,"cdkHeaderRowDef","columns"],sticky:[2,"cdkHeaderRowDefSticky","sticky",ce]},features:[Re,ze]})}return n})(),Up=(()=>{class n extends Hp{_table=_(Di,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(_(ni),_(Ra))}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[0,"cdkFooterRowDef","columns"],sticky:[2,"cdkFooterRowDefSticky","sticky",ce]},features:[Re,ze]})}return n})(),rd=(()=>{class n extends Hp{_table=_(Di,{optional:!0});when;constructor(){super(_(ni),_(Ra))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:[0,"cdkRowDefColumns","columns"],when:[0,"cdkRowDefWhen","when"]},features:[Re]})}return n})(),Oa=(()=>{class n{_viewContainer=_(ai);cells;context;static mostRecentCellOutlet=null;constructor(){n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","cdkCellOutlet",""]]})}return n})(),Wp=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,a){i&1&&ct(0,0)},dependencies:[Oa],encapsulation:2})}return n})();var $p=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,a){i&1&&ct(0,0)},dependencies:[Oa],encapsulation:2})}return n})(),od=(()=>{class n{templateRef=_(ni);_contentClassNames=["cdk-no-data-row","cdk-row"];_cellClassNames=["cdk-cell","cdk-no-data-cell"];_cellSelector="td, cdk-cell, [cdk-cell], .cdk-cell";constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["ng-template","cdkNoDataRow",""]]})}return n})(),jv=["top","bottom","left","right"],jp=class{_isNativeHtmlTable;_stickCellCss;_isBrowser;_needsPositionStickyOnElement;direction;_positionListener;_tableInjector;_elemSizeCache=new WeakMap;_resizeObserver=globalThis?.ResizeObserver?new globalThis.ResizeObserver(t=>this._updateCachedSizes(t)):null;_updatedStickyColumnsParamsToReplay=[];_stickyColumnsReplayTimeout=null;_cachedCellWidths=[];_borderCellCss;_destroyed=!1;constructor(t,e,i=!0,a=!0,r,o,s){this._isNativeHtmlTable=t,this._stickCellCss=e,this._isBrowser=i,this._needsPositionStickyOnElement=a,this.direction=r,this._positionListener=o,this._tableInjector=s,this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(t,e){(e.includes("left")||e.includes("right"))&&this._removeFromStickyColumnReplayQueue(t);let i=[];for(let a of t)a.nodeType===a.ELEMENT_NODE&&i.push(a,...Array.from(a.children));lt({write:()=>{for(let a of i)this._removeStickyStyle(a,e)}},{injector:this._tableInjector})}updateStickyColumns(t,e,i,a=!0,r=!0){if(!t.length||!this._isBrowser||!(e.some(v=>v)||i.some(v=>v))){this._positionListener?.stickyColumnsUpdated({sizes:[]}),this._positionListener?.stickyEndColumnsUpdated({sizes:[]});return}let o=t[0],s=o.children.length,l=this.direction==="rtl",c=l?"right":"left",d=l?"left":"right",h=e.lastIndexOf(!0),u=i.indexOf(!0),p,g,b;r&&this._updateStickyColumnReplayQueue({rows:[...t],stickyStartStates:[...e],stickyEndStates:[...i]}),lt({earlyRead:()=>{p=this._getCellWidths(o,a),g=this._getStickyStartColumnPositions(p,e),b=this._getStickyEndColumnPositions(p,i)},write:()=>{for(let v of t)for(let x=0;x<s;x++){let w=v.children[x];e[x]&&this._addStickyStyle(w,c,g[x],x===h),i[x]&&this._addStickyStyle(w,d,b[x],x===u)}this._positionListener&&p.some(v=>!!v)&&(this._positionListener.stickyColumnsUpdated({sizes:h===-1?[]:p.slice(0,h+1).map((v,x)=>e[x]?v:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:u===-1?[]:p.slice(u).map((v,x)=>i[x+u]?v:null).reverse()}))}},{injector:this._tableInjector})}stickRows(t,e,i){if(!this._isBrowser)return;let a=i==="bottom"?t.slice().reverse():t,r=i==="bottom"?e.slice().reverse():e,o=[],s=[],l=[];lt({earlyRead:()=>{for(let c=0,d=0;c<a.length;c++){if(!r[c])continue;o[c]=d;let h=a[c];l[c]=this._isNativeHtmlTable?Array.from(h.children):[h];let u=this._retrieveElementSize(h).height;d+=u,s[c]=u}},write:()=>{let c=r.lastIndexOf(!0);for(let d=0;d<a.length;d++){if(!r[d])continue;let h=o[d],u=d===c;for(let p of l[d])this._addStickyStyle(p,i,h,u)}i==="top"?this._positionListener?.stickyHeaderRowsUpdated({sizes:s,offsets:o,elements:l}):this._positionListener?.stickyFooterRowsUpdated({sizes:s,offsets:o,elements:l})}},{injector:this._tableInjector})}updateStickyFooterContainer(t,e){this._isNativeHtmlTable&&lt({write:()=>{let i=t.querySelector("tfoot");i&&(e.some(a=>!a)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1))}},{injector:this._tableInjector})}destroy(){this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._resizeObserver?.disconnect(),this._destroyed=!0}_removeStickyStyle(t,e){if(!t.classList.contains(this._stickCellCss))return;for(let a of e)t.style[a]="",t.classList.remove(this._borderCellCss[a]);jv.some(a=>e.indexOf(a)===-1&&t.style[a])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,i,a){t.classList.add(this._stickCellCss),a&&t.classList.add(this._borderCellCss[e]),t.style[e]=`${i}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){let e={top:100,bottom:10,left:1,right:1},i=0;for(let a of jv)t.style[a]&&(i+=e[a]);return i?`${i}`:""}_getCellWidths(t,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;let i=[],a=t.children;for(let r=0;r<a.length;r++){let o=a[r];i.push(this._retrieveElementSize(o).width)}return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(t,e){let i=[],a=0;for(let r=0;r<t.length;r++)e[r]&&(i[r]=a,a+=t[r]);return i}_getStickyEndColumnPositions(t,e){let i=[],a=0;for(let r=t.length;r>0;r--)e[r]&&(i[r]=a,a+=t[r]);return i}_retrieveElementSize(t){let e=this._elemSizeCache.get(t);if(e)return e;let i=t.getBoundingClientRect(),a={width:i.width,height:i.height};return this._resizeObserver&&(this._elemSizeCache.set(t,a),this._resizeObserver.observe(t,{box:"border-box"})),a}_updateStickyColumnReplayQueue(t){this._removeFromStickyColumnReplayQueue(t.rows),this._stickyColumnsReplayTimeout||this._updatedStickyColumnsParamsToReplay.push(t)}_removeFromStickyColumnReplayQueue(t){let e=new Set(t);for(let i of this._updatedStickyColumnsParamsToReplay)i.rows=i.rows.filter(a=>!e.has(a));this._updatedStickyColumnsParamsToReplay=this._updatedStickyColumnsParamsToReplay.filter(i=>!!i.rows.length)}_updateCachedSizes(t){let e=!1;for(let i of t){let a=i.borderBoxSize?.length?{width:i.borderBoxSize[0].inlineSize,height:i.borderBoxSize[0].blockSize}:{width:i.contentRect.width,height:i.contentRect.height};a.width!==this._elemSizeCache.get(i.target)?.width&&ZA(i.target)&&(e=!0),this._elemSizeCache.set(i.target,a)}e&&this._updatedStickyColumnsParamsToReplay.length&&(this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._stickyColumnsReplayTimeout=setTimeout(()=>{if(!this._destroyed){for(let i of this._updatedStickyColumnsParamsToReplay)this.updateStickyColumns(i.rows,i.stickyStartStates,i.stickyEndStates,!0,!1);this._updatedStickyColumnsParamsToReplay=[],this._stickyColumnsReplayTimeout=null}},0))}};function ZA(n){return["cdk-cell","cdk-header-cell","cdk-footer-cell"].some(t=>n.classList.contains(t))}var Jo=new Y("STICKY_POSITIONING_LISTENER");var Yp=(()=>{class n{viewContainer=_(ai);elementRef=_(be);constructor(){let e=_(Di);e._rowOutlet=this,e._outletAssigned()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","rowOutlet",""]]})}return n})(),qp=(()=>{class n{viewContainer=_(ai);elementRef=_(be);constructor(){let e=_(Di);e._headerRowOutlet=this,e._outletAssigned()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","headerRowOutlet",""]]})}return n})(),Kp=(()=>{class n{viewContainer=_(ai);elementRef=_(be);constructor(){let e=_(Di);e._footerRowOutlet=this,e._outletAssigned()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","footerRowOutlet",""]]})}return n})(),Gp=(()=>{class n{viewContainer=_(ai);elementRef=_(be);constructor(){let e=_(Di);e._noDataRowOutlet=this,e._outletAssigned()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","noDataRowOutlet",""]]})}return n})(),Qp=(()=>{class n{_differs=_(Ra);_changeDetectorRef=_(ve);_elementRef=_(be);_dir=_(Kt,{optional:!0});_platform=_(yn);_viewRepeater;_viewportRuler=_(qs);_injector=_(He);_virtualScrollViewport=_(Af,{optional:!0,host:!0});_positionListener=_(Jo,{optional:!0})||_(Jo,{optional:!0,skipSelf:!0});_document=_(Ft);_data;_renderedRange;_onDestroy=new G;_renderRows;_renderChangeSubscription=null;_columnDefsByName=new Map;_rowDefs;_headerRowDefs;_footerRowDefs;_dataDiffer;_defaultRowDef=null;_customColumnDefs=new Set;_customRowDefs=new Set;_customHeaderRowDefs=new Set;_customFooterRowDefs=new Set;_customNoDataRow=null;_headerRowDefChanged=!0;_footerRowDefChanged=!0;_stickyColumnStylesNeedReset=!0;_forceRecalculateCellWidths=!0;_cachedRenderRowsMap=new Map;_isNativeHtmlTable;_stickyStyler;stickyCssClass="cdk-table-sticky";needsPositionStickyOnElement=!0;_isServer;_isShowingNoDataRow=!1;_hasAllOutlets=!1;_hasInitialized=!1;_headerRowStickyUpdates=new G;_footerRowStickyUpdates=new G;_disableVirtualScrolling=!1;_getCellRole(){if(this._cellRoleInternal===void 0){let e=this._elementRef.nativeElement.getAttribute("role");return e==="grid"||e==="treegrid"?"gridcell":"cell"}return this._cellRoleInternal}_cellRoleInternal=void 0;get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}_trackByFn;get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&(this._switchDataSource(e),this._changeDetectorRef.markForCheck())}_dataSource;_dataSourceChanges=new G;_dataStream=new G;get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=e,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}_multiTemplateDataRows=!1;get fixedLayout(){return this._virtualScrollEnabled()?!0:this._fixedLayout}set fixedLayout(e){this._fixedLayout=e,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}_fixedLayout=!1;recycleRows=!1;contentChanged=new $;viewChange=new Be({start:0,end:Number.MAX_VALUE});_rowOutlet;_headerRowOutlet;_footerRowOutlet;_noDataRowOutlet;_contentColumnDefs;_contentRowDefs;_contentHeaderRowDefs;_contentFooterRowDefs;_noDataRow;constructor(){_(new bn("role"),{optional:!0})||this._elementRef.nativeElement.setAttribute("role","table"),this._isServer=!this._platform.isBrowser,this._isNativeHtmlTable=this._elementRef.nativeElement.nodeName==="TABLE",this._dataDiffer=this._differs.find([]).create((i,a)=>this.trackBy?this.trackBy(a.dataIndex,a.data):a)}ngOnInit(){this._setupStickyStyler(),this._viewportRuler.change().pipe(xe(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._viewRepeater=this.recycleRows||this._virtualScrollEnabled()?new Of:new ed,this._virtualScrollEnabled()&&this._setupVirtualScrolling(this._virtualScrollViewport),this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){this._stickyStyler?.destroy(),[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._headerRowStickyUpdates.complete(),this._footerRowStickyUpdates.complete(),this._onDestroy.next(),this._onDestroy.complete(),Zr(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();let e=this._dataDiffer.diff(this._renderRows);if(!e){this._updateNoDataRow(),this.contentChanged.next();return}let i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,i,(a,r,o)=>this._getEmbeddedViewArgs(a.item,o),a=>a.item.data,a=>{a.operation===za.INSERTED&&a.context&&this._renderCellTemplateForItem(a.record.item.rowDef,a.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(a=>{let r=i.get(a.currentIndex);r.context.$implicit=a.item.data}),this._updateNoDataRow(),this.contentChanged.next(),this.updateStickyColumnStyles()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){let e=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){let a=Hv(this._headerRowOutlet,"thead");a&&(a.style.display=e.length?"":"none")}let i=this._headerRowDefs.map(a=>a.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,i,"top"),this._headerRowDefs.forEach(a=>a.resetStickyChanged())}updateStickyFooterRowStyles(){let e=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){let a=Hv(this._footerRowOutlet,"tfoot");a&&(a.style.display=e.length?"":"none")}let i=this._footerRowDefs.map(a=>a.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,i,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,i),this._footerRowDefs.forEach(a=>a.resetStickyChanged())}updateStickyColumnStyles(){let e=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),a=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this.fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...i,...a],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((r,o)=>{this._addStickyColumnStyles([r],this._headerRowDefs[o])}),this._rowDefs.forEach(r=>{let o=[];for(let s=0;s<i.length;s++)this._renderRows[s].rowDef===r&&o.push(i[s]);this._addStickyColumnStyles(o,r)}),a.forEach((r,o)=>{this._addStickyColumnStyles([r],this._footerRowDefs[o])}),Array.from(this._columnDefsByName.values()).forEach(r=>r.resetStickyChanged())}stickyColumnsUpdated(e){this._positionListener?.stickyColumnsUpdated(e)}stickyEndColumnsUpdated(e){this._positionListener?.stickyEndColumnsUpdated(e)}stickyHeaderRowsUpdated(e){this._headerRowStickyUpdates.next(e),this._positionListener?.stickyHeaderRowsUpdated(e)}stickyFooterRowsUpdated(e){this._footerRowStickyUpdates.next(e),this._positionListener?.stickyFooterRowsUpdated(e)}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&this._rowDefs.length;let i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){if(!Array.isArray(this._data)||!this._renderedRange)return[];let e=[],i=Math.min(this._data.length,this._renderedRange.end),a=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=this._renderedRange.start;r<i;r++){let o=this._data[r],s=this._getRenderRowsForData(o,r,a.get(o));this._cachedRenderRowsMap.has(o)||this._cachedRenderRowsMap.set(o,new WeakMap);for(let l=0;l<s.length;l++){let c=s[l],d=this._cachedRenderRowsMap.get(c.data);d.has(c.rowDef)?d.get(c.rowDef).push(c):d.set(c.rowDef,[c]),e.push(c)}}return e}_getRenderRowsForData(e,i,a){return this._getRowDefs(e,i).map(o=>{let s=a&&a.has(o)?a.get(o):[];if(s.length){let l=s.shift();return l.dataIndex=i,l}else return{data:e,rowDef:o,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),td(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=td(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=td(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=td(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);let e=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){let e=(o,s)=>{let l=!!s.getColumnsDiff();return o||l},i=this._rowDefs.reduce(e,!1);i&&this._forceRenderDataRows();let a=this._headerRowDefs.reduce(e,!1);a&&this._forceRenderHeaderRows();let r=this._footerRowDefs.reduce(e,!1);return r&&this._forceRenderFooterRows(),i||a||r}_switchDataSource(e){this._data=[],Zr(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;Zr(this.dataSource)?e=this.dataSource.connect(this):qr(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=H(this.dataSource)),this._renderChangeSubscription=bi([e,this.viewChange]).pipe(xe(this._onDestroy)).subscribe(([i,a])=>{this._data=i||[],this._renderedRange=a,this._dataStream.next(i),this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,i)=>this._renderRow(this._headerRowOutlet,e,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,i)=>this._renderRow(this._footerRowOutlet,e,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,i){let a=Array.from(i?.columns||[]).map(s=>{let l=this._columnDefsByName.get(s);return l}),r=a.map(s=>s.sticky),o=a.map(s=>s.stickyEnd);this._stickyStyler.updateStickyColumns(e,r,o,!this.fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){let i=[];for(let a=0;a<e.viewContainer.length;a++){let r=e.viewContainer.get(a);i.push(r.rootNodes[0])}return i}_getRowDefs(e,i){if(this._rowDefs.length===1)return[this._rowDefs[0]];let a=[];if(this.multiTemplateDataRows)a=this._rowDefs.filter(r=>!r.when||r.when(i,e));else{let r=this._rowDefs.find(o=>o.when&&o.when(i,e))||this._defaultRowDef;r&&a.push(r)}return a.length,a}_getEmbeddedViewArgs(e,i){let a=e.rowDef,r={$implicit:e.data};return{templateRef:a.template,context:r,index:i}}_renderRow(e,i,a,r={}){let o=e.viewContainer.createEmbeddedView(i.template,r,a);return this._renderCellTemplateForItem(i,r),o}_renderCellTemplateForItem(e,i){for(let a of this._getCellTemplates(e))Oa.mostRecentCellOutlet&&Oa.mostRecentCellOutlet._viewContainer.createEmbeddedView(a,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){let e=this._rowOutlet.viewContainer;for(let i=0,a=e.length;i<a;i++){let o=e.get(i).context;o.count=a,o.first=i===0,o.last=i===a-1,o.even=i%2===0,o.odd=!o.even,this.multiTemplateDataRows?(o.dataIndex=this._renderRows[i].dataIndex,o.renderIndex=i):o.index=this._renderRows[i].dataIndex}}_getCellTemplates(e){return!e||!e.columns?[]:Array.from(e.columns,i=>{let a=this._columnDefsByName.get(i);return e.extractCellTemplate(a)})}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){let e=(i,a)=>i||a.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){let e=this._dir?this._dir.value:"ltr",i=this._injector;this._stickyStyler=new jp(this._isNativeHtmlTable,this.stickyCssClass,this._platform.isBrowser,this.needsPositionStickyOnElement,e,this,i),(this._dir?this._dir.change:H()).pipe(xe(this._onDestroy)).subscribe(a=>{this._stickyStyler.direction=a,this.updateStickyColumnStyles()})}_setupVirtualScrolling(e){let i=typeof requestAnimationFrame<"u"?wm:xm;this.viewChange.next({start:0,end:0}),e.renderedRangeStream.pipe(Dm(0,i),xe(this._onDestroy)).subscribe(this.viewChange),e.attach({dataStream:this._dataStream,measureRangeSize:(a,r)=>this._measureRangeSize(a,r)}),bi([e.renderedContentOffset,this._headerRowStickyUpdates]).pipe(xe(this._onDestroy)).subscribe(([a,r])=>{if(!(!r.sizes||!r.offsets||!r.elements))for(let o=0;o<r.elements.length;o++){let s=r.elements[o];if(s){let l=r.offsets[o],c=a!==0?Math.max(a-l,l):-l;for(let d of s)d.style.top=`${-c}px`}}}),bi([e.renderedContentOffset,this._footerRowStickyUpdates]).pipe(xe(this._onDestroy)).subscribe(([a,r])=>{if(!(!r.sizes||!r.offsets||!r.elements))for(let o=0;o<r.elements.length;o++){let s=r.elements[o];if(s)for(let l of s)l.style.bottom=`${a+r.offsets[o]}px`}})}_getOwnDefs(e){return e.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){let e=this._customNoDataRow||this._noDataRow;if(!e)return;let i=this._rowOutlet.viewContainer.length===0;if(i===this._isShowingNoDataRow)return;let a=this._noDataRowOutlet.viewContainer;if(i){let r=a.createEmbeddedView(e.templateRef),o=r.rootNodes[0];if(r.rootNodes.length===1&&o?.nodeType===this._document.ELEMENT_NODE){o.setAttribute("role","row"),o.classList.add(...e._contentClassNames);let s=o.querySelectorAll(e._cellSelector);for(let l=0;l<s.length;l++)s[l].classList.add(...e._cellClassNames)}}else a.clear();this._isShowingNoDataRow=i,this._changeDetectorRef.markForCheck()}_measureRangeSize(e,i){if(e.start>=e.end||i!=="vertical")return 0;let a=this.viewChange.value,r=this._rowOutlet.viewContainer;e.start<a.start||e.end>a.end;let o=e.start-a.start,s=e.end-e.start,l,c;for(let u=0;u<s;u++){let p=r.get(u+o);if(p&&p.rootNodes.length){l=c=p.rootNodes[0];break}}for(let u=s-1;u>-1;u--){let p=r.get(u+o);if(p&&p.rootNodes.length){c=p.rootNodes[p.rootNodes.length-1];break}}let d=l?.getBoundingClientRect?.(),h=c?.getBoundingClientRect?.();return d&&h?h.bottom-d.top:0}_virtualScrollEnabled(){return!this._disableVirtualScrolling&&this._virtualScrollViewport!=null}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(i,a,r){if(i&1&&ri(r,od,5)(r,zr,5)(r,rd,5)(r,es,5)(r,Up,5),i&2){let o;ee(o=te())&&(a._noDataRow=o.first),ee(o=te())&&(a._contentColumnDefs=o),ee(o=te())&&(a._contentRowDefs=o),ee(o=te())&&(a._contentHeaderRowDefs=o),ee(o=te())&&(a._contentFooterRowDefs=o)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(i,a){i&2&&de("cdk-table-fixed-layout",a.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[2,"multiTemplateDataRows","multiTemplateDataRows",ce],fixedLayout:[2,"fixedLayout","fixedLayout",ce],recycleRows:[2,"recycleRows","recycleRows",ce]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[$e([{provide:Di,useExisting:n},{provide:Jo,useValue:null}])],ngContentSelectors:KA,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(i,a){i&1&&(tt(qA),Pe(0),Pe(1,1),Q(2,GA,1,0),Q(3,QA,7,0)(4,XA,4,0)),i&2&&(C(2),X(a._isServer?2:-1),C(),X(a._isNativeHtmlTable?3:4))},dependencies:[qp,Yp,Gp,Kp],styles:[`.cdk-table-fixed-layout{table-layout:fixed}
`],encapsulation:2})}return n})();function td(n,t){return n.concat(Array.from(t))}function Hv(n,t){let e=t.toUpperCase(),i=n.viewContainer.element.nativeElement;for(;i;){let a=i.nodeType===1?i.nodeName:null;if(a===e)return i;if(a==="TABLE")break;i=i.parentNode}return null}var Yv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=De({type:n});static \u0275inj=Se({imports:[Tf]})}return n})();var JA=[[["caption"]],[["colgroup"],["col"]],"*"],eT=["caption","colgroup, col","*"];function tT(n,t){n&1&&Pe(0,2)}function iT(n,t){n&1&&(f(0,"thead",0),ct(1,1),m(),f(2,"tbody",2),ct(3,3)(4,4),m(),f(5,"tfoot",0),ct(6,5),m())}function nT(n,t){n&1&&ct(0,1)(1,3)(2,4)(3,5)}var ld=(()=>{class n extends Qp{stickyCssClass="mat-mdc-table-sticky";needsPositionStickyOnElement=!1;static \u0275fac=(()=>{let e;return function(a){return(e||(e=nt(n)))(a||n)}})();static \u0275cmp=z({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(i,a){i&2&&de("mat-table-fixed-layout",a.fixedLayout)},exportAs:["matTable"],features:[$e([{provide:Qp,useExisting:n},{provide:Di,useExisting:n},{provide:Jo,useValue:null}]),Re],ngContentSelectors:eT,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["role","rowgroup",1,"mdc-data-table__content"],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(i,a){i&1&&(tt(JA),Pe(0),Pe(1,1),Q(2,tT,1,0),Q(3,iT,7,0)(4,nT,4,0)),i&2&&(C(2),X(a._isServer?2:-1),C(),X(a._isNativeHtmlTable?3:4))},dependencies:[qp,Yp,Gp,Kp],styles:[`.mat-mdc-table-sticky{position:sticky !important}mat-table{display:block}mat-header-row{min-height:var(--mat-table-header-container-height, 56px)}mat-row{min-height:var(--mat-table-row-item-container-height, 52px)}mat-footer-row{min-height:var(--mat-table-footer-container-height, 52px)}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{min-width:100%;border:0;border-spacing:0;table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color, var(--mat-sys-surface))}.mat-table-fixed-layout{table-layout:fixed}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:start;text-overflow:ellipsis}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-table-header-headline-font, var(--mat-sys-title-small-font, Roboto, sans-serif));line-height:var(--mat-table-header-headline-line-height, var(--mat-sys-title-small-line-height));font-size:var(--mat-table-header-headline-size, var(--mat-sys-title-small-size, 14px));font-weight:var(--mat-table-header-headline-weight, var(--mat-sys-title-small-weight, 500))}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, var(--mat-sys-body-medium-font, Roboto, sans-serif));line-height:var(--mat-table-row-item-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-table-row-item-label-text-size, var(--mat-sys-body-medium-size, 14px));font-weight:var(--mat-table-row-item-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-table-footer-supporting-text-font, var(--mat-sys-body-medium-font, Roboto, sans-serif));line-height:var(--mat-table-footer-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-table-footer-supporting-text-size, var(--mat-sys-body-medium-size, 14px));font-weight:var(--mat-table-footer-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-table-footer-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, var(--mat-sys-outline, rgba(0, 0, 0, 0.12)));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking, var(--mat-sys-title-small-tracking));font-weight:inherit;line-height:inherit;box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:start}.mdc-data-table__row:last-child>.mat-mdc-header-cell{border-bottom:none}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, var(--mat-sys-outline, rgba(0, 0, 0, 0.12)));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking, var(--mat-sys-body-medium-tracking));line-height:inherit}.mdc-data-table__row:last-child>.mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking, var(--mat-sys-body-medium-tracking))}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}
`],encapsulation:2})}return n})(),cd=(()=>{class n extends nd{static \u0275fac=(()=>{let e;return function(a){return(e||(e=nt(n)))(a||n)}})();static \u0275dir=q({type:n,selectors:[["","matCellDef",""]],features:[$e([{provide:nd,useExisting:n}]),Re]})}return n})(),dd=(()=>{class n extends ad{static \u0275fac=(()=>{let e;return function(a){return(e||(e=nt(n)))(a||n)}})();static \u0275dir=q({type:n,selectors:[["","matHeaderCellDef",""]],features:[$e([{provide:ad,useExisting:n}]),Re]})}return n})();var hd=(()=>{class n extends zr{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}static \u0275fac=(()=>{let e;return function(a){return(e||(e=nt(n)))(a||n)}})();static \u0275dir=q({type:n,selectors:[["","matColumnDef",""]],inputs:{name:[0,"matColumnDef","name"]},features:[$e([{provide:zr,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),Re]})}return n})(),ud=(()=>{class n extends Wv{static \u0275fac=(()=>{let e;return function(a){return(e||(e=nt(n)))(a||n)}})();static \u0275dir=q({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],features:[Re]})}return n})();var pd=(()=>{class n extends $v{static \u0275fac=(()=>{let e;return function(a){return(e||(e=nt(n)))(a||n)}})();static \u0275dir=q({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],features:[Re]})}return n})();var md=(()=>{class n extends es{static \u0275fac=(()=>{let e;return function(a){return(e||(e=nt(n)))(a||n)}})();static \u0275dir=q({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:[0,"matHeaderRowDef","columns"],sticky:[2,"matHeaderRowDefSticky","sticky",ce]},features:[$e([{provide:es,useExisting:n}]),Re]})}return n})();var fd=(()=>{class n extends rd{static \u0275fac=(()=>{let e;return function(a){return(e||(e=nt(n)))(a||n)}})();static \u0275dir=q({type:n,selectors:[["","matRowDef",""]],inputs:{columns:[0,"matRowDefColumns","columns"],when:[0,"matRowDefWhen","when"]},features:[$e([{provide:rd,useExisting:n}]),Re]})}return n})(),gd=(()=>{class n extends Wp{static \u0275fac=(()=>{let e;return function(a){return(e||(e=nt(n)))(a||n)}})();static \u0275cmp=z({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],features:[$e([{provide:Wp,useExisting:n}]),Re],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,a){i&1&&ct(0,0)},dependencies:[Oa],encapsulation:2})}return n})();var _d=(()=>{class n extends $p{static \u0275fac=(()=>{let e;return function(a){return(e||(e=nt(n)))(a||n)}})();static \u0275cmp=z({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],features:[$e([{provide:$p,useExisting:n}]),Re],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,a){i&1&&ct(0,0)},dependencies:[Oa],encapsulation:2})}return n})(),qv=(()=>{class n extends od{_cellSelector="td, mat-cell, [mat-cell], .mat-cell";constructor(){super(),this._contentClassNames.push("mat-mdc-no-data-row","mat-mdc-row","mdc-data-table__row"),this._cellClassNames.push("mat-mdc-cell","mdc-data-table__cell","mat-no-data-cell")}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["ng-template","matNoDataRow",""]],features:[$e([{provide:od,useExisting:n}]),Re]})}return n})();var bd=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=De({type:n});static \u0275inj=Se({imports:[Yv,Ge]})}return n})(),aT=9007199254740991,sd=class extends Jd{_data;_renderData=new Be([]);_filter=new Be("");_internalPageChanges=new G;_renderChangesSubscription=null;filteredData;get data(){return this._data.value}set data(t){t=Array.isArray(t)?t:[],this._data.next(t),this._renderChangesSubscription||this._filterData(t)}get filter(){return this._filter.value}set filter(t){this._filter.next(t),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(t){this._sort=t,this._updateChangeSubscription()}_sort;get paginator(){return this._paginator}set paginator(t){this._paginator=t,this._updateChangeSubscription()}_paginator;sortingDataAccessor=(t,e)=>{let i=t[e];if(pf(i)){let a=Number(i);return a<aT?a:i}return i};sortData=(t,e)=>{let i=e.active,a=e.direction;return!i||a==""?t:t.sort((r,o)=>{let s=this.sortingDataAccessor(r,i),l=this.sortingDataAccessor(o,i),c=typeof s,d=typeof l;c!==d&&(c==="number"&&(s+=""),d==="number"&&(l+=""));let h=0;return s!=null&&l!=null?s>l?h=1:s<l&&(h=-1):s!=null?h=1:l!=null&&(h=-1),h*(a=="asc"?1:-1)})};filterPredicate=(t,e)=>{let i=e.trim().toLowerCase();return Object.values(t).some(a=>`${a}`.toLowerCase().includes(i))};constructor(t=[]){super(),this._data=new Be(t),this._updateChangeSubscription()}_updateChangeSubscription(){let t=this._sort?Ct(this._sort.sortChange,this._sort.initialized):H(null),e=this._paginator?Ct(this._paginator.page,this._internalPageChanges,this._paginator.initialized):H(null),i=this._data,a=bi([i,this._filter]).pipe(ie(([s])=>this._filterData(s))),r=bi([a,t]).pipe(ie(([s])=>this._orderData(s))),o=bi([r,e]).pipe(ie(([s])=>this._pageData(s)));this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=o.subscribe(s=>this._renderData.next(s))}_filterData(t){return this.filteredData=this.filter==null||this.filter===""?t:t.filter(e=>this.filterPredicate(e,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(t){return this.sort?this.sortData(t.slice(),this.sort):t}_pageData(t){if(!this.paginator)return t;let e=this.paginator.pageIndex*this.paginator.pageSize;return t.slice(e,e+this.paginator.pageSize)}_updatePaginator(t){Promise.resolve().then(()=>{let e=this.paginator;if(e&&(e.length=t,e.pageIndex>0)){let i=Math.ceil(e.length/e.pageSize)-1||0,a=Math.min(e.pageIndex,i);a!==e.pageIndex&&(e.pageIndex=a,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=null}};var rT=["mat-sort-header",""],oT=["*",[["","matSortHeaderIcon",""]]],sT=["*","[matSortHeaderIcon]"];function lT(n,t){n&1&&($t(),Yt(0,"svg",3),jm(1,"path",4),qt())}function cT(n,t){n&1&&(Yt(0,"div",2),Pe(1,1,null,lT,2,0),qt())}var Gv=new Y("MAT_SORT_DEFAULT_OPTIONS"),ts=(()=>{class n{_defaultOptions;_initializedStream=new Cm(1);sortables=new Map;_stateChanges=new G;active;start="asc";get direction(){return this._direction}set direction(e){this._direction=e}_direction="";disableClear;disabled=!1;sortChange=new $;initialized=this._initializedStream;constructor(e){this._defaultOptions=e}register(e){this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){if(!e)return"";let i=e?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear,a=dT(e.start||this.start,i),r=a.indexOf(this.direction)+1;return r>=a.length&&(r=0),a[r]}ngOnInit(){this._initializedStream.next()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete(),this._initializedStream.complete()}static \u0275fac=function(i){return new(i||n)(et(Gv,8))};static \u0275dir=q({type:n,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{active:[0,"matSortActive","active"],start:[0,"matSortStart","start"],direction:[0,"matSortDirection","direction"],disableClear:[2,"matSortDisableClear","disableClear",ce],disabled:[2,"matSortDisabled","disabled",ce]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[ze]})}return n})();function dT(n,t){let e=["asc","desc"];return n=="desc"&&e.reverse(),t||e.push(""),e}var hT=(()=>{class n{changes=new G;static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qv=(()=>{class n{_intl=_(hT);_sort=_(ts,{optional:!0});_columnDef=_("MAT_SORT_HEADER_COLUMN_DEF",{optional:!0});_changeDetectorRef=_(ve);_focusMonitor=_(La);_elementRef=_(be);_ariaDescriber=_(Ts,{optional:!0});_renderChanges;_animationsDisabled=ut();_recentlyCleared=ae(null);_sortButton;id;arrowPosition="after";start;disabled=!1;get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(e){this._updateSortActionDescription(e)}_sortActionDescription="Sort";disableClear;constructor(){_(li).load(Xi);let e=_(Gv,{optional:!0});this._sort,e?.arrowPosition&&(this.arrowPosition=e?.arrowPosition)}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._sort.register(this),this._renderChanges=Ct(this._sort._stateChanges,this._sort.sortChange).subscribe(()=>this._changeDetectorRef.markForCheck()),this._sortButton=this._elementRef.nativeElement.querySelector(".mat-sort-header-container"),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(()=>{Promise.resolve().then(()=>this._recentlyCleared.set(null))})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._renderChanges?.unsubscribe(),this._sortButton&&this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription)}_toggleOnInteraction(){if(!this._isDisabled()){let e=this._isSorted(),i=this._sort.direction;this._sort.sort(this),this._recentlyCleared.set(e&&!this._isSorted()?i:null)}}_handleKeydown(e){(e.keyCode===32||e.keyCode===13)&&(e.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&(this._sort.direction==="asc"||this._sort.direction==="desc")}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?this._sort.direction=="asc"?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(e){this._sortButton&&(this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription),this._ariaDescriber?.describe(this._sortButton,e)),this._sortActionDescription=e}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(i,a){i&1&&I("click",function(){return a._toggleOnInteraction()})("keydown",function(o){return a._handleKeydown(o)})("mouseleave",function(){return a._recentlyCleared.set(null)}),i&2&&(pe("aria-sort",a._getAriaSortAttribute()),de("mat-sort-header-disabled",a._isDisabled()))},inputs:{id:[0,"mat-sort-header","id"],arrowPosition:"arrowPosition",start:"start",disabled:[2,"disabled","disabled",ce],sortActionDescription:"sortActionDescription",disableClear:[2,"disableClear","disableClear",ce]},exportAs:["matSortHeader"],attrs:rT,ngContentSelectors:sT,decls:4,vars:17,consts:[[1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],[1,"mat-sort-header-arrow"],["viewBox","0 -960 960 960","focusable","false","aria-hidden","true"],["d","M440-240v-368L296-464l-56-56 240-240 240 240-56 56-144-144v368h-80Z"]],template:function(i,a){i&1&&(tt(oT),Yt(0,"div",0)(1,"div",1),Pe(2),qt(),Q(3,cT,3,0,"div",2),qt()),i&2&&(de("mat-sort-header-sorted",a._isSorted())("mat-sort-header-position-before",a.arrowPosition==="before")("mat-sort-header-descending",a._sort.direction==="desc")("mat-sort-header-ascending",a._sort.direction==="asc")("mat-sort-header-recently-cleared-ascending",a._recentlyCleared()==="asc")("mat-sort-header-recently-cleared-descending",a._recentlyCleared()==="desc")("mat-sort-header-animations-disabled",a._animationsDisabled),pe("tabindex",a._isDisabled()?null:0)("role",a._isDisabled()?null:"button"),C(3),X(a._renderArrow()?3:-1))},styles:[`.mat-sort-header{cursor:pointer}.mat-sort-header-disabled{cursor:default}.mat-sort-header-container{display:flex;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-container::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-sort-header-content{display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}@keyframes _mat-sort-header-recently-cleared-ascending{from{transform:translateY(0);opacity:1}to{transform:translateY(-25%);opacity:0}}@keyframes _mat-sort-header-recently-cleared-descending{from{transform:translateY(0) rotate(180deg);opacity:1}to{transform:translateY(25%) rotate(180deg);opacity:0}}.mat-sort-header-arrow{height:12px;width:12px;position:relative;transition:transform 225ms cubic-bezier(0.4, 0, 0.2, 1),opacity 225ms cubic-bezier(0.4, 0, 0.2, 1);opacity:0;overflow:visible;color:var(--mat-sort-arrow-color, var(--mat-sys-on-surface))}.mat-sort-header.cdk-keyboard-focused .mat-sort-header-arrow,.mat-sort-header.cdk-program-focused .mat-sort-header-arrow,.mat-sort-header:hover .mat-sort-header-arrow{opacity:.54}.mat-sort-header .mat-sort-header-sorted .mat-sort-header-arrow{opacity:1}.mat-sort-header-descending .mat-sort-header-arrow{transform:rotate(180deg)}.mat-sort-header-recently-cleared-ascending .mat-sort-header-arrow{transform:translateY(-25%)}.mat-sort-header-recently-cleared-ascending .mat-sort-header-arrow{transition:none;animation:_mat-sort-header-recently-cleared-ascending 225ms cubic-bezier(0.4, 0, 0.2, 1) forwards}.mat-sort-header-recently-cleared-descending .mat-sort-header-arrow{transition:none;animation:_mat-sort-header-recently-cleared-descending 225ms cubic-bezier(0.4, 0, 0.2, 1) forwards}.mat-sort-header-animations-disabled .mat-sort-header-arrow{transition-duration:0ms;animation-duration:0ms}.mat-sort-header-arrow>svg,.mat-sort-header-arrow [matSortHeaderIcon]{width:24px;height:24px;fill:currentColor;position:absolute;top:50%;left:50%;margin:-12px 0 0 -12px;transform:translateZ(0)}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}
`],encapsulation:2,changeDetection:0})}return n})(),Xv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=De({type:n});static \u0275inj=Se({imports:[Ge]})}return n})();var mT=["*",[["mat-chip-avatar"],["","matChipAvatar",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],fT=["*","mat-chip-avatar, [matChipAvatar]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"];function gT(n,t){n&1&&(f(0,"span",3),Pe(1,1),m())}function _T(n,t){n&1&&(f(0,"span",6),Pe(1,2),m())}var bT=["*"];var yT=new Y("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})}),Zv=new Y("MatChipAvatar"),Xp=new Y("MatChipTrailingIcon"),Jv=new Y("MatChipEdit"),eC=new Y("MatChipRemove"),tC=new Y("MatChip"),Zp=(()=>{class n{_elementRef=_(be);_parentChip=_(tC);_isPrimary=!0;_isLeading=!1;get disabled(){return this._disabled||this._parentChip?.disabled||!1}set disabled(e){this._disabled=e}_disabled=!1;tabIndex=-1;_allowFocusWhenDisabled=!1;_getDisabledAttribute(){return this.disabled&&!this._allowFocusWhenDisabled?"":null}constructor(){_(li).load(Xi),this._elementRef.nativeElement.nodeName==="BUTTON"&&this._elementRef.nativeElement.setAttribute("type","button")}focus(){this._elementRef.nativeElement.focus()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","matChipContent",""]],hostAttrs:[1,"mat-mdc-chip-action","mdc-evolution-chip__action","mdc-evolution-chip__action--presentational"],hostVars:8,hostBindings:function(i,a){i&2&&(pe("disabled",a._getDisabledAttribute())("aria-disabled",a.disabled),de("mdc-evolution-chip__action--primary",a._isPrimary)("mdc-evolution-chip__action--secondary",!a._isPrimary)("mdc-evolution-chip__action--trailing",!a._isPrimary&&!a._isLeading))},inputs:{disabled:[2,"disabled","disabled",ce],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?-1:Ti(e)],_allowFocusWhenDisabled:"_allowFocusWhenDisabled"}})}return n})(),vT=(()=>{class n extends Zp{_getTabindex(){return this.disabled&&!this._allowFocusWhenDisabled?null:this.tabIndex.toString()}_handleClick(e){!this.disabled&&this._isPrimary&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!this.disabled&&this._isPrimary&&!this._parentChip._isEditing&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}static \u0275fac=(()=>{let e;return function(a){return(e||(e=nt(n)))(a||n)}})();static \u0275dir=q({type:n,selectors:[["","matChipAction",""]],hostVars:3,hostBindings:function(i,a){i&1&&I("click",function(o){return a._handleClick(o)})("keydown",function(o){return a._handleKeydown(o)}),i&2&&(pe("tabindex",a._getTabindex()),de("mdc-evolution-chip__action--presentational",!1))},features:[Re]})}return n})();var yd=(()=>{class n extends Zp{_isPrimary=!1;static \u0275fac=(()=>{let e;return function(a){return(e||(e=nt(n)))(a||n)}})();static \u0275dir=q({type:n,selectors:[["mat-chip-trailing-icon"],["","matChipTrailingIcon",""]],hostAttrs:["aria-hidden","true",1,"mat-mdc-chip-trailing-icon","mdc-evolution-chip__icon","mdc-evolution-chip__icon--trailing"],features:[$e([{provide:Xp,useExisting:n}]),Re]})}return n})();var is=(()=>{class n{_changeDetectorRef=_(ve);_elementRef=_(be);_tagName=_($m);_ngZone=_(ht);_focusMonitor=_(La);_globalRippleOptions=_(vf,{optional:!0});_document=_(Ft);_onFocus=new G;_onBlur=new G;_isBasicChip=!1;role=null;_hasFocusInternal=!1;_pendingFocus=!1;_actionChanges;_animationsDisabled=ut();_allLeadingIcons;_allTrailingIcons;_allEditIcons;_allRemoveIcons;_hasFocus(){return this._hasFocusInternal}id=_(ci).getId("mat-mdc-chip-");ariaLabel=null;ariaDescription=null;_chipListDisabled=!1;_hadFocusOnRemove=!1;_textElement;get value(){return this._value!==void 0?this._value:this._textElement.textContent.trim()}set value(e){this._value=e}_value;color;removable=!0;highlighted=!1;disableRipple=!1;get disabled(){return this._disabled||this._chipListDisabled}set disabled(e){this._disabled=e}_disabled=!1;removed=new $;destroyed=new $;basicChipAttrName="mat-basic-chip";leadingIcon;editIcon;trailingIcon;removeIcon;primaryAction;_rippleLoader=_(xf);_injector=_(He);constructor(){let e=_(li);e.load(Xi),e.load(vn),this._monitorFocus(),this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-chip-ripple",disabled:this._isRippleDisabled()})}ngOnInit(){this._isBasicChip=this._elementRef.nativeElement.hasAttribute(this.basicChipAttrName)||this._tagName.toLowerCase()===this.basicChipAttrName}ngAfterViewInit(){this._textElement=this._elementRef.nativeElement.querySelector(".mat-mdc-chip-action-label"),this._pendingFocus&&(this._pendingFocus=!1,this.focus())}ngAfterContentInit(){this._actionChanges=Ct(this._allLeadingIcons.changes,this._allTrailingIcons.changes,this._allEditIcons.changes,this._allRemoveIcons.changes).subscribe(()=>this._changeDetectorRef.markForCheck())}ngDoCheck(){this._rippleLoader.setDisabled(this._elementRef.nativeElement,this._isRippleDisabled())}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement),this._actionChanges?.unsubscribe(),this.destroyed.emit({chip:this}),this.destroyed.complete()}remove(){this.removable&&(this._hadFocusOnRemove=this._hasFocus(),this.removed.emit({chip:this}))}_isRippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||this._isBasicChip||!this._hasInteractiveActions()||!!this._globalRippleOptions?.disabled}_hasTrailingIcon(){return!!(this.trailingIcon||this.removeIcon)}_handleKeydown(e){(e.keyCode===8&&!e.repeat||e.keyCode===46)&&(e.preventDefault(),this.remove())}focus(){this.disabled||(this.primaryAction?this.primaryAction.focus():this._pendingFocus=!0)}_getSourceAction(e){return this._getActions().find(i=>{let a=i._elementRef.nativeElement;return a===e||a.contains(e)})}_getActions(){let e=[];return this.editIcon&&e.push(this.editIcon),this.primaryAction&&e.push(this.primaryAction),this.removeIcon&&e.push(this.removeIcon),e}_handlePrimaryActionInteraction(){}_hasInteractiveActions(){return this._getActions().length>0}_edit(e){}_monitorFocus(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{let i=e!==null;i!==this._hasFocusInternal&&(this._hasFocusInternal=i,i?this._onFocus.next({chip:this}):(this._changeDetectorRef.markForCheck(),setTimeout(()=>this._ngZone.run(()=>this._onBlur.next({chip:this})))))})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(i,a,r){if(i&1&&ri(r,Zv,5)(r,Jv,5)(r,Xp,5)(r,eC,5)(r,Zv,5)(r,Xp,5)(r,Jv,5)(r,eC,5),i&2){let o;ee(o=te())&&(a.leadingIcon=o.first),ee(o=te())&&(a.editIcon=o.first),ee(o=te())&&(a.trailingIcon=o.first),ee(o=te())&&(a.removeIcon=o.first),ee(o=te())&&(a._allLeadingIcons=o),ee(o=te())&&(a._allTrailingIcons=o),ee(o=te())&&(a._allEditIcons=o),ee(o=te())&&(a._allRemoveIcons=o)}},viewQuery:function(i,a){if(i&1&&Ke(vT,5),i&2){let r;ee(r=te())&&(a.primaryAction=r.first)}},hostAttrs:[1,"mat-mdc-chip"],hostVars:31,hostBindings:function(i,a){i&1&&I("keydown",function(o){return a._handleKeydown(o)}),i&2&&(Ta("id",a.id),pe("role",a.role)("aria-label",a.ariaLabel),wt("mat-"+(a.color||"primary")),de("mdc-evolution-chip",!a._isBasicChip)("mdc-evolution-chip--disabled",a.disabled)("mdc-evolution-chip--with-trailing-action",a._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",a.leadingIcon)("mdc-evolution-chip--with-primary-icon",a.leadingIcon)("mdc-evolution-chip--with-avatar",a.leadingIcon)("mat-mdc-chip-with-avatar",a.leadingIcon)("mat-mdc-chip-highlighted",a.highlighted)("mat-mdc-chip-disabled",a.disabled)("mat-mdc-basic-chip",a._isBasicChip)("mat-mdc-standard-chip",!a._isBasicChip)("mat-mdc-chip-with-trailing-icon",a._hasTrailingIcon())("_mat-animation-noopable",a._animationsDisabled))},inputs:{role:"role",id:"id",ariaLabel:[0,"aria-label","ariaLabel"],ariaDescription:[0,"aria-description","ariaDescription"],value:"value",color:"color",removable:[2,"removable","removable",ce],highlighted:[2,"highlighted","highlighted",ce],disableRipple:[2,"disableRipple","disableRipple",ce],disabled:[2,"disabled","disabled",ce]},outputs:{removed:"removed",destroyed:"destroyed"},exportAs:["matChip"],features:[$e([{provide:tC,useExisting:n}])],ngContentSelectors:fT,decls:8,vars:2,consts:[[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipContent",""],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-focus-indicator"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(i,a){i&1&&(tt(mT),U(0,"span",0),f(1,"span",1)(2,"span",2),Q(3,gT,2,0,"span",3),f(4,"span",4),Pe(5),U(6,"span",5),m()()(),Q(7,_T,2,0,"span",6)),i&2&&(C(3),X(a.leadingIcon?3:-1),C(4),X(a._hasTrailingIcon()?7:-1))},dependencies:[Zp],styles:[`.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{flex-basis:100%;overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}@media(forced-colors: active){.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{forced-color-adjust:none}}.mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit;overflow-x:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary::before{border-width:var(--mat-chip-outline-width, 1px);border-radius:var(--mat-chip-container-shape-radius, 8px);box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1;border-style:solid}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--primary::before{border-color:var(--mat-chip-outline-color, var(--mat-sys-outline))}.mdc-evolution-chip__action--primary:not(.mdc-evolution-chip__action--presentational):not(.mdc-ripple-upgraded):focus::before{border-color:var(--mat-chip-focus-outline-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--primary::before{border-color:var(--mat-chip-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary::before{border-width:var(--mat-chip-flat-selected-outline-width, 0)}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-standard-chip.mdc-evolution-chip--with-leading-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-leading-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-leading-action.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip__action--secondary{position:relative;overflow:visible}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--secondary{color:var(--mat-chip-with-trailing-icon-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--secondary{color:var(--mat-chip-with-trailing-icon-disabled-trailing-icon-color, var(--mat-sys-on-surface))}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--secondary{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--secondary{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--secondary{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--secondary{padding-left:8px;padding-right:8px}.mdc-evolution-chip__text-label{-webkit-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mat-chip-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-chip-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-chip-label-text-size, var(--mat-sys-label-large-size));font-weight:var(--mat-chip-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mat-chip-label-text-tracking, var(--mat-sys-label-large-tracking))}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mat-chip-label-text-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mat-chip-selected-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label,.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mat-chip-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{width:var(--mat-chip-with-avatar-avatar-size, 24px);height:var(--mat-chip-with-avatar-avatar-size, 24px);font-size:var(--mat-chip-with-avatar-avatar-size, 24px)}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-leading-action .mdc-evolution-chip__graphic{padding-left:0}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%;height:20px;width:20px}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mat-chip-with-icon-selected-icon-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mat-chip-with-icon-disabled-icon-color, var(--mat-sys-on-surface))}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}@media(forced-colors: active){.mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove{opacity:calc(var(--mat-chip-trailing-action-opacity, 1)*var(--mat-chip-with-trailing-icon-disabled-trailing-icon-opacity, 0.38))}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove:focus{opacity:calc(var(--mat-chip-trailing-action-focus-opacity, 1)*var(--mat-chip-with-trailing-icon-disabled-trailing-icon-opacity, 0.38))}.mat-mdc-standard-chip{border-radius:var(--mat-chip-container-shape-radius, 8px);height:var(--mat-chip-container-height, 32px)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mat-chip-elevated-container-color, transparent)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mat-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled){background-color:var(--mat-chip-elevated-selected-container-color, var(--mat-sys-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mat-chip-flat-disabled-selected-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}@media(forced-colors: active){.mat-mdc-standard-chip{outline:solid 1px}}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mat-chip-with-avatar-avatar-shape-radius, 24px);width:var(--mat-chip-with-icon-icon-size, 18px);height:var(--mat-chip-with-icon-icon-size, 18px);font-size:var(--mat-chip-with-icon-icon-size, 18px)}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mat-chip-with-icon-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mat-chip-with-icon-disabled-icon-color, var(--mat-sys-on-surface))}.mat-mdc-chip-highlighted{--mat-chip-with-icon-icon-color: var(--mat-chip-with-icon-selected-icon-color, var(--mat-sys-on-secondary-container));--mat-chip-elevated-container-color: var(--mat-chip-elevated-selected-container-color, var(--mat-sys-secondary-container));--mat-chip-label-text-color: var(--mat-chip-selected-label-text-color, var(--mat-sys-on-secondary-container));--mat-chip-outline-width: var(--mat-chip-flat-selected-outline-width, 0)}.mat-mdc-chip-focus-overlay{background:var(--mat-chip-focus-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-chip-selected .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted .mat-mdc-chip-focus-overlay{background:var(--mat-chip-selected-focus-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{background:var(--mat-chip-hover-state-layer-color, var(--mat-sys-on-surface-variant));opacity:var(--mat-chip-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-chip-focus-overlay .mat-mdc-chip-selected:hover,.mat-mdc-chip-highlighted:hover .mat-mdc-chip-focus-overlay{background:var(--mat-chip-selected-hover-state-layer-color, var(--mat-sys-on-secondary-container));opacity:var(--mat-chip-selected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mat-chip-focus-state-layer-color, var(--mat-sys-on-surface-variant));opacity:var(--mat-chip-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-chip-selected.cdk-focused .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mat-chip-selected-focus-state-layer-color, var(--mat-sys-on-secondary-container));opacity:var(--mat-chip-selected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-evolution-chip--disabled:not(.mdc-evolution-chip--selected) .mat-mdc-chip-avatar{opacity:var(--mat-chip-with-avatar-disabled-avatar-opacity, 0.38)}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{opacity:var(--mat-chip-with-trailing-icon-disabled-trailing-icon-opacity, 0.38)}.mdc-evolution-chip--disabled.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{opacity:var(--mat-chip-with-icon-disabled-icon-opacity, 0.38)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:var(--mat-chip-disabled-container-opacity, 1)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-trailing-icon-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-disabled-trailing-icon-color, var(--mat-sys-on-surface))}.mat-mdc-chip-edit,.mat-mdc-chip-remove{opacity:var(--mat-chip-trailing-action-opacity, 1)}.mat-mdc-chip-edit:focus,.mat-mdc-chip-remove:focus{opacity:var(--mat-chip-trailing-action-focus-opacity, 1)}.mat-mdc-chip-edit::after,.mat-mdc-chip-remove::after{background-color:var(--mat-chip-trailing-action-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-chip-edit:hover::after,.mat-mdc-chip-remove:hover::after{opacity:calc(var(--mat-chip-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity)) + var(--mat-chip-trailing-action-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity)))}.mat-mdc-chip-edit:focus::after,.mat-mdc-chip-remove:focus::after{opacity:calc(var(--mat-chip-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity)) + var(--mat-chip-trailing-action-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity)))}.mat-mdc-chip-selected .mat-mdc-chip-remove::after,.mat-mdc-chip-highlighted .mat-mdc-chip-remove::after{background-color:var(--mat-chip-selected-trailing-action-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-mdc-chip.cdk-focused .mat-mdc-chip-edit:focus::after,.mat-mdc-chip.cdk-focused .mat-mdc-chip-remove:focus::after{opacity:calc(var(--mat-chip-selected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity)) + var(--mat-chip-trailing-action-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity)))}.mat-mdc-chip.cdk-focused .mat-mdc-chip-edit:hover::after,.mat-mdc-chip.cdk-focused .mat-mdc-chip-remove:hover::after{opacity:calc(var(--mat-chip-selected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity)) + var(--mat-chip-trailing-action-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity)))}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mat-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-chip-edit::before,.mat-mdc-chip-remove::before{margin:calc(var(--mat-focus-indicator-border-width, 3px)*-1);left:8px;right:8px}.mat-mdc-chip-edit::after,.mat-mdc-chip-remove::after{content:"";display:block;opacity:0;position:absolute;top:-3px;bottom:-3px;left:5px;right:5px;border-radius:50%;box-sizing:border-box;padding:12px;margin:-12px;background-clip:content-box}.mat-mdc-chip-edit .mat-icon,.mat-mdc-chip-remove .mat-icon{width:18px;height:18px;font-size:18px;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}@media(forced-colors: active){.mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}}.mat-mdc-chip-action:focus-visible .mat-focus-indicator::before{content:""}.mdc-evolution-chip__icon,.mat-mdc-chip-edit .mat-icon,.mat-mdc-chip-remove .mat-icon{min-height:fit-content}img.mdc-evolution-chip__icon{min-height:0}
`],encapsulation:2,changeDetection:0})}return n})();var vd=(()=>{class n{_elementRef=_(be);_changeDetectorRef=_(ve);_dir=_(Kt,{optional:!0});_lastDestroyedFocusedChipIndex=null;_keyManager;_destroyed=new G;_defaultRole="presentation";get chipFocusChanges(){return this._getChipStream(e=>e._onFocus)}get chipDestroyedChanges(){return this._getChipStream(e=>e.destroyed)}get chipRemovedChanges(){return this._getChipStream(e=>e.removed)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._syncChipsState()}_disabled=!1;get empty(){return!this._chips||this._chips.length===0}get role(){return this._explicitRole?this._explicitRole:this.empty?null:this._defaultRole}tabIndex=0;set role(e){this._explicitRole=e}_explicitRole=null;get focused(){return this._hasFocusedChip()}_chips;_chipActions=new Rm;constructor(){}ngAfterViewInit(){this._setUpFocusManagement(),this._trackChipSetChanges(),this._trackDestroyedFocusedChip()}ngOnDestroy(){this._keyManager?.destroy(),this._chipActions.destroy(),this._destroyed.next(),this._destroyed.complete()}_hasFocusedChip(){return this._chips&&this._chips.some(e=>e._hasFocus())}_syncChipsState(){this._chips?.forEach(e=>{e._chipListDisabled=this._disabled,e._changeDetectorRef.markForCheck()})}focus(){}_handleKeydown(e){this._originatesFromChip(e)&&this._keyManager.onKeydown(e)}_isValidIndex(e){return e>=0&&e<this._chips.length}_allowFocusEscape(){let e=this._elementRef.nativeElement.tabIndex;e!==-1&&(this._elementRef.nativeElement.tabIndex=-1,setTimeout(()=>this._elementRef.nativeElement.tabIndex=e))}_getChipStream(e){return this._chips.changes.pipe(Ut(null),ke(()=>Ct(...this._chips.map(e))))}_originatesFromChip(e){let i=e.target;for(;i&&i!==this._elementRef.nativeElement;){if(i.classList.contains("mat-mdc-chip"))return!0;i=i.parentElement}return!1}_setUpFocusManagement(){this._chips.changes.pipe(Ut(this._chips)).subscribe(e=>{let i=[];e.forEach(a=>a._getActions().forEach(r=>i.push(r))),this._chipActions.reset(i),this._chipActions.notifyOnChanges()}),this._keyManager=new _f(this._chipActions).withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr").withHomeAndEnd().skipPredicate(e=>this._skipPredicate(e)),this.chipFocusChanges.pipe(xe(this._destroyed)).subscribe(({chip:e})=>{let i=e._getSourceAction(document.activeElement);i&&this._keyManager.updateActiveItem(i)}),this._dir?.change.pipe(xe(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e))}_skipPredicate(e){return e.disabled}_trackChipSetChanges(){this._chips.changes.pipe(Ut(null),xe(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>this._syncChipsState()),this._redirectDestroyedChipFocus()})}_trackDestroyedFocusedChip(){this.chipDestroyedChanges.pipe(xe(this._destroyed)).subscribe(e=>{let a=this._chips.toArray().indexOf(e.chip),r=e.chip._hasFocus(),o=e.chip._hadFocusOnRemove&&this._keyManager.activeItem&&e.chip._getActions().includes(this._keyManager.activeItem),s=r||o;this._isValidIndex(a)&&s&&(this._lastDestroyedFocusedChipIndex=a)})}_redirectDestroyedChipFocus(){if(this._lastDestroyedFocusedChipIndex!=null){if(this._chips.length){let e=Math.min(this._lastDestroyedFocusedChipIndex,this._chips.length-1),i=this._chips.toArray()[e];i.disabled?this._chips.length===1?this.focus():this._keyManager.setPreviousItemActive():i.focus()}else this.focus();this._lastDestroyedFocusedChipIndex=null}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-chip-set"]],contentQueries:function(i,a,r){if(i&1&&ri(r,is,5),i&2){let o;ee(o=te())&&(a._chips=o)}},hostAttrs:[1,"mat-mdc-chip-set","mdc-evolution-chip-set"],hostVars:1,hostBindings:function(i,a){i&1&&I("keydown",function(o){return a._handleKeydown(o)}),i&2&&pe("role",a.role)},inputs:{disabled:[2,"disabled","disabled",ce],role:"role",tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Ti(e)]},ngContentSelectors:bT,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(i,a){i&1&&(tt(),Yt(0,"div",0),Pe(1),qt())},styles:[`.mat-mdc-chip-set{display:flex}.mat-mdc-chip-set:focus{outline:none}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%;margin-left:-8px;margin-right:0}.mat-mdc-chip-set .mdc-evolution-chip{margin:4px 0 4px 8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip-set__chips{margin-left:0;margin-right:-8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip{margin-left:0;margin-right:8px}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}.mat-mdc-chip-set-stacked .mdc-evolution-chip__graphic{flex-grow:0}.mat-mdc-chip-set-stacked .mdc-evolution-chip__action--primary{flex-basis:100%;justify-content:start}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}.mat-mdc-form-field:not(.mat-form-field-hide-placeholder) input.mat-mdc-chip-input::placeholder{opacity:1}.mat-mdc-form-field:not(.mat-form-field-hide-placeholder) input.mat-mdc-chip-input::-moz-placeholder{opacity:1}.mat-mdc-form-field:not(.mat-form-field-hide-placeholder) input.mat-mdc-chip-input::-webkit-input-placeholder{opacity:1}.mat-mdc-form-field:not(.mat-form-field-hide-placeholder) input.mat-mdc-chip-input:-ms-input-placeholder{opacity:1}.mat-mdc-chip-set+input.mat-mdc-chip-input{margin-left:0;margin-right:0}
`],encapsulation:2,changeDetection:0})}return n})();var Cd=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=De({type:n});static \u0275inj=Se({providers:[Os,{provide:yT,useValue:{separatorKeyCodes:[13]}}],imports:[Rs,Ge]})}return n})();var CT=["tooltip"],xT=20;var wT=new Y("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let n=_(He);return()=>Ua(n,{scrollThrottle:xT})}}),MT=new Y("mat-tooltip-default-options",{providedIn:"root",factory:()=>({showDelay:0,hideDelay:0,touchendHideDelay:1500})});var nC="tooltip-panel",ST={passive:!0},DT=8,PT=8,ET=24,OT=200,ka=(()=>{class n{_elementRef=_(be);_ngZone=_(ht);_platform=_(yn);_ariaDescriber=_(Ts);_focusMonitor=_(La);_dir=_(Kt);_injector=_(He);_viewContainerRef=_(ai);_mediaMatcher=_(sf);_document=_(Ft);_renderer=_(Oi);_animationsDisabled=ut();_defaultOptions=_(MT,{optional:!0});_overlayRef=null;_tooltipInstance=null;_overlayPanelClass;_portal;_position="below";_positionAtOrigin=!1;_disabled=!1;_tooltipClass;_viewInitialized=!1;_pointerExitEventsInitialized=!1;_tooltipComponent=aC;_viewportMargin=8;_currentPosition;_cssClassPrefix="mat-mdc";_ariaDescriptionPending=!1;_dirSubscribed=!1;get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=Gd(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){let i=Gd(e);this._disabled!==i&&(this._disabled=i,i?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=qd(e)}_showDelay;get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=qd(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}_hideDelay;touchGestures="auto";get message(){return this._message}set message(e){let i=this._message;this._message=e!=null?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(i)}_message="";get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}_eventCleanups=[];_touchstartTimeout=null;_destroyed=new G;_isDestroyed=!1;constructor(){let e=this._defaultOptions;e&&(this._showDelay=e.showDelay,this._hideDelay=e.hideDelay,e.position&&(this.position=e.position),e.positionAtOrigin&&(this.positionAtOrigin=e.positionAtOrigin),e.touchGestures&&(this.touchGestures=e.touchGestures),e.tooltipClass&&(this.tooltipClass=e.tooltipClass)),this._viewportMargin=DT}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(xe(this._destroyed)).subscribe(e=>{e?e==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let e=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._eventCleanups.forEach(i=>i()),this._eventCleanups.length=0,this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0,this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,i){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let a=this._createOverlay(i);this._detach(),this._portal=this._portal||new wn(this._tooltipComponent,this._viewContainerRef);let r=this._tooltipInstance=a.attach(this._portal).instance;r._triggerElement=this._elementRef.nativeElement,r._mouseLeaveHideDelay=this._hideDelay,r.afterHidden().pipe(xe(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),r.show(e)}hide(e=this.hideDelay){let i=this._tooltipInstance;i&&(i.isVisible()?i.hide(e):(i._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){let o=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&o._origin instanceof be)return this._overlayRef;this._detach()}let i=this._injector.get(kf).getAncestorScrollContainers(this._elementRef),a=`${this._cssClassPrefix}-${nC}`,r=Gs(this._injector,this.positionAtOrigin?e||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i).withPopoverLocation("global");return r.positionChanges.pipe(xe(this._destroyed)).subscribe(o=>{this._updateCurrentPositionClass(o.connectionPair),this._tooltipInstance&&o.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=Wa(this._injector,{direction:this._dir,positionStrategy:r,panelClass:this._overlayPanelClass?[...this._overlayPanelClass,a]:a,scrollStrategy:this._injector.get(wT)(),disableAnimations:this._animationsDisabled,eventPredicate:this._overlayEventPredicate}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(xe(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(xe(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(xe(this._destroyed)).subscribe(o=>{o.preventDefault(),o.stopPropagation(),this._ngZone.run(()=>this.hide(0))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._dirSubscribed||(this._dirSubscribed=!0,this._dir.change.pipe(xe(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){let i=e.getConfig().positionStrategy,a=this._getOrigin(),r=this._getOverlayPosition();i.withPositions([this._addOffset(A(A({},a.main),r.main)),this._addOffset(A(A({},a.fallback),r.fallback))])}_addOffset(e){let i=PT,a=!this._dir||this._dir.value=="ltr";return e.originY==="top"?e.offsetY=-i:e.originY==="bottom"?e.offsetY=i:e.originX==="start"?e.offsetX=a?-i:i:e.originX==="end"&&(e.offsetX=a?i:-i),e}_getOrigin(){let e=!this._dir||this._dir.value=="ltr",i=this.position,a;i=="above"||i=="below"?a={originX:"center",originY:i=="above"?"top":"bottom"}:i=="before"||i=="left"&&e||i=="right"&&!e?a={originX:"start",originY:"center"}:(i=="after"||i=="right"&&e||i=="left"&&!e)&&(a={originX:"end",originY:"center"});let{x:r,y:o}=this._invertPosition(a.originX,a.originY);return{main:a,fallback:{originX:r,originY:o}}}_getOverlayPosition(){let e=!this._dir||this._dir.value=="ltr",i=this.position,a;i=="above"?a={overlayX:"center",overlayY:"bottom"}:i=="below"?a={overlayX:"center",overlayY:"top"}:i=="before"||i=="left"&&e||i=="right"&&!e?a={overlayX:"end",overlayY:"center"}:(i=="after"||i=="right"&&e||i=="left"&&!e)&&(a={overlayX:"start",overlayY:"center"});let{x:r,y:o}=this._invertPosition(a.overlayX,a.overlayY);return{main:a,fallback:{overlayX:r,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),lt(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e instanceof Set?Array.from(e):e,this._tooltipInstance._markForCheck())}_invertPosition(e,i){return this.position==="above"||this.position==="below"?i==="top"?i="bottom":i==="bottom"&&(i="top"):e==="end"?e="start":e==="start"&&(e="end"),{x:e,y:i}}_updateCurrentPositionClass(e){let{overlayY:i,originX:a,originY:r}=e,o;if(i==="center"?this._dir&&this._dir.value==="rtl"?o=a==="end"?"left":"right":o=a==="start"?"left":"right":o=i==="bottom"&&r==="top"?"above":"below",o!==this._currentPosition){let s=this._overlayRef;if(s){let l=`${this._cssClassPrefix}-${nC}-`;s.removePanelClass(l+this._currentPosition),s.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._eventCleanups.length||(this._isTouchPlatform()?this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._addListener("touchstart",e=>{let i=e.targetTouches?.[0],a=i?{x:i.clientX,y:i.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let r=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,a)},this._defaultOptions?.touchLongPressShowDelay??r)})):this._addListener("mouseenter",e=>{this._setupPointerExitEventsIfNeeded();let i;e.x!==void 0&&e.y!==void 0&&(i=e),this.show(void 0,i)}))}_setupPointerExitEventsIfNeeded(){if(!this._pointerExitEventsInitialized){if(this._pointerExitEventsInitialized=!0,!this._isTouchPlatform())this._addListener("mouseleave",e=>{let i=e.relatedTarget;(!i||!this._overlayRef?.overlayElement.contains(i))&&this.hide()}),this._addListener("wheel",e=>{if(this._isTooltipVisible()){let i=this._document.elementFromPoint(e.clientX,e.clientY),a=this._elementRef.nativeElement;i!==a&&!a.contains(i)&&this.hide()}});else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let e=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions?.touchendHideDelay)};this._addListener("touchend",e),this._addListener("touchcancel",e)}}}_addListener(e,i){this._eventCleanups.push(this._renderer.listen(this._elementRef.nativeElement,e,i,ST))}_isTouchPlatform(){return this._platform.IOS||this._platform.ANDROID?!0:this._platform.isBrowser?!!this._defaultOptions?.detectHoverCapability&&this._mediaMatcher.matchMedia("(any-hover: none)").matches:!1}_disableNativeGesturesIfNecessary(){let e=this.touchGestures;if(e!=="off"){let i=this._elementRef.nativeElement,a=i.style;(e==="on"||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA")&&(a.userSelect=a.msUserSelect=a.webkitUserSelect=a.MozUserSelect="none"),(e==="on"||!i.draggable)&&(a.webkitUserDrag="none"),a.touchAction="none",a.webkitTapHighlightColor="transparent"}}_syncAriaDescription(e){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,e,"tooltip"),this._isDestroyed||lt({write:()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")}},{injector:this._injector}))}_overlayEventPredicate=e=>e.type==="keydown"?this._isTooltipVisible()&&e.keyCode===27&&!At(e):!0;static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(i,a){i&2&&de("mat-mdc-tooltip-disabled",a.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]})}return n})(),aC=(()=>{class n{_changeDetectorRef=_(ve);_elementRef=_(be);_isMultiline=!1;message;tooltipClass;_showTimeoutId;_hideTimeoutId;_triggerElement;_mouseLeaveHideDelay;_animationsDisabled=ut();_tooltip;_closeOnInteraction=!1;_isVisible=!1;_onHide=new G;_showAnimation="mat-mdc-tooltip-show";_hideAnimation="mat-mdc-tooltip-hide";constructor(){}show(e){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>ET&&e.width>=OT}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){let i=this._tooltip.nativeElement,a=this._showAnimation,r=this._hideAnimation;if(i.classList.remove(e?r:a),i.classList.add(e?a:r),this._isVisible!==e&&(this._isVisible=e,this._changeDetectorRef.markForCheck()),e&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let o=getComputedStyle(i);(o.getPropertyValue("animation-duration")==="0s"||o.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(i,a){if(i&1&&Ke(CT,7),i&2){let r;ee(r=te())&&(a._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(i,a){i&1&&I("mouseleave",function(o){return a._handleMouseLeave(o)})},decls:4,vars:5,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(i,a){if(i&1){let r=ye();Yt(0,"div",1,0),Hm("animationend",function(s){return L(r),V(a._handleAnimationEnd(s))}),Yt(2,"div",2),y(3),qt()()}i&2&&(wt(a.tooltipClass),de("mdc-tooltip--multiline",a._isMultiline),C(3),K(a.message))},styles:[`.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mat-tooltip-container-color, var(--mat-sys-inverse-surface));color:var(--mat-tooltip-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-tooltip-container-shape, var(--mat-sys-corner-extra-small));font-family:var(--mat-tooltip-supporting-text-font, var(--mat-sys-body-small-font));font-size:var(--mat-tooltip-supporting-text-size, var(--mat-sys-body-small-size));font-weight:var(--mat-tooltip-supporting-text-weight, var(--mat-sys-body-small-weight));line-height:var(--mat-tooltip-supporting-text-line-height, var(--mat-sys-body-small-line-height));letter-spacing:var(--mat-tooltip-supporting-text-tracking, var(--mat-sys-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel{line-height:normal}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}
`],encapsulation:2,changeDetection:0})}return n})();var jr=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=De({type:n});static \u0275inj=Se({imports:[As,sa,Ge,ja]})}return n})();var ns=n=>[n,"EUR","symbol","1.2-2","es"];function kT(n,t){if(n&1&&(f(0,"mat-option",10),y(1),m()),n&2){let e=t.$implicit;D("value",e),C(),he(" ",e," ")}}function AT(n,t){if(n&1&&(f(0,"mat-option",10),y(1),m()),n&2){let e=t.$implicit,i=k();D("value",e),C(),he(" ",i.getMonthName(e)," ")}}function TT(n,t){if(n&1){let e=ye();f(0,"button",44),I("click",function(){L(e);let a=k(2);return V(a.clearTagFilters())}),f(1,"mat-icon"),y(2,"clear"),m(),y(3," Limpiar "),m()}}function RT(n,t){n&1&&(f(0,"mat-icon",46),y(1,"check"),m())}function IT(n,t){if(n&1){let e=ye();f(0,"mat-chip",45),I("click",function(){let a=L(e).$implicit,r=k(2);return V(r.toggleTag(a))}),y(1),Q(2,RT,2,0,"mat-icon",46),m()}if(n&2){let e=t.$implicit,i=k(2);de("selected",i.isTagSelected(e)),D("highlighted",i.isTagSelected(e)),C(),he(" ",e," "),C(),X(i.isTagSelected(e)?2:-1)}}function FT(n,t){if(n&1&&(f(0,"div",11)(1,"div",39)(2,"span",40)(3,"mat-icon"),y(4,"label"),m(),y(5," Filtrar por Etiquetas: "),m(),Q(6,TT,4,0,"button",41),m(),f(7,"mat-chip-set",42),mn(8,IT,3,5,"mat-chip",43,vs),m()()),n&2){let e=k();C(6),X(e.selectedTags.size>0?6:-1),C(2),fn(e.availableTags)}}function NT(n,t){if(n&1&&(f(0,"mat-card-subtitle")(1,"mat-icon",55),y(2,"category"),m(),y(3),m()),n&2){let e=k().$implicit;C(3),he(" ",e.category," ")}}function LT(n,t){if(n&1&&(Ue(0),f(1,"div",56)(2,"span",57)(3,"mat-icon"),y(4,"euro"),m(),y(5," Import "),m(),f(6,"span",58),y(7),Ie(8,"currency"),m()(),f(9,"div",59)(10,"span",57)(11,"mat-icon"),y(12),m(),y(13),m(),f(14,"span",60),y(15),Ie(16,"date"),m()(),f(17,"div",61)(18,"span",57)(19,"mat-icon"),y(20,"info"),m(),y(21," Estat "),m(),f(22,"mat-chip",62),y(23),m()(),We()),n&2){let e=k().$implicit,i=k();C(7),K(si(8,6,oi(15,ns,e.paymentStatus==="PAID"&&e.actualAmount!==null?e.actualAmount:e.approximateAmount))),C(5),K(e.paymentStatus==="PAID"?"event_available":"event"),C(),he(" ",e.paymentStatus==="PAID"?"Pagat":"Previst"," "),C(2),K(_n(16,12,e.paymentStatus==="PAID"&&e.actualPaymentDate?e.actualPaymentDate:e.scheduledPaymentDate,"dd/MM/yyyy")),C(7),D("ngClass",i.getStatusClass(e.paymentStatus)),C(),he(" ",e.paymentStatus," ")}}function VT(n,t){if(n&1&&(f(0,"div",59)(1,"span",57)(2,"mat-icon"),y(3,"event_available"),m(),y(4," Data real "),m(),f(5,"span",60),y(6),Ie(7,"date"),m()()),n&2){let e=k(2).$implicit;C(6),K(_n(7,1,e.actualPaymentDate,"dd/MM/yyyy"))}}function BT(n,t){if(n&1&&(f(0,"div",56)(1,"span",57)(2,"mat-icon"),y(3,"paid"),m(),y(4," Import real "),m(),f(5,"span",58),y(6),Ie(7,"currency"),m()()),n&2){let e=k(2).$implicit;C(6),K(si(7,1,oi(7,ns,e.actualAmount)))}}function zT(n,t){if(n&1&&(Ue(0),f(1,"div",59)(2,"span",57)(3,"mat-icon"),y(4,"description"),m(),y(5," Descripci\xF3 "),m(),f(6,"span",60),y(7),m()(),f(8,"div",59)(9,"span",57)(10,"mat-icon"),y(11,"business"),m(),y(12," Emissor "),m(),f(13,"span",60),y(14),m()(),f(15,"div",59)(16,"span",57)(17,"mat-icon"),y(18,"label"),m(),y(19," Etiqueta "),m(),f(20,"span",60),y(21),m()(),f(22,"div",56)(23,"span",57)(24,"mat-icon"),y(25,"euro"),m(),y(26," Import aproximat "),m(),f(27,"span",58),y(28),Ie(29,"currency"),m()(),f(30,"div",59)(31,"span",57)(32,"mat-icon"),y(33,"event"),m(),y(34," Data prevista "),m(),f(35,"span",60),y(36),Ie(37,"date"),m()(),f(38,"div",59)(39,"span",57)(40,"mat-icon"),y(41,"event_repeat"),m(),y(42," Periodicitat "),m(),f(43,"span",60),y(44),m()(),j(45,VT,8,4,"div",63)(46,BT,8,9,"div",64),f(47,"div",59)(48,"span",57)(49,"mat-icon"),y(50,"account_balance"),m(),y(51," Banc "),m(),f(52,"span",60),y(53),m()(),f(54,"div",61)(55,"span",57)(56,"mat-icon"),y(57,"info"),m(),y(58," Estat "),m(),f(59,"mat-chip",62),y(60),m()(),We()),n&2){let e=k().$implicit,i=k();C(7),K(e.description),C(7),K(e.issuer),C(7),K(e.tag),C(7),K(si(29,11,oi(20,ns,e.approximateAmount))),C(8),K(_n(37,17,e.scheduledPaymentDate,"dd/MM/yyyy")),C(8),K(i.getPeriodicityLabel(e.periodicity)),C(),D("ngIf",e.actualPaymentDate),C(),D("ngIf",e.actualAmount!==null),C(7),K(e.bank),C(6),D("ngClass",i.getStatusClass(e.paymentStatus)),C(),he(" ",e.paymentStatus," ")}}function jT(n,t){if(n&1){let e=ye();f(0,"mat-card",47)(1,"mat-card-header")(2,"div",48)(3,"div",49)(4,"mat-card-title")(5,"mat-icon",50),y(6,"receipt"),m(),y(7),m(),j(8,NT,4,1,"mat-card-subtitle",51),m(),f(9,"div",52)(10,"button",53),I("click",function(){let a=L(e).$implicit,r=k();return V(r.onEdit(a))}),f(11,"mat-icon"),y(12,"edit"),m()(),f(13,"button",54),I("click",function(){let a=L(e).$implicit,r=k();return V(r.onDelete(a))}),f(14,"mat-icon"),y(15,"delete"),m()()()()(),f(16,"mat-card-content"),j(17,LT,24,17,"ng-container",51)(18,zT,61,22,"ng-container",51),m()()}if(n&2){let e=t.$implicit,i=k();de("compact",i.compactMode),C(7),he(" ",e.name," "),C(),D("ngIf",!i.compactMode),C(9),D("ngIf",i.compactMode),C(),D("ngIf",!i.compactMode)}}function HT(n,t){n&1&&(f(0,"div",65)(1,"mat-icon"),y(2,"receipt_long"),m(),f(3,"p"),y(4,"Cap despesa coincideix amb el filtre"),m()())}function UT(n,t){n&1&&(f(0,"th",66),y(1,"Nom"),m())}function WT(n,t){if(n&1&&(f(0,"td",67),y(1),m()),n&2){let e=t.$implicit;C(),K(e.name)}}function $T(n,t){n&1&&(f(0,"th",66),y(1,"Descripci\xF3"),m())}function YT(n,t){if(n&1&&(f(0,"td",67),y(1),m()),n&2){let e=t.$implicit;C(),K(e.description)}}function qT(n,t){n&1&&(f(0,"th",66),y(1,"Emissor"),m())}function KT(n,t){if(n&1&&(f(0,"td",67),y(1),m()),n&2){let e=t.$implicit;C(),K(e.issuer)}}function GT(n,t){n&1&&(f(0,"th",66),y(1,"Etiqueta"),m())}function QT(n,t){if(n&1&&(f(0,"td",67),y(1),m()),n&2){let e=t.$implicit;C(),K(e.tag)}}function XT(n,t){n&1&&(f(0,"th",66),y(1,"Categoria"),m())}function ZT(n,t){if(n&1&&(f(0,"td",67),y(1),m()),n&2){let e=t.$implicit;C(),K(e.category)}}function JT(n,t){n&1&&(f(0,"th",66),y(1,"Import aproximat"),m())}function eR(n,t){if(n&1&&(f(0,"td",67),y(1),Ie(2,"currency"),m()),n&2){let e=t.$implicit;C(),K(si(2,1,oi(7,ns,e.approximateAmount)))}}function tR(n,t){n&1&&(f(0,"th",66),y(1,"Data prevista"),m())}function iR(n,t){if(n&1&&(f(0,"td",67),y(1),Ie(2,"date"),m()),n&2){let e=t.$implicit;C(),K(_n(2,1,e.scheduledPaymentDate,"dd/MM/yyyy"))}}function nR(n,t){n&1&&(f(0,"th",66),y(1,"Periodicitat"),m())}function aR(n,t){if(n&1&&(f(0,"td",67),y(1),m()),n&2){let e=t.$implicit,i=k();C(),K(i.getPeriodicityLabel(e.periodicity))}}function rR(n,t){n&1&&(f(0,"th",66),y(1,"Data real"),m())}function oR(n,t){if(n&1&&(f(0,"td",67),y(1),Ie(2,"date"),m()),n&2){let e=t.$implicit;C(),he(" ",e.actualPaymentDate?_n(2,1,e.actualPaymentDate,"dd/MM/yyyy"):"-"," ")}}function sR(n,t){n&1&&(f(0,"th",66),y(1,"Import real"),m())}function lR(n,t){if(n&1&&(f(0,"td",67),y(1),Ie(2,"currency"),m()),n&2){let e=t.$implicit;C(),he(" ",e.actualAmount!==null?si(2,1,oi(7,ns,e.actualAmount)):"-"," ")}}function cR(n,t){n&1&&(f(0,"th",66),y(1,"Estat"),m())}function dR(n,t){if(n&1&&(f(0,"td",67)(1,"mat-chip",62),y(2),m()()),n&2){let e=t.$implicit,i=k();C(),D("ngClass",i.getStatusClass(e.paymentStatus)),C(),he(" ",e.paymentStatus," ")}}function hR(n,t){n&1&&(f(0,"th",66),y(1,"Banc"),m())}function uR(n,t){if(n&1&&(f(0,"td",67),y(1),m()),n&2){let e=t.$implicit;C(),K(e.bank)}}function pR(n,t){n&1&&(f(0,"th",68),y(1,"Accions"),m())}function mR(n,t){if(n&1){let e=ye();f(0,"td",69)(1,"button",53),I("click",function(){let a=L(e).$implicit,r=k();return V(r.onEdit(a))}),f(2,"mat-icon"),y(3,"edit"),m()(),f(4,"button",54),I("click",function(){let a=L(e).$implicit,r=k();return V(r.onDelete(a))}),f(5,"mat-icon"),y(6,"delete"),m()()()}}function fR(n,t){n&1&&U(0,"tr",70)}function gR(n,t){n&1&&U(0,"tr",71)}function _R(n,t){if(n&1&&(f(0,"tr",72)(1,"td",73),y(2," Cap despesa coincideix amb el filtre. "),m()()),n&2){let e=k();C(),pe("colspan",e.displayedColumns.length)}}var xd=class n{constructor(t){this.cdr=t}expenses=[];selectedYear=new Date().getFullYear();edit=new $;delete=new $;yearChange=new $;monthChange=new $;sort;dataSource=new sd;availableYears=[];availableMonths=[];availableTags=[];selectedTags=new Set;selectedMonth=0;compactMode=!1;displayedColumns=["name","description","issuer","tag","category","approximateAmount","scheduledPaymentDate","periodicity","actualPaymentDate","actualAmount","paymentStatus","bank","actions"];ngOnInit(){this.updateDataSource()}ngAfterViewInit(){this.sort&&(this.dataSource.sort=this.sort)}ngOnChanges(t){(t.expenses||t.selectedYear)&&this.updateDataSource()}updateDataSource(){let t=new Set,e=new Set,i=new Set;this.expenses.forEach(r=>{let o=new Date(r.scheduledPaymentDate),s=o.getFullYear(),l=o.getMonth()+1;t.add(s),s===this.selectedYear&&e.add(l),r.tag&&r.tag.trim()!==""&&i.add(r.tag)}),this.availableYears=Array.from(t).sort((r,o)=>o-r),this.availableMonths=Array.from(e).sort((r,o)=>r-o),this.availableTags=Array.from(i).sort();let a=this.expenses.filter(r=>{let o=new Date(r.scheduledPaymentDate),s=o.getFullYear(),l=o.getMonth()+1,c=s===this.selectedYear,d=this.selectedMonth===0||l===this.selectedMonth;return this.selectedTags.size===0?c&&d:c&&d&&r.tag&&this.selectedTags.has(r.tag)});this.dataSource.data=a,this.cdr.detectChanges()}onYearChange(t){this.selectedMonth=0,this.yearChange.emit(t)}onMonthChange(t){this.selectedMonth=t,this.updateDataSource(),this.monthChange.emit(t)}getMonthName(t){return t===0?"Tots els mesos":["Gener","Febrer","Mar\xE7","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"][t-1]}toggleTag(t){this.selectedTags.has(t)?this.selectedTags.delete(t):this.selectedTags.add(t),this.updateDataSource()}isTagSelected(t){return this.selectedTags.has(t)}clearTagFilters(){this.selectedTags.clear(),this.updateDataSource()}applyFilter(t){let e=t.target.value;this.dataSource.filter=e.trim().toLowerCase()}getStatusClass(t){switch(t){case"PAID":return"status-paid";case"PENDING":return"status-pending";case"FAILED":return"status-failed";default:return""}}onEdit(t){this.edit.emit(t)}onDelete(t){this.delete.emit(t)}get filteredExpenses(){return this.dataSource.filteredData||this.dataSource.data||[]}getPeriodicityLabel(t){return{MENSUAL:"Mensual",BIMENSUAL:"Bimensual",TRIMESTRAL:"Trimestral",CUATRIMESTRAL:"Cuatrimestral",SEMESTRAL:"Semestral",ANUAL:"Anual"}[t]||t}toggleCompactMode(){this.compactMode=!this.compactMode}static \u0275fac=function(e){return new(e||n)(et(ve))};static \u0275cmp=z({type:n,selectors:[["app-expense-table"]],viewQuery:function(e,i){if(e&1&&Ke(ts,5),e&2){let a;ee(a=te())&&(i.sort=a.first)}},inputs:{expenses:"expenses",selectedYear:"selectedYear"},outputs:{edit:"edit",delete:"delete",yearChange:"yearChange",monthChange:"monthChange"},features:[ze],decls:74,vars:13,consts:[["input",""],[1,"expense-table-container"],[1,"filter-row"],[1,"filter-field"],["matInput","","placeholder","Cerca per qualsevol camp...",3,"keyup"],["matPrefix",""],["appearance","outline",1,"year-selector"],[3,"selectionChange","value"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"month-selector"],[3,"value"],[1,"tags-filter-section"],[1,"mobile-card-view"],[1,"compact-toggle"],["mat-stroked-button","",1,"toggle-btn",3,"click"],["class","expense-card",3,"compact",4,"ngFor","ngForOf"],["class","mobile-empty-state",4,"ngIf"],[1,"table-wrapper"],["mat-table","","matSort","",1,"expense-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","issuer"],["matColumnDef","tag"],["matColumnDef","category"],["matColumnDef","approximateAmount"],["matColumnDef","scheduledPaymentDate"],["matColumnDef","periodicity"],["matColumnDef","actualPaymentDate"],["matColumnDef","actualAmount"],["matColumnDef","paymentStatus"],["matColumnDef","bank"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","actions-cell",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"tags-header"],[1,"tags-label"],["mat-button","","color","primary",1,"clear-tags-btn"],[1,"tags-chip-set"],[3,"selected","highlighted"],["mat-button","","color","primary",1,"clear-tags-btn",3,"click"],[3,"click","highlighted"],["matChipTrailingIcon",""],[1,"expense-card"],[1,"card-header-content"],[1,"card-title-section"],[1,"title-icon"],[4,"ngIf"],[1,"card-header-actions"],["mat-mini-fab","","color","primary","aria-label","Editar",1,"action-button",3,"click"],["mat-mini-fab","","color","warn","aria-label","Eliminar",1,"action-button",3,"click"],[1,"subtitle-icon"],[1,"card-row","highlight-row"],[1,"label"],[1,"value","amount"],[1,"card-row"],[1,"value"],[1,"card-row","status-row"],[3,"ngClass"],["class","card-row",4,"ngIf"],["class","card-row highlight-row",4,"ngIf"],[1,"mobile-empty-state"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"actions-cell"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mat-cell","empty-state"]],template:function(e,i){if(e&1){let a=ye();f(0,"div",1)(1,"div",2)(2,"mat-form-field",3)(3,"mat-label"),y(4,"Filtra despeses"),m(),f(5,"input",4,0),I("keyup",function(o){return L(a),V(i.applyFilter(o))}),m(),f(7,"mat-icon",5),y(8,"search"),m()(),f(9,"mat-form-field",6)(10,"mat-label"),y(11,"Any Fiscal"),m(),f(12,"mat-select",7),I("selectionChange",function(o){return L(a),V(i.onYearChange(o.value))}),j(13,kT,2,2,"mat-option",8),m()(),f(14,"mat-form-field",9)(15,"mat-label"),y(16,"Mes"),m(),f(17,"mat-select",7),I("selectionChange",function(o){return L(a),V(i.onMonthChange(o.value))}),f(18,"mat-option",10),y(19,"Tots els mesos"),m(),j(20,AT,2,2,"mat-option",8),m()()(),Q(21,FT,10,1,"div",11),f(22,"div",12)(23,"div",13)(24,"button",14),I("click",function(){return L(a),V(i.toggleCompactMode())}),f(25,"mat-icon"),y(26),m(),y(27),m()(),j(28,jT,19,6,"mat-card",15)(29,HT,5,0,"div",16),m(),f(30,"div",17)(31,"table",18),Ue(32,19),j(33,UT,2,0,"th",20)(34,WT,2,1,"td",21),We(),Ue(35,22),j(36,$T,2,0,"th",20)(37,YT,2,1,"td",21),We(),Ue(38,23),j(39,qT,2,0,"th",20)(40,KT,2,1,"td",21),We(),Ue(41,24),j(42,GT,2,0,"th",20)(43,QT,2,1,"td",21),We(),Ue(44,25),j(45,XT,2,0,"th",20)(46,ZT,2,1,"td",21),We(),Ue(47,26),j(48,JT,2,0,"th",20)(49,eR,3,9,"td",21),We(),Ue(50,27),j(51,tR,2,0,"th",20)(52,iR,3,4,"td",21),We(),Ue(53,28),j(54,nR,2,0,"th",20)(55,aR,2,1,"td",21),We(),Ue(56,29),j(57,rR,2,0,"th",20)(58,oR,3,4,"td",21),We(),Ue(59,30),j(60,sR,2,0,"th",20)(61,lR,3,9,"td",21),We(),Ue(62,31),j(63,cR,2,0,"th",20)(64,dR,3,2,"td",21),We(),Ue(65,32),j(66,hR,2,0,"th",20)(67,uR,2,1,"td",21),We(),Ue(68,33),j(69,pR,2,0,"th",34)(70,mR,7,0,"td",35),We(),j(71,fR,1,0,"tr",36)(72,gR,1,0,"tr",37)(73,_R,3,1,"tr",38),m()()()}e&2&&(C(12),D("value",i.selectedYear),C(),D("ngForOf",i.availableYears),C(4),D("value",i.selectedMonth),C(),D("value",0),C(2),D("ngForOf",i.availableMonths),C(),X(i.availableTags.length>0?21:-1),C(5),K(i.compactMode?"unfold_more":"unfold_less"),C(),he(" ",i.compactMode?"M\xE9s detalls":"Menys detalls"," "),C(),D("ngForOf",i.filteredExpenses),C(),D("ngIf",i.filteredExpenses.length===0),C(2),D("dataSource",i.dataSource),C(40),D("matHeaderRowDef",i.displayedColumns),C(),D("matRowDefColumns",i.displayedColumns))},dependencies:[Mt,Ss,Fa,Na,bd,ld,dd,md,hd,cd,fd,ud,pd,gd,_d,qv,Xv,ts,Qv,Ba,Va,xn,Cn,Us,di,Cd,is,vd,yd,Qn,Yn,Kn,Gn,qc,qn,Dt,St,mt,pt,Ys,ia,Br,$i,jr,Es,Ps],styles:[".expense-table-container[_ngcontent-%COMP%]{width:100%;padding:20px;background:#0f172a;border-radius:12px}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:20px;align-items:flex-start;flex-wrap:wrap}.filter-field[_ngcontent-%COMP%]{flex:1;min-width:250px;margin:0}.filter-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background-color:#1e293b;border-radius:8px;box-shadow:0 2px 8px #0000004d}.filter-field[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#3b82f6}.year-selector[_ngcontent-%COMP%]{width:160px;margin:0}.year-selector[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background-color:#1e293b;border-radius:8px;box-shadow:0 2px 8px #0000004d}.year-selector[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.month-selector[_ngcontent-%COMP%]{width:180px;margin:0}.month-selector[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background-color:#1e293b;border-radius:8px;box-shadow:0 2px 8px #0000004d}.month-selector[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.tags-filter-section[_ngcontent-%COMP%]{margin-bottom:20px;padding:16px;background:#1e293b;border-radius:12px;border:1px solid #334155;box-shadow:0 4px 12px #0000004d}.tags-filter-section[_ngcontent-%COMP%]   .tags-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}.tags-filter-section[_ngcontent-%COMP%]   .tags-header[_ngcontent-%COMP%]   .tags-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-weight:600;font-size:15px;color:#f1f5f9}.tags-filter-section[_ngcontent-%COMP%]   .tags-header[_ngcontent-%COMP%]   .tags-label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px;width:22px;height:22px;color:#3b82f6}.tags-filter-section[_ngcontent-%COMP%]   .tags-header[_ngcontent-%COMP%]   .clear-tags-btn[_ngcontent-%COMP%]{font-size:13px;font-weight:500;padding:6px 12px;border-radius:6px}.tags-filter-section[_ngcontent-%COMP%]   .tags-header[_ngcontent-%COMP%]   .clear-tags-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px;font-size:18px;width:18px;height:18px}.tags-filter-section[_ngcontent-%COMP%]   .tags-chip-set[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.tags-filter-section[_ngcontent-%COMP%]   .tags-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{cursor:pointer;background-color:#334155;color:#94a3b8;border:1.5px solid #475569;font-weight:500;font-size:13px;padding:8px 14px;border-radius:20px;box-shadow:0 1px 2px #0003}.tags-filter-section[_ngcontent-%COMP%]   .tags-chip-set[_ngcontent-%COMP%]   mat-chip.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1d4ed8,#2563eb);color:#fff;border-color:#3b82f6;box-shadow:0 2px 8px #2563eb66}.tags-filter-section[_ngcontent-%COMP%]   .tags-chip-set[_ngcontent-%COMP%]   mat-chip.selected[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.tags-filter-section[_ngcontent-%COMP%]   .tags-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.mobile-card-view[_ngcontent-%COMP%]{display:none}.compact-toggle[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:16px}.compact-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 20px;border-radius:20px;font-weight:500;font-size:14px;color:#3b82f6;border-color:#3b82f6;background-color:#1e293b;box-shadow:0 2px 8px #2563eb33;transition:all .2s ease}.compact-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.compact-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background-color:#334155;box-shadow:0 4px 12px #2563eb4d}.expense-card.compact[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.expense-card.compact[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:8px}.expense-card.compact[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{padding:6px 0}.expense-card.compact[_ngcontent-%COMP%]   .card-row.highlight-row[_ngcontent-%COMP%]{padding:8px;margin:4px -8px}.expense-card.compact[_ngcontent-%COMP%]   .card-row.status-row[_ngcontent-%COMP%]{padding-top:10px;margin-top:6px}.table-wrapper[_ngcontent-%COMP%]{display:block;overflow-x:auto;width:100%;-webkit-overflow-scrolling:touch;background-color:#1e293b;border-radius:12px;box-shadow:0 2px 8px #0000004d;border:1px solid #334155}.expense-table[_ngcontent-%COMP%]{width:100%;min-width:1200px;border-collapse:separate;border-spacing:0}.expense-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:.5px;background:#334155;color:#94a3b8;border-bottom:2px solid #475569;position:sticky;top:0;z-index:10}.expense-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .expense-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px 18px}.expense-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#f1f5f9;border-bottom:1px solid #334155}.expense-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.expense-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background-color:#334155}mat-chip[_ngcontent-%COMP%]{font-size:11px;font-weight:600;min-height:24px;padding:4px 12px;border-radius:12px;box-shadow:none!important;border:none!important;text-transform:uppercase;letter-spacing:.5px}mat-chip.status-paid[_ngcontent-%COMP%]{background-color:#dcfce7!important;color:#166534!important}mat-chip.status-pending[_ngcontent-%COMP%]{background-color:#fef3c7!important;color:#92400e!important}mat-chip.status-failed[_ngcontent-%COMP%]{background-color:#fee2e2!important;color:#991b1b!important}mat-chip[_ngcontent-%COMP%]     .mat-mdc-chip-action-label{border:none!important}mat-chip[_ngcontent-%COMP%]     .mdc-evolution-chip__cell, mat-chip[_ngcontent-%COMP%]     .mdc-evolution-chip__action{border:none!important}mat-chip[_ngcontent-%COMP%]     .mdc-evolution-chip__outline{border:none!important;display:none!important}mat-chip[_ngcontent-%COMP%]     .mat-mdc-chip-focus-overlay{border:none!important}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px 32px!important;color:#64748b;font-style:normal;font-size:15px;background:#1e293b}.expense-card[_ngcontent-%COMP%]{margin-bottom:16px;border-radius:12px;box-shadow:0 2px 8px #0000004d;border:1px solid #334155;overflow:hidden;background-color:#1e293b}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:16px;padding:16px;background:#334155}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .card-header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;width:100%;gap:12px}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .card-title-section[_ngcontent-%COMP%]{flex:1;min-width:0}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .card-header-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-shrink:0}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .card-header-actions[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{width:36px!important;height:36px!important;min-width:36px!important}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .card-header-actions[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:6px;color:#f1f5f9;display:flex;align-items:center;gap:8px}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#3b82f6}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#94a3b8;font-weight:500;display:flex;align-items:center;gap:6px}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]   .subtitle-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;color:#64748b}.expense-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:8px 16px 16px}.expense-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid #334155}.expense-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.expense-card[_ngcontent-%COMP%]   .card-row.highlight-row[_ngcontent-%COMP%]{background-color:#334155;padding:12px 10px;margin:8px -10px;border-radius:8px;border-bottom:none}.expense-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:#64748b;font-size:13px;text-transform:uppercase;letter-spacing:.3px;flex-shrink:0;margin-right:12px;display:flex;align-items:center;gap:6px}.expense-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;color:#64748b}.expense-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{text-align:right;color:#f1f5f9;font-size:14px;word-break:break-word;font-weight:500}.expense-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .value.amount[_ngcontent-%COMP%]{font-weight:700;color:#3b82f6;font-size:17px}.expense-card[_ngcontent-%COMP%]   .card-row.status-row[_ngcontent-%COMP%]{padding-top:14px;border-top:2px solid #475569;margin-top:10px}.mobile-empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:64px 24px;text-align:center;background:#1e293b;border-radius:12px;border:2px dashed #475569}.mobile-empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:72px;width:72px;height:72px;color:#475569;margin-bottom:20px}.mobile-empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#64748b;font-size:16px;font-weight:500}@media(max-width:767px){.expense-table-container[_ngcontent-%COMP%]{padding:12px;background:transparent}.filter-row[_ngcontent-%COMP%]{flex-direction:column;gap:12px;margin-bottom:16px}.filter-field[_ngcontent-%COMP%]{width:100%;min-width:unset;font-size:14px}.year-selector[_ngcontent-%COMP%], .month-selector[_ngcontent-%COMP%]{width:100%}.tags-filter-section[_ngcontent-%COMP%]{padding:12px;margin-bottom:16px}.tags-filter-section[_ngcontent-%COMP%]   .tags-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.tags-filter-section[_ngcontent-%COMP%]   .tags-header[_ngcontent-%COMP%]   .tags-label[_ngcontent-%COMP%]{font-size:14px}.tags-filter-section[_ngcontent-%COMP%]   .tags-header[_ngcontent-%COMP%]   .tags-label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.tags-filter-section[_ngcontent-%COMP%]   .tags-header[_ngcontent-%COMP%]   .clear-tags-btn[_ngcontent-%COMP%]{align-self:flex-end;font-size:12px}.tags-filter-section[_ngcontent-%COMP%]   .tags-chip-set[_ngcontent-%COMP%]{gap:8px}.tags-filter-section[_ngcontent-%COMP%]   .tags-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:12px;padding:6px 12px}.table-wrapper[_ngcontent-%COMP%]{display:none}.mobile-card-view[_ngcontent-%COMP%]{display:block}.expense-card[_ngcontent-%COMP%]{margin-bottom:14px;border-radius:10px}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:14px}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .card-header-actions[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{width:32px!important;height:32px!important;min-width:32px!important}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .card-header-actions[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:16px}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:13px}.expense-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]   .subtitle-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.expense-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:14px}.expense-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{padding:8px 0}.expense-card[_ngcontent-%COMP%]   .card-row.highlight-row[_ngcontent-%COMP%]{padding:10px 8px;margin:6px -8px}.expense-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:11px;gap:4px}.expense-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.expense-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:13px}.expense-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .value.amount[_ngcontent-%COMP%]{font-size:15px}mat-chip[_ngcontent-%COMP%]{font-size:11px;min-height:24px;padding:4px 11px}.mobile-empty-state[_ngcontent-%COMP%]{padding:48px 20px}.mobile-empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:56px;width:56px;height:56px}.mobile-empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}.actions-cell[_ngcontent-%COMP%]{white-space:nowrap}.action-button[_ngcontent-%COMP%]{width:36px!important;height:36px!important;min-width:36px!important;margin:0 4px!important;box-shadow:0 2px 4px #0000004d!important;transition:all .2s ease!important}.action-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0006!important}.action-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.action-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}@media(min-width:768px)and (max-width:1023px){.expense-table-container[_ngcontent-%COMP%]{padding:16px}.filter-row[_ngcontent-%COMP%]{margin-bottom:16px;gap:12px}.filter-field[_ngcontent-%COMP%]{min-width:200px}.year-selector[_ngcontent-%COMP%]{width:150px}.tags-filter-section[_ngcontent-%COMP%]{padding:14px}.tags-filter-section[_ngcontent-%COMP%]   .tags-header[_ngcontent-%COMP%]   .tags-label[_ngcontent-%COMP%]{font-size:14px}.tags-filter-section[_ngcontent-%COMP%]   .tags-chip-set[_ngcontent-%COMP%]{gap:8px}.tags-filter-section[_ngcontent-%COMP%]   .tags-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:12px;padding:7px 13px}.mobile-card-view[_ngcontent-%COMP%]{display:none}.table-wrapper[_ngcontent-%COMP%]{display:block;border-radius:10px}.expense-table[_ngcontent-%COMP%]{min-width:1100px}.expense-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .expense-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 14px;font-size:13px}.expense-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:12px}mat-chip[_ngcontent-%COMP%]{font-size:11px;min-height:24px;padding:4px 11px}.empty-state[_ngcontent-%COMP%]{padding:36px 24px!important;font-size:14px}}@media(min-width:1024px){.expense-table-container[_ngcontent-%COMP%]{padding:20px}.filter-row[_ngcontent-%COMP%], .tags-filter-section[_ngcontent-%COMP%]{margin-bottom:20px}.mobile-card-view[_ngcontent-%COMP%]{display:none}.table-wrapper[_ngcontent-%COMP%]{display:block}.expense-table[_ngcontent-%COMP%]{min-width:1200px}.expense-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .expense-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px 18px;font-size:14px}.expense-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:13px}mat-chip[_ngcontent-%COMP%]{font-size:12px;min-height:26px;padding:5px 14px}.empty-state[_ngcontent-%COMP%]{padding:48px 32px!important;font-size:15px}}"]})};var bR=["mat-calendar-body",""];function yR(n,t){return this._trackRow(t)}var uC=(n,t)=>t.id;function vR(n,t){if(n&1&&(f(0,"tr",0)(1,"td",3),y(2),m()()),n&2){let e=k();C(),Ai("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),pe("colspan",e.numCols),C(),he(" ",e.label," ")}}function CR(n,t){if(n&1&&(f(0,"td",3),y(1),m()),n&2){let e=k(2);Ai("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),pe("colspan",e._firstRowOffset),C(),he(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function xR(n,t){if(n&1){let e=ye();f(0,"td",6)(1,"button",7),I("click",function(a){let r=L(e).$implicit,o=k(2);return V(o._cellClicked(r,a))})("focus",function(a){let r=L(e).$implicit,o=k(2);return V(o._emitActiveDateChange(r,a))}),f(2,"span",8),y(3),m(),U(4,"span",9),m()()}if(n&2){let e=t.$implicit,i=t.$index,a=k().$index,r=k();Ai("width",r._cellWidth)("padding-top",r._cellPadding)("padding-bottom",r._cellPadding),pe("data-mat-row",a)("data-mat-col",i),C(),de("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",r._isActiveCell(a,i))("mat-calendar-body-range-start",r._isRangeStart(e.compareValue))("mat-calendar-body-range-end",r._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",r._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",r._isComparisonBridgeStart(e.compareValue,a,i))("mat-calendar-body-comparison-bridge-end",r._isComparisonBridgeEnd(e.compareValue,a,i))("mat-calendar-body-comparison-start",r._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",r._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",r._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",r._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",r._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",r._isInPreview(e.compareValue)),D("ngClass",e.cssClasses)("tabindex",r._isActiveCell(a,i)?0:-1),pe("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",r._isSelected(e.compareValue))("aria-current",r.todayValue===e.compareValue?"date":null)("aria-describedby",r._getDescribedby(e.compareValue)),C(),de("mat-calendar-body-selected",r._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",r._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",r.todayValue===e.compareValue),C(),he(" ",e.displayValue," ")}}function wR(n,t){if(n&1&&(f(0,"tr",1),Q(1,CR,2,6,"td",4),mn(2,xR,5,48,"td",5,uC),m()),n&2){let e=t.$implicit,i=t.$index,a=k();C(),X(i===0&&a._firstRowOffset?1:-1),C(),fn(e)}}function MR(n,t){if(n&1&&(f(0,"th",2)(1,"span",6),y(2),m(),f(3,"span",3),y(4),m()()),n&2){let e=t.$implicit;C(2),K(e.long),C(2),K(e.narrow)}}var SR=["*"];function DR(n,t){}function PR(n,t){if(n&1){let e=ye();f(0,"mat-month-view",4),ws("activeDateChange",function(a){L(e);let r=k();return xs(r.activeDate,a)||(r.activeDate=a),V(a)}),I("_userSelection",function(a){L(e);let r=k();return V(r._dateSelected(a))})("dragStarted",function(a){L(e);let r=k();return V(r._dragStarted(a))})("dragEnded",function(a){L(e);let r=k();return V(r._dragEnded(a))}),m()}if(n&2){let e=k();Cs("activeDate",e.activeDate),D("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)("startDateAccessibleName",e.startDateAccessibleName)("endDateAccessibleName",e.endDateAccessibleName)("activeDrag",e._activeDrag)}}function ER(n,t){if(n&1){let e=ye();f(0,"mat-year-view",5),ws("activeDateChange",function(a){L(e);let r=k();return xs(r.activeDate,a)||(r.activeDate=a),V(a)}),I("monthSelected",function(a){L(e);let r=k();return V(r._monthSelectedInYearView(a))})("selectedChange",function(a){L(e);let r=k();return V(r._goToDateInView(a,"month"))}),m()}if(n&2){let e=k();Cs("activeDate",e.activeDate),D("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function OR(n,t){if(n&1){let e=ye();f(0,"mat-multi-year-view",6),ws("activeDateChange",function(a){L(e);let r=k();return xs(r.activeDate,a)||(r.activeDate=a),V(a)}),I("yearSelected",function(a){L(e);let r=k();return V(r._yearSelectedInMultiYearView(a))})("selectedChange",function(a){L(e);let r=k();return V(r._goToDateInView(a,"year"))}),m()}if(n&2){let e=k();Cs("activeDate",e.activeDate),D("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function kR(n,t){}var AR=["button"],TR=[[["","matDatepickerToggleIcon",""]]],RR=["[matDatepickerToggleIcon]"];function IR(n,t){n&1&&($t(),f(0,"svg",2),U(1,"path",3),m())}var Wr=(()=>{class n{changes=new G;calendarLabel="Calendar";openCalendarLabel="Open calendar";closeCalendarLabel="Close calendar";prevMonthLabel="Previous month";nextMonthLabel="Next month";prevYearLabel="Previous year";nextYearLabel="Next year";prevMultiYearLabel="Previous 24 years";nextMultiYearLabel="Next 24 years";switchToMonthViewLabel="Choose date";switchToMultiYearViewLabel="Choose month and year";startDateLabel="Start date";endDateLabel="End date";comparisonDateLabel="Comparison range";formatYearRange(e,i){return`${e} \u2013 ${i}`}formatYearRangeLabel(e,i){return`${e} to ${i}`}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),FR=0,rs=class{value;displayValue;ariaLabel;enabled;cssClasses;compareValue;rawValue;id=FR++;constructor(t,e,i,a,r={},o=t,s){this.value=t,this.displayValue=e,this.ariaLabel=i,this.enabled=a,this.cssClasses=r,this.compareValue=o,this.rawValue=s}},NR={passive:!1,capture:!0},wd={passive:!0,capture:!0},oC={passive:!0},Ur=(()=>{class n{_elementRef=_(be);_ngZone=_(ht);_platform=_(yn);_intl=_(Wr);_eventCleanups;_skipNextFocus=!1;_focusActiveCellAfterViewChecked=!1;label;rows;todayValue;startValue;endValue;labelMinRequiredCells;numCols=7;activeCell=0;ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}isRange=!1;cellAspectRatio=1;comparisonStart=null;comparisonEnd=null;previewStart=null;previewEnd=null;startDateAccessibleName=null;endDateAccessibleName=null;selectedValueChange=new $;previewChange=new $;activeDateChange=new $;dragStarted=new $;dragEnded=new $;_firstRowOffset;_cellPadding;_cellWidth;_startDateLabelId;_endDateLabelId;_comparisonStartDateLabelId;_comparisonEndDateLabelId;_didDragSinceMouseDown=!1;_injector=_(He);comparisonDateAccessibleName=this._intl.comparisonDateLabel;_trackRow=e=>e;constructor(){let e=_(Oi),i=_(ci);this._startDateLabelId=i.getId("mat-calendar-body-start-"),this._endDateLabelId=i.getId("mat-calendar-body-end-"),this._comparisonStartDateLabelId=i.getId("mat-calendar-body-comparison-start-"),this._comparisonEndDateLabelId=i.getId("mat-calendar-body-comparison-end-"),_(li).load(Xi),this._ngZone.runOutsideAngular(()=>{let a=this._elementRef.nativeElement,r=[e.listen(a,"touchmove",this._touchmoveHandler,NR),e.listen(a,"mouseenter",this._enterHandler,wd),e.listen(a,"focus",this._enterHandler,wd),e.listen(a,"mouseleave",this._leaveHandler,wd),e.listen(a,"blur",this._leaveHandler,wd),e.listen(a,"mousedown",this._mousedownHandler,oC),e.listen(a,"touchstart",this._mousedownHandler,oC)];this._platform.isBrowser&&r.push(e.listen("window","mouseup",this._mouseupHandler),e.listen("window","touchend",this._touchendHandler)),this._eventCleanups=r})}_cellClicked(e,i){this._didDragSinceMouseDown||e.enabled&&this.selectedValueChange.emit({value:e.value,event:i})}_emitActiveDateChange(e,i){e.enabled&&this.activeDateChange.emit({value:e.value,event:i})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){let i=e.numCols,{rows:a,numCols:r}=this;(e.rows||i)&&(this._firstRowOffset=a&&a.length&&a[0].length?r-a[0].length:0),(e.cellAspectRatio||i||!this._cellPadding)&&(this._cellPadding=`${50*this.cellAspectRatio/r}%`),(i||!this._cellWidth)&&(this._cellWidth=`${100/r}%`)}ngOnDestroy(){this._eventCleanups.forEach(e=>e())}_isActiveCell(e,i){let a=e*this.numCols+i;return e&&(a-=this._firstRowOffset),a==this.activeCell}_focusActiveCell(e=!0){lt(()=>{setTimeout(()=>{let i=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");i&&(e||(this._skipNextFocus=!0),i.focus())})},{injector:this._injector})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(e){return tm(e,this.startValue,this.endValue)}_isRangeEnd(e){return im(e,this.startValue,this.endValue)}_isInRange(e){return nm(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return tm(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,i,a){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let r=this.rows[i][a-1];if(!r){let o=this.rows[i-1];r=o&&o[o.length-1]}return r&&!this._isRangeEnd(r.compareValue)}_isComparisonBridgeEnd(e,i,a){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let r=this.rows[i][a+1];if(!r){let o=this.rows[i+1];r=o&&o[0]}return r&&!this._isRangeStart(r.compareValue)}_isComparisonEnd(e){return im(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return nm(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return tm(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return im(e,this.previewStart,this.previewEnd)}_isInPreview(e){return nm(e,this.previewStart,this.previewEnd,this.isRange)}_getDescribedby(e){if(!this.isRange)return null;if(this.startValue===e&&this.endValue===e)return`${this._startDateLabelId} ${this._endDateLabelId}`;if(this.startValue===e)return this._startDateLabelId;if(this.endValue===e)return this._endDateLabelId;if(this.comparisonStart!==null&&this.comparisonEnd!==null){if(e===this.comparisonStart&&e===this.comparisonEnd)return`${this._comparisonStartDateLabelId} ${this._comparisonEndDateLabelId}`;if(e===this.comparisonStart)return this._comparisonStartDateLabelId;if(e===this.comparisonEnd)return this._comparisonEndDateLabelId}return null}_enterHandler=e=>{if(this._skipNextFocus&&e.type==="focus"){this._skipNextFocus=!1;return}if(e.target&&this.isRange){let i=this._getCellFromElement(e.target);i&&this._ngZone.run(()=>this.previewChange.emit({value:i.enabled?i:null,event:e}))}};_touchmoveHandler=e=>{if(!this.isRange)return;let i=sC(e),a=i?this._getCellFromElement(i):null;i!==e.target&&(this._didDragSinceMouseDown=!0),em(e.target)&&e.preventDefault(),this._ngZone.run(()=>this.previewChange.emit({value:a?.enabled?a:null,event:e}))};_leaveHandler=e=>{this.previewEnd!==null&&this.isRange&&(e.type!=="blur"&&(this._didDragSinceMouseDown=!0),e.target&&this._getCellFromElement(e.target)&&!(e.relatedTarget&&this._getCellFromElement(e.relatedTarget))&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:e})))};_mousedownHandler=e=>{if(!this.isRange)return;this._didDragSinceMouseDown=!1;let i=e.target&&this._getCellFromElement(e.target);!i||!this._isInRange(i.compareValue)||this._ngZone.run(()=>{this.dragStarted.emit({value:i.rawValue,event:e})})};_mouseupHandler=e=>{if(!this.isRange)return;let i=em(e.target);if(!i){this._ngZone.run(()=>{this.dragEnded.emit({value:null,event:e})});return}i.closest(".mat-calendar-body")===this._elementRef.nativeElement&&this._ngZone.run(()=>{let a=this._getCellFromElement(i);this.dragEnded.emit({value:a?.rawValue??null,event:e})})};_touchendHandler=e=>{let i=sC(e);i&&this._mouseupHandler({target:i})};_getCellFromElement(e){let i=em(e);if(i){let a=i.getAttribute("data-mat-row"),r=i.getAttribute("data-mat-col");if(a&&r)return this.rows[parseInt(a)]?.[parseInt(r)]||null}return null}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange",dragStarted:"dragStarted",dragEnded:"dragEnded"},exportAs:["matCalendarBody"],features:[ze],attrs:bR,decls:11,vars:11,consts:[["aria-hidden","true"],["role","row"],[1,"mat-calendar-body-hidden-label",3,"id"],[1,"mat-calendar-body-label"],[1,"mat-calendar-body-label",3,"paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"click","focus","ngClass","tabindex"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(i,a){i&1&&(Q(0,vR,3,6,"tr",0),mn(1,wR,4,1,"tr",1,yR,!0),f(3,"span",2),y(4),m(),f(5,"span",2),y(6),m(),f(7,"span",2),y(8),m(),f(9,"span",2),y(10),m()),i&2&&(X(a._firstRowOffset<a.labelMinRequiredCells?0:-1),C(),fn(a.rows),C(2),D("id",a._startDateLabelId),C(),he(" ",a.startDateAccessibleName,`
`),C(),D("id",a._endDateLabelId),C(),he(" ",a.endDateAccessibleName,`
`),C(),D("id",a._comparisonStartDateLabelId),C(),Hd(" ",a.comparisonDateAccessibleName," ",a.startDateAccessibleName,`
`),C(),D("id",a._comparisonEndDateLabelId),C(),Hd(" ",a.comparisonDateAccessibleName," ",a.endDateAccessibleName,`
`))},dependencies:[Ss],styles:[`.mat-calendar-body{min-width:224px}.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-outline-color, var(--mat-sys-primary))}.mat-calendar-body-label{height:0;line-height:0;text-align:start;padding-left:4.7142857143%;padding-right:4.7142857143%;font-size:var(--mat-datepicker-calendar-body-label-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-body-label-text-weight, var(--mat-sys-title-small-weight));color:var(--mat-datepicker-calendar-body-label-text-color, var(--mat-sys-on-surface))}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;margin:0;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size));-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview{color:var(--mat-datepicker-calendar-date-preview-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-disabled>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){color:var(--mat-datepicker-calendar-date-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-disabled>.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-disabled-state-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mat-calendar-body-disabled{opacity:.5}}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px;color:var(--mat-datepicker-calendar-date-text-color, var(--mat-sys-on-surface));border-color:var(--mat-datepicker-calendar-date-outline-color, transparent)}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}@media(forced-colors: active){.mat-calendar-body-cell-content{border:none}}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-focus-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(hover: hover){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-hover-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}}.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-state-background-color, var(--mat-sys-primary));color:var(--mat-datepicker-calendar-date-selected-state-text-color, var(--mat-sys-on-primary))}.mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-selected.mat-calendar-body-today{box-shadow:inset 0 0 0 1px var(--mat-datepicker-calendar-date-today-selected-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-range::before{background:var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-bridge-start::before,[dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-comparison-bridge-end::before,[dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:var(--mat-datepicker-calendar-date-in-overlap-range-state-background-color, var(--mat-sys-secondary-container))}.mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:var(--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color, var(--mat-sys-secondary))}@media(forced-colors: active){.mat-datepicker-popup:not(:empty),.mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.mat-calendar-body-today{outline:dotted 1px}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-selected{background:none}.mat-calendar-body-in-range::before,.mat-calendar-body-comparison-bridge-start::before,.mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}}
`],encapsulation:2,changeDetection:0})}return n})();function Jp(n){return n?.nodeName==="TD"}function em(n){let t;return Jp(n)?t=n:Jp(n.parentNode)?t=n.parentNode:Jp(n.parentNode?.parentNode)&&(t=n.parentNode.parentNode),t?.getAttribute("data-mat-row")!=null?t:null}function tm(n,t,e){return e!==null&&t!==e&&n<e&&n===t}function im(n,t,e){return t!==null&&t!==e&&n>=t&&n===e}function nm(n,t,e,i){return i&&t!==null&&e!==null&&t!==e&&n>=t&&n<=e}function sC(n){let t=n.changedTouches[0];return document.elementFromPoint(t.clientX,t.clientY)}var _i=class{start;end;_disableStructuralEquivalency;constructor(t,e){this.start=t,this.end=e}},os=(()=>{class n{selection;_adapter;_selectionChanged=new G;selectionChanged=this._selectionChanged;constructor(e,i){this.selection=e,this._adapter=i,this.selection=e}updateSelection(e,i){let a=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:i,oldValue:a})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}static \u0275fac=function(i){bs()};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),LR=(()=>{class n extends os{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return this.selection!=null&&this._isValidDateInstance(this.selection)}isComplete(){return this.selection!=null}clone(){let e=new n(this._adapter);return e.updateSelection(this.selection,this),e}static \u0275fac=function(i){return new(i||n)(qe(Ot))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();var pC={provide:os,useFactory:()=>_(os,{optional:!0,skipSelf:!0})||new LR(_(Ot))};var mC=new Y("MAT_DATE_RANGE_SELECTION_STRATEGY");var am=7,VR=0,lC=(()=>{class n{_changeDetectorRef=_(ve);_dateFormats=_(Wi,{optional:!0});_dateAdapter=_(Ot,{optional:!0});_dir=_(Kt,{optional:!0});_rangeStrategy=_(mC,{optional:!0});_rerenderSubscription=ei.EMPTY;_selectionKeyPressed=!1;get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate,a=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(a,this.minDate,this.maxDate),this._hasSameMonthAndYear(i,this._activeDate)||this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof _i?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}_selected=null;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate=null;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate=null;dateFilter;dateClass;comparisonStart=null;comparisonEnd=null;startDateAccessibleName=null;endDateAccessibleName=null;activeDrag=null;selectedChange=new $;_userSelection=new $;dragStarted=new $;dragEnded=new $;activeDateChange=new $;_matCalendarBody;_monthLabel=ae("");_weeks=ae([]);_firstWeekOffset=ae(0);_rangeStart=ae(null);_rangeEnd=ae(null);_comparisonRangeStart=ae(null);_comparisonRangeEnd=ae(null);_previewStart=ae(null);_previewEnd=ae(null);_isRange=ae(!1);_todayDate=ae(null);_weekdays=ae([]);constructor(){_(li).load(vn),this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Ut(null)).subscribe(()=>this._init())}ngOnChanges(e){let i=e.comparisonStart||e.comparisonEnd;i&&!i.firstChange&&this._setRanges(this.selected),e.activeDrag&&!this.activeDrag&&this._clearPreview()}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){let i=e.value,a=this._getDateFromDayOfMonth(i),r,o;this._selected instanceof _i?(r=this._getDateInCurrentMonth(this._selected.start),o=this._getDateInCurrentMonth(this._selected.end)):r=o=this._getDateInCurrentMonth(this._selected),(r!==i||o!==i)&&this.selectedChange.emit(a),this._userSelection.emit({value:a,event:e.event}),this._clearPreview(),this._changeDetectorRef.markForCheck()}_updateActiveDate(e){let i=e.value,a=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(i),this._dateAdapter.compareDate(a,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(e){let i=this._activeDate,a=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,a?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,a?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:this._selectionKeyPressed=!0,this._canSelect(this._activeDate)&&e.preventDefault();return;case 27:this._previewEnd()!=null&&!At(e)&&(this._clearPreview(),this.activeDrag?this.dragEnded.emit({value:null,event:e}):(this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e})),e.preventDefault(),e.stopPropagation());return;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate.set(this._getCellCompareValue(this._dateAdapter.today())),this._monthLabel.set(this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase());let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset.set((am+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%am),this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:e,value:i}){if(this._rangeStrategy){let a=i?i.rawValue:null,r=this._rangeStrategy.createPreview(a,this.selected,e);if(this._previewStart.set(this._getCellCompareValue(r.start)),this._previewEnd.set(this._getCellCompareValue(r.end)),this.activeDrag&&a){let o=this._rangeStrategy.createDrag?.(this.activeDrag.value,this.selected,a,e);o&&(this._previewStart.set(this._getCellCompareValue(o.start)),this._previewEnd.set(this._getCellCompareValue(o.end)))}}}_dragEnded(e){if(this.activeDrag)if(e.value){let i=this._rangeStrategy?.createDrag?.(this.activeDrag.value,this.selected,e.value,e.event);this.dragEnded.emit({value:i??null,event:e.event})}else this.dragEnded.emit({value:null,event:e.event})}_getDateFromDayOfMonth(e){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),e)}_initWeekdays(){let e=this._dateAdapter.getFirstDayOfWeek(),i=this._dateAdapter.getDayOfWeekNames("narrow"),r=this._dateAdapter.getDayOfWeekNames("long").map((o,s)=>({long:o,narrow:i[s],id:VR++}));this._weekdays.set(r.slice(e).concat(r.slice(0,e)))}_createWeekCells(){let e=this._dateAdapter.getNumDaysInMonth(this.activeDate),i=this._dateAdapter.getDateNames(),a=[[]];for(let r=0,o=this._firstWeekOffset();r<e;r++,o++){o==am&&(a.push([]),o=0);let s=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),r+1),l=this._shouldEnableDate(s),c=this._dateAdapter.format(s,this._dateFormats.display.dateA11yLabel),d=this.dateClass?this.dateClass(s,"month"):void 0;a[a.length-1].push(new rs(r+1,i[r],c,l,d,this._getCellCompareValue(s),s))}this._weeks.set(a)}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,i){return!!(e&&i&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(i)&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i))}_getCellCompareValue(e){if(e){let i=this._dateAdapter.getYear(e),a=this._dateAdapter.getMonth(e),r=this._dateAdapter.getDate(e);return new Date(i,a,r).getTime()}return null}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setRanges(e){e instanceof _i?(this._rangeStart.set(this._getCellCompareValue(e.start)),this._rangeEnd.set(this._getCellCompareValue(e.end)),this._isRange.set(!0)):(this._rangeStart.set(this._getCellCompareValue(e)),this._rangeEnd.set(this._rangeStart()),this._isRange.set(!1)),this._comparisonRangeStart.set(this._getCellCompareValue(this.comparisonStart)),this._comparisonRangeEnd.set(this._getCellCompareValue(this.comparisonEnd))}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}_clearPreview(){this._previewStart.set(null),this._previewEnd.set(null)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-month-view"]],viewQuery:function(i,a){if(i&1&&Ke(Ur,5),i&2){let r;ee(r=te())&&(a._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName",activeDrag:"activeDrag"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",dragStarted:"dragStarted",dragEnded:"dragEnded",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[ze],decls:8,vars:14,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col"],["aria-hidden","true"],["colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","previewChange","dragStarted","dragEnded","keyup","keydown","label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","startDateAccessibleName","endDateAccessibleName"],[1,"cdk-visually-hidden"]],template:function(i,a){i&1&&(f(0,"table",0)(1,"thead",1)(2,"tr"),mn(3,MR,5,2,"th",2,uC),m(),f(5,"tr",3),U(6,"th",4),m()(),f(7,"tbody",5),I("selectedValueChange",function(o){return a._dateSelected(o)})("activeDateChange",function(o){return a._updateActiveDate(o)})("previewChange",function(o){return a._previewChanged(o)})("dragStarted",function(o){return a.dragStarted.emit(o)})("dragEnded",function(o){return a._dragEnded(o)})("keyup",function(o){return a._handleCalendarBodyKeyup(o)})("keydown",function(o){return a._handleCalendarBodyKeydown(o)}),m()()),i&2&&(C(3),fn(a._weekdays()),C(4),D("label",a._monthLabel())("rows",a._weeks())("todayValue",a._todayDate())("startValue",a._rangeStart())("endValue",a._rangeEnd())("comparisonStart",a._comparisonRangeStart())("comparisonEnd",a._comparisonRangeEnd())("previewStart",a._previewStart())("previewEnd",a._previewEnd())("isRange",a._isRange())("labelMinRequiredCells",3)("activeCell",a._dateAdapter.getDate(a.activeDate)-1)("startDateAccessibleName",a.startDateAccessibleName)("endDateAccessibleName",a.endDateAccessibleName))},dependencies:[Ur],encapsulation:2,changeDetection:0})}return n})(),Zt=24,rm=4,cC=(()=>{class n{_changeDetectorRef=_(ve);_dateAdapter=_(Ot,{optional:!0});_dir=_(Kt,{optional:!0});_rerenderSubscription=ei.EMPTY;_selectionKeyPressed=!1;get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate,a=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(a,this.minDate,this.maxDate),fC(this._dateAdapter,i,this._activeDate,this.minDate,this.maxDate)||this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof _i?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}_selected=null;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate=null;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate=null;dateFilter;dateClass;selectedChange=new $;yearSelected=new $;activeDateChange=new $;_matCalendarBody;_years=ae([]);_todayYear=ae(0);_selectedYear=ae(null);constructor(){this._dateAdapter,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Ut(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear.set(this._dateAdapter.getYear(this._dateAdapter.today()));let i=this._dateAdapter.getYear(this._activeDate)-as(this._dateAdapter,this.activeDate,this.minDate,this.maxDate),a=[];for(let r=0,o=[];r<Zt;r++)o.push(i+r),o.length==rm&&(a.push(o.map(s=>this._createCellForYear(s))),o=[]);this._years.set(a),this._changeDetectorRef.markForCheck()}_yearSelected(e){let i=e.value,a=this._dateAdapter.createDate(i,0,1),r=this._getDateFromYear(i);this.yearSelected.emit(a),this.selectedChange.emit(r)}_updateActiveDate(e){let i=e.value,a=this._activeDate;this.activeDate=this._getDateFromYear(i),this._dateAdapter.compareDate(a,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){let i=this._activeDate,a=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,a?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,a?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-rm);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,rm);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-as(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,Zt-as(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-Zt*10:-Zt);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?Zt*10:Zt);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return as(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(e){let i=this._dateAdapter.getMonth(this.activeDate),a=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(e,i,1));return this._dateAdapter.createDate(e,i,Math.min(this._dateAdapter.getDate(this.activeDate),a))}_createCellForYear(e){let i=this._dateAdapter.createDate(e,0,1),a=this._dateAdapter.getYearName(i),r=this.dateClass?this.dateClass(i,"multi-year"):void 0;return new rs(e,a,a,this._shouldEnableYear(e),r)}_shouldEnableYear(e){if(e==null||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;let i=this._dateAdapter.createDate(e,0,1);for(let a=i;this._dateAdapter.getYear(a)==e;a=this._dateAdapter.addCalendarDays(a,1))if(this.dateFilter(a))return!0;return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedYear(e){if(this._selectedYear.set(null),e instanceof _i){let i=e.start||e.end;i&&this._selectedYear.set(this._dateAdapter.getYear(i))}else e&&this._selectedYear.set(this._dateAdapter.getYear(e))}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-multi-year-view"]],viewQuery:function(i,a){if(i&1&&Ke(Ur,5),i&2){let r;ee(r=te())&&(a._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell"]],template:function(i,a){i&1&&(f(0,"table",0)(1,"thead",1)(2,"tr"),U(3,"th",2),m()(),f(4,"tbody",3),I("selectedValueChange",function(o){return a._yearSelected(o)})("activeDateChange",function(o){return a._updateActiveDate(o)})("keyup",function(o){return a._handleCalendarBodyKeyup(o)})("keydown",function(o){return a._handleCalendarBodyKeydown(o)}),m()()),i&2&&(C(4),D("rows",a._years())("todayValue",a._todayYear())("startValue",a._selectedYear())("endValue",a._selectedYear())("numCols",4)("cellAspectRatio",4/7)("activeCell",a._getActiveCell()))},dependencies:[Ur],encapsulation:2,changeDetection:0})}return n})();function fC(n,t,e,i,a){let r=n.getYear(t),o=n.getYear(e),s=gC(n,i,a);return Math.floor((r-s)/Zt)===Math.floor((o-s)/Zt)}function as(n,t,e,i){let a=n.getYear(t);return BR(a-gC(n,e,i),Zt)}function gC(n,t,e){let i=0;return e?i=n.getYear(e)-Zt+1:t&&(i=n.getYear(t)),i}function BR(n,t){return(n%t+t)%t}var dC=(()=>{class n{_changeDetectorRef=_(ve);_dateFormats=_(Wi,{optional:!0});_dateAdapter=_(Ot,{optional:!0});_dir=_(Kt,{optional:!0});_rerenderSubscription=ei.EMPTY;_selectionKeyPressed=!1;get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate,a=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(a,this.minDate,this.maxDate),this._dateAdapter.getYear(i)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof _i?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}_selected=null;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate=null;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate=null;dateFilter;dateClass;selectedChange=new $;monthSelected=new $;activeDateChange=new $;_matCalendarBody;_months=ae([]);_yearLabel=ae("");_todayMonth=ae(null);_selectedMonth=ae(null);constructor(){this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Ut(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){let i=e.value,a=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),i,1);this.monthSelected.emit(a);let r=this._getDateFromMonth(i);this.selectedChange.emit(r)}_updateActiveDate(e){let i=e.value,a=this._activeDate;this.activeDate=this._getDateFromMonth(i),this._dateAdapter.compareDate(a,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){let i=this._activeDate,a=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,a?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,a?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth.set(this._getMonthInCurrentYear(this._dateAdapter.today())),this._yearLabel.set(this._dateAdapter.getYearName(this.activeDate));let e=this._dateAdapter.getMonthNames("short");this._months.set([[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(i=>i.map(a=>this._createCellForMonth(a,e[a])))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_getDateFromMonth(e){let i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),a=this._dateAdapter.getNumDaysInMonth(i);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,Math.min(this._dateAdapter.getDate(this.activeDate),a))}_createCellForMonth(e,i){let a=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),r=this._dateAdapter.format(a,this._dateFormats.display.monthYearA11yLabel),o=this.dateClass?this.dateClass(a,"year"):void 0;return new rs(e,i.toLocaleUpperCase(),r,this._shouldEnableMonth(e),o)}_shouldEnableMonth(e){let i=this._dateAdapter.getYear(this.activeDate);if(e==null||this._isYearAndMonthAfterMaxDate(i,e)||this._isYearAndMonthBeforeMinDate(i,e))return!1;if(!this.dateFilter)return!0;let a=this._dateAdapter.createDate(i,e,1);for(let r=a;this._dateAdapter.getMonth(r)==e;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isYearAndMonthAfterMaxDate(e,i){if(this.maxDate){let a=this._dateAdapter.getYear(this.maxDate),r=this._dateAdapter.getMonth(this.maxDate);return e>a||e===a&&i>r}return!1}_isYearAndMonthBeforeMinDate(e,i){if(this.minDate){let a=this._dateAdapter.getYear(this.minDate),r=this._dateAdapter.getMonth(this.minDate);return e<a||e===a&&i<r}return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedMonth(e){e instanceof _i?this._selectedMonth.set(this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end)):this._selectedMonth.set(this._getMonthInCurrentYear(e))}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-year-view"]],viewQuery:function(i,a){if(i&1&&Ke(Ur,5),i&2){let r;ee(r=te())&&(a._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell"]],template:function(i,a){i&1&&(f(0,"table",0)(1,"thead",1)(2,"tr"),U(3,"th",2),m()(),f(4,"tbody",3),I("selectedValueChange",function(o){return a._monthSelected(o)})("activeDateChange",function(o){return a._updateActiveDate(o)})("keyup",function(o){return a._handleCalendarBodyKeyup(o)})("keydown",function(o){return a._handleCalendarBodyKeydown(o)}),m()()),i&2&&(C(4),D("label",a._yearLabel())("rows",a._months())("todayValue",a._todayMonth())("startValue",a._selectedMonth())("endValue",a._selectedMonth())("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",a._dateAdapter.getMonth(a.activeDate)))},dependencies:[Ur],encapsulation:2,changeDetection:0})}return n})(),_C=(()=>{class n{_intl=_(Wr);calendar=_(om);_dateAdapter=_(Ot,{optional:!0});_dateFormats=_(Wi,{optional:!0});_periodButtonText;_periodButtonDescription;_periodButtonLabel;_prevButtonLabel;_nextButtonLabel;constructor(){_(li).load(vn);let e=_(ve);this._updateLabels(),this.calendar.stateChanges.subscribe(()=>{this._updateLabels(),e.markForCheck()})}get periodButtonText(){return this._periodButtonText}get periodButtonDescription(){return this._periodButtonDescription}get periodButtonLabel(){return this._periodButtonLabel}get prevButtonLabel(){return this._prevButtonLabel}get nextButtonLabel(){return this._nextButtonLabel}currentPeriodClicked(){this.calendar.currentView=this.calendar.currentView=="month"?"multi-year":"month"}previousClicked(){this.previousEnabled()&&(this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?-1:-Zt))}nextClicked(){this.nextEnabled()&&(this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?1:Zt))}previousEnabled(){return this.calendar.minDate?!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate):!0}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_updateLabels(){let e=this.calendar,i=this._intl,a=this._dateAdapter;e.currentView==="month"?(this._periodButtonText=a.format(e.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase(),this._periodButtonDescription=a.format(e.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase(),this._periodButtonLabel=i.switchToMultiYearViewLabel,this._prevButtonLabel=i.prevMonthLabel,this._nextButtonLabel=i.nextMonthLabel):e.currentView==="year"?(this._periodButtonText=a.getYearName(e.activeDate),this._periodButtonDescription=a.getYearName(e.activeDate),this._periodButtonLabel=i.switchToMonthViewLabel,this._prevButtonLabel=i.prevYearLabel,this._nextButtonLabel=i.nextYearLabel):(this._periodButtonText=i.formatYearRange(...this._formatMinAndMaxYearLabels()),this._periodButtonDescription=i.formatYearRangeLabel(...this._formatMinAndMaxYearLabels()),this._periodButtonLabel=i.switchToMonthViewLabel,this._prevButtonLabel=i.prevMultiYearLabel,this._nextButtonLabel=i.nextMultiYearLabel)}_isSameView(e,i){return this.calendar.currentView=="month"?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(i):this.calendar.currentView=="year"?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i):fC(this._dateAdapter,e,i,this.calendar.minDate,this.calendar.maxDate)}_formatMinAndMaxYearLabels(){let i=this._dateAdapter.getYear(this.calendar.activeDate)-as(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),a=i+Zt-1,r=this._dateAdapter.getYearName(this._dateAdapter.createDate(i,0,1)),o=this._dateAdapter.getYearName(this._dateAdapter.createDate(a,0,1));return[r,o]}_periodButtonLabelId=_(ci).getId("mat-calendar-period-label-");static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:SR,decls:17,vars:13,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["aria-live","polite",1,"cdk-visually-hidden",3,"id"],["matButton","","type","button",1,"mat-calendar-period-button",3,"click"],["aria-hidden","true"],["viewBox","0 0 10 5","focusable","false","aria-hidden","true",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["matIconButton","","type","button","disabledInteractive","",1,"mat-calendar-previous-button",3,"click","disabled","matTooltip"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["matIconButton","","type","button","disabledInteractive","",1,"mat-calendar-next-button",3,"click","disabled","matTooltip"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"]],template:function(i,a){i&1&&(tt(),f(0,"div",0)(1,"div",1)(2,"span",2),y(3),m(),f(4,"button",3),I("click",function(){return a.currentPeriodClicked()}),f(5,"span",4),y(6),m(),$t(),f(7,"svg",5),U(8,"polygon",6),m()(),Gr(),U(9,"div",7),Pe(10),f(11,"button",8),I("click",function(){return a.previousClicked()}),$t(),f(12,"svg",9),U(13,"path",10),m()(),Gr(),f(14,"button",11),I("click",function(){return a.nextClicked()}),$t(),f(15,"svg",9),U(16,"path",12),m()()()()),i&2&&(C(2),D("id",a._periodButtonLabelId),C(),K(a.periodButtonDescription),C(),pe("aria-label",a.periodButtonLabel)("aria-describedby",a._periodButtonLabelId),C(2),K(a.periodButtonText),C(),de("mat-calendar-invert",a.calendar.currentView!=="month"),C(4),D("disabled",!a.previousEnabled())("matTooltip",a.prevButtonLabel),pe("aria-label",a.prevButtonLabel),C(3),D("disabled",!a.nextEnabled())("matTooltip",a.nextButtonLabel),pe("aria-label",a.nextButtonLabel))},dependencies:[pt,Zi,ka],encapsulation:2,changeDetection:0})}return n})(),om=(()=>{class n{_dateAdapter=_(Ot,{optional:!0});_dateFormats=_(Wi,{optional:!0});_changeDetectorRef=_(ve);_elementRef=_(be);headerComponent;_calendarHeaderPortal;_intlChanges;_moveFocusOnNextTick=!1;get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_startAt=null;startView="month";get selected(){return this._selected}set selected(e){e instanceof _i?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_selected=null;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate=null;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate=null;dateFilter;dateClass;comparisonStart=null;comparisonEnd=null;startDateAccessibleName=null;endDateAccessibleName=null;selectedChange=new $;yearSelected=new $;monthSelected=new $;viewChanged=new $(!0);_userSelection=new $;_userDragDrop=new $;monthView;yearView;multiYearView;get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}_clampedActiveDate;get currentView(){return this._currentView}set currentView(e){let i=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),i&&(this.stateChanges.next(),this.viewChanged.emit(i))}_currentView;_activeDrag=null;stateChanges=new G;constructor(){this._intlChanges=_(Wr).changes.subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}ngAfterContentInit(){this._calendarHeaderPortal=new wn(this.headerComponent||_C),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){let i=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,a=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,r=i||a||e.dateFilter;if(r&&!r.firstChange){let o=this._getCurrentViewComponent();o&&(this._elementRef.nativeElement.contains(Yd())&&(this._moveFocusOnNextTick=!0),this._changeDetectorRef.detectChanges(),o._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()?._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()?._init()}_dateSelected(e){let i=e.value;(this.selected instanceof _i||i&&!this._dateAdapter.sameDate(i,this.selected))&&this.selectedChange.emit(i),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,i){this.activeDate=e,this.currentView=i}_dragStarted(e){this._activeDrag=e}_dragEnded(e){this._activeDrag&&(e.value&&this._userDragDrop.emit(e),this._activeDrag=null)}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-calendar"]],viewQuery:function(i,a){if(i&1&&Ke(lC,5)(dC,5)(cC,5),i&2){let r;ee(r=te())&&(a.monthView=r.first),ee(r=te())&&(a.yearView=r.first),ee(r=te())&&(a.multiYearView=r.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection",_userDragDrop:"_userDragDrop"},exportAs:["matCalendar"],features:[$e([pC]),ze],decls:5,vars:2,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","_userSelection","dragStarted","dragEnded","activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDateChange","monthSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","yearSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"]],template:function(i,a){if(i&1&&(j(0,DR,0,0,"ng-template",0),f(1,"div",1),Q(2,PR,1,11,"mat-month-view",2)(3,ER,1,6,"mat-year-view",3)(4,OR,1,6,"mat-multi-year-view",3),m()),i&2){let r;D("cdkPortalOutlet",a._calendarHeaderPortal),C(2),X((r=a.currentView)==="month"?2:r==="year"?3:r==="multi-year"?4:-1)}},dependencies:[Ha,mf,lC,dC,cC],styles:[`.mat-calendar{display:block;line-height:normal;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size))}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px;font-size:var(--mat-datepicker-calendar-period-button-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-period-button-text-weight, var(--mat-sys-title-small-weight));--mat-button-text-label-text-color: var(--mat-datepicker-calendar-period-button-text-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle;fill:var(--mat-datepicker-calendar-period-button-icon-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}@media(forced-colors: active){.mat-calendar-arrow{fill:CanvasText}}.mat-datepicker-content .mat-calendar-previous-button:not(.mat-mdc-button-disabled),.mat-datepicker-content .mat-calendar-next-button:not(.mat-mdc-button-disabled){color:var(--mat-datepicker-calendar-navigation-button-icon-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0;color:var(--mat-datepicker-calendar-header-text-color, var(--mat-sys-on-surface-variant));font-size:var(--mat-datepicker-calendar-header-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-header-text-weight, var(--mat-sys-title-small-weight))}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px;background:var(--mat-datepicker-calendar-header-divider-color, transparent)}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}.mat-calendar-body-cell:focus-visible .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return n})(),zR=new Y("mat-datepicker-scroll-strategy",{providedIn:"root",factory:()=>{let n=_(He);return()=>Ua(n)}}),bC=(()=>{class n{_elementRef=_(be);_animationsDisabled=ut();_changeDetectorRef=_(ve);_globalModel=_(os);_dateAdapter=_(Ot);_ngZone=_(ht);_rangeSelectionStrategy=_(mC,{optional:!0});_stateChanges;_model;_eventCleanups;_animationFallback;_calendar;color;datepicker;comparisonStart=null;comparisonEnd=null;startDateAccessibleName=null;endDateAccessibleName=null;_isAbove=!1;_animationDone=new G;_isAnimating=!1;_closeButtonText;_closeButtonFocused=!1;_actionsPortal=null;_dialogLabelId=null;constructor(){if(_(li).load(vn),this._closeButtonText=_(Wr).closeCalendarLabel,!this._animationsDisabled){let e=this._elementRef.nativeElement,i=_(Oi);this._eventCleanups=this._ngZone.runOutsideAngular(()=>[i.listen(e,"animationstart",this._handleAnimationEvent),i.listen(e,"animationend",this._handleAnimationEvent),i.listen(e,"animationcancel",this._handleAnimationEvent)])}}ngAfterViewInit(){this._stateChanges=this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()}),this._calendar.focusActiveCell()}ngOnDestroy(){clearTimeout(this._animationFallback),this._eventCleanups?.forEach(e=>e()),this._stateChanges?.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){let i=this._model.selection,a=e.value,r=i instanceof _i;if(r&&this._rangeSelectionStrategy){let o=this._rangeSelectionStrategy.selectionFinished(a,i,e.event);this._model.updateSelection(o,this)}else a&&(r||!this._dateAdapter.sameDate(a,i))&&this._model.add(a);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_handleUserDragDrop(e){this._model.updateSelection(e.value,this)}_startExitAnimation(){this._elementRef.nativeElement.classList.add("mat-datepicker-content-exit"),this._animationsDisabled?this._animationDone.next():(clearTimeout(this._animationFallback),this._animationFallback=setTimeout(()=>{this._isAnimating||this._animationDone.next()},200))}_handleAnimationEvent=e=>{let i=this._elementRef.nativeElement;e.target!==i||!e.animationName.startsWith("_mat-datepicker-content")||(clearTimeout(this._animationFallback),this._isAnimating=e.type==="animationstart",i.classList.toggle("mat-datepicker-content-animating",this._isAnimating),this._isAnimating||this._animationDone.next())};_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(e,i){this._model=e?this._globalModel.clone():this._globalModel,this._actionsPortal=e,i&&this._changeDetectorRef.detectChanges()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-datepicker-content"]],viewQuery:function(i,a){if(i&1&&Ke(om,5),i&2){let r;ee(r=te())&&(a._calendar=r.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:6,hostBindings:function(i,a){i&2&&(wt(a.color?"mat-"+a.color:""),de("mat-datepicker-content-touch",a.datepicker.touchUi)("mat-datepicker-content-animations-enabled",!a._animationsDisabled))},inputs:{color:"color"},exportAs:["matDatepickerContent"],decls:5,vars:26,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"yearSelected","monthSelected","viewChanged","_userSelection","_userDragDrop","id","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName"],[3,"cdkPortalOutlet"],["type","button","matButton","elevated",1,"mat-datepicker-close-button",3,"focus","blur","click","color"]],template:function(i,a){i&1&&(f(0,"div",0)(1,"mat-calendar",1),I("yearSelected",function(o){return a.datepicker._selectYear(o)})("monthSelected",function(o){return a.datepicker._selectMonth(o)})("viewChanged",function(o){return a.datepicker._viewChanged(o)})("_userSelection",function(o){return a._handleUserSelection(o)})("_userDragDrop",function(o){return a._handleUserDragDrop(o)}),m(),j(2,kR,0,0,"ng-template",2),f(3,"button",3),I("focus",function(){return a._closeButtonFocused=!0})("blur",function(){return a._closeButtonFocused=!1})("click",function(){return a.datepicker.close()}),y(4),m()()),i&2&&(de("mat-datepicker-content-container-with-custom-header",a.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",a._actionsPortal),pe("aria-modal",!0)("aria-labelledby",a._dialogLabelId??void 0),C(),wt(a.datepicker.panelClass),D("id",a.datepicker.id)("startAt",a.datepicker.startAt)("startView",a.datepicker.startView)("minDate",a.datepicker._getMinDate())("maxDate",a.datepicker._getMaxDate())("dateFilter",a.datepicker._getDateFilter())("headerComponent",a.datepicker.calendarHeaderComponent)("selected",a._getSelected())("dateClass",a.datepicker.dateClass)("comparisonStart",a.comparisonStart)("comparisonEnd",a.comparisonEnd)("startDateAccessibleName",a.startDateAccessibleName)("endDateAccessibleName",a.endDateAccessibleName),C(),D("cdkPortalOutlet",a._actionsPortal),C(),de("cdk-visually-hidden",!a._closeButtonFocused),D("color",a.color||"primary"),C(),K(a._closeButtonText))},dependencies:[ff,om,Ha,pt],styles:[`@keyframes _mat-datepicker-content-dropdown-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-datepicker-content-dialog-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-datepicker-content-exit{from{opacity:1}to{opacity:0}}.mat-datepicker-content{display:block;background-color:var(--mat-datepicker-calendar-container-background-color, var(--mat-sys-surface-container-high));color:var(--mat-datepicker-calendar-container-text-color, var(--mat-sys-on-surface));box-shadow:var(--mat-datepicker-calendar-container-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-shape, var(--mat-sys-corner-large))}.mat-datepicker-content.mat-datepicker-content-animations-enabled{animation:_mat-datepicker-content-dropdown-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.mat-datepicker-content-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;box-shadow:var(--mat-datepicker-calendar-container-touch-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-touch-shape, var(--mat-sys-corner-extra-large));position:relative;overflow:visible}.mat-datepicker-content-touch.mat-datepicker-content-animations-enabled{animation:_mat-datepicker-content-dialog-enter 150ms cubic-bezier(0, 0, 0.2, 1)}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}.mat-datepicker-content-exit.mat-datepicker-content-animations-enabled{animation:_mat-datepicker-content-exit 100ms linear}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}
`],encapsulation:2,changeDetection:0})}return n})(),hC=(()=>{class n{_injector=_(He);_viewContainerRef=_(ai);_dateAdapter=_(Ot,{optional:!0});_dir=_(Kt,{optional:!0});_model=_(os);_animationsDisabled=ut();_scrollStrategy=_(zR);_inputStateChanges=ei.EMPTY;_document=_(Ft);calendarHeaderComponent;get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_startAt=null;startView="month";get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(e){this._color=e}_color;touchUi=!1;get disabled(){return this._disabled===void 0&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(e){e!==this._disabled&&(this._disabled=e,this.stateChanges.next(void 0))}_disabled;xPosition="start";yPosition="below";restoreFocus=!0;yearSelected=new $;monthSelected=new $;viewChanged=new $(!0);dateClass;openedStream=new $;closedStream=new $;get panelClass(){return this._panelClass}set panelClass(e){this._panelClass=yf(e)}_panelClass;get opened(){return this._opened}set opened(e){e?this.open():this.close()}_opened=!1;id=_(ci).getId("mat-datepicker-");_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}_overlayRef=null;_componentRef=null;_focusedElementBeforeOpen=null;_backdropHarnessClass=`${this.id}-backdrop`;_actionsPortal=null;datepickerInput;stateChanges=new G;_changeDetectorRef=_(ve);constructor(){this._dateAdapter,this._model.selectionChanged.subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnChanges(e){let i=e.xPosition||e.yPosition;if(i&&!i.firstChange&&this._overlayRef){let a=this._overlayRef.getConfig().positionStrategy;a instanceof Ff&&(this._setConnectedPositions(a),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(e){this._model.add(e)}_selectYear(e){this.yearSelected.emit(e)}_selectMonth(e){this.monthSelected.emit(e)}_viewChanged(e){this.viewChanged.emit(e)}registerInput(e){return this.datepickerInput,this._inputStateChanges.unsubscribe(),this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(e){this._actionsPortal,this._actionsPortal=e,this._componentRef?.instance._assignActions(e,!0)}removeActions(e){e===this._actionsPortal&&(this._actionsPortal=null,this._componentRef?.instance._assignActions(null,!0))}open(){this._opened||this.disabled||this._componentRef?.instance._isAnimating||(this.datepickerInput,this._focusedElementBeforeOpen=Yd(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened||this._componentRef?.instance._isAnimating)return;let e=this.restoreFocus&&this._focusedElementBeforeOpen&&typeof this._focusedElementBeforeOpen.focus=="function",i=()=>{this._opened&&(this._opened=!1,this.closedStream.emit())};if(this._componentRef){let{instance:a,location:r}=this._componentRef;a._animationDone.pipe(xt(1)).subscribe(()=>{let o=this._document.activeElement;e&&(!o||o===this._document.activeElement||r.nativeElement.contains(o))&&this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null,this._destroyOverlay()}),a._startExitAnimation()}e?setTimeout(i):i()}_applyPendingSelection(){this._componentRef?.instance?._applyPendingSelection()}_forwardContentValues(e){e.datepicker=this,e.color=this.color,e._dialogLabelId=this.datepickerInput.getOverlayLabelId(),e._assignActions(this._actionsPortal,!1)}_openOverlay(){this._destroyOverlay();let e=this.touchUi,i=new wn(bC,this._viewContainerRef),a=this._overlayRef=Wa(this._injector,new Ks({positionStrategy:e?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[e?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir||"ltr",scrollStrategy:e?If(this._injector):this._scrollStrategy(),panelClass:`mat-datepicker-${e?"dialog":"popup"}`,disableAnimations:this._animationsDisabled}));this._getCloseStream(a).subscribe(r=>{r&&r.preventDefault(),this.close()}),a.keydownEvents().subscribe(r=>{let o=r.keyCode;(o===38||o===40||o===37||o===39||o===33||o===34)&&r.preventDefault()}),this._componentRef=a.attach(i),this._forwardContentValues(this._componentRef.instance),e||lt(()=>{a.updatePosition()},{injector:this._injector})}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return Qs(this._injector).centerHorizontally().centerVertically()}_getDropdownStrategy(){let e=Gs(this._injector,this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(e)}_setConnectedPositions(e){let i=this.xPosition==="end"?"end":"start",a=i==="start"?"end":"start",r=this.yPosition==="above"?"bottom":"top",o=r==="top"?"bottom":"top";return e.withPositions([{originX:i,originY:o,overlayX:i,overlayY:r},{originX:i,originY:r,overlayX:i,overlayY:o},{originX:a,originY:o,overlayX:a,overlayY:r},{originX:a,originY:r,overlayX:a,overlayY:o}])}_getCloseStream(e){let i=["ctrlKey","shiftKey","metaKey"];return Ct(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(st(a=>a.keyCode===27&&!At(a)||this.datepickerInput&&At(a,"altKey")&&a.keyCode===38&&i.every(r=>!At(a,r)))))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:[2,"touchUi","touchUi",ce],disabled:[2,"disabled","disabled",ce],xPosition:"xPosition",yPosition:"yPosition",restoreFocus:[2,"restoreFocus","restoreFocus",ce],dateClass:"dateClass",panelClass:"panelClass",opened:[2,"opened","opened",ce]},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[ze]})}return n})(),yC=(()=>{class n extends hC{static \u0275fac=(()=>{let e;return function(a){return(e||(e=nt(n)))(a||n)}})();static \u0275cmp=z({type:n,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[$e([pC,{provide:hC,useExisting:n}]),Re],decls:0,vars:0,template:function(i,a){},encapsulation:2,changeDetection:0})}return n})(),Hr=class{target;targetElement;value=null;constructor(t,e){this.target=t,this.targetElement=e,this.value=this.target.value}},jR=(()=>{class n{_elementRef=_(be);_dateAdapter=_(Ot,{optional:!0});_dateFormats=_(Wi,{optional:!0});_isInitialized=!1;get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(e){this._assignValueProgrammatically(e,!0)}_model;get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(e){let i=e,a=this._elementRef.nativeElement;this._disabled!==i&&(this._disabled=i,this.stateChanges.next(void 0)),i&&this._isInitialized&&a.blur&&a.blur()}_disabled;dateChange=new $;dateInput=new $;stateChanges=new G;_onTouched=()=>{};_validatorOnChange=()=>{};_cvaOnChange=()=>{};_valueChangesSubscription=ei.EMPTY;_localeSubscription=ei.EMPTY;_pendingValue=null;_parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}};_filterValidator=e=>{let i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value));return!i||this._matchesFilter(i)?null:{matDatepickerFilter:!0}};_minValidator=e=>{let i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),a=this._getMinDate();return!a||!i||this._dateAdapter.compareDate(a,i)<=0?null:{matDatepickerMin:{min:a,actual:i}}};_maxValidator=e=>{let i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),a=this._getMaxDate();return!a||!i||this._dateAdapter.compareDate(a,i)>=0?null:{matDatepickerMax:{max:a,actual:i}}};_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(e){this._model=e,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(i=>{if(this._shouldHandleChangeEvent(i)){let a=this._getValueFromModel(i.selection);this._lastValueValid=this._isValidValue(a),this._cvaOnChange(a),this._onTouched(),this._formatValue(a),this.dateInput.emit(new Hr(this,this._elementRef.nativeElement)),this.dateChange.emit(new Hr(this,this._elementRef.nativeElement))}})}_lastValueValid=!1;constructor(){this._localeSubscription=this._dateAdapter.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value,!0)})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(e){HR(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValueProgrammatically(e,e!==this.value)}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){let i=["ctrlKey","shiftKey","metaKey"];At(e,"altKey")&&e.keyCode===40&&i.every(r=>!At(e,r))&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),e.preventDefault())}_onInput(e){let i=e.target.value,a=this._lastValueValid,r=this._dateAdapter.parse(i,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(r),r=this._dateAdapter.getValidDateOrNull(r);let o=!this._dateAdapter.sameDate(r,this.value);!r||o?this._cvaOnChange(r):(i&&!this.value&&this._cvaOnChange(r),a!==this._lastValueValid&&this._validatorOnChange()),o&&(this._assignValue(r),this.dateInput.emit(new Hr(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new Hr(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=e!=null?this._dateAdapter.format(e,this._dateFormats.display.dateInput):""}_assignValue(e){this._model?(this._assignValueToModel(e),this._pendingValue=null):this._pendingValue=e}_isValidValue(e){return!e||this._dateAdapter.isValid(e)}_parentDisabled(){return!1}_assignValueProgrammatically(e,i){e=this._dateAdapter.deserialize(e),this._lastValueValid=this._isValidValue(e),e=this._dateAdapter.getValidDateOrNull(e),this._assignValue(e),i&&this._formatValue(e)}_matchesFilter(e){let i=this._getDateFilter();return!i||i(e)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,inputs:{value:"value",disabled:[2,"disabled","disabled",ce]},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[ze]})}return n})();function HR(n,t){let e=Object.keys(n);for(let i of e){let{previousValue:a,currentValue:r}=n[i];if(t.isDateInstance(a)&&t.isDateInstance(r)){if(!t.sameDate(a,r))return!0}else return!0}return!1}var UR={provide:wf,useExisting:ms(()=>Dd),multi:!0},WR={provide:Mf,useExisting:ms(()=>Dd),multi:!0},Dd=(()=>{class n extends jR{_formField=_(Ws,{optional:!0});_closedSubscription=ei.EMPTY;_openedSubscription=ei.EMPTY;set matDatepicker(e){e&&(this._datepicker=e,this._ariaOwns.set(e.opened?e.id:null),this._closedSubscription=e.closedStream.subscribe(()=>{this._onTouched(),this._ariaOwns.set(null)}),this._openedSubscription=e.openedStream.subscribe(()=>{this._ariaOwns.set(e.id)}),this._registerModel(e.registerInput(this)))}_datepicker;_ariaOwns=ae(null);get min(){return this._min}set min(e){let i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(i,this._min)||(this._min=i,this._validatorOnChange())}_min=null;get max(){return this._max}set max(e){let i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(i,this._max)||(this._max=i,this._validatorOnChange())}_max=null;get dateFilter(){return this._dateFilter}set dateFilter(e){let i=this._matchesFilter(this.value);this._dateFilter=e,this._matchesFilter(this.value)!==i&&this._validatorOnChange()}_dateFilter;_validator=null;constructor(){super(),this._validator=je.compose(super._getValidators())}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe(),this._openedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(e){return e}_assignValueToModel(e){this._model&&this._model.updateSelection(e,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(e){return e.source!==this}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(i,a){i&1&&I("input",function(o){return a._onInput(o)})("change",function(){return a._onChange()})("blur",function(){return a._onBlur()})("keydown",function(o){return a._onKeydown(o)}),i&2&&(Ta("disabled",a.disabled),pe("aria-haspopup",a._datepicker?"dialog":null)("aria-owns",a._ariaOwns())("min",a.min?a._dateAdapter.toIso8601(a.min):null)("max",a.max?a._dateAdapter.toIso8601(a.max):null)("data-mat-calendar",a._datepicker?a._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:[0,"matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[$e([UR,WR,{provide:Ef,useExisting:n}]),Re]})}return n})(),$R=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","matDatepickerToggleIcon",""]]})}return n})(),cm=(()=>{class n{_intl=_(Wr);_changeDetectorRef=_(ve);_stateChanges=ei.EMPTY;datepicker;tabIndex=null;ariaLabel;get disabled(){return this._disabled===void 0&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=e}_disabled;disableRipple=!1;_customIcon;_button;constructor(){let e=_(new bn("tabindex"),{optional:!0}),i=Number(e);this.tabIndex=i||i===0?i:null}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){let e=this.datepicker?this.datepicker.stateChanges:H(),i=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:H(),a=this.datepicker?Ct(this.datepicker.openedStream,this.datepicker.closedStream):H();this._stateChanges.unsubscribe(),this._stateChanges=Ct(this._intl.changes,e,i,a).subscribe(()=>this._changeDetectorRef.markForCheck())}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-datepicker-toggle"]],contentQueries:function(i,a,r){if(i&1&&ri(r,$R,5),i&2){let o;ee(o=te())&&(a._customIcon=o.first)}},viewQuery:function(i,a){if(i&1&&Ke(AR,5),i&2){let r;ee(r=te())&&(a._button=r.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(i,a){i&1&&I("click",function(o){return a._open(o)}),i&2&&(pe("tabindex",null)("data-mat-calendar",a.datepicker?a.datepicker.id:null),de("mat-datepicker-toggle-active",a.datepicker&&a.datepicker.opened)("mat-accent",a.datepicker&&a.datepicker.color==="accent")("mat-warn",a.datepicker&&a.datepicker.color==="warn"))},inputs:{datepicker:[0,"for","datepicker"],tabIndex:"tabIndex",ariaLabel:[0,"aria-label","ariaLabel"],disabled:[2,"disabled","disabled",ce],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[ze],ngContentSelectors:RR,decls:4,vars:7,consts:[["button",""],["matIconButton","","type","button",3,"tabIndex","disabled","disableRipple"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false","aria-hidden","true",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(i,a){i&1&&(tt(TR),f(0,"button",1,0),Q(2,IR,2,0,":svg:svg",2),Pe(3),m()),i&2&&(D("tabIndex",a.disabled?-1:a.tabIndex)("disabled",a.disabled)("disableRipple",a.disableRipple),pe("aria-haspopup",a.datepicker?"dialog":null)("aria-label",a.ariaLabel||a._intl.openCalendarLabel)("aria-expanded",a.datepicker?a.datepicker.opened:null),C(2),X(a._customIcon?-1:2))},dependencies:[Zi],styles:[`.mat-datepicker-toggle{pointer-events:auto;color:var(--mat-datepicker-toggle-icon-color, var(--mat-sys-on-surface-variant))}.mat-datepicker-toggle button{color:inherit}.mat-datepicker-toggle-active{color:var(--mat-datepicker-toggle-active-state-icon-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-datepicker-toggle-default-icon{color:CanvasText}}
`],encapsulation:2,changeDetection:0})}return n})();var vC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=De({type:n});static \u0275inj=Se({providers:[Wr],imports:[mt,sa,As,th,bC,cm,_C,Ge,ja]})}return n})();var bt=[];for(let n=0;n<256;++n)bt.push((n+256).toString(16).slice(1));function CC(n,t=0){return(bt[n[t+0]]+bt[n[t+1]]+bt[n[t+2]]+bt[n[t+3]]+"-"+bt[n[t+4]]+bt[n[t+5]]+"-"+bt[n[t+6]]+bt[n[t+7]]+"-"+bt[n[t+8]]+bt[n[t+9]]+"-"+bt[n[t+10]]+bt[n[t+11]]+bt[n[t+12]]+bt[n[t+13]]+bt[n[t+14]]+bt[n[t+15]]).toLowerCase()}var dm,qR=new Uint8Array(16);function hm(){if(!dm){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");dm=crypto.getRandomValues.bind(crypto)}return dm(qR)}var KR=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),um={randomUUID:KR};function GR(n,t,e){n=n||{};let i=n.random??n.rng?.()??hm();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){if(e=e||0,e<0||e+16>t.length)throw new RangeError(`UUID byte range ${e}:${e+15} is out of buffer bounds`);for(let a=0;a<16;++a)t[e+a]=i[a];return t}return CC(i)}function QR(n,t,e){return um.randomUUID&&!t&&!n?um.randomUUID():GR(n,t,e)}var pm=QR;var Yi=class n{storage=_(Xn);expensesSubject=new Be([]);expenses$=this.expensesSubject.asObservable();getExpenses(){return this.storage.readExpenses().pipe(dt(t=>this.expensesSubject.next(t)),It(t=>(console.error("Error loading expenses:",t),H([]))))}addExpense(t){let e=this.validateExpense(t);if(!e.valid)return ii(()=>new Error(`Validation failed: ${e.errors.join(", ")}`));let i=_e(A({},t),{id:this.generateId(),createdAt:new Date}),a=this.generatePeriodicExpenses(i),o=[...this.expensesSubject.value,...a];return this.storage.writeExpenses(o).pipe(dt(()=>{this.expensesSubject.next(o)}),ke(()=>this.storage.readExpenses()),dt(s=>{this.expensesSubject.next(s)}),ie(()=>i),It(s=>(console.error("Error adding expense:",s),this.getExpenses().subscribe(),ii(()=>s))))}updateExpense(t){let e=this.validateExpense(t);if(!e.valid)return ii(()=>new Error(`Validation failed: ${e.errors.join(", ")}`));let i=this.expensesSubject.value,a=i.findIndex(c=>c.id===t.id);if(a===-1)return ii(()=>new Error("Expense not found"));let r=[...i];r[a]=t;let s=this.generatePeriodicExpenses(t).slice(1),l=[...r,...s];return this.storage.writeExpenses(l).pipe(dt(()=>{this.expensesSubject.next(l)}),ke(()=>this.storage.readExpenses()),dt(c=>{this.expensesSubject.next(c)}),ie(()=>t),It(c=>(console.error("Error updating expense:",c),this.getExpenses().subscribe(),ii(()=>c))))}deleteExpense(t){let e=this.expensesSubject.value;if(e.findIndex(r=>r.id===t)===-1)return ii(()=>new Error("Expense not found"));let a=e.filter(r=>r.id!==t);return this.storage.writeExpenses(a).pipe(dt(()=>{this.expensesSubject.next(a)}),ke(()=>this.storage.readExpenses()),dt(r=>{this.expensesSubject.next(r)}),ie(()=>!0),It(r=>(console.error("Error deleting expense:",r),this.getExpenses().subscribe(),ii(()=>r))))}validateExpense(t){let e=[];return(!t.name||t.name.trim()==="")&&e.push("Name is required"),(!t.description||t.description.trim()==="")&&e.push("Description is required"),(!t.issuer||t.issuer.trim()==="")&&e.push("Issuer is required"),(!t.category||t.category.trim()==="")&&e.push("Category is required"),(!t.bank||t.bank.trim()==="")&&e.push("Bank is required"),t.approximateAmount===void 0||t.approximateAmount===null?e.push("Approximate amount is required"):(typeof t.approximateAmount!="number"||t.approximateAmount<0)&&e.push("Approximate amount must be a positive number"),t.scheduledPaymentDate?(!(t.scheduledPaymentDate instanceof Date)||isNaN(t.scheduledPaymentDate.getTime()))&&e.push("Scheduled payment date must be a valid date"):e.push("Scheduled payment date is required"),t.actualAmount!==null&&t.actualAmount!==void 0&&(typeof t.actualAmount!="number"||t.actualAmount<0)&&e.push("Actual amount must be a positive number"),t.actualPaymentDate!==null&&t.actualPaymentDate!==void 0&&(!(t.actualPaymentDate instanceof Date)||isNaN(t.actualPaymentDate.getTime()))&&e.push("Actual payment date must be a valid date"),t.paymentStatus?["PENDING","PAID","FAILED"].includes(t.paymentStatus)||e.push("Payment status must be PENDING, PAID, or FAILED"):e.push("Payment status is required"),t.periodicity?["MENSUAL","BIMENSUAL","TRIMESTRAL","CUATRIMESTRAL","SEMESTRAL","ANUAL"].includes(t.periodicity)||e.push("Periodicity must be MENSUAL, BIMENSUAL, TRIMESTRAL, CUATRIMESTRAL, SEMESTRAL, or ANUAL"):e.push("Periodicity is required"),t.fraction?["\xDANICA","PRIMERA","SEGONA","TERCERA","QUARTA"].includes(t.fraction)||e.push("Fraction must be \xDANICA, PRIMERA, SEGONA, TERCERA, or QUARTA"):e.push("Fraction is required"),{valid:e.length===0,errors:e}}generateId(){return pm()}getMonthInterval(t){switch(t){case"MENSUAL":return 1;case"BIMENSUAL":return 2;case"TRIMESTRAL":return 3;case"CUATRIMESTRAL":return 4;case"SEMESTRAL":return 6;case"ANUAL":return 12;default:return 12}}generatePeriodicExpenses(t){let e=[t];if(t.periodicity==="ANUAL")return e;let i=new Date(t.scheduledPaymentDate),a=i.getFullYear(),r=i.getMonth(),o=i.getDate(),s=this.getMonthInterval(t.periodicity),l=r+s;for(;l<=11;){let c=new Date(a,l,o);c.getMonth()!==l&&c.setDate(0);let d=_e(A({},t),{id:this.generateId(),scheduledPaymentDate:c,createdAt:new Date});e.push(d),l+=s}return e}transformDates(t){return _e(A({},t),{scheduledPaymentDate:t.scheduledPaymentDate instanceof Date?t.scheduledPaymentDate:new Date(t.scheduledPaymentDate),actualPaymentDate:t.actualPaymentDate?t.actualPaymentDate instanceof Date?t.actualPaymentDate:new Date(t.actualPaymentDate):null,createdAt:t.createdAt instanceof Date?t.createdAt:new Date(t.createdAt)})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};function ZR(n,t){if(n&1&&(f(0,"div",1)(1,"mat-icon"),y(2),m(),f(3,"span"),y(4),m()()),n&2){let e=k();wt(e.type),C(2),K(e.getIcon()),C(2),K(e.message)}}var na=class n{message="";type="info";show=!1;getIcon(){return{success:"check_circle",error:"error",warning:"warning",info:"info"}[this.type]}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=z({type:n,selectors:[["app-notification-message"]],inputs:{message:"message",type:"type",show:"show"},decls:1,vars:1,consts:[[1,"notification-message",3,"class"],[1,"notification-message"]],template:function(e,i){e&1&&Q(0,ZR,5,4,"div",0),e&2&&X(i.show&&i.message?0:-1)},dependencies:[Mt,Dt,St],styles:[".notification-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border-radius:8px;font-size:.875rem;margin-top:1rem;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.notification-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{flex-shrink:0;font-size:20px;width:20px;height:20px}.notification-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;word-break:break-word}.notification-message.success[_ngcontent-%COMP%]{background-color:#abf4c6;color:#107636;border-left:4px solid #16a34a}.notification-message.success[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#16a34a}.notification-message.error[_ngcontent-%COMP%]{background-color:#f8d6d6;color:#b21d1d;border-left:4px solid #dc2626}.notification-message.error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#dc2626}.notification-message.warning[_ngcontent-%COMP%]{background-color:#ffeacc;color:#995b00;border-left:4px solid #ff9800}.notification-message.warning[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9800}.notification-message.info[_ngcontent-%COMP%]{background-color:#f7f9fe;color:#134cca;border-left:4px solid #2563eb}.notification-message.info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2563eb}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media(max-width:768px){.notification-message[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem}.notification-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}}"]})};function JR(n,t){n&1&&(f(0,"mat-error"),y(1,"Obligatori"),m())}function eI(n,t){if(n&1&&(f(0,"mat-option",24),y(1),m()),n&2){let e=t.$implicit;D("value",e),C(),he(" ",e," ")}}function tI(n,t){n&1&&(f(0,"mat-error"),y(1,"Obligatori"),m())}function iI(n,t){n&1&&(f(0,"mat-error"),y(1,"Obligatori"),m())}function nI(n,t){n&1&&(f(0,"mat-error"),y(1,"Obligatori"),m())}function aI(n,t){n&1&&(f(0,"mat-error"),y(1,"Obligatori"),m())}function rI(n,t){if(n&1&&(f(0,"mat-option",24),y(1),m()),n&2){let e=t.$implicit,i=k();D("value",e),C(),he(" ",i.getPeriodicityLabel(e)," ")}}function oI(n,t){n&1&&(f(0,"mat-error"),y(1,"Obligatori"),m())}function sI(n,t){if(n&1&&(f(0,"mat-option",24),y(1),m()),n&2){let e=t.$implicit,i=k();D("value",e),C(),he(" ",i.getFractionLabel(e)," ")}}function lI(n,t){n&1&&(f(0,"mat-error"),y(1,"Obligatori"),m())}function cI(n,t){n&1&&(f(0,"mat-error"),y(1,"Obligatori"),m())}function dI(n,t){n&1&&(f(0,"mat-error"),y(1,"Obligatori"),m())}function hI(n,t){if(n&1&&(f(0,"mat-option",24),y(1),m()),n&2){let e=t.$implicit;D("value",e),C(),he(" ",e," ")}}function uI(n,t){n&1&&(f(0,"mat-error"),y(1,"Obligatori per estat Pagat"),m())}function pI(n,t){n&1&&(f(0,"mat-error"),y(1,"Ha de ser positiu"),m())}function mI(n,t){n&1&&(f(0,"mat-error"),y(1,"Obligatori per estat Pagat"),m())}function fI(n,t){if(n&1&&(f(0,"mat-option",24)(1,"span",32),y(2),m()()),n&2){let e=t.$implicit,i=k();D("value",e),C(),wt("status-"+e.toLowerCase()),C(),he(" ",i.getStatusLabel(e)," ")}}var ss=class n{constructor(t){this.data=t;this.isEditMode=!!t?.expense,this.expenseId=t?.expense?.id,this.expenseForm=this.fb.group({name:[t?.expense?.name||"",[je.required]],description:[t?.expense?.description||"",[je.required]],issuer:[t?.expense?.issuer||"",[je.required]],tag:[t?.expense?.tag||""],category:[t?.expense?.category||"",[je.required]],approximateAmount:[t?.expense?.approximateAmount||null,[je.required,je.min(0)]],scheduledPaymentDate:[t?.expense?.scheduledPaymentDate?new Date(t.expense.scheduledPaymentDate):null,[je.required]],actualPaymentDate:[t?.expense?.actualPaymentDate?new Date(t.expense.actualPaymentDate):null],actualAmount:[t?.expense?.actualAmount||null,[je.min(0)]],paymentStatus:[t?.expense?.paymentStatus||"PENDING",[je.required]],bank:[t?.expense?.bank||"",[je.required]],periodicity:[t?.expense?.periodicity||"MENSUAL",[je.required]],fraction:[t?.expense?.fraction||"\xDANICA",[je.required]]}),this.expenseForm.get("paymentStatus")?.valueChanges.subscribe(e=>{this.updatePaymentValidations(e)}),this.isEditMode&&t?.expense?.paymentStatus&&this.updatePaymentValidations(t.expense.paymentStatus)}fb=_(zs);dialogRef=_(Xs);expenseService=_(Yi);settingsService=_(Zn);cdr=_(ve);expenseForm;errorMessage="";showErrorMessage=!1;isSubmitting=!1;isEditMode=!1;expenseId;categories$=this.settingsService.categories$;tags$=this.settingsService.tags$;paymentStatuses=["PENDING","PAID","FAILED"];periodicities=["MENSUAL","BIMENSUAL","TRIMESTRAL","CUATRIMESTRAL","SEMESTRAL","ANUAL"];fractions=["\xDANICA","PRIMERA","SEGONA","TERCERA","QUARTA"];updatePaymentValidations(t){let e=this.expenseForm.get("actualAmount"),i=this.expenseForm.get("actualPaymentDate");t==="PAID"?(e?.setValidators([je.required,je.min(0)]),i?.setValidators([je.required])):(e?.setValidators([je.min(0)]),i?.clearValidators()),e?.updateValueAndValidity(),i?.updateValueAndValidity()}onSubmit(){if(this.expenseForm.invalid){this.expenseForm.markAllAsTouched();return}this.isSubmitting=!0,this.showErrorMessage=!1,this.errorMessage="";let t=this.expenseForm.value;if(this.isEditMode&&this.expenseId){let e={id:this.expenseId,name:t.name,description:t.description,issuer:t.issuer,tag:t.tag||"",category:t.category,approximateAmount:t.approximateAmount,scheduledPaymentDate:t.scheduledPaymentDate,actualPaymentDate:t.actualPaymentDate||null,actualAmount:t.actualAmount||null,paymentStatus:t.paymentStatus,bank:t.bank,periodicity:t.periodicity,fraction:t.fraction,createdAt:this.data.expense.createdAt};this.expenseService.updateExpense(e).subscribe({next:i=>{this.dialogRef.close(i)},error:i=>{setTimeout(()=>{this.errorMessage=i.message||"Error al actualitzar la despesa. Torna-ho a intentar.",this.showErrorMessage=!0,this.isSubmitting=!1,this.cdr.detectChanges()})}})}else{let e={name:t.name,description:t.description,issuer:t.issuer,tag:t.tag||"",category:t.category,approximateAmount:t.approximateAmount,scheduledPaymentDate:t.scheduledPaymentDate,actualPaymentDate:t.actualPaymentDate||null,actualAmount:t.actualAmount||null,paymentStatus:t.paymentStatus,bank:t.bank,periodicity:t.periodicity,fraction:t.fraction};this.expenseService.addExpense(e).subscribe({next:i=>{this.dialogRef.close(i)},error:i=>{setTimeout(()=>{this.errorMessage=i.message||"Error al afegir la despesa. Torna-ho a intentar.",this.showErrorMessage=!0,this.isSubmitting=!1,this.cdr.detectChanges()})}})}}onCancel(){this.dialogRef.close()}getErrorMessage(t){let e=this.expenseForm.get(t);return!e||!e.errors||!e.touched?"":e.errors.required?`${this.getFieldLabel(t)} \xE9s obligatori`:e.errors.min?`${this.getFieldLabel(t)} ha de ser un nombre positiu`:"Valor no v\xE0lid"}getFieldLabel(t){return{name:"Nom",description:"Descripci\xF3",issuer:"Emissor",tag:"Etiqueta",category:"Categoria",approximateAmount:"Import aproximat",scheduledPaymentDate:"Data prevista de pagament",actualPaymentDate:"Data real de pagament",actualAmount:"Import real",paymentStatus:"Estat del pagament",bank:"Banc",periodicity:"Periodicitat",fraction:"Fracci\xF3"}[t]||t}getStatusLabel(t){return{PENDING:"Pendent",PAID:"Pagat",FAILED:"Fallat"}[t]||t}getPeriodicityLabel(t){return{MENSUAL:"Mensual",BIMENSUAL:"Bimensual",TRIMESTRAL:"Trimestral",CUATRIMESTRAL:"Cuatrimestral",SEMESTRAL:"Semestral",ANUAL:"Anual"}[t]||t}getFractionLabel(t){return{\u00DANICA:"\xDAnica",PRIMERA:"Primera",SEGONA:"Segona",TERCERA:"Tercera",QUARTA:"Quarta"}[t]||t}static \u0275fac=function(e){return new(e||n)(et(Lf))};static \u0275cmp=z({type:n,selectors:[["app-add-expense-dialog"]],decls:129,vars:36,consts:[["scheduledPicker",""],["actualPicker",""],[1,"dialog-header"],["mat-dialog-title",""],["type","error",3,"message","show"],[1,"expense-form",3,"formGroup"],[1,"form-row"],["appearance","outline"],["matInput","","formControlName","name","placeholder","Factura llum","required",""],["matPrefix",""],[4,"ngIf"],["formControlName","category","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-row","full-width"],["matInput","","formControlName","description","placeholder","Descripci\xF3 breu","required",""],["matInput","","formControlName","issuer","placeholder","Endesa","required",""],["matInput","","formControlName","bank","placeholder","CaixaBank","required",""],["formControlName","periodicity","required",""],["formControlName","fraction","required",""],[1,"form-row","three-columns"],["matInput","","type","number","formControlName","approximateAmount","placeholder","0.00","required",""],["matInput","","formControlName","scheduledPaymentDate","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["formControlName","tag"],[3,"value"],[1,"divider"],["matInput","","type","number","formControlName","actualAmount","placeholder","0.00"],["matInput","","formControlName","actualPaymentDate",3,"matDatepicker"],["formControlName","paymentStatus","required",""],["mat-button","",3,"click","disabled"],[1,"button-text"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"status-option"]],template:function(e,i){if(e&1){let a=ye();f(0,"div",2)(1,"h2",3)(2,"mat-icon"),y(3),m(),y(4),m()(),f(5,"mat-dialog-content"),U(6,"app-notification-message",4),f(7,"form",5)(8,"div",6)(9,"mat-form-field",7)(10,"mat-label"),y(11,"Nom"),m(),U(12,"input",8),f(13,"mat-icon",9),y(14,"label"),m(),j(15,JR,2,0,"mat-error",10),m(),f(16,"mat-form-field",7)(17,"mat-label"),y(18,"Categoria"),m(),f(19,"mat-select",11),j(20,eI,2,2,"mat-option",12),Ie(21,"async"),m(),f(22,"mat-icon",9),y(23,"category"),m(),j(24,tI,2,0,"mat-error",10),m()(),f(25,"div",13)(26,"mat-form-field",7)(27,"mat-label"),y(28,"Descripci\xF3"),m(),U(29,"input",14),f(30,"mat-icon",9),y(31,"description"),m(),j(32,iI,2,0,"mat-error",10),m()(),f(33,"div",6)(34,"mat-form-field",7)(35,"mat-label"),y(36,"Emissor"),m(),U(37,"input",15),f(38,"mat-icon",9),y(39,"business"),m(),j(40,nI,2,0,"mat-error",10),m(),f(41,"mat-form-field",7)(42,"mat-label"),y(43,"Banc"),m(),U(44,"input",16),f(45,"mat-icon",9),y(46,"account_balance"),m(),j(47,aI,2,0,"mat-error",10),m()(),f(48,"div",6)(49,"mat-form-field",7)(50,"mat-label"),y(51,"Periodicitat"),m(),f(52,"mat-select",17),j(53,rI,2,2,"mat-option",12),m(),f(54,"mat-icon",9),y(55,"event_repeat"),m(),j(56,oI,2,0,"mat-error",10),m(),f(57,"mat-form-field",7)(58,"mat-label"),y(59,"Fracci\xF3"),m(),f(60,"mat-select",18),j(61,sI,2,2,"mat-option",12),m(),f(62,"mat-icon",9),y(63,"splitscreen"),m(),j(64,lI,2,0,"mat-error",10),m()(),f(65,"div",19)(66,"mat-form-field",7)(67,"mat-label"),y(68,"Import aprox."),m(),U(69,"input",20),f(70,"span",9),y(71,"\u20AC\xA0"),m(),j(72,cI,2,0,"mat-error",10),m(),f(73,"mat-form-field",7)(74,"mat-label"),y(75,"Data prevista"),m(),U(76,"input",21)(77,"mat-datepicker-toggle",22)(78,"mat-datepicker",null,0),j(80,dI,2,0,"mat-error",10),m(),f(81,"mat-form-field",7)(82,"mat-label"),y(83,"Etiqueta"),m(),f(84,"mat-select",23)(85,"mat-option",24),y(86,"Sense etiqueta"),m(),j(87,hI,2,2,"mat-option",12),Ie(88,"async"),m(),f(89,"mat-icon",9),y(90,"local_offer"),m()()(),f(91,"div",25)(92,"span"),y(93),m()(),f(94,"div",19)(95,"mat-form-field",7)(96,"mat-label"),y(97,"Import real"),m(),U(98,"input",26),f(99,"span",9),y(100,"\u20AC\xA0"),m(),j(101,uI,2,0,"mat-error",10)(102,pI,2,0,"mat-error",10),m(),f(103,"mat-form-field",7)(104,"mat-label"),y(105,"Data real"),m(),U(106,"input",27)(107,"mat-datepicker-toggle",22)(108,"mat-datepicker",null,1),j(110,mI,2,0,"mat-error",10),m(),f(111,"mat-form-field",7)(112,"mat-label"),y(113,"Estat"),m(),f(114,"mat-select",28),j(115,fI,3,4,"mat-option",12),m(),f(116,"mat-icon",9),y(117,"payment"),m()()()()(),f(118,"mat-dialog-actions")(119,"button",29),I("click",function(){return L(a),V(i.onCancel())}),f(120,"mat-icon"),y(121,"close"),m(),f(122,"span",30),y(123,"Cancel\xB7la"),m()(),f(124,"button",31),I("click",function(){return L(a),V(i.onSubmit())}),f(125,"mat-icon"),y(126),m(),f(127,"span",30),y(128),m()()()}if(e&2){let a,r,o,s,l,c,d,h,u,p,g,b,v,x=ki(79),w=ki(109);C(3),K(i.isEditMode?"edit":"add_circle"),C(),he(" ",i.isEditMode?"Edita la despesa":"Nova despesa"," "),C(2),D("message",i.errorMessage)("show",i.showErrorMessage),C(),D("formGroup",i.expenseForm),C(8),D("ngIf",(a=i.expenseForm.get("name"))==null?null:a.invalid),C(5),D("ngForOf",gn(21,32,i.categories$)),C(4),D("ngIf",(r=i.expenseForm.get("category"))==null?null:r.invalid),C(8),D("ngIf",(o=i.expenseForm.get("description"))==null?null:o.invalid),C(8),D("ngIf",(s=i.expenseForm.get("issuer"))==null?null:s.invalid),C(7),D("ngIf",(l=i.expenseForm.get("bank"))==null?null:l.invalid),C(6),D("ngForOf",i.periodicities),C(3),D("ngIf",(c=i.expenseForm.get("periodicity"))==null?null:c.invalid),C(5),D("ngForOf",i.fractions),C(3),D("ngIf",(d=i.expenseForm.get("fraction"))==null?null:d.invalid),C(8),D("ngIf",(h=i.expenseForm.get("approximateAmount"))==null?null:h.invalid),C(4),D("matDatepicker",x),C(),D("for",x),C(3),D("ngIf",(u=i.expenseForm.get("scheduledPaymentDate"))==null?null:u.invalid),C(5),D("value",""),C(2),D("ngForOf",gn(88,34,i.tags$)),C(6),he("Pagament Real ",((p=i.expenseForm.get("paymentStatus"))==null?null:p.value)==="PAID"?"(Obligatori)":"(Opcional)"),C(8),D("ngIf",(g=i.expenseForm.get("actualAmount"))==null?null:g.hasError("required")),C(),D("ngIf",(b=i.expenseForm.get("actualAmount"))==null?null:b.hasError("min")),C(4),D("matDatepicker",w),C(),D("for",w),C(3),D("ngIf",(v=i.expenseForm.get("actualPaymentDate"))==null?null:v.hasError("required")),C(5),D("ngForOf",i.paymentStatuses),C(4),D("disabled",i.isSubmitting),C(5),D("disabled",i.isSubmitting||i.expenseForm.invalid),C(2),K(i.isEditMode?"save":"add"),C(2),K(i.isSubmitting?i.isEditMode?"Guardant...":"Afegint...":i.isEditMode?"Guardar":"Afegir")}},dependencies:[Mt,Fa,Na,js,Ls,Is,Sf,Fs,Ns,Bs,oa,Vs,Ya,Zs,el,Js,di,xn,Cn,Hs,Us,Pf,Ba,Va,ia,Br,$i,vC,yC,Dd,cm,Fv,mt,pt,Dt,St,na,Ds],styles:['[_nghost-%COMP%]     .mat-mdc-dialog-container{padding:0!important}[_nghost-%COMP%]     .mat-mdc-dialog-surface{display:flex!important;flex-direction:column!important;max-height:100%;background-color:#1e293b!important}.dialog-header[_ngcontent-%COMP%]{flex-shrink:0;background:linear-gradient(135deg,#1e40af,#1d4ed8,#2563eb);color:#fff;padding:1rem 1.25rem}@media(min-width:768px){.dialog-header[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}}@media(min-width:1024px){.dialog-header[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:.75rem;font-size:1.125rem}@media(min-width:1024px){.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:500}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}mat-dialog-content[_ngcontent-%COMP%]{flex:1 1 auto!important;overflow-y:auto!important;overflow-x:hidden!important;padding:1rem 1.25rem}@media(min-width:768px){mat-dialog-content[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}}@media(min-width:1024px){mat-dialog-content[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}}mat-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}mat-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e2e8f0;border-radius:8px}mat-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#94a3b8;border-radius:8px}mat-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#7589a4}mat-dialog-content[_ngcontent-%COMP%]{background:#0f172a}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;background-color:#dc262626;color:#fca5a5;padding:.75rem 1rem;border-radius:8px;margin-bottom:1rem;font-size:.875rem;border-left:4px solid #dc2626}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;flex-shrink:0}.error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.expense-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.form-row[_ngcontent-%COMP%]{display:grid;gap:.75rem;grid-template-columns:1fr}.form-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin:0}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:.5rem 0}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:linear-gradient(90deg,transparent,#334155,transparent)}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 .75rem;font-size:.75rem;font-weight:500;color:#64748b;text-transform:uppercase;letter-spacing:.5px}mat-form-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background-color:#1e293b;border-radius:8px;box-shadow:0 2px 8px #0000004d}mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-icon-prefix{padding-right:.5rem;color:#3b82f6}mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-icon-prefix mat-icon{font-size:20px;width:20px;height:20px}.status-option[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .75rem;border-radius:12px;font-size:.75rem;font-weight:500}.status-option.status-pending[_ngcontent-%COMP%]{background-color:#d9770633;color:#fbbf24}.status-option.status-paid[_ngcontent-%COMP%]{background-color:#16a34a33;color:#4ade80}.status-option.status-failed[_ngcontent-%COMP%]{background-color:#dc262633;color:#fca5a5}mat-dialog-actions[_ngcontent-%COMP%]{flex-shrink:0;padding:.75rem 1.25rem}@media(min-width:768px){mat-dialog-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem}}@media(min-width:1024px){mat-dialog-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem}}mat-dialog-actions[_ngcontent-%COMP%]{border-top:1px solid #334155;background:#1e293b;gap:.75rem;display:flex;justify-content:flex-end}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:0 1.25rem;height:40px;font-size:.875rem;border-radius:8px}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}@media(max-width:767px){[_nghost-%COMP%]     .mat-mdc-dialog-container{max-width:100vw!important;width:100vw!important;max-height:100vh!important;height:100vh!important;border-radius:0!important;margin:0!important}[_nghost-%COMP%]     .mat-mdc-dialog-surface{height:100%!important}mat-dialog-content[_ngcontent-%COMP%]{flex:1 1 auto!important;overflow-y:auto!important;-webkit-overflow-scrolling:touch;padding-bottom:1.5rem!important}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.expense-form[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]{gap:.5rem}.divider[_ngcontent-%COMP%]{margin:.25rem 0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem;padding:0 .5rem}mat-dialog-actions[_ngcontent-%COMP%]{flex-direction:column-reverse;gap:.5rem;flex-shrink:0}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin:0;height:44px}.error-message[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.75rem;margin-bottom:.75rem}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}}@media(min-width:768px){[_nghost-%COMP%]     .mat-mdc-dialog-container{max-width:90vw!important;width:700px;max-height:90vh!important}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.form-row.full-width[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-row.three-columns[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr}}@media(min-width:1024px){[_nghost-%COMP%]     .mat-mdc-dialog-container{max-width:800px;width:800px;max-height:90vh!important}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.form-row.full-width[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-row.three-columns[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr}}']})};function gI(n,t){n&1&&(f(0,"div",14),U(1,"mat-spinner"),f(2,"p"),y(3,"Carregant despeses..."),m()())}function _I(n,t){if(n&1&&U(0,"app-notification-message",15),n&2){let e=k();D("message",e.errorMessage)("show",e.showErrorMessage)}}function bI(n,t){if(n&1){let e=ye();f(0,"div",16)(1,"button",17),I("click",function(){L(e);let a=k();return V(a.loadExpenses())}),f(2,"mat-icon"),y(3,"refresh"),m(),f(4,"span"),y(5,"Reintenta"),m()()()}}function yI(n,t){n&1&&(f(0,"div",18)(1,"mat-icon"),y(2,"receipt_long"),m(),f(3,"h2"),y(4,"Encara no hi ha despeses"),m(),f(5,"p"),y(6,'Prem el bot\xF3 "Afegeix despesa" per comen\xE7ar'),m()())}function vI(n,t){if(n&1){let e=ye();f(0,"div",19)(1,"app-expense-table",20),I("edit",function(a){L(e);let r=k();return V(r.openEditDialog(a))})("delete",function(a){L(e);let r=k();return V(r.confirmDelete(a))})("yearChange",function(a){L(e);let r=k();return V(r.onYearChange(a))}),m()()}if(n&2){let e=k();C(),D("expenses",e.expenses)("selectedYear",e.selectedYear)}}var Pd=class n{expenseService=_(Yi);authService=_(Ht);dialog=_($a);router=_(Ze);cdr=_(ve);expenses=[];selectedYear=new Date().getFullYear();availableYears=[];isLoading=!1;errorMessage="";showErrorMessage=!1;ngOnInit(){this.initializeYears(),this.loadExpenses()}initializeYears(){let t=new Date().getFullYear();this.availableYears=Array.from({length:5},(e,i)=>t-i)}loadExpenses(){console.log("Loading expenses..."),this.isLoading=!0,this.showErrorMessage=!1,this.errorMessage="",this.cdr.detectChanges(),this.expenseService.getExpenses().subscribe({next:t=>{console.log("Expenses loaded:",t.length),this.expenses=t,this.isLoading=!1,this.cdr.detectChanges()},error:t=>{console.error("Error loading expenses:",t),this.errorMessage="No s'han pogut carregar les despeses. Torna-ho a intentar.",this.showErrorMessage=!0,this.isLoading=!1,this.cdr.detectChanges()},complete:()=>{console.log("Load expenses completed")}})}openAddDialog(){this.dialog.open(ss,{width:"800px",maxWidth:"95vw",maxHeight:"95vh",disableClose:!0,autoFocus:!1,panelClass:"expense-dialog"}).afterClosed().subscribe(e=>{e&&this.loadExpenses()})}openEditDialog(t){this.dialog.open(ss,{width:"800px",maxWidth:"95vw",maxHeight:"95vh",disableClose:!0,autoFocus:!1,panelClass:"expense-dialog",data:{expense:t}}).afterClosed().subscribe(i=>{i&&this.loadExpenses()})}confirmDelete(t){confirm(`Est\xE0s segur que vols eliminar la despesa "${t.name}"?`)&&this.expenseService.deleteExpense(t.id).subscribe({next:()=>{this.loadExpenses()},error:e=>{this.errorMessage="No s'ha pogut eliminar la despesa. Torna-ho a intentar.",this.showErrorMessage=!0,console.error("Error deleting expense:",e)}})}logout(){this.authService.logout()}goToDashboard(){this.router.navigate(["/dashboard"])}onYearChange(t){this.selectedYear=t}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=z({type:n,selectors:[["app-expense-list-page"]],decls:24,vars:5,consts:[[1,"page-container"],[1,"page-header"],[1,"dashboard-header"],[1,"header-actions"],["mat-icon-button","","matTooltip","Tauler","aria-label","Tauler",3,"click"],["mat-icon-button","","routerLink","/settings","matTooltip","Configuraci\xF3","aria-label","Configuraci\xF3"],["mat-icon-button","","matTooltip","Tancar sessi\xF3","aria-label","Tanca sessi\xF3",3,"click"],[1,"page-content"],["class","loading-container",4,"ngIf"],["type","error",3,"message","show",4,"ngIf"],["class","error-actions",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","table-container",4,"ngIf"],["mat-fab","","color","primary","aria-label","Afegeix despesa",1,"fab-button",3,"click"],[1,"loading-container"],["type","error",3,"message","show"],[1,"error-actions"],["mat-raised-button","","color","primary",3,"click"],[1,"empty-state"],[1,"table-container"],[3,"edit","delete","yearChange","expenses","selectedYear"]],template:function(e,i){e&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),y(4,"Llista"),m(),f(5,"div",3)(6,"button",4),I("click",function(){return i.goToDashboard()}),f(7,"mat-icon"),y(8,"dashboard"),m()(),f(9,"button",5)(10,"mat-icon"),y(11,"settings"),m()(),f(12,"button",6),I("click",function(){return i.logout()}),f(13,"mat-icon"),y(14,"logout"),m()()()()(),f(15,"div",7),j(16,gI,4,0,"div",8)(17,_I,1,2,"app-notification-message",9)(18,bI,6,0,"div",10)(19,yI,7,0,"div",11)(20,vI,2,2,"div",12),m(),f(21,"button",13),I("click",function(){return i.openAddDialog()}),f(22,"mat-icon"),y(23,"add"),m()()()),e&2&&(C(16),D("ngIf",i.isLoading),C(),D("ngIf",!i.isLoading),C(),D("ngIf",i.showErrorMessage&&!i.isLoading),C(),D("ngIf",!i.isLoading&&!i.showErrorMessage&&i.expenses.length===0),C(),D("ngIf",!i.isLoading&&!i.showErrorMessage&&i.expenses.length>0))},dependencies:[Mt,Na,En,zv,mt,pt,Zi,$s,Dt,St,Qc,Gc,Ya,di,ia,xd,na],styles:[".page-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;overflow:hidden;background-color:#0f172a}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.125rem}@media(min-width:1024px){.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:500;white-space:nowrap;color:#f1f5f9}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;flex-shrink:0}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:40px;padding:0;color:#94a3b8}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#f1f5f9}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.app-toolbar[_ngcontent-%COMP%]{flex-shrink:0;z-index:1020;box-shadow:0 4px 6px -1px #0006,0 2px 4px -1px #0000004d;background-color:#1e293b}.app-toolbar[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:1rem}@media(min-width:1024px){.app-toolbar[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:1.125rem}}.app-toolbar[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-weight:500;color:#f1f5f9}.app-toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.app-toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .toolbar-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}.app-toolbar[_ngcontent-%COMP%]   .mobile-toolbar-buttons[_ngcontent-%COMP%]{display:none}.page-header[_ngcontent-%COMP%]{flex-shrink:0;padding:1rem}@media(min-width:768px){.page-header[_ngcontent-%COMP%]{padding:1.25rem}}@media(min-width:1024px){.page-header[_ngcontent-%COMP%]{padding:1.5rem}}.page-header[_ngcontent-%COMP%]{border-bottom:1px solid #334155;background:#1e293b;z-index:1020}.page-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;padding:1rem}@media(min-width:768px){.page-content[_ngcontent-%COMP%]{padding:1.25rem}}@media(min-width:1024px){.page-content[_ngcontent-%COMP%]{padding:1.5rem}}.page-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.page-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e2e8f0;border-radius:8px}.page-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#94a3b8;border-radius:8px}.page-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#7589a4}.page-content[_ngcontent-%COMP%]{background:#0f172a}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;color:#94a3b8}.error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;text-align:center}.error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:1rem;color:#dc2626}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem;color:#f1f5f9}.error-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1rem}.error-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;text-align:center}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#64748b;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#f1f5f9}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#94a3b8}.table-container[_ngcontent-%COMP%]{margin-top:1rem}.fab-button[_ngcontent-%COMP%]{position:fixed;bottom:1.5rem;right:1.5rem;z-index:1030;box-shadow:0 10px 15px -3px #0006,0 4px 6px -2px #0000004d;transition:transform .15s ease-in-out,box-shadow .15s ease-in-out}.fab-button[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 20px 25px -5px #0006,0 10px 10px -5px #0000004d}.fab-button[_ngcontent-%COMP%]:active{transform:scale(.95)}@media(max-width:767px){.page-header[_ngcontent-%COMP%]{padding:.5rem 1rem}.page-content[_ngcontent-%COMP%]{padding:1rem .5rem}.dashboard-header[_ngcontent-%COMP%]{gap:.5rem}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1rem}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{gap:0}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36px;height:36px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.fab-button[_ngcontent-%COMP%]{bottom:1rem;right:1rem}.fab-button[_ngcontent-%COMP%]     .mat-mdc-fab{width:56px;height:56px}.fab-button[_ngcontent-%COMP%]     .mat-icon{font-size:24px}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:1.5rem 1rem}.loading-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px}.loading-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.125rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}.table-container[_ngcontent-%COMP%]{margin-top:.5rem}}@media(max-width:479px){.app-toolbar[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:.875rem;max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.app-toolbar[_ngcontent-%COMP%]   .mobile-toolbar-buttons[_ngcontent-%COMP%]{gap:0}.app-toolbar[_ngcontent-%COMP%]   .mobile-toolbar-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 .5rem}.page-content[_ngcontent-%COMP%]{padding:.5rem .25rem}.fab-button[_ngcontent-%COMP%]{bottom:.75rem;right:.75rem}.fab-button[_ngcontent-%COMP%]     .mat-mdc-fab{width:48px;height:48px}.fab-button[_ngcontent-%COMP%]     .mat-icon{font-size:20px}}@media(min-width:768px){.page-header[_ngcontent-%COMP%]{padding:1rem 1.25rem}.page-content[_ngcontent-%COMP%]{padding:1.25rem}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.fab-button[_ngcontent-%COMP%]{bottom:1.25rem;right:1.25rem}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:2.5rem}.loading-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:56px;width:56px;height:56px}.table-container[_ngcontent-%COMP%]{margin-top:.75rem}}@media(min-width:1024px){.page-header[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}.page-content[_ngcontent-%COMP%]{padding:1.5rem}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{gap:.5rem}.fab-button[_ngcontent-%COMP%]{bottom:1.5rem;right:1.5rem}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:3rem}.loading-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px}.table-container[_ngcontent-%COMP%]{margin-top:1rem}}"]})};var ls=n=>[n,"EUR","symbol","1.2-2","es"];function CI(n,t){if(n&1&&(f(0,"mat-option",30),y(1),m()),n&2){let e=t.$implicit;D("value",e),C(),he(" ",e," ")}}function xI(n,t){if(n&1){let e=ye();f(0,"button",34),I("click",function(){L(e);let a=k(2);return V(a.clearTagFilters())}),f(1,"mat-icon"),y(2,"clear"),m()()}}function wI(n,t){n&1&&(f(0,"mat-icon",36),y(1,"check"),m())}function MI(n,t){if(n&1){let e=ye();f(0,"mat-chip",35),I("click",function(){let a=L(e).$implicit,r=k(2);return V(r.toggleTag(a))}),y(1),Q(2,wI,2,0,"mat-icon",36),m()}if(n&2){let e=t.$implicit,i=k(2);de("selected",i.isTagSelected(e)),D("highlighted",i.isTagSelected(e)),C(),he(" ",e," "),C(),X(i.isTagSelected(e)?2:-1)}}function SI(n,t){if(n&1&&(f(0,"mat-card",12)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),y(4,"label"),m(),y(5," Filtres per tags "),m(),Q(6,xI,3,0,"button",31),m(),f(7,"mat-card-content")(8,"mat-chip-set",32),mn(9,MI,3,5,"mat-chip",33,vs),m()()()),n&2){let e=k();C(6),X(e.selectedTags().size>0?6:-1),C(3),fn(e.availableTags())}}function DI(n,t){if(n&1&&(f(0,"div",15)(1,"div",37),y(2),m(),f(3,"div",38),y(4),Ie(5,"currency"),m(),U(6,"div",39),f(7,"div",40),y(8),Ie(9,"date"),m()()),n&2){let e=k();C(2),K(e.nextPayment().name),C(2),K(si(5,3,oi(12,ls,e.nextPayment().approximateAmount))),C(4),he(" ",_n(9,9,e.nextPayment().scheduledPaymentDate,"dd/MM/yyyy")," ")}}function PI(n,t){n&1&&(f(0,"div",16)(1,"mat-icon"),y(2,"check_circle"),m(),f(3,"p"),y(4,"No hi ha pagaments pendents propers"),m()())}var Ed=class n{constructor(t,e){this.expenseService=t;this.router=e}authService=_(Ht);expenses=ae([]);selectedYear=ae(new Date().getFullYear());availableYears=ae([]);availableTags=ae([]);selectedTags=ae(new Set);filteredExpenses=Wd(()=>{let t=this.selectedYear(),e=this.selectedTags();return this.expenses().filter(i=>{let r=new Date(i.scheduledPaymentDate).getFullYear()===t;return e.size===0?r:r&&i.tag&&e.has(i.tag)})});nextPayment=ae(null);daysUntilNextPayment=ae(0);totalPaidThisMonth=ae(0);totalPendingThisMonth=ae(0);totalPaidThisYear=ae(0);totalPendingThisYear=ae(0);monthlyChartData=ae({labels:[],datasets:[{data:[],label:"Gastos Mensuales",backgroundColor:"rgba(63, 81, 181, 0.7)",borderColor:"rgba(63, 81, 181, 1)",borderWidth:1}]});categoryChartData=ae({labels:[],datasets:[{data:[],backgroundColor:["rgba(255, 99, 132, 0.7)","rgba(54, 162, 235, 0.7)","rgba(255, 206, 86, 0.7)","rgba(75, 192, 192, 0.7)","rgba(153, 102, 255, 0.7)","rgba(255, 159, 64, 0.7)"]}]});barChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{footer:t=>`Total: ${t.reduce((i,a)=>i+(a.parsed.y||0),0).toFixed(2)} \u20AC`}}},scales:{x:{stacked:!0},y:{stacked:!0,beginAtZero:!0,ticks:{callback:function(t){return t+" \u20AC"}}}}};doughnutChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}};ngOnInit(){this.loadExpenses()}logout(){this.authService.logout()}loadExpenses(){this.expenseService.getExpenses().subscribe({next:t=>{this.expenses.set(t),this.calculateAvailableYears(t),this.calculateAvailableTags(t),this.updateDashboard()},error:t=>{console.error("Error loading expenses:",t)}})}calculateAvailableYears(t){let e=new Set;t.forEach(a=>{let r=new Date(a.scheduledPaymentDate).getFullYear();e.add(r)});let i=Array.from(e).sort((a,r)=>r-a);this.availableYears.set(i),i.length>0&&!i.includes(this.selectedYear())&&this.selectedYear.set(i[0])}calculateAvailableTags(t){let e=new Set;t.forEach(a=>{a.tag&&a.tag.trim()!==""&&e.add(a.tag)});let i=Array.from(e).sort();this.availableTags.set(i)}onYearChange(t){this.selectedYear.set(t),this.updateDashboard()}toggleTag(t){let e=new Set(this.selectedTags());e.has(t)?e.delete(t):e.add(t),this.selectedTags.set(e),this.updateDashboard()}isTagSelected(t){return this.selectedTags().has(t)}clearTagFilters(){this.selectedTags.set(new Set),this.updateDashboard()}updateDashboard(){let t=this.filteredExpenses();this.calculateNextPayment(t),this.calculateStatistics(t),this.generateMonthlyChart(t),this.generateCategoryChart(t)}calculateStatistics(t){let e=new Date,i=e.getMonth(),a=e.getFullYear(),r=t.filter(c=>{if(c.paymentStatus!=="PAID"||!c.actualPaymentDate||!c.actualAmount)return!1;let d=new Date(c.actualPaymentDate);return d.getMonth()===i&&d.getFullYear()===a}).reduce((c,d)=>c+(d.actualAmount||0),0);this.totalPaidThisMonth.set(r);let o=t.filter(c=>{if(c.paymentStatus!=="PENDING")return!1;let d=new Date(c.scheduledPaymentDate);return d.getMonth()===i&&d.getFullYear()===a}).reduce((c,d)=>c+d.approximateAmount,0);this.totalPendingThisMonth.set(o);let s=t.filter(c=>c.paymentStatus!=="PAID"||!c.actualPaymentDate||!c.actualAmount?!1:new Date(c.actualPaymentDate).getFullYear()===a).reduce((c,d)=>c+(d.actualAmount||0),0);this.totalPaidThisYear.set(s);let l=t.filter(c=>c.paymentStatus!=="PENDING"?!1:new Date(c.scheduledPaymentDate).getFullYear()===a).reduce((c,d)=>c+d.approximateAmount,0);this.totalPendingThisYear.set(l)}calculateNextPayment(t){let e=new Date,i=t.filter(a=>a.paymentStatus==="PENDING").map(a=>_e(A({},a),{scheduledPaymentDate:new Date(a.scheduledPaymentDate)})).filter(a=>a.scheduledPaymentDate>=e).sort((a,r)=>a.scheduledPaymentDate.getTime()-r.scheduledPaymentDate.getTime());if(i.length>0){let a=i[0];this.nextPayment.set(a);let r=a.scheduledPaymentDate.getTime()-e.getTime(),o=Math.ceil(r/(1e3*60*60*24));this.daysUntilNextPayment.set(o)}}generateMonthlyChart(t){let e=this.selectedYear(),i=this.getMonthlyExpensesForYear(t,e);this.monthlyChartData.set({labels:i.map(a=>a.month),datasets:[{data:i.map(a=>a.paid),label:"Pagat (\u20AC)",backgroundColor:"rgba(76, 175, 80, 0.7)",borderColor:"rgba(76, 175, 80, 1)",borderWidth:1},{data:i.map(a=>a.pending),label:"Pendent (\u20AC)",backgroundColor:"rgba(255, 152, 0, 0.7)",borderColor:"rgba(255, 152, 0, 1)",borderWidth:1}]})}generateCategoryChart(t){let e=new Map;t.filter(r=>r.paymentStatus==="PAID"&&r.actualAmount).forEach(r=>{let o=e.get(r.category)||0;e.set(r.category,o+(r.actualAmount||0))});let i=Array.from(e.keys()),a=Array.from(e.values());this.categoryChartData.set({labels:i,datasets:[{data:a,backgroundColor:["rgba(255, 99, 132, 0.7)","rgba(54, 162, 235, 0.7)","rgba(255, 206, 86, 0.7)","rgba(75, 192, 192, 0.7)","rgba(153, 102, 255, 0.7)","rgba(255, 159, 64, 0.7)","rgba(201, 203, 207, 0.7)"]}]})}getMonthlyExpenses(t,e){let i=new Date,a=new Map;for(let r=e-1;r>=0;r--){let o=new Date(i.getFullYear(),i.getMonth()-r,1),s=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`;a.set(s,{paid:0,pending:0,count:0})}return t.forEach(r=>{let o=null,s=0,l=!1;if(r.paymentStatus==="PAID"&&r.actualPaymentDate&&r.actualAmount?(o=new Date(r.actualPaymentDate),s=r.actualAmount,l=!0):r.paymentStatus==="PENDING"&&(o=new Date(r.scheduledPaymentDate),s=r.approximateAmount,l=!1),o){let c=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`;if(a.has(c)){let d=a.get(c);l?d.paid+=s:d.pending+=s,d.count+=1}}}),Array.from(a.entries()).map(([r,o])=>{let[s,l]=r.split("-");return{month:new Date(parseInt(s),parseInt(l)-1,1).toLocaleDateString("es-ES",{month:"short",year:"numeric"}),paid:o.paid,pending:o.pending,count:o.count}})}getMonthlyExpensesForYear(t,e){let i=new Map;for(let a=0;a<12;a++){let r=`${e}-${String(a+1).padStart(2,"0")}`;i.set(r,{paid:0,pending:0,count:0})}return t.forEach(a=>{let r=null,o=0,s=!1;if(a.paymentStatus==="PAID"&&a.actualPaymentDate&&a.actualAmount?(r=new Date(a.actualPaymentDate),o=a.actualAmount,s=!0):a.paymentStatus==="PENDING"&&(r=new Date(a.scheduledPaymentDate),o=a.approximateAmount,s=!1),r){let l=r.getFullYear(),c=r.getMonth();if(l===e){let d=`${l}-${String(c+1).padStart(2,"0")}`;if(i.has(d)){let h=i.get(d);s?h.paid+=o:h.pending+=o,h.count+=1}}}}),Array.from(i.entries()).sort((a,r)=>a[0].localeCompare(r[0])).map(([a,r])=>{let[o,s]=a.split("-");return{month:new Date(parseInt(o),parseInt(s)-1,1).toLocaleDateString("es-ES",{month:"short"}),paid:r.paid,pending:r.pending,count:r.count}})}goToExpenses(){this.router.navigate(["/expenses"])}static \u0275fac=function(e){return new(e||n)(et(Yi),et(Ze))};static \u0275cmp=z({type:n,selectors:[["app-dashboard-page"]],decls:89,vars:45,consts:[[1,"page-container"],[1,"page-header"],[1,"dashboard-header"],[1,"header-title"],["appearance","outline",1,"year-selector"],[3,"selectionChange","value"],[3,"value",4,"ngFor","ngForOf"],[1,"header-actions"],["mat-icon-button","","matTooltip","Llista","aria-label","Ver lista",3,"click"],["mat-icon-button","","routerLink","/settings","matTooltip","Configuraci\xF3","aria-label","Configuraci\xF3"],["mat-icon-button","","matTooltip","Tancar sessi\xF3","aria-label","Tanca sessi\xF3",3,"click"],[1,"page-content"],[1,"tags-filter-card"],[1,"main-cards-grid"],[1,"next-payment-card"],[1,"next-payment-info"],[1,"no-payments"],[1,"stats-grid"],[1,"stat-card","stat-card-month"],[1,"stat-row"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value","stat-value-green"],[1,"stat-value","stat-value-orange"],[1,"stat-card","stat-card-year"],[1,"charts-grid"],[1,"chart-card"],[1,"chart-container"],["baseChart","","type","bar",3,"data","options"],["baseChart","","type","doughnut",3,"data","options"],[3,"value"],["mat-icon-button","","matTooltip","Limpiar filtros"],[1,"tags-chip-set"],[3,"selected","highlighted"],["mat-icon-button","","matTooltip","Limpiar filtros",3,"click"],[3,"click","highlighted"],["matChipTrailingIcon",""],[1,"payment-name"],[1,"payment-amount"],[1,"payment-date"],[1,"payment-countdown"]],template:function(e,i){e&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),y(5,"Tauler"),m(),f(6,"mat-form-field",4)(7,"mat-label"),y(8,"Any"),m(),f(9,"mat-select",5),I("selectionChange",function(r){return i.onYearChange(r.value)}),j(10,CI,2,2,"mat-option",6),m()()(),f(11,"div",7)(12,"button",8),I("click",function(){return i.goToExpenses()}),f(13,"mat-icon"),y(14,"list"),m()(),f(15,"button",9)(16,"mat-icon"),y(17,"settings"),m()(),f(18,"button",10),I("click",function(){return i.logout()}),f(19,"mat-icon"),y(20,"logout"),m()()()()(),f(21,"div",11),Q(22,SI,11,1,"mat-card",12),f(23,"div",13)(24,"mat-card",14)(25,"mat-card-header")(26,"mat-card-title")(27,"mat-icon"),y(28,"schedule"),m(),y(29," Proper Pagament "),m()(),f(30,"mat-card-content"),Q(31,DI,10,14,"div",15)(32,PI,5,0,"div",16),m()()(),f(33,"div",17)(34,"mat-card",18)(35,"mat-card-header")(36,"mat-card-title")(37,"mat-icon"),y(38,"today"),m(),y(39," Mes Actual "),m()(),f(40,"mat-card-content")(41,"div",19)(42,"div",20)(43,"div",21),y(44,"Pagat"),m(),f(45,"div",22),y(46),Ie(47,"currency"),m()(),f(48,"div",20)(49,"div",21),y(50,"Pendent"),m(),f(51,"div",23),y(52),Ie(53,"currency"),m()()()()(),f(54,"mat-card",24)(55,"mat-card-header")(56,"mat-card-title")(57,"mat-icon"),y(58,"calendar_today"),m(),y(59," Any Actual "),m()(),f(60,"mat-card-content")(61,"div",19)(62,"div",20)(63,"div",21),y(64,"Pagat"),m(),f(65,"div",22),y(66),Ie(67,"currency"),m()(),f(68,"div",20)(69,"div",21),y(70,"Pendent"),m(),f(71,"div",23),y(72),Ie(73,"currency"),m()()()()()(),f(74,"div",25)(75,"mat-card",26)(76,"mat-card-header")(77,"mat-card-title"),y(78),m()(),f(79,"mat-card-content")(80,"div",27),U(81,"canvas",28),m()()(),f(82,"mat-card",26)(83,"mat-card-header")(84,"mat-card-title"),y(85,"Distribuci\xF3 per Categoria"),m()(),f(86,"mat-card-content")(87,"div",27),U(88,"canvas",29),m()()()()()()),e&2&&(C(9),D("value",i.selectedYear()),C(),D("ngForOf",i.availableYears()),C(12),X(i.availableTags().length>0?22:-1),C(9),X(i.nextPayment()?31:32),C(15),K(si(47,13,oi(37,ls,i.totalPaidThisMonth()))),C(6),K(si(53,19,oi(39,ls,i.totalPendingThisMonth()))),C(14),K(si(67,25,oi(41,ls,i.totalPaidThisYear()))),C(6),K(si(73,31,oi(43,ls,i.totalPendingThisYear()))),C(6),he("Distribuci\xF3 Anual ",i.selectedYear()),C(3),D("data",i.monthlyChartData())("options",i.barChartOptions),C(7),D("data",i.categoryChartData())("options",i.doughnutChartOptions))},dependencies:[Mt,Fa,Qn,Yn,Kn,Gn,qn,mt,Zi,Dt,St,ia,xn,Cn,Br,$i,di,Cd,is,vd,yd,jr,ka,go,En,kv,Es,Ps],styles:[".page-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;overflow:hidden;background-color:#0f172a}.page-header[_ngcontent-%COMP%]{flex-shrink:0;padding:1rem}@media(min-width:768px){.page-header[_ngcontent-%COMP%]{padding:1.25rem}}@media(min-width:1024px){.page-header[_ngcontent-%COMP%]{padding:1.5rem}}.page-header[_ngcontent-%COMP%]{border-bottom:1px solid #334155;background:#1e293b;z-index:1020}.page-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;padding:1rem}@media(min-width:768px){.page-content[_ngcontent-%COMP%]{padding:1.25rem}}@media(min-width:1024px){.page-content[_ngcontent-%COMP%]{padding:1.5rem}}.page-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.page-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e2e8f0;border-radius:8px}.page-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#94a3b8;border-radius:8px}.page-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#7589a4}.page-content[_ngcontent-%COMP%]{background:#0f172a}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex:1;min-width:0}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.125rem}@media(min-width:1024px){.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:500;white-space:nowrap;color:#f1f5f9}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .year-selector[_ngcontent-%COMP%]{width:85px;margin:0}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .year-selector[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .year-selector[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{padding:0;background-color:#334155}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .year-selector[_ngcontent-%COMP%]     .mdc-text-field{padding:6px 8px}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .year-selector[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{min-height:36px;padding:6px 0;width:auto}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;flex-shrink:0}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:40px;padding:0;color:#94a3b8}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#f1f5f9}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.main-cards-grid[_ngcontent-%COMP%]{margin-bottom:1.5rem}.next-payment-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e40af,#1d4ed8,#2563eb);color:#fff;border-radius:12px;overflow:hidden;border:1px solid #3b82f6}.next-payment-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#fff;font-size:1.125rem}.next-payment-card[_ngcontent-%COMP%]   .next-payment-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:1.25rem 0}.next-payment-card[_ngcontent-%COMP%]   .next-payment-info[_ngcontent-%COMP%]   .payment-name[_ngcontent-%COMP%]{font-size:1.125rem}@media(min-width:1024px){.next-payment-card[_ngcontent-%COMP%]   .next-payment-info[_ngcontent-%COMP%]   .payment-name[_ngcontent-%COMP%]{font-size:1.25rem}}.next-payment-card[_ngcontent-%COMP%]   .next-payment-info[_ngcontent-%COMP%]   .payment-name[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.5rem}.next-payment-card[_ngcontent-%COMP%]   .next-payment-info[_ngcontent-%COMP%]   .payment-amount[_ngcontent-%COMP%]{font-size:1.875rem}@media(min-width:1024px){.next-payment-card[_ngcontent-%COMP%]   .next-payment-info[_ngcontent-%COMP%]   .payment-amount[_ngcontent-%COMP%]{font-size:2.25rem}}.next-payment-card[_ngcontent-%COMP%]   .next-payment-info[_ngcontent-%COMP%]   .payment-amount[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.5rem}.next-payment-card[_ngcontent-%COMP%]   .next-payment-info[_ngcontent-%COMP%]   .payment-date[_ngcontent-%COMP%]{font-size:1rem}@media(min-width:1024px){.next-payment-card[_ngcontent-%COMP%]   .next-payment-info[_ngcontent-%COMP%]   .payment-date[_ngcontent-%COMP%]{font-size:1.125rem}}.next-payment-card[_ngcontent-%COMP%]   .next-payment-info[_ngcontent-%COMP%]   .payment-date[_ngcontent-%COMP%]{opacity:.9;margin-bottom:1rem}.next-payment-card[_ngcontent-%COMP%]   .next-payment-info[_ngcontent-%COMP%]   .payment-countdown[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:1rem 2rem;background:#0000004d;border-radius:12px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.next-payment-card[_ngcontent-%COMP%]   .next-payment-info[_ngcontent-%COMP%]   .payment-countdown[_ngcontent-%COMP%]   .countdown-number[_ngcontent-%COMP%]{font-size:2.25rem}@media(min-width:1024px){.next-payment-card[_ngcontent-%COMP%]   .next-payment-info[_ngcontent-%COMP%]   .payment-countdown[_ngcontent-%COMP%]   .countdown-number[_ngcontent-%COMP%]{font-size:3rem}}.next-payment-card[_ngcontent-%COMP%]   .next-payment-info[_ngcontent-%COMP%]   .payment-countdown[_ngcontent-%COMP%]   .countdown-number[_ngcontent-%COMP%]{font-weight:700;line-height:1}.next-payment-card[_ngcontent-%COMP%]   .next-payment-info[_ngcontent-%COMP%]   .payment-countdown[_ngcontent-%COMP%]   .countdown-label[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9;margin-top:.25rem}.next-payment-card[_ngcontent-%COMP%]   .no-payments[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:2rem;opacity:.9}.next-payment-card[_ngcontent-%COMP%]   .no-payments[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:1rem}.next-payment-card[_ngcontent-%COMP%]   .no-payments[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;color:#fff}.tags-filter-card[_ngcontent-%COMP%]{margin-bottom:1.5rem;background:#1e293b;box-shadow:0 4px 6px -1px #0006,0 2px 4px -1px #0000004d;border-radius:12px;overflow:hidden;border:1px solid #334155}.tags-filter-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#334155;padding:1rem 1.25rem;border-bottom:1px solid #334155}.tags-filter-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1rem;font-weight:600;color:#f1f5f9}.tags-filter-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#3b82f6}.tags-filter-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1.25rem}.tags-filter-card[_ngcontent-%COMP%]   .tags-chip-set[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.tags-filter-card[_ngcontent-%COMP%]   .tags-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{cursor:pointer;transition:all .15s ease-in-out;background-color:#334155;color:#94a3b8;border:1px solid #334155}.tags-filter-card[_ngcontent-%COMP%]   .tags-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]:hover{background-color:#334155;transform:translateY(-2px);box-shadow:0 4px 6px -1px #0006,0 2px 4px -1px #0000004d}.tags-filter-card[_ngcontent-%COMP%]   .tags-chip-set[_ngcontent-%COMP%]   mat-chip.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1d4ed8,#2563eb);color:#fff;border-color:transparent}.tags-filter-card[_ngcontent-%COMP%]   .tags-chip-set[_ngcontent-%COMP%]   mat-chip.selected[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.tags-filter-card[_ngcontent-%COMP%]   .tags-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.stats-grid[_ngcontent-%COMP%]{display:grid;gap:1.25rem;grid-template-columns:repeat(1,1fr)}@media(min-width:768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(min-width:1024px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.stats-grid[_ngcontent-%COMP%]{margin-bottom:1.5rem}.stat-card[_ngcontent-%COMP%]{transition:transform .15s ease-in-out,box-shadow .15s ease-in-out;background:#1e293b;box-shadow:0 4px 6px -1px #0006,0 2px 4px -1px #0000004d;border-radius:12px;overflow:hidden;border:1px solid #334155}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 10px 15px -3px #0006,0 4px 6px -2px #0000004d}.stat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{background:#334155;padding:1rem 1.25rem;border-bottom:1px solid #334155}.stat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1rem;font-weight:600;color:#f1f5f9}.stat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#3b82f6}.stat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1.5rem!important;background:#1e293b}.stat-card[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:1.5rem}.stat-card[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;padding:1rem;border-radius:12px;background:#334155;min-width:120px}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;color:#64748b;margin-bottom:.5rem;text-transform:uppercase;letter-spacing:.5px}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.5rem}@media(min-width:1024px){.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.875rem}}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-weight:700;line-height:1.2;color:#f1f5f9}.stat-card[_ngcontent-%COMP%]   .stat-value.stat-value-green[_ngcontent-%COMP%]{color:#22c55e}.stat-card[_ngcontent-%COMP%]   .stat-value.stat-value-orange[_ngcontent-%COMP%]{color:#d97706}.stat-card.stat-card-month[_ngcontent-%COMP%]{border-left:4px solid #2563eb}.stat-card.stat-card-year[_ngcontent-%COMP%]{border-left:4px solid #16a34a}.charts-grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem;grid-template-columns:repeat(1,1fr)}@media(min-width:768px){.charts-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}@media(min-width:1024px){.charts-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.chart-card[_ngcontent-%COMP%]{background:#1e293b;box-shadow:0 4px 6px -1px #0006,0 2px 4px -1px #0000004d;border-radius:12px;overflow:hidden;border:1px solid #334155}.chart-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:1rem;padding:1rem 1.25rem;background:#334155;border-bottom:1px solid #334155}.chart-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#f1f5f9}.chart-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1.25rem}.chart-card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{height:300px;position:relative}@media(max-width:767px){.page-header[_ngcontent-%COMP%]{padding:.5rem 1rem}.page-content[_ngcontent-%COMP%]{padding:1rem}.dashboard-header[_ngcontent-%COMP%], .dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{gap:.5rem}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1rem}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .year-selector[_ngcontent-%COMP%]{width:75px}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .year-selector[_ngcontent-%COMP%]     .mdc-text-field{padding:4px 6px}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .year-selector[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{min-height:32px;padding:4px 0}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{gap:0}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36px;height:36px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.main-cards-grid[_ngcontent-%COMP%]{margin-bottom:1rem}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem;margin-bottom:1rem}.stat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:.5rem 1rem}.stat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1rem!important}.stat-card[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]{gap:1rem}.stat-card[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:auto;padding:.5rem}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.25rem}.charts-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.chart-card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{height:250px}}@media(min-width:768px){.page-header[_ngcontent-%COMP%]{padding:1rem 1.25rem}.page-content[_ngcontent-%COMP%]{padding:1.25rem}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .year-selector[_ngcontent-%COMP%]{width:85px}.main-cards-grid[_ngcontent-%COMP%]{margin-bottom:1.25rem}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:1rem;margin-bottom:1.25rem}.charts-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:1.25rem}.chart-card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{height:280px}}@media(min-width:1024px){.page-header[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}.page-content[_ngcontent-%COMP%]{padding:1.5rem}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .year-selector[_ngcontent-%COMP%]{width:90px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{gap:.5rem}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.chart-card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{height:300px}}@media(min-width:1440px){.chart-card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{height:350px}}"]})};function EI(n,t){if(n&1){let e=ye();f(0,"div",1)(1,"button",2),I("click",function(){L(e);let a=k();return V(a.action())}),y(2),m()()}if(n&2){let e=k();C(2),he(" ",e.data.action," ")}}var OI=["label"];function kI(n,t){}var AI=Math.pow(2,31)-1,cs=class{_overlayRef;instance;containerInstance;_afterDismissed=new G;_afterOpened=new G;_onAction=new G;_durationTimeoutId;_dismissedByAction=!1;constructor(t,e){this._overlayRef=e,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,AI))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},xC=new Y("MatSnackBarData"),$r=class{politeness="polite";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},TI=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return n})(),RI=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return n})(),II=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return n})(),FI=(()=>{class n{snackBarRef=_(cs);data=_(xC);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["matButton","","matSnackBarAction","",3,"click"]],template:function(i,a){i&1&&(f(0,"div",0),y(1),m(),Q(2,EI,3,1,"div",1)),i&2&&(C(),he(" ",a.data.message,`
`),C(),X(a.hasAction?2:-1))},dependencies:[pt,TI,RI,II],styles:[`.mat-mdc-simple-snack-bar{display:flex}.mat-mdc-simple-snack-bar .mat-mdc-snack-bar-label{max-height:50vh;overflow:auto}
`],encapsulation:2,changeDetection:0})}return n})(),mm="_mat-snack-bar-enter",fm="_mat-snack-bar-exit",NI=(()=>{class n extends Rf{_ngZone=_(ht);_elementRef=_(be);_changeDetectorRef=_(ve);_platform=_(yn);_animationsDisabled=ut();snackBarConfig=_($r);_document=_(Ft);_trackedModals=new Set;_enterFallback;_exitFallback;_injector=_(He);_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new G;_onExit=new G;_onEnter=new G;_animationState="void";_live;_label;_role;_liveElementId=_(ci).getId("mat-snack-bar-container-live-");constructor(){super();let e=this.snackBarConfig;e.politeness==="assertive"&&!e.announcementMessage?this._live="assertive":e.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();let i=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),i}attachTemplatePortal(e){this._assertNotAttached();let i=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),i}attachDomPortal=e=>{this._assertNotAttached();let i=this._portalOutlet.attachDomPortal(e);return this._afterPortalAttached(),i};onAnimationEnd(e){e===fm?this._completeExit():e===mm&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?lt(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(mm)))},{injector:this._injector}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(mm)},200)))}exit(){return this._destroyed?H(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?lt(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(fm)))},{injector:this._injector}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(fm),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let e=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(o=>e.classList.add(o)):e.classList.add(i)),this._exposeToModals();let a=this._label.nativeElement,r="mdc-snackbar__label";a.classList.toggle(r,!a.querySelector(`.${r}`))}_exposeToModals(){let e=this._liveElementId,i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let a=0;a<i.length;a++){let r=i[a],o=r.getAttribute("aria-owns");this._trackedModals.add(r),o?o.indexOf(e)===-1&&r.setAttribute("aria-owns",o+" "+e):r.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{let i=e.getAttribute("aria-owns");if(i){let a=i.replace(this._liveElementId,"").trim();a.length>0?e.setAttribute("aria-owns",a):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let e=this._elementRef.nativeElement,i=e.querySelector("[aria-hidden]"),a=e.querySelector("[aria-live]");if(i&&a){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(r=document.activeElement),i.removeAttribute("aria-hidden"),a.appendChild(i),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["mat-snack-bar-container"]],viewQuery:function(i,a){if(i&1&&Ke(Ha,7)(OI,7),i&2){let r;ee(r=te())&&(a._portalOutlet=r.first),ee(r=te())&&(a._label=r.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(i,a){i&1&&I("animationend",function(o){return a.onAnimationEnd(o.animationName)})("animationcancel",function(o){return a.onAnimationEnd(o.animationName)}),i&2&&de("mat-snack-bar-container-enter",a._animationState==="visible")("mat-snack-bar-container-exit",a._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!a._animationsDisabled)},features:[Re],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(i,a){i&1&&(f(0,"div",1)(1,"div",2,0)(3,"div",3),j(4,kI,0,0,"ng-template",4),m(),U(5,"div"),m()()),i&2&&(C(5),pe("aria-live",a._live)("role",a._role)("id",a._liveElementId))},dependencies:[Ha],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mat-snack-bar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-snack-bar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-snack-bar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mat-snack-bar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-snack-bar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-snack-bar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mat-snack-bar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-button-text-state-layer-color: currentColor;--mat-button-text-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return n})(),LI=new Y("mat-snack-bar-default-options",{providedIn:"root",factory:()=>new $r}),wC=(()=>{class n{_live=_(ks);_injector=_(He);_breakpointObserver=_(lf);_parentSnackBar=_(n,{optional:!0,skipSelf:!0});_defaultConfig=_(LI);_animationsDisabled=ut();_snackBarRefAtThisLevel=null;simpleSnackBarComponent=FI;snackBarContainerComponent=NI;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(){}openFromComponent(e,i){return this._attach(e,i)}openFromTemplate(e,i){return this._attach(e,i)}open(e,i="",a){let r=A(A({},this._defaultConfig),a);return r.data={message:e,action:i},r.announcementMessage===e&&(r.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,r)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,i){let a=i&&i.viewContainerRef&&i.viewContainerRef.injector,r=He.create({parent:a||this._injector,providers:[{provide:$r,useValue:i}]}),o=new wn(this.snackBarContainerComponent,i.viewContainerRef,r),s=e.attach(o);return s.instance.snackBarConfig=i,s.instance}_attach(e,i){let a=A(A(A({},new $r),this._defaultConfig),i),r=this._createOverlay(a),o=this._attachSnackBarContainer(r,a),s=new cs(o,r);if(e instanceof ni){let l=new eh(e,null,{$implicit:a.data,snackBarRef:s});s.instance=o.attachTemplatePortal(l)}else{let l=this._createInjector(a,s),c=new wn(e,void 0,l),d=o.attachComponentPortal(c);s.instance=d.instance}return this._breakpointObserver.observe(cf.HandsetPortrait).pipe(xe(r.detachments())).subscribe(l=>{r.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),a.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(a.announcementMessage,a.politeness)}),this._animateSnackBar(s,a),this._openedSnackBarRef=s,this._openedSnackBarRef}_animateSnackBar(e,i){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),i.duration&&i.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(i.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter()}_createOverlay(e){let i=new Ks;i.direction=e.direction;let a=Qs(this._injector),r=e.direction==="rtl",o=e.horizontalPosition==="left"||e.horizontalPosition==="start"&&!r||e.horizontalPosition==="end"&&r,s=!o&&e.horizontalPosition!=="center";return o?a.left("0"):s?a.right("0"):a.centerHorizontally(),e.verticalPosition==="top"?a.top("0"):a.bottom("0"),i.positionStrategy=a,i.disableAnimations=this._animationsDisabled,Wa(this._injector,i)}_createInjector(e,i){let a=e&&e.viewContainerRef&&e.viewContainerRef.injector;return He.create({parent:a||this._injector,providers:[{provide:cs,useValue:i},{provide:xC,useValue:e.data}]})}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var MC=()=>[];function VI(n,t){n&1&&(f(0,"p",12),y(1,"No hi ha categories. Afegeix-ne una per comen\xE7ar."),m())}function BI(n,t){n&1&&(f(0,"th",32),y(1,"Nom"),m())}function zI(n,t){if(n&1&&(f(0,"td",33),y(1),m()),n&2){let e=t.$implicit;C(),K(e)}}function jI(n,t){n&1&&(f(0,"th",32),y(1,"Accions"),m())}function HI(n,t){if(n&1){let e=ye();f(0,"td",34)(1,"button",35),I("click",function(){let a=L(e).$implicit,r=k(2);return V(r.onEditCategory(a))}),f(2,"mat-icon"),y(3,"edit"),m()(),f(4,"button",36),I("click",function(){let a=L(e).$implicit,r=k(2);return V(r.onDeleteCategory(a))}),f(5,"mat-icon"),y(6,"delete"),m()()()}}function UI(n,t){n&1&&U(0,"tr",37)}function WI(n,t){n&1&&U(0,"tr",38)}function $I(n,t){if(n&1&&(f(0,"div",13)(1,"table",24),Ie(2,"async"),Ue(3,25),j(4,BI,2,0,"th",26)(5,zI,2,1,"td",27),We(),Ue(6,28),j(7,jI,2,0,"th",26)(8,HI,7,0,"td",29),We(),j(9,UI,1,0,"tr",30)(10,WI,1,0,"tr",31),m()()),n&2){let e=k();C(),D("dataSource",gn(2,3,e.categories$)??Ud(5,MC)),C(8),D("matHeaderRowDef",e.displayedColumns),C(),D("matRowDefColumns",e.displayedColumns)}}function YI(n,t){n&1&&(f(0,"p",12),y(1,"No hi ha etiquetes. Afegeix-ne una per comen\xE7ar."),m())}function qI(n,t){n&1&&(f(0,"th",32),y(1,"Nom"),m())}function KI(n,t){if(n&1&&(f(0,"td",33),y(1),m()),n&2){let e=t.$implicit;C(),K(e)}}function GI(n,t){n&1&&(f(0,"th",32),y(1,"Accions"),m())}function QI(n,t){if(n&1){let e=ye();f(0,"td",34)(1,"button",35),I("click",function(){let a=L(e).$implicit,r=k(2);return V(r.onEditTag(a))}),f(2,"mat-icon"),y(3,"edit"),m()(),f(4,"button",36),I("click",function(){let a=L(e).$implicit,r=k(2);return V(r.onDeleteTag(a))}),f(5,"mat-icon"),y(6,"delete"),m()()()}}function XI(n,t){n&1&&U(0,"tr",37)}function ZI(n,t){n&1&&U(0,"tr",38)}function JI(n,t){if(n&1&&(f(0,"div",13)(1,"table",24),Ie(2,"async"),Ue(3,25),j(4,qI,2,0,"th",26)(5,KI,2,1,"td",27),We(),Ue(6,28),j(7,GI,2,0,"th",26)(8,QI,7,0,"td",29),We(),j(9,XI,1,0,"tr",30)(10,ZI,1,0,"tr",31),m()()),n&2){let e=k();C(),D("dataSource",gn(2,3,e.tags$)??Ud(5,MC)),C(8),D("matHeaderRowDef",e.displayedColumns),C(),D("matRowDefColumns",e.displayedColumns)}}function e2(n,t){if(n&1&&(f(0,"mat-card",14)(1,"mat-card-content")(2,"div",39)(3,"mat-icon",40),y(4,"error"),m(),f(5,"span"),y(6),m()()()()),n&2){let e=k();C(6),K(e.errorMessage)}}function t2(n,t){if(n&1&&(f(0,"div",41)(1,"mat-icon"),y(2,"receipt_long"),m(),f(3,"span",42),y(4),m()()),n&2){let e=k(2);C(4),K(e.selectedExpensesFile.name)}}function i2(n,t){if(n&1&&(f(0,"div",41)(1,"mat-icon"),y(2,"settings"),m(),f(3,"span",42),y(4),m()()),n&2){let e=k(2);C(4),K(e.selectedSettingsFile.name)}}function n2(n,t){if(n&1&&(f(0,"div",21),Q(1,t2,5,1,"div",41),Q(2,i2,5,1,"div",41),m()),n&2){let e=k();C(),X(e.selectedExpensesFile?1:-1),C(),X(e.selectedSettingsFile?2:-1)}}var Od=class n{settingsService=_(Zn);expenseService=_(Yi);storage=_(Xn);authService=_(Ht);router=_(Ze);dialog=_($a);snackBar=_(wC);categories$=this.settingsService.categories$;tags$=this.settingsService.tags$;displayedColumns=["name","actions"];errorMessage=null;downloadMessage="";downloadType="success";showDownloadMessage=!1;uploadMessage="";uploadType="success";showUploadMessage=!1;selectedExpensesFile=null;selectedSettingsFile=null;ngOnInit(){this.loadSettings()}loadSettings(){this.errorMessage=null,this.settingsService.loadSettings().subscribe({error:t=>{this.handleLoadError(t)}})}handleLoadError(t){console.error("Error loading settings:",t),t.status===401||t.status===403?this.errorMessage="Error d'autenticaci\xF3 amb GitHub. Comprova les teves credencials.":t.status===404?this.errorMessage="Arxiu de configuraci\xF3 no trobat. Es crear\xE0 un de nou quan afegeixis categories o etiquetes.":navigator.onLine?t.message?.includes("JSON")||t.message?.includes("parse")?this.errorMessage="L'arxiu de configuraci\xF3 est\xE0 corrupte. Es crear\xE0 un de nou.":this.errorMessage="Error carregant la configuraci\xF3. Torna-ho a provar m\xE9s tard.":this.errorMessage="No hi ha connexi\xF3 a internet. Comprova la teva connexi\xF3."}onAddCategory(){this.openSettingsDialog("category","add").subscribe(t=>{t&&this.settingsService.addCategory(t.value).subscribe({next:()=>{this.snackBar.open("Categoria afegida correctament","Tancar",{duration:3e3})},error:e=>{this.snackBar.open(e.message||"Error afegint la categoria","Tancar",{duration:5e3})}})})}onEditCategory(t){this.openSettingsDialog("category","edit",t).subscribe(e=>{e&&this.settingsService.updateCategory(t,e.value).subscribe({next:()=>{this.snackBar.open("Categoria actualitzada correctament","Tancar",{duration:3e3})},error:i=>{this.snackBar.open(i.message||"Error actualitzant la categoria","Tancar",{duration:5e3})}})})}onDeleteCategory(t){this.openConfirmDialog("Eliminar Categoria",`Est\xE0s segur que vols eliminar la categoria "${t}"?`).subscribe(e=>{e&&this.settingsService.deleteCategory(t).subscribe({next:()=>{this.snackBar.open("Categoria eliminada correctament","Tancar",{duration:3e3})},error:i=>{this.snackBar.open(i.message||"Error eliminant la categoria","Tancar",{duration:5e3})}})})}onAddTag(){this.openSettingsDialog("tag","add").subscribe(t=>{t&&this.settingsService.addTag(t.value).subscribe({next:()=>{this.snackBar.open("Etiqueta afegida correctament","Tancar",{duration:3e3})},error:e=>{this.snackBar.open(e.message||"Error afegint l'etiqueta","Tancar",{duration:5e3})}})})}onEditTag(t){this.openSettingsDialog("tag","edit",t).subscribe(e=>{e&&this.settingsService.updateTag(t,e.value).subscribe({next:()=>{this.snackBar.open("Etiqueta actualitzada correctament","Tancar",{duration:3e3})},error:i=>{this.snackBar.open(i.message||"Error actualitzant l'etiqueta","Tancar",{duration:5e3})}})})}onDeleteTag(t){this.openConfirmDialog("Eliminar Etiqueta",`Est\xE0s segur que vols eliminar l'etiqueta "${t}"?`).subscribe(e=>{e&&this.settingsService.deleteTag(t).subscribe({next:()=>{this.snackBar.open("Etiqueta eliminada correctament","Tancar",{duration:3e3})},error:i=>{this.snackBar.open(i.message||"Error eliminant l'etiqueta","Tancar",{duration:5e3})}})})}logout(){this.authService.logout()}downloadExpensesJson(){this.showDownloadMessage=!1,this.storage.readExpenses().subscribe({next:t=>{this.downloadJsonFile(t,"expenses.json"),this.downloadMessage="Arxiu expenses.json descarregat correctament",this.downloadType="success",this.showDownloadMessage=!0,setTimeout(()=>{this.showDownloadMessage=!1},5e3)},error:t=>{console.error("Error downloading expenses:",t),this.downloadMessage="Error en descarregar expenses.json: "+t.message,this.downloadType="error",this.showDownloadMessage=!0,setTimeout(()=>{this.showDownloadMessage=!1},5e3)}})}downloadSettingsJson(){this.showDownloadMessage=!1,this.storage.readSettings().subscribe({next:t=>{this.downloadJsonFile(t,"settings.json"),this.downloadMessage="Arxiu settings.json descarregat correctament",this.downloadType="success",this.showDownloadMessage=!0,setTimeout(()=>{this.showDownloadMessage=!1},5e3)},error:t=>{console.error("Error downloading settings:",t),this.downloadMessage="Error en descarregar settings.json: "+t.message,this.downloadType="error",this.showDownloadMessage=!0,setTimeout(()=>{this.showDownloadMessage=!1},5e3)}})}downloadJsonFile(t,e){let i=JSON.stringify(t,null,2),a=new Blob([i],{type:"application/json"}),r=window.URL.createObjectURL(a),o=document.createElement("a");o.href=r,o.download=e,o.click(),window.URL.revokeObjectURL(r)}onExpensesFileSelected(t){let e=t.target;e.files&&e.files.length>0&&(this.selectedExpensesFile=e.files[0],this.showUploadMessage=!1)}onSettingsFileSelected(t){let e=t.target;e.files&&e.files.length>0&&(this.selectedSettingsFile=e.files[0],this.showUploadMessage=!1)}uploadFiles(){this.showUploadMessage=!1;let t=0,e=0,i=[];if((this.selectedExpensesFile?1:0)+(this.selectedSettingsFile?1:0)===0)return;let r=[];this.selectedExpensesFile&&r.push(this.readAndUploadExpenses(this.selectedExpensesFile).then(()=>{t++}).catch(o=>{e++,i.push(`Expenses: ${o.message}`),console.error("Error uploading expenses:",o)})),this.selectedSettingsFile&&r.push(this.readAndUploadSettings(this.selectedSettingsFile).then(()=>{t++}).catch(o=>{e++,i.push(`Settings: ${o.message}`),console.error("Error uploading settings:",o)})),Promise.all(r).finally(()=>{e===0?(this.uploadMessage=`${t} arxiu(s) pujat(s) correctament a GitHub`,this.uploadType="success"):t===0?(this.uploadMessage=i.join(". "),this.uploadType="error"):(this.uploadMessage=`${t} arxiu(s) pujat(s), ${e} amb errors: ${i.join(". ")}`,this.uploadType="warning"),this.showUploadMessage=!0,setTimeout(()=>{this.showUploadMessage=!1},8e3)})}readAndUploadExpenses(t){return new Promise((e,i)=>{let a=new FileReader;a.onload=r=>{try{let o=r.target?.result,s=JSON.parse(o);if(!Array.isArray(s)){i(new Error("L'arxiu expenses.json ha de contenir un array"));return}this.storage.writeExpenses(s).subscribe({next:()=>{this.selectedExpensesFile=null,e()},error:l=>{let c=l.message||"Error al subir expenses.json";i(new Error(c))}})}catch{i(new Error("Error en parsejar expenses.json: format JSON inv\xE0lid"))}},a.onerror=()=>i(new Error("Error en llegir l'arxiu")),a.readAsText(t)})}readAndUploadSettings(t){return new Promise((e,i)=>{let a=new FileReader;a.onload=r=>{try{let o=r.target?.result,s=JSON.parse(o);if(!s.categories||!s.tags){i(new Error("L'arxiu settings.json ha de contenir categories i tags"));return}this.storage.writeSettings(s).subscribe({next:()=>{this.selectedSettingsFile=null,this.loadSettings(),e()},error:l=>{let c=l.message||"Error al subir settings.json";i(new Error(c))}})}catch{i(new Error("Error en parsejar settings.json: format JSON inv\xE0lid"))}},a.onerror=()=>i(new Error("Error en llegir l'arxiu")),a.readAsText(t)})}openSettingsDialog(t,e,i){return new Ki(a=>{import("./chunk-IUZ55WK7.js").then(r=>{this.dialog.open(r.SettingsDialogComponent,{width:"400px",data:{type:t,mode:e,currentValue:i}}).afterClosed().subscribe(s=>{a.next(s),a.complete()})})})}openConfirmDialog(t,e){return new Ki(i=>{import("./chunk-KAXRRFAF.js").then(a=>{this.dialog.open(a.ConfirmDialogComponent,{width:"400px",data:{title:t,message:e}}).afterClosed().subscribe(o=>{i.next(o===!0),i.complete()})})})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=z({type:n,selectors:[["app-settings-page"]],decls:98,vars:15,consts:[["expensesFileInput",""],["settingsFileInput",""],[1,"page-container"],[1,"page-header"],[1,"dashboard-header"],[1,"header-actions"],["mat-icon-button","","routerLink","/dashboard","matTooltip","Tauler","aria-label","Tauler"],["mat-icon-button","","routerLink","/expenses","matTooltip","Llista","aria-label","Llista de despeses"],["mat-icon-button","","matTooltip","Tancar sessi\xF3","aria-label","Tanca sessi\xF3",3,"click"],[1,"page-content"],[1,"settings-section"],["mat-raised-button","","color","primary",1,"add-button",3,"click"],[1,"empty-message"],[1,"table-wrapper"],[1,"error-card"],[1,"section-description"],[1,"action-buttons"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],[3,"message","type","show"],["type","file","accept",".json",2,"display","none",3,"change"],[1,"selected-files"],[1,"upload-action"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-table","",1,"settings-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-cell","","class","actions-cell",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"actions-cell"],["mat-mini-fab","","color","primary","matTooltip","Editar",1,"action-button",3,"click"],["mat-mini-fab","","color","warn","matTooltip","Eliminar",1,"action-button",3,"click"],["mat-header-row",""],["mat-row",""],[1,"error-content"],["color","warn"],[1,"file-info"],[1,"file-name"]],template:function(e,i){if(e&1){let a=ye();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),y(4,"Configuraci\xF3"),m(),f(5,"div",5)(6,"button",6)(7,"mat-icon"),y(8,"dashboard"),m()(),f(9,"button",7)(10,"mat-icon"),y(11,"list"),m()(),f(12,"button",8),I("click",function(){return L(a),V(i.logout())}),f(13,"mat-icon"),y(14,"logout"),m()()()()(),f(15,"div",9)(16,"mat-card",10)(17,"mat-card-header")(18,"mat-card-title")(19,"mat-icon"),y(20,"category"),m(),y(21," Categories "),m()(),f(22,"mat-card-content")(23,"button",11),I("click",function(){return L(a),V(i.onAddCategory())}),f(24,"mat-icon"),y(25,"add"),m(),y(26," Afegir Categoria "),m(),Q(27,VI,2,0,"p",12),Ie(28,"async"),jd(29,$I,11,6,"div",13),m()(),f(30,"mat-card",10)(31,"mat-card-header")(32,"mat-card-title")(33,"mat-icon"),y(34,"label"),m(),y(35," Etiquetes "),m()(),f(36,"mat-card-content")(37,"button",11),I("click",function(){return L(a),V(i.onAddTag())}),f(38,"mat-icon"),y(39,"add"),m(),y(40," Afegir Etiqueta "),m(),Q(41,YI,2,0,"p",12),Ie(42,"async"),jd(43,JI,11,6,"div",13),m()(),Q(44,e2,7,1,"mat-card",14),f(45,"mat-card",10)(46,"mat-card-header")(47,"mat-card-title")(48,"mat-icon"),y(49,"download"),m(),y(50," Exportar Dades "),m()(),f(51,"mat-card-content")(52,"p",15),y(53,"Descarrega els arxius JSON tal com estan emmagatzemats a GitHub."),m(),f(54,"div",16)(55,"button",17),I("click",function(){return L(a),V(i.downloadExpensesJson())}),f(56,"mat-icon"),y(57,"receipt_long"),m(),f(58,"span"),y(59,"Descarregar Expenses.json"),m()(),f(60,"button",18),I("click",function(){return L(a),V(i.downloadSettingsJson())}),f(61,"mat-icon"),y(62,"settings"),m(),f(63,"span"),y(64,"Descarregar Settings.json"),m()()(),U(65,"app-notification-message",19),m()(),f(66,"mat-card",10)(67,"mat-card-header")(68,"mat-card-title")(69,"mat-icon"),y(70,"upload"),m(),y(71," Importar Dades "),m()(),f(72,"mat-card-content")(73,"p",15),y(74,"Puja arxius JSON per actualitzar les dades a GitHub."),m(),f(75,"div",16)(76,"input",20,0),I("change",function(o){return L(a),V(i.onExpensesFileSelected(o))}),m(),f(78,"button",17),I("click",function(){L(a);let o=ki(77);return V(o.click())}),f(79,"mat-icon"),y(80,"receipt_long"),m(),f(81,"span"),y(82,"Seleccionar Expenses.json"),m()(),f(83,"input",20,1),I("change",function(o){return L(a),V(i.onSettingsFileSelected(o))}),m(),f(85,"button",18),I("click",function(){L(a);let o=ki(84);return V(o.click())}),f(86,"mat-icon"),y(87,"settings"),m(),f(88,"span"),y(89,"Seleccionar Settings.json"),m()()(),Q(90,n2,3,2,"div",21),f(91,"div",22)(92,"button",23),I("click",function(){return L(a),V(i.uploadFiles())}),f(93,"mat-icon"),y(94,"cloud_upload"),m(),f(95,"span"),y(96,"Pujar Arxius"),m()()(),U(97,"app-notification-message",19),m()()()()}if(e&2){let a,r;C(27),X(((a=gn(28,11,i.categories$))==null?null:a.length)===0?27:29),C(14),X(((r=gn(42,13,i.tags$))==null?null:r.length)===0?41:43),C(3),X(i.errorMessage?44:-1),C(21),D("message",i.downloadMessage)("type",i.downloadType)("show",i.showDownloadMessage),C(25),X(i.selectedExpensesFile||i.selectedSettingsFile?90:-1),C(2),D("disabled",!i.selectedExpensesFile&&!i.selectedSettingsFile),C(5),D("message",i.uploadMessage)("type",i.uploadType)("show",i.showUploadMessage)}},dependencies:[Mt,go,En,Qn,Yn,Kn,Gn,qn,bd,ld,dd,md,hd,cd,fd,ud,pd,gd,_d,mt,pt,Ys,Zi,Dt,St,jr,ka,na,Ds],styles:[".page-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;overflow:hidden}.page-header[_ngcontent-%COMP%]{flex-shrink:0;padding:1rem}@media(min-width:768px){.page-header[_ngcontent-%COMP%]{padding:1.25rem}}@media(min-width:1024px){.page-header[_ngcontent-%COMP%]{padding:1.5rem}}.page-header[_ngcontent-%COMP%]{border-bottom:1px solid #cbd5e1;background:#fff;z-index:1020}.page-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;padding:1rem}@media(min-width:768px){.page-content[_ngcontent-%COMP%]{padding:1.25rem}}@media(min-width:1024px){.page-content[_ngcontent-%COMP%]{padding:1.5rem}}.page-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.page-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e2e8f0;border-radius:8px}.page-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#94a3b8;border-radius:8px}.page-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#7589a4}.page-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#faf5ff,#f0f9ff,#f0fdf4)}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.125rem}@media(min-width:1024px){.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:500;white-space:nowrap}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;flex-shrink:0}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:40px;padding:0}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.settings-section[_ngcontent-%COMP%]{margin-bottom:1.25rem;box-shadow:0 4px 12px #6366f114;border-radius:12px;overflow:hidden;background:#fff}.settings-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:1rem;background:linear-gradient(135deg,#faf5ff,#f0f9ff);border-bottom:1px solid rgba(139,92,246,.1)}.settings-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:0;font-size:1.125rem}@media(min-width:1024px){.settings-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.25rem}}.settings-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-weight:600;color:#6366f1}.settings-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#8b5cf6}.settings-section[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1rem}.settings-section[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem;display:flex;align-items:center;justify-content:center;gap:.5rem}.settings-section[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{text-align:center;color:#475569;padding:1.5rem;margin:0;font-style:italic}.settings-section[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;width:100%;background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #6366f114;border:1px solid rgba(139,92,246,.1)}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:.5px;background:linear-gradient(135deg,#faf5ff,#f0f9ff);color:#6366f1;border-bottom:2px solid rgba(139,92,246,.15);position:sticky;top:0;z-index:10}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px 18px}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#3c4043;border-bottom:1px solid #f1f3f4}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{white-space:nowrap;text-align:right;width:140px}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{width:36px!important;height:36px!important;min-width:36px!important;margin:0 4px!important;box-shadow:0 2px 4px #00000026!important;transition:all .2s ease!important}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0003!important}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.error-card[_ngcontent-%COMP%]{margin-bottom:1.25rem;background-color:#f8d6d6;border-left:4px solid #dc2626;box-shadow:0 4px 6px -1px #0006,0 2px 4px -1px #0000004d}.error-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1rem}.error-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.error-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{flex-shrink:0}.error-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#b21d1d;font-size:.875rem}.section-description[_ngcontent-%COMP%]{color:#475569;font-size:.875rem;margin-bottom:1rem;font-style:italic}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:1.25rem;flex-wrap:wrap;margin-bottom:1rem}.action-buttons[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex:1;min-width:200px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.selected-files[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-bottom:1rem;padding:1rem;background-color:#f8fafc;border-radius:8px;border:1px solid #e2e8f0}.selected-files[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#334155}.selected-files[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#2563eb}.selected-files[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;word-break:break-all}.upload-action[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1rem}.upload-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;min-width:200px}.upload-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}@media(max-width:767px){.page-header[_ngcontent-%COMP%]{padding:.5rem 1rem}.page-content[_ngcontent-%COMP%]{padding:1rem}.dashboard-header[_ngcontent-%COMP%]{gap:.5rem}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1rem}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{gap:0}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36px;height:36px}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.settings-section[_ngcontent-%COMP%]{margin-bottom:1rem}.settings-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:.5rem}.settings-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1rem}.settings-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.settings-section[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:.5rem}.settings-section[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{font-size:.875rem;padding:.5rem}.settings-section[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.settings-section[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{padding:1rem;font-size:.875rem}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 12px;font-size:13px}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:11px}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{width:100px}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{width:32px!important;height:32px!important;min-width:32px!important;margin:0 2px!important}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.error-card[_ngcontent-%COMP%]{margin-bottom:1rem}.error-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:.5rem}.error-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem}.error-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.section-description[_ngcontent-%COMP%]{font-size:.75rem;margin-bottom:.5rem}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;min-width:unset;font-size:.875rem}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.selected-files[_ngcontent-%COMP%]{padding:.5rem}.selected-files[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.selected-files[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:.75rem}.upload-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;min-width:unset;font-size:.875rem}.upload-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}}@media(max-width:479px){.page-header[_ngcontent-%COMP%], .page-content[_ngcontent-%COMP%]{padding:.5rem}.dashboard-header[_ngcontent-%COMP%]{gap:.5rem}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1rem}.settings-section[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.settings-section[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{width:100%}.settings-section[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px 10px;font-size:12px}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:10px}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{width:90px}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{width:30px!important;height:30px!important;min-width:30px!important}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}}@media(min-width:768px){.page-header[_ngcontent-%COMP%], .page-content[_ngcontent-%COMP%]{padding:1.25rem}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.dashboard-header[_ngcontent-%COMP%]   .header-controls[_ngcontent-%COMP%]{flex-direction:row;width:auto}.dashboard-header[_ngcontent-%COMP%]   .header-controls[_ngcontent-%COMP%]   .desktop-button[_ngcontent-%COMP%]{display:inline-flex}.dashboard-header[_ngcontent-%COMP%]   .header-controls[_ngcontent-%COMP%]   .mobile-button[_ngcontent-%COMP%]{display:none}.settings-section[_ngcontent-%COMP%]{margin-bottom:1.25rem}.settings-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:1rem}.settings-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.125rem}.settings-section[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1rem}.settings-section[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{max-width:300px}.settings-section[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{padding:1.5rem}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 16px}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{width:120px}.error-card[_ngcontent-%COMP%]{margin-bottom:1.25rem}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:220px}}@media(min-width:1024px){.page-header[_ngcontent-%COMP%], .page-content[_ngcontent-%COMP%]{padding:1.5rem}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.875rem}.settings-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.settings-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:1.25rem}.settings-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.25rem}.settings-section[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1.25rem}.settings-section[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{max-width:300px}.settings-section[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{padding:2rem}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px 18px}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{width:140px}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{width:36px!important;height:36px!important}.settings-section[_ngcontent-%COMP%]   .settings-table[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.error-card[_ngcontent-%COMP%]{margin-bottom:1.5rem}.error-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1.25rem}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:250px}}"]})};var kd=(n,t)=>{let e=_(Ht),i=_(Ze);return e.isAuthenticated()?!0:(i.navigate(["/login"]),!1)};var SC=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:Jc},{path:"dashboard",component:Ed,canActivate:[kd]},{path:"expenses",component:Pd,canActivate:[kd]},{path:"settings",component:Od,canActivate:[kd]},{path:"**",redirectTo:"/login"}];var gm="Service workers are disabled or not supported by this browser",Yr=class{serviceWorker;worker;registration;events;constructor(t,e){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=new Ki(i=>i.error(new W(5601,!1)));else{let i=null,a=new G;this.worker=new Ki(c=>(i!==null&&c.next(i),a.subscribe(d=>c.next(d))));let r=()=>{let{controller:c}=t;c!==null&&(i=c,a.next(i))};t.addEventListener("controllerchange",r),r(),this.registration=this.worker.pipe(ke(()=>t.getRegistration().then(c=>{if(!c)throw new W(5601,!1);return c})));let o=new G;this.events=o.asObservable();let s=c=>{let{data:d}=c;d?.type&&o.next(d)};t.addEventListener("message",s),e?.get(ra,null,{optional:!0})?.onDestroy(()=>{t.removeEventListener("controllerchange",r),t.removeEventListener("message",s)})}}postMessage(t,e){return new Promise(i=>{this.worker.pipe(xt(1)).subscribe(a=>{a.postMessage(A({action:t},e)),i()})})}postMessageWithOperation(t,e,i){let a=this.waitForOperationCompleted(i),r=this.postMessage(t,e);return Promise.all([r,a]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let e;return typeof t=="string"?e=i=>i.type===t:e=i=>t.includes(i.type),this.events.pipe(st(e))}nextEventOfType(t){return this.eventsOfType(t).pipe(xt(1))}waitForOperationCompleted(t){return new Promise((e,i)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(st(a=>a.nonce===t),xt(1),ie(a=>{if(a.result!==void 0)return a.result;throw new Error(a.error)})).subscribe({next:e,error:i})})}get isEnabled(){return!!this.serviceWorker}},a2=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new G;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=pn,this.notificationClicks=pn,this.notificationCloses=pn,this.pushSubscriptionChanges=pn,this.subscription=pn;return}this.messages=this.sw.eventsOfType("PUSH").pipe(ie(a=>a.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ie(a=>a.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(ie(a=>a.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(ie(a=>a.data)),this.pushManager=this.sw.registration.pipe(ie(a=>a.pushManager));let i=this.pushManager.pipe(ke(a=>a.getSubscription()));this.subscription=new Ki(a=>{let r=i.subscribe(a),o=this.subscriptionChanges.subscribe(a);return()=>{r.unsubscribe(),o.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(gm));let i={userVisibleOnly:!0},a=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),r=new Uint8Array(new ArrayBuffer(a.length));for(let o=0;o<a.length;o++)r[o]=a.charCodeAt(o);return i.applicationServerKey=r,new Promise((o,s)=>{this.pushManager.pipe(ke(l=>l.subscribe(i)),xt(1)).subscribe({next:l=>{this.subscriptionChanges.next(l),o(l)},error:s})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(gm));let e=i=>{if(i===null)throw new W(5602,!1);return i.unsubscribe().then(a=>{if(!a)throw new W(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((i,a)=>{this.subscription.pipe(xt(1),ke(e)).subscribe({next:i,error:a})})}decodeBase64(e){return atob(e)}static \u0275fac=function(i){return new(i||n)(qe(Yr))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),_m=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=pn,this.unrecoverable=pn;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(gm));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let e=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new W(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(i){return new(i||n)(qe(Yr))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),PC=new Y("");function r2(){let n=_(ds);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let t=_(PC),e=_(ht),i=_(ra);e.runOutsideAngular(()=>{let a=navigator.serviceWorker,r=()=>a.controller?.postMessage({action:"INITIALIZE"});a.addEventListener("controllerchange",r),i.onDestroy(()=>{a.removeEventListener("controllerchange",r)})}),e.runOutsideAngular(()=>{let a,{registrationStrategy:r}=n;if(typeof r=="function")a=new Promise(o=>r().subscribe(()=>o()));else{let[o,...s]=(r||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":a=Promise.resolve();break;case"registerWithDelay":a=DC(+s[0]||0);break;case"registerWhenStable":a=Promise.race([i.whenStable(),DC(+s[0])]);break;default:throw new W(5600,!1)}}a.then(()=>{i.destroyed||navigator.serviceWorker.register(t,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(o=>console.error(ps(5604,!1)))})})}function DC(n){return new Promise(t=>setTimeout(t,n))}function o2(){let n=_(ds),t=_(He),e=!0;return new Yr(e&&n.enabled!==!1?navigator.serviceWorker:void 0,t)}var ds=class{enabled;updateViaCache;type;scope;registrationStrategy};function EC(n,t={}){return fs([a2,_m,{provide:PC,useValue:n},{provide:ds,useValue:t},{provide:Yr,useFactory:o2},Qr(r2)])}var bm={production:!0,apiUrl:"https://expense-tracker-api-deploy.vercel.app/api",apiSecret:"641136c1aa26735363f164708ee547d8c204581590af006936d240fefcdf8f30",storageConfig:"",github:{owner:"",repo:"",branch:"main",filePath:"expenses.json",settingsFilePath:"settings.json",token:""}};var Ad=class n{algorithm="AES-GCM";keyLength=256;ivLength=12;async deriveKey(t){let e=new TextEncoder,i=e.encode(t),a=await crypto.subtle.importKey("raw",i,"PBKDF2",!1,["deriveBits","deriveKey"]),r=e.encode("expense-tracker-salt-v1");return crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},a,{name:this.algorithm,length:this.keyLength},!1,["encrypt","decrypt"])}async encrypt(t,e){if(!e)throw new Error("Storage configuration is required");try{let i=JSON.stringify(t),r=new TextEncoder().encode(i),o=crypto.getRandomValues(new Uint8Array(this.ivLength)),s=await this.deriveKey(e),l=await crypto.subtle.encrypt({name:this.algorithm,iv:o},s,r),c=new Uint8Array(o.length+l.byteLength);return c.set(o,0),c.set(new Uint8Array(l),o.length),this.arrayBufferToBase64(c)}catch(i){throw console.error("Data transformation error:",i),new Error("Failed to transform data")}}async decrypt(t,e){if(!e)throw new Error("Storage configuration is required");try{let i=this.base64ToArrayBuffer(t),a=i.slice(0,this.ivLength),r=i.slice(this.ivLength),o=await this.deriveKey(e),s=await crypto.subtle.decrypt({name:this.algorithm,iv:a},o,r),c=new TextDecoder().decode(s);return JSON.parse(c)}catch(i){throw console.error("Data restoration error:",i),new Error("Failed to restore data. The configuration may be incorrect.")}}arrayBufferToBase64(t){let e="",i=new Uint8Array(t),a=i.byteLength;for(let r=0;r<a;r++)e+=String.fromCharCode(i[r]);return btoa(e)}base64ToArrayBuffer(t){let e=atob(t),i=e.length,a=new Uint8Array(i);for(let r=0;r<i;r++)a[r]=e.charCodeAt(r);return a}static generateKey(){let t=new Uint8Array(32);return crypto.getRandomValues(t),Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var Td=class n{http=_(af);encryptionService=_(Ad);authService=_(Ht);apiUrl=bm.apiUrl;apiSecret=bm.apiSecret;defaultSettings={categories:["Subministraments","Lloguer/Hipoteca","Asseguran\xE7a","Subscripcions","Telecomunicacions","Salut","Oci","Educaci\xF3"],tags:["Hogar","Transporte","Entretenimiento","Salud","Formaci\xF3n","Personal"],lastUpdated:new Date};readExpenses(){return this.http.get(`${this.apiUrl}/expenses`,{headers:this.buildHeaders(),responseType:"text"}).pipe(ke(t=>ot(this.parseContent(t))),ie(t=>this.transformDates(t)),It(t=>t.status===404||t.error&&t.error.includes("not found")?(console.log("Expense file not found, returning empty array"),H([])):this.handleError(t)))}readSettings(){return this.http.get(`${this.apiUrl}/settings`,{headers:this.buildHeaders(),responseType:"text"}).pipe(ke(t=>ot(this.parseContent(t))),ie(t=>this.transformSettingsDates(t)),It(t=>t.status===404?(console.log("Settings file not found, returning default settings"),H(this.defaultSettings)):this.handleError(t)))}writeExpenses(t){return ot(this.prepareContent(t)).pipe(ke(e=>this.http.put(`${this.apiUrl}/expenses`,{content:e},{headers:this.buildHeaders()})),ie(()=>{}),It(e=>this.handleError(e)))}writeSettings(t){let e=_e(A({},t),{lastUpdated:new Date});return ot(this.prepareContent(e)).pipe(ke(i=>this.http.put(`${this.apiUrl}/settings`,{content:i},{headers:this.buildHeaders()})),ie(()=>{}),It(i=>this.handleError(i)))}async prepareContent(t){let e=this.authService.getEncryptionKey();return e?await this.encryptionService.encrypt(t,e):JSON.stringify(t,null,2)}async parseContent(t){let e=t.trim(),i=this.authService.getEncryptionKey();if(e.startsWith("[")||e.startsWith("{")){console.log("Detected plain JSON format");try{return JSON.parse(e)}catch(a){throw console.error("Failed to parse as JSON:",a),new Error("Invalid JSON format")}}if(i){console.log("Detected encrypted format, attempting to decrypt");try{return await this.encryptionService.decrypt(e,i)}catch(a){console.error("Failed to decrypt:",a);try{return JSON.parse(e)}catch{throw new Error("Failed to decrypt data. The encryption key may be incorrect.")}}}else throw console.warn("Data appears to be encrypted but no encryption key provided"),new Error("Encryption key is required to read encrypted data")}buildHeaders(){return new nf({Authorization:`Bearer ${this.apiSecret}`,"Content-Type":"application/json"})}transformDates(t){return t.map(e=>_e(A({},e),{scheduledPaymentDate:new Date(e.scheduledPaymentDate),actualPaymentDate:e.actualPaymentDate?new Date(e.actualPaymentDate):null,createdAt:new Date(e.createdAt)}))}transformSettingsDates(t){return _e(A({},t),{lastUpdated:new Date(t.lastUpdated)})}handleError(t){let e;if(t.error instanceof ErrorEvent)e="Unable to connect to the API. Please check your internet connection.";else switch(t.status){case 401:e="API authentication failed. Please check your configuration.";break;case 403:e="Access forbidden. Your API credentials may not have the required permissions.";break;case 404:e="Data file not found.";break;case 500:e="Server error occurred. Please try again later.";break;default:e=`An error occurred: ${t.message}`}return console.error("API Error:",e,t),ii(()=>new Error(e))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};Jm(Nv);var l2={parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"DD/MM/YYYY",monthYearA11yLabel:"MMMM YYYY"}},OC={providers:[Am(),Th(SC),rf(),H_(),Lp(),{provide:Ms,useValue:"es-ES"},{provide:Xo,useValue:"es-ES"},{provide:Wi,useValue:l2},{provide:Xn,useClass:Td},Ov(Ev()),EC("ngsw-worker.js",{enabled:!qm(),registrationStrategy:"registerWhenStable:30000"})]};var Rd=class n{constructor(t,e){this.swUpdate=t;this.appRef=e;this.initializePwaListeners(),this.checkForUpdates()}isInstalled=!1;deferredPrompt=null;initializePwaListeners(){window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),this.deferredPrompt=t,console.log("PWA installation prompt available")}),window.addEventListener("appinstalled",()=>{this.isInstalled=!0,console.log("PWA installed successfully"),this.deferredPrompt=null,this.preserveAuthenticationState()}),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{console.log("Service worker controller changed"),this.preserveAuthenticationState()}),this.checkIfInstalled()}checkIfInstalled(){let t=window.matchMedia("(display-mode: standalone)").matches,e=window.matchMedia("(display-mode: fullscreen)").matches,i=window.navigator.standalone===!0;this.isInstalled=t||e||i,this.isInstalled&&console.log("Running as installed PWA")}preserveAuthenticationState(){try{let t={webauthnCredentials:localStorage.getItem("webauthn_credentials"),encryptionKey:sessionStorage.getItem("encryptionKey"),isAuthenticated:sessionStorage.getItem("isAuthenticated")};console.log("Authentication state preserved:",{hasWebAuthnCredentials:!!t.webauthnCredentials,hasEncryptionKey:!!t.encryptionKey,isAuthenticated:t.isAuthenticated==="true"}),t.encryptionKey&&t.isAuthenticated==="true"&&this.verifyEncryptionKeyAccessibility()}catch(t){console.error("Error preserving authentication state:",t)}}verifyEncryptionKeyAccessibility(){try{let t=sessionStorage.getItem("encryptionKey");if(!t){console.warn("Encryption key not found in sessionStorage after lifecycle event");return}if(typeof t!="string"||t.length===0){console.error("Invalid encryption key format after lifecycle event"),sessionStorage.removeItem("encryptionKey"),sessionStorage.removeItem("isAuthenticated");return}console.log("Encryption key verified as accessible")}catch(t){console.error("Error verifying encryption key:",t)}}checkForUpdates(){if(!this.swUpdate.isEnabled){console.log("Service worker updates not enabled");return}let t=this.appRef.isStable.pipe(Ei(a=>a===!0)),e=Sm(360*60*1e3);us(t,e).subscribe(async()=>{try{await this.swUpdate.checkForUpdate()&&console.log("Service worker update found")}catch(a){console.error("Failed to check for updates:",a)}}),this.swUpdate.versionUpdates.pipe(st(a=>a.type==="VERSION_READY")).subscribe(a=>{console.log("New version available:",a.latestVersion),this.preserveAuthenticationState(),confirm("Nueva versi\xF3n disponible. \xBFRecargar la aplicaci\xF3n?")&&document.location.reload()})}async promptInstall(){if(!this.deferredPrompt)return console.log("No installation prompt available"),!1;try{return this.deferredPrompt.prompt(),(await this.deferredPrompt.userChoice).outcome==="accepted"?(console.log("User accepted PWA installation"),!0):(console.log("User dismissed PWA installation"),!1)}catch(t){return console.error("Error prompting PWA installation:",t),!1}finally{this.deferredPrompt=null}}canInstall(){return this.deferredPrompt!==null}isRunningAsInstalled(){return this.isInstalled}getPlatformInfo(){let t=navigator.userAgent.toLowerCase(),e="unknown",i="unknown",a=!1;return/iphone|ipad|ipod/.test(t)?(e="ios",i="safari",a=!0):/android/.test(t)?(e="android",/chrome/.test(t)&&!/edg/.test(t)?(i="chrome",a=!0):/firefox/.test(t)?(i="firefox",a=!0):i="other"):/windows/.test(t)?(e="windows",a=!0):/mac/.test(t)?(e="macos",a=!0):/linux/.test(t)&&(e="linux",a=!0),{platform:e,browser:i,isPwaCapable:a}}async verifyWebAuthnInPwaContext(){try{if(!window.PublicKeyCredential)return{isSupported:!1,error:"WebAuthn API not available"};if(!await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable())return{isSupported:!1,error:"Platform authenticator not available"};let e=localStorage.getItem("webauthn_credentials");return{isSupported:!0}}catch(t){return{isSupported:!1,error:`Error verifying WebAuthn: ${t}`}}}static \u0275fac=function(e){return new(e||n)(qe(_m),qe(ra))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var Id=class n{pwaLifecycleService=_(Rd);ngOnInit(){console.log("PWA lifecycle service initialized");let t=this.pwaLifecycleService.getPlatformInfo();console.log("Platform info:",t),this.pwaLifecycleService.verifyWebAuthnInPwaContext().then(e=>{e.isSupported?console.log("WebAuthn verified in PWA context"):console.warn("WebAuthn verification failed:",e.error)})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=z({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){e&1&&U(0,"router-outlet")},dependencies:[co],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100vh;width:100%;overflow:hidden}"]})};tf(Id,OC).catch(n=>console.error(n));
